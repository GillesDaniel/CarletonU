//>>built
require({cache:{"ibm/tivoli/fwm/mxmap/impl/boundingbox/BingBoundingBox":function(){define(["dijit","dojo","dojox","dojo/require!ibm/tivoli/fwm/mxmap/_BoundingBox"],function(_1,_2,_3){_2.require("ibm.tivoli.fwm.mxmap._BoundingBox");_2.provide("ibm.tivoli.fwm.mxmap.impl.boundingbox.BingBoundingBox");_2.declare("ibm.tivoli.fwm.mxmap.impl.boundingbox.BingBoundingBox",ibm.tivoli.fwm.mxmap._BoundingBox,{_init:function(_4,_5,_6,_7){this.sw=new ibm.tivoli.fwm.mxmap.impl.point.BingLatLonPoint({lat:_4,lon:_5,lng:_5});this.ne=new ibm.tivoli.fwm.mxmap.impl.point.BingLatLonPoint({lat:_6,lon:_7,lng:_7});}});});},"ibm/tivoli/fwm/mxmap/impl/boundingbox/GmapsBoundingBox":function(){define(["dijit","dojo","dojox","dojo/require!ibm/tivoli/fwm/mxmap/_BoundingBox"],function(_8,_9,_a){_9.require("ibm.tivoli.fwm.mxmap._BoundingBox");_9.provide("ibm.tivoli.fwm.mxmap.impl.boundingbox.GmapsBoundingBox");_9.declare("ibm.tivoli.fwm.mxmap.impl.boundingbox.GmapsBoundingBox",ibm.tivoli.fwm.mxmap._BoundingBox,{_init:function(_b,_c,_d,_e){this.sw=new ibm.tivoli.fwm.mxmap.impl.point.GmapsLatLonPoint({lat:_b,lon:_c,lng:_c});this.ne=new ibm.tivoli.fwm.mxmap.impl.point.GmapsLatLonPoint({lat:_d,lon:_e,lng:_e});}});});},"ibm/tivoli/fwm/mxmap/routing/itinerary/Step":function(){define(["dijit","dojo","dojox","dojo/require!ibm/tivoli/fwm/mxmap/_Base,dijit/_Widget,dijit/_Templated,ibm/tivoli/fwm/mxmap/routing/Router"],function(_f,_10,_11){_10.provide("ibm.tivoli.fwm.mxmap.routing.itinerary.Step");_10.require("ibm.tivoli.fwm.mxmap._Base");_10.require("dijit._Widget");_10.require("dijit._Templated");_10.require("ibm.tivoli.fwm.mxmap.routing.Router");_10.declare("ibm.tivoli.fwm.mxmap.routing.itinerary.Step",[_f._Widget,_f._Templated,ibm.tivoli.fwm.mxmap._Base],{templateString:_10.cache("ibm.tivoli.fwm.mxmap","templates/Step.html","<div  style=\"width:100%;border-top:1px solid #F0F0F0;margin-bottom:3px;\" data-dojo-attach-event=\"ondijitclick:_onClick,onmouseenter:_onHover,onmouseleave:_onUnhover\" >\n\n<div  style=\"padding:10px;\">\n<span data-dojo-attach-point=\"stepInfoNode\"></span><div data-dojo-attach-point=\"distanceInfoNode\" style=\"float:right;\"></div></div>\n</div>"),distanceUnit:0,distance:0,constructor:function(_12){_10.mixin(this,_12);},postCreate:function(){this.stepInfoNode.innerHTML="<b>"+this.position+".  </b>"+this.info;this.distanceInfoNode.innerHTML=ibm.tivoli.fwm.mxmap.routing.DistanceUnit.formatDistance(this.distance,this.distanceUnit);},_onClick:function(evt){this.map.setCenter(this.location);this.closeDialog();},_onHover:function(evt){},_onUnhover:function(evt){}});});},"dijit/form/TextBox":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/dom-style","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/sniff","./_FormValueWidget","./_TextBoxMixin","dojo/text!./templates/TextBox.html","../main"],function(_13,_14,_15,_16,_17,on,has,_18,_19,_1a,_1b){var _1c=_13("dijit.form.TextBox"+(has("dojo-bidi")?"_NoBidi":""),[_18,_19],{templateString:_1a,_singleNodeTemplate:"<input class=\"dijit dijitReset dijitLeft dijitInputField\" data-dojo-attach-point=\"textbox,focusNode\" autocomplete=\"off\" type=\"${type}\" ${!nameAttrSetting} />",_buttonInputDisabled:has("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var _1d=this.type.toLowerCase();if(this.templateString&&this.templateString.toLowerCase()=="input"||((_1d=="hidden"||_1d=="file")&&this.templateString==this.constructor.prototype.templateString)){this.templateString=this._singleNodeTemplate;}this.inherited(arguments);},postCreate:function(){this.inherited(arguments);if(has("ie")<9){this.defer(function(){try{var s=_15.getComputedStyle(this.domNode);if(s){var ff=s.fontFamily;if(ff){var _1e=this.domNode.getElementsByTagName("INPUT");if(_1e){for(var i=0;i<_1e.length;i++){_1e[i].style.fontFamily=ff;}}}}}catch(e){}});}},_setPlaceHolderAttr:function(v){this._set("placeHolder",v);if(!this._phspan){this._attachPoints.push("_phspan");this._phspan=_14.create("span",{className:"dijitPlaceHolder dijitInputField"},this.textbox,"after");this.own(on(this._phspan,"mousedown",function(evt){evt.preventDefault();}),on(this._phspan,"touchend, pointerup, MSPointerUp",_17.hitch(this,function(){this.focus();})));}this._phspan.innerHTML="";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(v));this._updatePlaceHolder();},_onInput:function(evt){this.inherited(arguments);this._updatePlaceHolder();},_updatePlaceHolder:function(){if(this._phspan){this._phspan.style.display=(this.placeHolder&&!this.textbox.value)?"":"none";}},_setValueAttr:function(_1f,_20,_21){this.inherited(arguments);this._updatePlaceHolder();},getDisplayedValue:function(){_16.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");return this.get("displayedValue");},setDisplayedValue:function(_22){_16.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",_22);},_onBlur:function(e){if(this.disabled){return;}this.inherited(arguments);this._updatePlaceHolder();if(has("mozilla")){if(this.selectOnClick){this.textbox.selectionStart=this.textbox.selectionEnd=undefined;}}},_onFocus:function(by){if(this.disabled||this.readOnly){return;}this.inherited(arguments);this._updatePlaceHolder();}});if(has("ie")<9){_1c.prototype._isTextSelected=function(){var _23=this.ownerDocument.selection.createRange();var _24=_23.parentElement();return _24==this.textbox&&_23.text.length>0;};_1b._setSelectionRange=_19._setSelectionRange=function(_25,_26,_27){if(_25.createTextRange){var r=_25.createTextRange();r.collapse(true);r.moveStart("character",-99999);r.moveStart("character",_26);r.moveEnd("character",_27-_26);r.select();}};}if(has("dojo-bidi")){_1c=_13("dijit.form.TextBox",_1c,{_setPlaceHolderAttr:function(v){this.inherited(arguments);this.applyTextDir(this._phspan);}});}return _1c;});},"ibm/tivoli/fwm/mxmap/impl/point/GmapsLatLonPoint":function(){define(["dijit","dojo","dojox","dojo/require!ibm/tivoli/fwm/mxmap/_LatLonPoint"],function(_28,_29,_2a){_29.require("ibm.tivoli.fwm.mxmap._LatLonPoint");_29.provide("ibm.tivoli.fwm.mxmap.impl.point.GmapsLatLonPoint");_29.declare("ibm.tivoli.fwm.mxmap.impl.point.GmapsLatLonPoint",ibm.tivoli.fwm.mxmap._LatLonPoint,{toProprietary:function(){return new google.maps.LatLng(this.lat,this.lon);},fromProprietary:function(_2b){this.lat=_2b.lat();this.lon=_2b.lng();this.lng=_2b.lng();}});});},"ibm/tivoli/fwm/mxmap/MapGraphite":function(){define(["dojo/main","dojo/_base/declare","ibm/tivoli/fwm/mxmap/MapBus","ibm/tivoli/fwm/mxmap/MapResize"],function(_2c,_2d,_2e,_2f){return _2d(null,{constructor:function(_30){this.mapConf=_30.mapConf;this.compId=_30.compId;this.mapBus=new _2e(_30,this);this.mapResize=new _2f(_30,this);this.mapBus.subscribeMapLoaded(_2c.hitch(this,this.onMapLoaded));window.mapBus=this.mapBus;this.mapResize.resize();},destroyRecursive:function(){delete window.mapBus;this.mapResize.destroy();},onMapLoaded:function(){_2c.publish("mxmap.mapLoaded",[this,this.compId,this]);},getId:function(){return this.compId;},isMapGraphite:function(){return true;},initRoutes:function(){this.mapBus.initRoutes();},drawRoutes:function(_31){this.mapBus.drawRoutes(_31);},clearRoutes:function(){this.mapBus.clearRoutes();},highlightLinearFeature:function(_32){this.mapBus.highlightLinearFeature(_32);},inFullScreen:function(){return false;},_resize:function(){},});});},"dijit/_TemplatedMixin":function(){define(["dojo/cache","dojo/_base/declare","dojo/dom-construct","dojo/_base/lang","dojo/on","dojo/sniff","dojo/string","./_AttachMixin"],function(_33,_34,_35,_36,on,has,_37,_38){var _39=_34("dijit._TemplatedMixin",_38,{templateString:null,templatePath:null,_skipNodeCache:false,searchContainerNode:true,_stringRepl:function(_3a){var _3b=this.declaredClass,_3c=this;return _37.substitute(_3a,this,function(_3d,key){if(key.charAt(0)=="!"){_3d=_36.getObject(key.substr(1),false,_3c);}if(typeof _3d=="undefined"){throw new Error(_3b+" template:"+key);}if(_3d==null){return "";}return key.charAt(0)=="!"?_3d:this._escapeValue(""+_3d);},this);},_escapeValue:function(val){return val.replace(/["'<>&]/g,function(val){return {"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#x27;"}[val];});},buildRendering:function(){if(!this._rendered){if(!this.templateString){this.templateString=_33(this.templatePath,{sanitize:true});}var _3e=_39.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument);var _3f;if(_36.isString(_3e)){_3f=_35.toDom(this._stringRepl(_3e),this.ownerDocument);if(_3f.nodeType!=1){throw new Error("Invalid template: "+_3e);}}else{_3f=_3e.cloneNode(true);}this.domNode=_3f;}this.inherited(arguments);if(!this._rendered){this._fillContent(this.srcNodeRef);}this._rendered=true;},_fillContent:function(_40){var _41=this.containerNode;if(_40&&_41){while(_40.hasChildNodes()){_41.appendChild(_40.firstChild);}}}});_39._templateCache={};_39.getCachedTemplate=function(_42,_43,doc){var _44=_39._templateCache;var key=_42;var _45=_44[key];if(_45){try{if(!_45.ownerDocument||_45.ownerDocument==(doc||document)){return _45;}}catch(e){}_35.destroy(_45);}_42=_37.trim(_42);if(_43||_42.match(/\$\{([^\}]+)\}/g)){return (_44[key]=_42);}else{var _46=_35.toDom(_42,doc);if(_46.nodeType!=1){throw new Error("Invalid template: "+_42);}return (_44[key]=_46);}};if(has("ie")){on(window,"unload",function(){var _47=_39._templateCache;for(var key in _47){var _48=_47[key];if(typeof _48=="object"){_35.destroy(_48);}delete _47[key];}});}return _39;});},"dijit/_Templated":function(){define(["./_WidgetBase","./_TemplatedMixin","./_WidgetsInTemplateMixin","dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/_base/kernel"],function(_49,_4a,_4b,_4c,_4d,_4e,_4f){_4e.extend(_49,{waiRole:"",waiState:""});return _4d("dijit._Templated",[_4a,_4b],{constructor:function(){_4f.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0");},_processNode:function(_50,_51){var ret=this.inherited(arguments);var _52=_51(_50,"waiRole");if(_52){_50.setAttribute("role",_52);}var _53=_51(_50,"waiState");if(_53){_4c.forEach(_53.split(/\s*,\s*/),function(_54){if(_54.indexOf("-")!=-1){var _55=_54.split("-");_50.setAttribute("aria-"+_55[0],_55[1]);}});}return ret;}});});},"ibm/tivoli/fwm/mxmap/toolbar/ext/FullScreen":function(){define(["dojo/main","dijit/main","dojo/_base/declare","ibm/tivoli/fwm/mxmap/toolbar/ext/_ToggleTool","dijit/form/Button"],function(_56,_57,_58,_59,_5a){return _58([_59],{_labelOn:"Set Full Screen On",_labelOff:"Set Full Screen Off",iconClass:"basicMapToolbarBtn fullScreenMapToolbarBtn",map:null,openMap:null,_isFullScreen:false,constructor:function(_5b){_56.mixin(this,_5b);this._isFullScreen=false;this._handlers=[];var _5c=ibm.tivoli.fwm.i18n.getMaxMsg("map","toolbarfullscreenon");var _5d=ibm.tivoli.fwm.i18n.getMaxMsg("map","toolbarfullscreenoff");this._labelOn=_5c||this._labelOn;this._labelOff=_5d||this._labelOff;this.addSubscription("mapFullScreenModeChanged_"+this.map.getId(),_56.hitch(this,this._updateFullScreenState));if(this.map.mapConf.isOpenMap){this.openMap=_56.byId("pluss_open_map_bodydiv");}},createToolbarButton:function(){this._button=new _5a({label:this._labelOn,showLabel:false,iconClass:this.iconClass,onClick:_56.hitch(this,function(){this.execute();})});return this._button;},executeOn:function(){if(this.openMap){_56.addClass(this.openMap,"fullScreenOpenMap");this.map.fullScreenOn();}else{this._doFullScreen();}},executeOff:function(){if(this.openMap){_56.removeClass(this.openMap,"fullScreenOpenMap");this.map.fullScreenOff();}else{this._restoreOriginalSize();}},disable:function(){},_doFullScreen:function(){this._changeButtonState(true,this._labelOff);this.map.fullScreenOn();},_restoreOriginalSize:function(_5e){this._changeButtonState(false,this._labelOn);this.map.fullScreenOff();},_updateFullScreenState:function(_5f){if(_5f.modeOn==true){this.setActive(true);this._changeButtonState(true,this._labelOff);}else{this.setActive(false);this._changeButtonState(false,this._labelOn);}},_changeButtonState:function(_60,_61){this._button.set({label:_61});this._isFullScreen=_60;}});});},"dijit/_CssStateMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-class","dojo/has","dojo/_base/lang","dojo/on","dojo/domReady","dojo/touch","dojo/_base/window","./a11yclick","./registry"],function(_62,_63,dom,_64,has,_65,on,_66,_67,win,_68,_69){var _6a=_63("dijit._CssStateMixin",[],{hovering:false,active:false,_applyAttributes:function(){this.inherited(arguments);_62.forEach(["disabled","readOnly","checked","selected","focused","state","hovering","active","_opened"],function(_6b){this.watch(_6b,_65.hitch(this,"_setStateClass"));},this);for(var ap in this.cssStateNodes||{}){this._trackMouseState(this[ap],this.cssStateNodes[ap]);}this._trackMouseState(this.domNode,this.baseClass);this._setStateClass();},_cssMouseEvent:function(_6c){if(!this.disabled){switch(_6c.type){case "mouseover":case "MSPointerOver":case "pointerover":this._set("hovering",true);this._set("active",this._mouseDown);break;case "mouseout":case "MSPointerOut":case "pointerout":this._set("hovering",false);this._set("active",false);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":this._set("active",true);break;case "mouseup":case "dojotouchend":case "MSPointerUp":case "pointerup":case "keyup":this._set("active",false);break;}}},_setStateClass:function(){var _6d=this.baseClass.split(" ");function _6e(_6f){_6d=_6d.concat(_62.map(_6d,function(c){return c+_6f;}),"dijit"+_6f);};if(!this.isLeftToRight()){_6e("Rtl");}var _70=this.checked=="mixed"?"Mixed":(this.checked?"Checked":"");if(this.checked){_6e(_70);}if(this.state){_6e(this.state);}if(this.selected){_6e("Selected");}if(this._opened){_6e("Opened");}if(this.disabled){_6e("Disabled");}else{if(this.readOnly){_6e("ReadOnly");}else{if(this.active){_6e("Active");}else{if(this.hovering){_6e("Hover");}}}}if(this.focused){_6e("Focused");}var tn=this.stateNode||this.domNode,_71={};_62.forEach(tn.className.split(" "),function(c){_71[c]=true;});if("_stateClasses" in this){_62.forEach(this._stateClasses,function(c){delete _71[c];});}_62.forEach(_6d,function(c){_71[c]=true;});var _72=[];for(var c in _71){_72.push(c);}tn.className=_72.join(" ");this._stateClasses=_6d;},_subnodeCssMouseEvent:function(_73,_74,evt){if(this.disabled||this.readOnly){return;}function _75(_76){_64.toggle(_73,_74+"Hover",_76);};function _77(_78){_64.toggle(_73,_74+"Active",_78);};function _79(_7a){_64.toggle(_73,_74+"Focused",_7a);};switch(evt.type){case "mouseover":case "MSPointerOver":case "pointerover":_75(true);break;case "mouseout":case "MSPointerOut":case "pointerout":_75(false);_77(false);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":_77(true);break;case "mouseup":case "MSPointerUp":case "pointerup":case "dojotouchend":case "keyup":_77(false);break;case "focus":case "focusin":_79(true);break;case "blur":case "focusout":_79(false);break;}},_trackMouseState:function(_7b,_7c){_7b._cssState=_7c;}});_66(function(){function _7d(evt,_7e,_7f){if(_7f&&dom.isDescendant(_7f,_7e)){return;}for(var _80=_7e;_80&&_80!=_7f;_80=_80.parentNode){if(_80._cssState){var _81=_69.getEnclosingWidget(_80);if(_81){if(_80==_81.domNode){_81._cssMouseEvent(evt);}else{_81._subnodeCssMouseEvent(_80,_80._cssState,evt);}}}}};var _82=win.body(),_83;on(_82,_67.over,function(evt){_7d(evt,evt.target,evt.relatedTarget);});on(_82,_67.out,function(evt){_7d(evt,evt.target,evt.relatedTarget);});on(_82,_68.press,function(evt){_83=evt.target;_7d(evt,_83);});on(_82,_68.release,function(evt){_7d(evt,_83);_83=null;});on(_82,"focusin, focusout",function(evt){var _84=evt.target;if(_84._cssState&&!_84.getAttribute("widgetId")){var _85=_69.getEnclosingWidget(_84);if(_85){_85._subnodeCssMouseEvent(_84,_84._cssState,evt);}}});});return _6a;});},"dijit/DialogUnderlay":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/dom-attr","dojo/dom-style","dojo/on","dojo/window","./_Widget","./_TemplatedMixin","./BackgroundIframe","./Viewport","./main"],function(_86,_87,_88,_89,_8a,on,_8b,_8c,_8d,_8e,_8f,_90){var _91=_86("dijit.DialogUnderlay",[_8c,_8d],{templateString:"<div class='dijitDialogUnderlayWrapper'><div class='dijitDialogUnderlay' tabIndex='-1' data-dojo-attach-point='node'></div></div>",dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(id){_89.set(this.node,"id",id+"_underlay");this._set("dialogId",id);},_setClassAttr:function(_92){this.node.className="dijitDialogUnderlay "+_92;this._set("class",_92);},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.own(on(this.domNode,"keydown",_87.hitch(this,"_onKeyDown")));this.inherited(arguments);},layout:function(){var is=this.node.style,os=this.domNode.style;os.display="none";var _93=_8b.getBox(this.ownerDocument);os.top=_93.t+"px";os.left=_93.l+"px";is.width=_93.w+"px";is.height=_93.h+"px";os.display="block";},show:function(){this.domNode.style.display="block";this.open=true;this.layout();this.bgIframe=new _8e(this.domNode);var win=_8b.get(this.ownerDocument);this._modalConnects=[_8f.on("resize",_87.hitch(this,"layout")),on(win,"scroll",_87.hitch(this,"layout"))];},hide:function(){this.bgIframe.destroy();delete this.bgIframe;this.domNode.style.display="none";while(this._modalConnects.length){(this._modalConnects.pop()).remove();}this.open=false;},destroy:function(){while(this._modalConnects.length){(this._modalConnects.pop()).remove();}this.inherited(arguments);},_onKeyDown:function(){}});_91.show=function(_94,_95){var _96=_91._singleton;if(!_96||_96._destroyed){_96=_90._underlay=_91._singleton=new _91(_94);}else{if(_94){_96.set(_94);}}_8a.set(_96.domNode,"zIndex",_95);if(!_96.open){_96.show();}};_91.hide=function(){var _97=_91._singleton;if(_97&&!_97._destroyed){_97.hide();}};return _91;});},"ibm/tivoli/fwm/mxmap/toolbar/ext/ItineraryTool":function(){define(["dojo/main","dijit/main","dojo/_base/declare","ibm/tivoli/fwm/mxmap/toolbar/ext/_ToolTemplate","dijit/form/Button","ibm/tivoli/fwm/mxmap/routing/itinerary/ItineraryManager"],function(_98,_99,_9a,_9b,_9c,_9d){return _9a([_9b],{label:"Show Itinerary",iconClass:"basicMapToolbarBtn itineraryMapToolbarBtn",map:null,_itineraryManager:null,_dialog:null,constructor:function(_9e){_98.mixin(this,_9e);var _9f=ibm.tivoli.fwm.i18n.getMaxMsg("map","itinerarytool");this.label=_9f||this.label;this._dialog=null;this._itineraryManager=new _9d({map:this.map});this.addSubscription("showItinerary_"+this.map.getId(),_98.hitch(this,this.triggerShowItinerary));},triggerShowItinerary:function(){this.execute();},execute:function(){if(this._dialog){this._dialog.close();this._dialog=null;}var _a0=this.map.getMultipleRoutesManager();if(_a0&&_a0.routes&&_a0.routes[0]){var _a1=_a0.routes[0].itinerary;if(_a1){this._itineraryManager.updateRouteItinerary(_a1,_a0,_a0.routes[0]);}}this._itineraryManager.showPanel();},disable:function(){},destroy:function(){this.destroyRecursive();}});});},"ibm/tivoli/fwm/mxmap/routing/MultipleRoutesManager":function(){define(["dijit","dojo","dojox","dojo/require!ibm/tivoli/fwm/mxmap/_Base,ibm/tivoli/fwm/mxmap/routing/RouterFactory,ibm/tivoli/fwm/mxmap/routing/itinerary/Itinerary"],function(_a2,_a3,_a4){_a3.provide("ibm.tivoli.fwm.mxmap.routing.MultipleRoutesManager");_a3.require("ibm.tivoli.fwm.mxmap._Base");_a3.require("ibm.tivoli.fwm.mxmap.routing.RouterFactory");_a3.require("ibm.tivoli.fwm.mxmap.routing.itinerary.Itinerary");_a3.declare("ibm.tivoli.fwm.mxmap.routing.MultipleRoutesManager",ibm.tivoli.fwm.mxmap._Base,{routeConf:null,provider:null,map:null,routeUrl:null,routingData:null,routes:null,visible:true,constructor:function(_a5){_a3.mixin(this,_a5);this.factory=new ibm.tivoli.fwm.mxmap.routing.RouterFactory({map:this.map,provider:this.provider});this.routeConf.routeUrl=this.routeUrl;this.routes=[];},createRoute:function(_a6,_a7,_a8,_a9,_aa){var _ab={routecolor:_a7.routecolor,routeOpacity:0.5,routeLineWidth:5,endLocation:_a7.end,startLocation:_a7.start,optimizeroute:_a7.optimizeroute,startwithcurrentlocation:_a7.startwithcurrentlocation,routeUrl:_a7.routeUrl,map:this.map};var _ac=this.factory.createRouter(_ab);var fct=function(_ad){_ad.id=this.routes.length;this.routes.push(_ad);_ad.setLineVisible(this.visible);_ad.show();if(_aa!=true){_ad.zoomToRoute();var _ae=this.getWarning();if(_ae){this.map.showWarning(_ae);}}if(_a8){_a8(_ad);}};if(!_a9){_a9=_a3.hitch(this,this.routingError);}var me=this;if(_ac.then){_ac.then(function(_af){_af.customConf=me.customConf;_af.drawRoute(_a6,_a3.hitch(me,fct),_a9,_ab);});}else{_ac.customConf=me.customConf;_ac.drawRoute(_a6,_a3.hitch(me,fct),_a9,_ab);}},customConf:null,reGenerate:function(_b0,_b1,_b2,_b3){this.customConf=_b1;if(_a3.config.fwm.debug==true){}_b0.originalRouter.customConf=_b1;_b0.originalRouter.drawRoute(_b0.inputInfo.stops,_b2,_b3,_b0.instanceConf);},replaceRoute:function(_b4,id){this.removeRoute(this.routes[id]);this.routes[id]=_b4;_b4.id=id;},removeRoute:function(_b5){_b5.clear();},clearAll:function(){if(_a3.config.fwm.debug==true){}while(this.routes.length>0){this.routes.pop().clear();}if(_a3.config.fwm.debug==true){}},redrawAll:function(){_a3.forEach(this.routes,function(_b6){_b6.redraw();});},setLineVisible:function(_b7){_a3.forEach(this.routes,function(_b8){_b8.setLineVisible(_b7);});},hideRoutesLinesAndCalculatedMarkers:function(){this.visible=false;_a3.forEach(this.routes,function(_b9){_b9.setLineVisible(false);_b9.hideCalculatedMarkers();});},showRoutesLinesAndCalculatedMarkers:function(){this.visible=true;var _ba=this.getDispatcher();if(_ba){_ba.showCachedRoutesLinesAndCalculatedMarkers();}else{_a3.forEach(this.routes,function(_bb){_bb.setLineVisible(true);_bb.showCalculatedMarkers();});}},centerAndZoom:function(){this.zoomAndCenterOverAll();},zoomAndCenterOverAll:function(_bc){var _bd=(_bc!=undefined&&_bc!=null)?_bc:this.routes;var _be=null;for(var idx in _bd){if((_bd[idx]!=null)&&(_bd[idx]!=undefined)){if(_be){_be.merge(_bd[idx].getBounds());}else{_be=_bd[idx].getBounds();}}}if(_be){this.map.setBounds(_be);}else{console.warn("[MultipleRoutesManager] No routes to center on");}},routingError:function(_bf,_c0){var _c1=this.map.getMaximo();switch(_bf){case ibm.tivoli.fwm.mxmap.routing.RoutingErrorCodes.MIN_STOPS_REQ:_c1.showMessage("mapserver","route_min_stops_failure");break;case ibm.tivoli.fwm.mxmap.routing.RoutingErrorCodes.ZERO_RESULTS:_c1.showMessage("mapserver","route_zero_results");break;case ibm.tivoli.fwm.mxmap.routing.RoutingErrorCodes.INVALID_REQUEST:_c1.showMessage("mapserver","route_invalid_request");break;case ibm.tivoli.fwm.mxmap.routing.RoutingErrorCodes.REQUEST_DENIED:_c1.showMessage("mapserver","route_request_denied");break;case ibm.tivoli.fwm.mxmap.routing.RoutingErrorCodes.OVER_LIMIT:_c1.showMessage("mapserver","route_over_limit");break;case ibm.tivoli.fwm.mxmap.routing.RoutingErrorCodes.TIMEOUT:_c1.showMessage("mapserver","route_timeout");break;default:var msg=_c0;if(_c0&&_c0.message){msg=_c0.message;}_c1.showMessage("mapserver","route_unknown_failure",[msg]);break;}},destroyRecursive:function(){if(this.router){this.router.destroyRecursive();}this.inherited(arguments);},getItinerary:function(){return this.routes[0].itinerary;},getDispatcher:function(){return this.map.getDispatcher();},getWarning:function(){var _c2=null;for(var i=0;i<this.routes.length;i++){var _c3=this.routes[i].getRouteWarningCodes();if(_c3&&(_c3.length>0)){_c2=_c3[0];break;}}return _c2;}});});},"dijit/place":function(){define(["dojo/_base/array","dojo/dom-geometry","dojo/dom-style","dojo/_base/kernel","dojo/_base/window","./Viewport","./main"],function(_c4,_c5,_c6,_c7,win,_c8,_c9){function _ca(_cb,_cc,_cd,_ce){var _cf=_c8.getEffectiveBox(_cb.ownerDocument);if(!_cb.parentNode||String(_cb.parentNode.tagName).toLowerCase()!="body"){win.body(_cb.ownerDocument).appendChild(_cb);}var _d0=null;_c4.some(_cc,function(_d1){var _d2=_d1.corner;var pos=_d1.pos;var _d3=0;var _d4={w:{"L":_cf.l+_cf.w-pos.x,"R":pos.x-_cf.l,"M":_cf.w}[_d2.charAt(1)],h:{"T":_cf.t+_cf.h-pos.y,"B":pos.y-_cf.t,"M":_cf.h}[_d2.charAt(0)]};var s=_cb.style;s.left=s.right="auto";if(_cd){var res=_cd(_cb,_d1.aroundCorner,_d2,_d4,_ce);_d3=typeof res=="undefined"?0:res;}var _d5=_cb.style;var _d6=_d5.display;var _d7=_d5.visibility;if(_d5.display=="none"){_d5.visibility="hidden";_d5.display="";}var bb=_c5.position(_cb);_d5.display=_d6;_d5.visibility=_d7;var _d8={"L":pos.x,"R":pos.x-bb.w,"M":Math.max(_cf.l,Math.min(_cf.l+_cf.w,pos.x+(bb.w>>1))-bb.w)}[_d2.charAt(1)],_d9={"T":pos.y,"B":pos.y-bb.h,"M":Math.max(_cf.t,Math.min(_cf.t+_cf.h,pos.y+(bb.h>>1))-bb.h)}[_d2.charAt(0)],_da=Math.max(_cf.l,_d8),_db=Math.max(_cf.t,_d9),_dc=Math.min(_cf.l+_cf.w,_d8+bb.w),_dd=Math.min(_cf.t+_cf.h,_d9+bb.h),_de=_dc-_da,_df=_dd-_db;_d3+=(bb.w-_de)+(bb.h-_df);if(_d0==null||_d3<_d0.overflow){_d0={corner:_d2,aroundCorner:_d1.aroundCorner,x:_da,y:_db,w:_de,h:_df,overflow:_d3,spaceAvailable:_d4};}return !_d3;});if(_d0.overflow&&_cd){_cd(_cb,_d0.aroundCorner,_d0.corner,_d0.spaceAvailable,_ce);}var top=_d0.y,_e0=_d0.x,_e1=win.body(_cb.ownerDocument);if(/relative|absolute/.test(_c6.get(_e1,"position"))){top-=_c6.get(_e1,"marginTop");_e0-=_c6.get(_e1,"marginLeft");}var s=_cb.style;s.top=top+"px";s.left=_e0+"px";s.right="auto";return _d0;};var _e2={"TL":"BR","TR":"BL","BL":"TR","BR":"TL"};var _e3={at:function(_e4,pos,_e5,_e6,_e7){var _e8=_c4.map(_e5,function(_e9){var c={corner:_e9,aroundCorner:_e2[_e9],pos:{x:pos.x,y:pos.y}};if(_e6){c.pos.x+=_e9.charAt(1)=="L"?_e6.x:-_e6.x;c.pos.y+=_e9.charAt(0)=="T"?_e6.y:-_e6.y;}return c;});return _ca(_e4,_e8,_e7);},around:function(_ea,_eb,_ec,_ed,_ee){var _ef;if(typeof _eb=="string"||"offsetWidth" in _eb||"ownerSVGElement" in _eb){_ef=_c5.position(_eb,true);if(/^(above|below)/.test(_ec[0])){var _f0=_c5.getBorderExtents(_eb),_f1=_eb.firstChild?_c5.getBorderExtents(_eb.firstChild):{t:0,l:0,b:0,r:0},_f2=_c5.getBorderExtents(_ea),_f3=_ea.firstChild?_c5.getBorderExtents(_ea.firstChild):{t:0,l:0,b:0,r:0};_ef.y+=Math.min(_f0.t+_f1.t,_f2.t+_f3.t);_ef.h-=Math.min(_f0.t+_f1.t,_f2.t+_f3.t)+Math.min(_f0.b+_f1.b,_f2.b+_f3.b);}}else{_ef=_eb;}if(_eb.parentNode){var _f4=_c6.getComputedStyle(_eb).position=="absolute";var _f5=_eb.parentNode;while(_f5&&_f5.nodeType==1&&_f5.nodeName!="BODY"){var _f6=_c5.position(_f5,true),pcs=_c6.getComputedStyle(_f5);if(/relative|absolute/.test(pcs.position)){_f4=false;}if(!_f4&&/hidden|auto|scroll/.test(pcs.overflow)){var _f7=Math.min(_ef.y+_ef.h,_f6.y+_f6.h);var _f8=Math.min(_ef.x+_ef.w,_f6.x+_f6.w);_ef.x=Math.max(_ef.x,_f6.x);_ef.y=Math.max(_ef.y,_f6.y);_ef.h=_f7-_ef.y;_ef.w=_f8-_ef.x;}if(pcs.position=="absolute"){_f4=true;}_f5=_f5.parentNode;}}var x=_ef.x,y=_ef.y,_f9="w" in _ef?_ef.w:(_ef.w=_ef.width),_fa="h" in _ef?_ef.h:(_c7.deprecated("place.around: dijit/place.__Rectangle: { x:"+x+", y:"+y+", height:"+_ef.height+", width:"+_f9+" } has been deprecated.  Please use { x:"+x+", y:"+y+", h:"+_ef.height+", w:"+_f9+" }","","2.0"),_ef.h=_ef.height);var _fb=[];function _fc(_fd,_fe){_fb.push({aroundCorner:_fd,corner:_fe,pos:{x:{"L":x,"R":x+_f9,"M":x+(_f9>>1)}[_fd.charAt(1)],y:{"T":y,"B":y+_fa,"M":y+(_fa>>1)}[_fd.charAt(0)]}});};_c4.forEach(_ec,function(pos){var ltr=_ed;switch(pos){case "above-centered":_fc("TM","BM");break;case "below-centered":_fc("BM","TM");break;case "after-centered":ltr=!ltr;case "before-centered":_fc(ltr?"ML":"MR",ltr?"MR":"ML");break;case "after":ltr=!ltr;case "before":_fc(ltr?"TL":"TR",ltr?"TR":"TL");_fc(ltr?"BL":"BR",ltr?"BR":"BL");break;case "below-alt":ltr=!ltr;case "below":_fc(ltr?"BL":"BR",ltr?"TL":"TR");_fc(ltr?"BR":"BL",ltr?"TR":"TL");break;case "above-alt":ltr=!ltr;case "above":_fc(ltr?"TL":"TR",ltr?"BL":"BR");_fc(ltr?"TR":"TL",ltr?"BR":"BL");break;default:_fc(pos.aroundCorner,pos.corner);}});var _ff=_ca(_ea,_fb,_ee,{w:_f9,h:_fa});_ff.aroundNodePos=_ef;return _ff;}};return _c9.place=_e3;});},"dijit/_HasDropDown":function(){define(["dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","dojo/touch","./registry","./focus","./popup","./_FocusMixin"],function(_100,_101,dom,_102,_103,_104,_105,has,keys,lang,on,_106,_107,_108,_109,_10a){return _100("dijit._HasDropDown",_10a,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:true,forceWidth:false,maxHeight:-1,dropDownPosition:["below","above"],_stopClickEvents:true,_onDropDownMouseDown:function(e){if(this.disabled||this.readOnly){return;}if(e.type!="MSPointerDown"){e.preventDefault();}this.own(on.once(this.ownerDocument,_106.release,lang.hitch(this,"_onDropDownMouseUp")));this.toggleDropDown();},_onDropDownMouseUp:function(e){var _10b=this.dropDown,_10c=false;if(e&&this._opened){var c=_104.position(this._buttonNode,true);if(!(e.pageX>=c.x&&e.pageX<=c.x+c.w)||!(e.pageY>=c.y&&e.pageY<=c.y+c.h)){var t=e.target;while(t&&!_10c){if(_103.contains(t,"dijitPopup")){_10c=true;}else{t=t.parentNode;}}if(_10c){t=e.target;if(_10b.onItemClick){var _10d;while(t&&!(_10d=_107.byNode(t))){t=t.parentNode;}if(_10d&&_10d.onClick&&_10d.getParent){_10d.getParent().onItemClick(_10d,e);}}return;}}}if(this._opened){if(_10b.focus&&(_10b.autoFocus!==false||(e.type=="mouseup"&&!this.hovering))){this._focusDropDownTimer=this.defer(function(){_10b.focus();delete this._focusDropDownTimer;});}}else{if(this.focus){this.defer("focus");}}},_onDropDownClick:function(e){if(this._stopClickEvents){e.stopPropagation();e.preventDefault();}},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var _10e={"after":this.isLeftToRight()?"Right":"Left","before":this.isLeftToRight()?"Left":"Right","above":"Up","below":"Down","left":"Left","right":"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";_103.add(this._arrowWrapperNode||this._buttonNode,"dijit"+_10e+"ArrowButton");},postCreate:function(){this.inherited(arguments);var _10f=this.focusNode||this.domNode;this.own(on(this._buttonNode,_106.press,lang.hitch(this,"_onDropDownMouseDown")),on(this._buttonNode,"click",lang.hitch(this,"_onDropDownClick")),on(_10f,"keydown",lang.hitch(this,"_onKey")),on(_10f,"keyup",lang.hitch(this,"_onKeyUp")));},destroy:function(){if(this._opened){this.closeDropDown(true);}if(this.dropDown){if(!this.dropDown._destroyed){this.dropDown.destroyRecursive();}delete this.dropDown;}this.inherited(arguments);},_onKey:function(e){if(this.disabled||this.readOnly){return;}var d=this.dropDown,_110=e.target;if(d&&this._opened&&d.handleKey){if(d.handleKey(e)===false){e.stopPropagation();e.preventDefault();return;}}if(d&&this._opened&&e.keyCode==keys.ESCAPE){this.closeDropDown();e.stopPropagation();e.preventDefault();}else{if(!this._opened&&(e.keyCode==keys.DOWN_ARROW||((e.keyCode==keys.ENTER||(e.keyCode==keys.SPACE&&(!this._searchTimer||(e.ctrlKey||e.altKey||e.metaKey))))&&((_110.tagName||"").toLowerCase()!=="input"||(_110.type&&_110.type.toLowerCase()!=="text"))))){this._toggleOnKeyUp=true;e.stopPropagation();e.preventDefault();}}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();var d=this.dropDown;if(d&&d.focus){this.defer(lang.hitch(d,"focus"),1);}}},_onBlur:function(){this.closeDropDown(false);this.inherited(arguments);},isLoaded:function(){return true;},loadDropDown:function(_111){_111();},loadAndOpenDropDown:function(){var d=new _101(),_112=lang.hitch(this,function(){this.openDropDown();d.resolve(this.dropDown);});if(!this.isLoaded()){this.loadDropDown(_112);}else{_112();}return d;},toggleDropDown:function(){if(this.disabled||this.readOnly){return;}if(!this._opened){this.loadAndOpenDropDown();}else{this.closeDropDown(true);}},openDropDown:function(){var _113=this.dropDown,_114=_113.domNode,_115=this._aroundNode||this.domNode,self=this;var _116=_109.open({parent:this,popup:_113,around:_115,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){self.closeDropDown(true);},onCancel:function(){self.closeDropDown(true);},onClose:function(){_102.set(self._popupStateNode,"popupActive",false);_103.remove(self._popupStateNode,"dijitHasDropDownOpen");self._set("_opened",false);}});if(this.forceWidth||(this.autoWidth&&_115.offsetWidth>_113._popupWrapper.offsetWidth)){var _117=_115.offsetWidth-_113._popupWrapper.offsetWidth;var _118={w:_113.domNode.offsetWidth+_117};this._origStyle=_114.style.cssText;if(lang.isFunction(_113.resize)){_113.resize(_118);}else{_104.setMarginBox(_114,_118);}if(_116.corner[1]=="R"){_113._popupWrapper.style.left=(_113._popupWrapper.style.left.replace("px","")-_117)+"px";}}_102.set(this._popupStateNode,"popupActive","true");_103.add(this._popupStateNode,"dijitHasDropDownOpen");this._set("_opened",true);this._popupStateNode.setAttribute("aria-expanded","true");this._popupStateNode.setAttribute("aria-owns",_113.id);if(_114.getAttribute("role")!=="presentation"&&!_114.getAttribute("aria-labelledby")){_114.setAttribute("aria-labelledby",this.id);}return _116;},closeDropDown:function(_119){if(this._focusDropDownTimer){this._focusDropDownTimer.remove();delete this._focusDropDownTimer;}if(this._opened){this._popupStateNode.setAttribute("aria-expanded","false");if(_119&&this.focus){this.focus();}_109.close(this.dropDown);this._opened=false;}if(this._origStyle){this.dropDown.domNode.style.cssText=this._origStyle;delete this._origStyle;}}});});},"ibm/tivoli/fwm/mxmap/MapBus":function(){define(["dojo/_base/declare","ibm/tivoli/fwm/mxmap/MaximoIntegration",],function(_11a,_11b){return _11a(null,{serverUpdatesHandler:null,constructor:function(_11c,map){this.options=_11c;this.map=map;this.maximo=new _11b(_11c);},getMapConf:function(){return this.options.mapConf;},getRouteConf:function(){return this.options.routeConf;},getMaximoIntegration:function(){return this.maximo;},subscribeServerUpdates:function(_11d){this.serverUpdatesHandler=_11d;},onServerUpdates:function(_11e,_11f){if(!this.serverUpdatesHandler){return;}this.serverUpdatesHandler(_11e,_11f);},subscribeMapLoaded:function(_120){this.mapLoadedHandler=_120;},onMapLoaded:function(){if(!this.mapLoadedHandler){return;}this.mapLoadedHandler();},setRoutesStore:function(_121){this.routesStore=_121;},initRoutes:function(){if(!this.routesStore){return;}this.routesStore.init();},drawRoutes:function(_122){if(!this.routesStore){return;}this.routesStore.drawRoutes(_122);},clearRoutes:function(){this.routesStore.clearRoutes();},setLinearStoreAndInit:function(_123){var _124=this.getMapConf();this.linearStore=_123;this.linearStore.init(_124.parentApplication);this.drawLinearSegments();this.linearStore.subscribeToOpen(dojo.hitch(this,this.openLinearVisualControl));this.linearStore.subscribeToClose(dojo.hitch(this,this.closeLinearVisualControl));},openLinearVisualControl:function(_125){dojo.publish("linear.map.visibility",[{enabled:true,trow:_125,currentTabId:"mxmap",mapObj:this.map}]);},closeLinearVisualControl:function(_126){dojo.publish("linear.map.visibility",[{enabled:false,trow:_126,currentTabId:"mxmap",mapObj:this.map}]);},highlightLinearFeature:function(_127){this.linearStore.highlightLinearFeature(_127);},drawLinearSegments:function(){var _128=this.getMapConf();var _129=_128.maplinearConf;this.linearStore.drawSegments(_129.maplinearLayers);}});});},"ibm/tivoli/fwm/mxmap/layers/LayerPanelWidget":function(){define(["dojo/main","dijit/main","dojo/_base/declare","ibm/tivoli/fwm/mxmap/_Base","dijit/_Widget","dijit/_Templated","ibm/tivoli/fwm/mxmap/panels/MobileInfoPanelDialog","ibm/tivoli/fwm/mxmap/layers/LayerWidget","ibm/tivoli/fwm/mxmap/layers/LegendLayer","ibm/tivoli/fwm/mxmap/layers/SymbologyLayer"],function(dojo,_12a,_12b,_12c,_12d,_12e,_12f,_130,_131,_132){var _133=_12b([_12d,_12e,_12c],{templateString:dojo.cache("ibm.tivoli.fwm.mxmap","templates/LayerPanelWidget.html","<div class=\"text\">\n\t<div data-dojo-attach-point=\"layers\"></div>\n</div>"),infoPanel:null,map:null,_layers:null,_title:null,_div:null,constructor:function(_134){dojo.mixin(this,_134);this._layers=[];this._title=_134.title;if((_134.tool!=undefined)&&(_134.tool!=null)){_134.tool.setPanelWidget(this);}},postCreate:function(){},updateLayers:function(_135){if(dojo.config.fwm.debug==true){}dojo.forEach(this._layers,function(_136){_136.destroyRecursive(true);});var div=dojo.create("div");dojo.style(div,{borderBottom:"1px solid #E0E0E0"});this._layers=[];for(var i=0;i<_135.length;i++){if(_135[i].isVisibleInUI()){var _137=new _130({layer:_135[i],layerPanel:this,closeOnAction:false});dojo.place(_137.domNode,div,"last");this._layers.push(_137);}}dojo.place(div,this.layers,"only");var _138=[];var _139=null;var _13a=ibm.tivoli.fwm.i18n.getMaxMsg("map","resetlayers");var _13b=null;var _13c=ibm.tivoli.fwm.i18n.getMaxMsg("map","layersbackbtn");if(_135[0] instanceof _132){this._title=this._title||ibm.tivoli.fwm.i18n.getMaxMsg("map","symbologydialogtitle");_139=this.createButtonParams(dojo.hitch(this,function(){var _13d=_135[0].getParentLayer();this.map.getLayersManager().resetSymbologies(_13d);this.updateIcons();}),_13a);_138.push(_139);}else{if(_135[0] instanceof _131){this._title=this._title||ibm.tivoli.fwm.i18n.getMaxMsg("map","legenddialogtitle");_13b=this.createButtonParams(dojo.hitch(this,function(){var _13e=_135[0].getParentLayer().getParentLayer();if(_13e!=null){var _13f=new _133({map:this.map,tool:this.tool,title:_13e.getChildrenTitle()});_13f.updateLayers(_13e.getChildren());this.close();}}),_13c);_138.push(_13b);_139=this.createButtonParams(dojo.hitch(this,function(){var _140=_135[0].getParentLayer();this.map.getLayersManager().resetLegends(_140);this.updateIcons();}),_13a);_138.push(_139);}else{this._title=this._title||ibm.tivoli.fwm.i18n.getMaxMsg("map","layers");_139=this.createButtonParams(dojo.hitch(this,function(){this.map.getLayersManager().resetLayers();this.updateIcons();}),_13a);_138.push(_139);}}this.close();this.infoPanel=new _12f({map:this.map,title:this._title,nonModal:true,customButtons:_138});this.infoPanel.setContent(this.domNode);this.infoPanel.show(true);},close:function(){if(this.infoPanel){this.infoPanel.close();this.infoPanel=null;}},updateIcons:function(){dojo.forEach(this._layers,function(_141){_141.setLeftIcon();});},createButtonParams:function(_142,_143){return btnParams={label:_143,onClick:dojo.hitch(this,function(){_142();})};}});return _133;});},"dijit/_MenuBase":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/lang","dojo/mouse","dojo/on","dojo/window","./a11yclick","./registry","./_Widget","./_CssStateMixin","./_KeyNavContainer","./_TemplatedMixin"],function(_144,_145,dom,_146,_147,lang,_148,on,_149,_14a,_14b,_14c,_14d,_14e,_14f){return _145("dijit._MenuBase",[_14c,_14f,_14e,_14d],{selected:null,_setSelectedAttr:function(item){if(this.selected!=item){if(this.selected){this.selected._setSelected(false);this._onChildDeselect(this.selected);}if(item){item._setSelected(true);}this._set("selected",item);}},activated:false,_setActivatedAttr:function(val){_147.toggle(this.domNode,"dijitMenuActive",val);_147.toggle(this.domNode,"dijitMenuPassive",!val);this._set("activated",val);},parentMenu:null,popupDelay:500,passivePopupDelay:Infinity,autoFocus:false,childSelector:function(node){var _150=_14b.byNode(node);return node.parentNode==this.containerNode&&_150&&_150.focus;},postCreate:function(){var self=this,_151=typeof this.childSelector=="string"?this.childSelector:lang.hitch(this,"childSelector");this.own(on(this.containerNode,on.selector(_151,_148.enter),function(){self.onItemHover(_14b.byNode(this));}),on(this.containerNode,on.selector(_151,_148.leave),function(){self.onItemUnhover(_14b.byNode(this));}),on(this.containerNode,on.selector(_151,_14a),function(evt){self.onItemClick(_14b.byNode(this),evt);evt.stopPropagation();}),on(this.containerNode,on.selector(_151,"focusin"),function(){self._onItemFocus(_14b.byNode(this));}));this.inherited(arguments);},onKeyboardSearch:function(item,evt,_152,_153){this.inherited(arguments);if(!!item&&(_153==-1||(!!item.popup&&_153==1))){this.onItemClick(item,evt);}},_keyboardSearchCompare:function(item,_154){if(!!item.shortcutKey){return _154==item.shortcutKey.toLowerCase()?-1:0;}return this.inherited(arguments)?1:0;},onExecute:function(){},onCancel:function(){},_moveToPopup:function(evt){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled){this.onItemClick(this.focusedChild,evt);}else{var _155=this._getTopMenu();if(_155&&_155._isMenuBar){_155.focusNext();}}},_onPopupHover:function(){this.set("selected",this.currentPopupItem);this._stopPendingCloseTimer();},onItemHover:function(item){if(this.activated){this.set("selected",item);if(item.popup&&!item.disabled&&!this.hover_timer){this.hover_timer=this.defer(function(){this._openItemPopup(item);},this.popupDelay);}}else{if(this.passivePopupDelay<Infinity){if(this.passive_hover_timer){this.passive_hover_timer.remove();}this.passive_hover_timer=this.defer(function(){this.onItemClick(item,{type:"click"});},this.passivePopupDelay);}}this._hoveredChild=item;item._set("hovering",true);},_onChildDeselect:function(item){this._stopPopupTimer();if(this.currentPopupItem==item){this._stopPendingCloseTimer();this._pendingClose_timer=this.defer(function(){this._pendingClose_timer=null;this.currentPopupItem=null;item._closePopup();},this.popupDelay);}},onItemUnhover:function(item){if(this._hoveredChild==item){this._hoveredChild=null;}if(this.passive_hover_timer){this.passive_hover_timer.remove();this.passive_hover_timer=null;}item._set("hovering",false);},_stopPopupTimer:function(){if(this.hover_timer){this.hover_timer=this.hover_timer.remove();}},_stopPendingCloseTimer:function(){if(this._pendingClose_timer){this._pendingClose_timer=this._pendingClose_timer.remove();}},_getTopMenu:function(){for(var top=this;top.parentMenu;top=top.parentMenu){}return top;},onItemClick:function(item,evt){if(this.passive_hover_timer){this.passive_hover_timer.remove();}this.focusChild(item);if(item.disabled){return false;}if(item.popup){this.set("selected",item);this.set("activated",true);var _156=/^key/.test(evt._origType||evt.type)||(evt.clientX==0&&evt.clientY==0);this._openItemPopup(item,_156);}else{this.onExecute();item._onClick?item._onClick(evt):item.onClick(evt);}},_openItemPopup:function(_157,_158){if(_157==this.currentPopupItem){return;}if(this.currentPopupItem){this._stopPendingCloseTimer();this.currentPopupItem._closePopup();}this._stopPopupTimer();var _159=_157.popup;_159.parentMenu=this;this.own(this._mouseoverHandle=on.once(_159.domNode,"mouseover",lang.hitch(this,"_onPopupHover")));var self=this;_157._openPopup({parent:this,orient:this._orient||["after","before"],onCancel:function(){if(_158){self.focusChild(_157);}self._cleanUp();},onExecute:lang.hitch(this,"_cleanUp",true),onClose:function(){if(self._mouseoverHandle){self._mouseoverHandle.remove();delete self._mouseoverHandle;}}},_158);this.currentPopupItem=_157;},onOpen:function(){this.isShowingNow=true;this.set("activated",true);},onClose:function(){this.set("activated",false);this.set("selected",null);this.isShowingNow=false;this.parentMenu=null;},_closeChild:function(){this._stopPopupTimer();if(this.currentPopupItem){if(this.focused){_146.set(this.selected.focusNode,"tabIndex",this.tabIndex);this.selected.focusNode.focus();}this.currentPopupItem._closePopup();this.currentPopupItem=null;}},_onItemFocus:function(item){if(this._hoveredChild&&this._hoveredChild!=item){this.onItemUnhover(this._hoveredChild);}this.set("selected",item);},_onBlur:function(){this._cleanUp(true);this.inherited(arguments);},_cleanUp:function(_15a){this._closeChild();if(typeof this.isShowingNow=="undefined"){this.set("activated",false);}if(_15a){this.set("selected",null);}}});});},"ibm/tivoli/fwm/mxmap/impl/point/BingLatLonPoint":function(){define(["dijit","dojo","dojox","dojo/require!ibm/tivoli/fwm/mxmap/_LatLonPoint"],function(_15b,dojo,_15c){dojo.require("ibm.tivoli.fwm.mxmap._LatLonPoint");dojo.provide("ibm.tivoli.fwm.mxmap.impl.point.BingLatLonPoint");dojo.declare("ibm.tivoli.fwm.mxmap.impl.point.BingLatLonPoint",ibm.tivoli.fwm.mxmap._LatLonPoint,{toProprietary:function(){return new Microsoft.Maps.Location(this.lat,this.lon);},fromProprietary:function(_15d){if((_15d.latitude!=undefined)&&(_15d.latitude!=undefined)){this.lat=_15d.latitude;this.lon=_15d.longitude;this.lng=_15d.longitude;}else{if(_15d.coordinates!=undefined){this.lat=_15d.coordinates[0];this.lon=_15d.coordinates[1];this.lng=_15d.coordinates[1];}}}});});},"dijit/focus":function(){define(["dojo/aspect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/Evented","dojo/_base/lang","dojo/on","dojo/domReady","dojo/sniff","dojo/Stateful","dojo/_base/window","dojo/window","./a11y","./registry","./main"],function(_15e,_15f,dom,_160,_161,_162,_163,lang,on,_164,has,_165,win,_166,a11y,_167,_168){var _169;var _16a;var _16b=_15f([_165,_163],{curNode:null,activeStack:[],constructor:function(){var _16c=lang.hitch(this,function(node){if(dom.isDescendant(this.curNode,node)){this.set("curNode",null);}if(dom.isDescendant(this.prevNode,node)){this.set("prevNode",null);}});_15e.before(_162,"empty",_16c);_15e.before(_162,"destroy",_16c);},registerIframe:function(_16d){return this.registerWin(_16d.contentWindow,_16d);},registerWin:function(_16e,_16f){var _170=this,body=_16e.document&&_16e.document.body;if(body){var _171=has("pointer-events")?"pointerdown":has("MSPointer")?"MSPointerDown":has("touch-events")?"mousedown, touchstart":"mousedown";var mdh=on(_16e.document,_171,function(evt){if(evt&&evt.target&&evt.target.parentNode==null){return;}_170._onTouchNode(_16f||evt.target,"mouse");});var fih=on(body,"focusin",function(evt){if(!evt.target.tagName){return;}var tag=evt.target.tagName.toLowerCase();if(tag=="#document"||tag=="body"){return;}if(a11y.isFocusable(evt.target)){_170._onFocusNode(_16f||evt.target);}else{_170._onTouchNode(_16f||evt.target);}});var foh=on(body,"focusout",function(evt){_170._onBlurNode(_16f||evt.target);});return {remove:function(){mdh.remove();fih.remove();foh.remove();mdh=fih=foh=null;body=null;}};}},_onBlurNode:function(node){var now=(new Date()).getTime();if(now<_169+100){return;}if(this._clearFocusTimer){clearTimeout(this._clearFocusTimer);}this._clearFocusTimer=setTimeout(lang.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",null);}),0);if(this._clearActiveWidgetsTimer){clearTimeout(this._clearActiveWidgetsTimer);}if(now<_16a+100){return;}this._clearActiveWidgetsTimer=setTimeout(lang.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([]);}),0);},_onTouchNode:function(node,by){_16a=(new Date()).getTime();if(this._clearActiveWidgetsTimer){clearTimeout(this._clearActiveWidgetsTimer);delete this._clearActiveWidgetsTimer;}if(_161.contains(node,"dijitPopup")){node=node.firstChild;}var _172=[];try{while(node){var _173=_160.get(node,"dijitPopupParent");if(_173){node=_167.byId(_173).domNode;}else{if(node.tagName&&node.tagName.toLowerCase()=="body"){if(node===win.body()){break;}node=_166.get(node.ownerDocument).frameElement;}else{var id=node.getAttribute&&node.getAttribute("widgetId"),_174=id&&_167.byId(id);if(_174&&!(by=="mouse"&&_174.get("disabled"))){_172.unshift(id);}node=node.parentNode;}}}}catch(e){}this._setStack(_172,by);},_onFocusNode:function(node){if(!node){return;}if(node.nodeType==9){return;}_169=(new Date()).getTime();if(this._clearFocusTimer){clearTimeout(this._clearFocusTimer);delete this._clearFocusTimer;}this._onTouchNode(node);if(node==this.curNode){return;}this.set("prevNode",this.curNode);this.set("curNode",node);},_setStack:function(_175,by){var _176=this.activeStack,_177=_176.length-1,_178=_175.length-1;if(_175[_178]==_176[_177]){return;}this.set("activeStack",_175);var _179,i;for(i=_177;i>=0&&_176[i]!=_175[i];i--){_179=_167.byId(_176[i]);if(_179){_179._hasBeenBlurred=true;_179.set("focused",false);if(_179._focusManager==this){_179._onBlur(by);}this.emit("widget-blur",_179,by);}}for(i++;i<=_178;i++){_179=_167.byId(_175[i]);if(_179){_179.set("focused",true);if(_179._focusManager==this){_179._onFocus(by);}this.emit("widget-focus",_179,by);}}},focus:function(node){if(node){try{node.focus();}catch(e){}}}});var _17a=new _16b();_164(function(){var _17b=_17a.registerWin(_166.get(document));if(has("ie")){on(window,"unload",function(){if(_17b){_17b.remove();_17b=null;}});}});_168.focus=function(node){_17a.focus(node);};for(var attr in _17a){if(!/^_/.test(attr)){_168.focus[attr]=typeof _17a[attr]=="function"?lang.hitch(_17a,attr):_17a[attr];}}_17a.watch(function(attr,_17c,_17d){_168.focus[attr]=_17d;});return _17a;});},"dojo/i18n":function(){define(["./_base/kernel","require","./has","./_base/array","./_base/config","./_base/lang","./_base/xhr","./json","module"],function(dojo,_17e,has,_17f,_180,lang,xhr,json,_181){has.add("dojo-preload-i18n-Api",1);1||has.add("dojo-v1x-i18n-Api",1);var _182=dojo.i18n={},_183=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,_184=function(root,_185,_186,_187){for(var _188=[_186+_187],_189=_185.split("-"),_18a="",i=0;i<_189.length;i++){_18a+=(_18a?"-":"")+_189[i];if(!root||root[_18a]){_188.push(_186+_18a+"/"+_187);_188.specificity=_18a;}}return _188;},_18b={},_18c=function(_18d,_18e,_18f){_18f=_18f?_18f.toLowerCase():dojo.locale;_18d=_18d.replace(/\./g,"/");_18e=_18e.replace(/\./g,"/");return (/root/i.test(_18f))?(_18d+"/nls/"+_18e):(_18d+"/nls/"+_18f+"/"+_18e);},_190=dojo.getL10nName=function(_191,_192,_193){return _191=_181.id+"!"+_18c(_191,_192,_193);},_194=function(_195,_196,_197,_198,_199,load){_195([_196],function(root){var _19a=lang.clone(root.root||root.ROOT),_19b=_184(!root._v1x&&root,_199,_197,_198);_195(_19b,function(){for(var i=1;i<_19b.length;i++){_19a=lang.mixin(lang.clone(_19a),arguments[i]);}var _19c=_196+"/"+_199;_18b[_19c]=_19a;_19a.$locale=_19b.specificity;load();});});},_19d=function(id,_19e){return /^\./.test(id)?_19e(id):id;},_19f=function(_1a0){var list=_180.extraLocale||[];list=lang.isArray(list)?list:[list];list.push(_1a0);return list;},load=function(id,_1a1,load){var _1a2=_183.exec(id),_1a3=_1a2[1]+"/",_1a4=_1a2[5]||_1a2[4],_1a5=_1a3+_1a4,_1a6=(_1a2[5]&&_1a2[4]),_1a7=_1a6||dojo.locale||"",_1a8=_1a5+"/"+_1a7,_1a9=_1a6?[_1a7]:_19f(_1a7),_1aa=_1a9.length,_1ab=function(){if(!--_1aa){load(lang.delegate(_18b[_1a8]));}},_1ac=id.split("*"),_1ad=_1ac[1]=="preload";if(has("dojo-preload-i18n-Api")){if(_1ad){if(!_18b[id]){_18b[id]=1;_1b7(_1ac[2],json.parse(_1ac[3]),1,_1a1);}load(1);}if(_1ad||(_1d4(id,_1a1,load)&&!_18b[_1a8])){return;}}else{if(_1ad){load(1);return;}}_17f.forEach(_1a9,function(_1ae){var _1af=_1a5+"/"+_1ae;if(has("dojo-preload-i18n-Api")){_1b0(_1af);}if(!_18b[_1af]){_194(_1a1,_1a5,_1a3,_1a4,_1ae,_1ab);}else{_1ab();}});};if(has("dojo-preload-i18n-Api")||1){var _1b1=_182.normalizeLocale=function(_1b2){var _1b3=_1b2?_1b2.toLowerCase():dojo.locale;return _1b3=="root"?"ROOT":_1b3;},isXd=function(mid,_1b4){return (1&&1)?_1b4.isXdUrl(_17e.toUrl(mid+".js")):true;},_1b5=0,_1b6=[],_1b7=_182._preloadLocalizations=function(_1b8,_1b9,_1ba,_1bb){_1bb=_1bb||_17e;function _1bc(mid,_1bd){if(isXd(mid,_1bb)||_1ba){_1bb([mid],_1bd);}else{_1d9([mid],_1bd,_1bb);}};function _1be(_1bf,func){var _1c0=_1bf.split("-");while(_1c0.length){if(func(_1c0.join("-"))){return;}_1c0.pop();}func("ROOT");};function _1c1(){_1b5++;};function _1c2(){--_1b5;while(!_1b5&&_1b6.length){load.apply(null,_1b6.shift());}};function _1c3(path,name,loc,_1c4){return _1c4.toAbsMid(path+name+"/"+loc);};function _1c5(_1c6){_1c6=_1b1(_1c6);_1be(_1c6,function(loc){if(_17f.indexOf(_1b9,loc)>=0){var mid=_1b8.replace(/\./g,"/")+"_"+loc;_1c1();_1bc(mid,function(_1c7){for(var p in _1c7){var _1c8=_1c7[p],_1c9=p.match(/(.+)\/([^\/]+)$/),_1ca,_1cb;if(!_1c9){continue;}_1ca=_1c9[2];_1cb=_1c9[1]+"/";if(!_1c8._localized){continue;}var _1cc;if(loc==="ROOT"){var root=_1cc=_1c8._localized;delete _1c8._localized;root.root=_1c8;_18b[_17e.toAbsMid(p)]=root;}else{_1cc=_1c8._localized;_18b[_1c3(_1cb,_1ca,loc,_17e)]=_1c8;}if(loc!==_1c6){var _1cd=function _1cd(_1ce,_1cf,_1d0,_1d1){var _1d2=[],_1d3=[];_1be(_1c6,function(loc){if(_1d1[loc]){_1d2.push(_17e.toAbsMid(_1ce+loc+"/"+_1cf));_1d3.push(_1c3(_1ce,_1cf,loc,_17e));}});if(_1d2.length){_1c1();_1bb(_1d2,function(){for(var i=_1d2.length-1;i>=0;i--){_1d0=lang.mixin(lang.clone(_1d0),arguments[i]);_18b[_1d3[i]]=_1d0;}_18b[_1c3(_1ce,_1cf,_1c6,_17e)]=lang.clone(_1d0);_1c2();});}else{_18b[_1c3(_1ce,_1cf,_1c6,_17e)]=_1d0;}};_1cd(_1cb,_1ca,_1c8,_1cc);}}_1c2();});return true;}return false;});};_1c5();_17f.forEach(dojo.config.extraLocale,_1c5);},_1d4=function(id,_1d5,load){if(_1b5){_1b6.push([id,_1d5,load]);}return _1b5;},_1b0=function(){};}if(1){var _1d6={},_1d7={},_1d8,_1d9=function(deps,_1da,_1db){var _1dc=[];_17f.forEach(deps,function(mid){var url=_1db.toUrl(mid+".js");function load(text){if(!_1d8){_1d8=new Function("__bundle","__checkForLegacyModules","__mid","__amdValue","var define = function(mid, factory){define.called = 1; __amdValue.result = factory || mid;},"+"\t   require = function(){define.called = 1;};"+"try{"+"define.called = 0;"+"eval(__bundle);"+"if(define.called==1)"+"return __amdValue;"+"if((__checkForLegacyModules = __checkForLegacyModules(__mid)))"+"return __checkForLegacyModules;"+"}catch(e){}"+"try{"+"return eval('('+__bundle+')');"+"}catch(e){"+"return e;"+"}");}var _1dd=_1d8(text,_1b0,mid,_1d6);if(_1dd===_1d6){_1dc.push(_18b[url]=_1d6.result);}else{if(_1dd instanceof Error){console.error("failed to evaluate i18n bundle; url="+url,_1dd);_1dd={};}_1dc.push(_18b[url]=(/nls\/[^\/]+\/[^\/]+$/.test(url)?_1dd:{root:_1dd,_v1x:1}));}};if(_18b[url]){_1dc.push(_18b[url]);}else{var _1de=_1db.syncLoadNls(mid);if(!_1de){_1de=_1b0(mid.replace(/nls\/([^\/]*)\/([^\/]*)$/,"nls/$2/$1"));}if(_1de){_1dc.push(_1de);}else{if(!xhr){try{_1db.getText(url,true,load);}catch(e){_1dc.push(_18b[url]={});}}else{xhr.get({url:url,sync:true,load:load,error:function(){_1dc.push(_18b[url]={});}});}}}});_1da&&_1da.apply(null,_1dc);};_1b0=function(_1df){for(var _1e0,_1e1=_1df.split("/"),_1e2=dojo.global[_1e1[0]],i=1;_1e2&&i<_1e1.length-1;_1e2=_1e2[_1e1[i++]]){}if(_1e2){_1e0=_1e2[_1e1[i]];if(!_1e0){_1e0=_1e2[_1e1[i].replace(/-/g,"_")];}if(_1e0){_18b[_1df]=_1e0;}}return _1e0;};_182.getLocalization=function(_1e3,_1e4,_1e5){var _1e6,_1e7=_18c(_1e3,_1e4,_1e5);if(_1d7[_1e7]){return _1d7[_1e7];}load(_1e7,(!isXd(_1e7,_17e)?function(deps,_1e8){_1d9(deps,_1e8,_17e);}:_17e),function(_1e9){_1d7[_1e7]=_1e9;_1e6=_1e9;});return _1e6;};}else{_182.getLocalization=function(_1ea,_1eb,_1ec){var key=_1ea.replace(/\./g,"/")+"/nls/"+_1eb+"/"+(_1ec||_180.locale);return this.cache[key];};}return lang.mixin(_182,{dynamic:true,normalize:_19d,load:load,cache:_18b,getL10nName:_190});});},"ibm/tivoli/fwm/mxmap/toolbar/ext/_ToolTemplate":function(){define(["dojo/_base/declare","dojo/main","dijit/main","ibm/tivoli/fwm/mxmap/_Base","dijit/form/Button"],function(_1ed,dojo,_1ee,_1ef,_1f0){return _1ed([_1ef],{map:null,label:"",_button:null,iconClass:"basicMapToolbarBtn",constructor:function(_1f1){dojo.mixin(this,_1f1);this._handlers=[];},createToolbarButton:function(){this._button=new _1f0({label:this.label,showLabel:false,iconClass:this.iconClass,onClick:dojo.hitch(this,function(){this.execute();})});return this._button;},execute:function(){console.error("to be implemented");},disable:function(){console.error("to be implemented");},destroy:function(){this._button.destroyRecursive();this.inherited(arguments);this.destroyRecursive();}});});},"dijit/hccss":function(){define(["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(_1f2,has,_1f3,win){_1f3(function(){if(has("highcontrast")){_1f2.add(win.body(),"dijit_a11y");}});return has;});},"ibm/tivoli/fwm/mxmap/routing/itinerary/ItineraryManager":function(){define(["dojo/_base/declare","ibm/tivoli/fwm/mxmap/_Base","dijit/_Widget","dijit/_Templated","dijit/form/CheckBox","dijit/form/RadioButton","ibm/tivoli/fwm/mxmap/panels/MobileInfoPanelDialog","ibm/tivoli/fwm/mxmap/routing/itinerary/Leg","ibm/tivoli/fwm/mxmap/routing/itinerary/Step","ibm/tivoli/fwm/mxmap/impl/BingMaps"],function(_1f4,_1f5,_1f6,_1f7,_1f8,_1f9,_1fa,Leg,Step,_1fb){ibm.tivoli.fwm.mxmap.routing.itinerary.MobileInput=_1f4([],{_checkbox:null,constructor:function(type,args,_1fc){_1fc.innerHTML+="<input type=\""+type+"\" name=\""+args.name+"\" value=\""+args.value+"\"/>";var _1fd=_1fc.childNodes[0];_1fd.checked=args.checked;var _1fe=args.onChange;_1fd.onchange=function(evt){_1fe(evt.target.checked);};args.label.onclick=function(){_1fd.click();};this._checkbox=_1fd;},get:function(name){if(name=="value"){return this._checkbox.checked;}},set:function(name,_1ff){},setDisabled:function(_200){this._checkbox.disabled=_200;}});ibm.tivoli.fwm.mxmap.routing.itinerary.ItineraryManager=_1f4([_1f6,_1f7,_1f5],{templateString:dojo.cache("ibm.tivoli.fwm.mxmap","templates/ItineraryManager.html","<div style=\"width:100%;overflow: auto;\">\n\t<div data-dojo-attach-point=\"controls\" style=\"background-color: #FFFFFF;border: 1px solid #E0E0E0;padding: 10px;margin-left: 4px; margin-right: 4px;\">\n\t\t<div style=\"float:left;width:50%;\" data-dojo-attach-point=\"avoidersNode\">\n\t\t\t<div data-dojo-attach-point=\"highdiv\" data-dojo-attach-event=\"ondijitclick:_highClick\" style=\"padding-top:0px;padding-bottom:10px\">\n\t\t\t\t<span data-dojo-attach-point=\"ahNode\" style=\"padding-left:10px;padding-right:10px\"></span> <div data-dojo-attach-point=\"avoidhighwaysdiv\" style=\"display:inline\"><label data-dojo-attach-point=\"itineraryavoidhighways\" for=\"avoidhighways\">Avoid highways</label></div><br/>\n\t\t\t</div>\n\t\t\t<div data-dojo-attach-point=\"tollsdiv\" data-dojo-attach-event=\"ondijitclick:_tollsClick\" style=\"padding-top: 10px; padding-bottom:0px\">\n\t\t\t\t<span data-dojo-attach-point=\"atNode\" style=\"padding-left:10px;padding-right:10px\"></span> <div data-dojo-attach-point=\"avoidtollsdiv\" style=\"display:inline\"><label data-dojo-attach-point=\"itineraryavoidtolls\" for=\"avoidtolls\">Avoid tolls</label></div><br/>\n\t\t\t</div>\n\t\t</div>\n\t\t<div data-dojo-attach-point=\"kmdiv\" data-dojo-attach-event=\"ondijitclick:_kmClick\" style=\"padding-top:0px;padding-bottom:10px\">\n\t\t\t<span data-dojo-attach-point=\"kmNode\" style=\"padding-left:10px;padding-right:10px\"></span><label data-dojo-attach-point=\"itinerarykm\" for=\"km\">Kilometers</label>\n\t\t</div>\n\t\t<div data-dojo-attach-point=\"milesdiv\" data-dojo-attach-event=\"ondijitclick:_milesClick\" style=\"padding-top:10px;padding-bottom:0px\">\n\t\t\t<span data-dojo-attach-point=\"miNode\" style=\"padding-left:10px;padding-right:10px\"></span><label data-dojo-attach-point=\"itinerarymiles\" for=\"miles\">Miles</label>\n\t\t</div>\n\t</div>\n\t<div data-dojo-attach-point=\"markerNode\" style=\"float:left;\" data-dojo-attach-event=\"ondijitclick:_onInitialLocClick\"></div>\n\t<div data-dojo-attach-point=\"startLocation\" style=\"margin: 1px;padding: 7px 2px;\" ></div>\n\t<div data-dojo-attach-point=\"routeInfo\" style=\"padding: 2px;\">\n\t</div>\n</div>"),infoPanel:null,map:null,legs:[],constructor:function(_201){dojo.mixin(this,_201);},highway:null,toll:null,km:null,miles:null,_lastHighwayState:null,_lastAvoidTollsState:null,_isBingAndIE:null,postCreate:function(){var _202=navigator.userAgent.indexOf("Android")>-1;this._isBingAndIE=(dojo.isIE&&this.map instanceof ibm.tivoli.fwm.mxmap.impl.BingMaps)?true:false;var _203=(_202?function(_204,_205){return new ibm.tivoli.fwm.mxmap.routing.itinerary.MobileInput("checkbox",_204,_205);}:function(_206,_207){return new _1f8(_206,_207);});var _208=(_202?function(_209,_20a){return new ibm.tivoli.fwm.mxmap.routing.itinerary.MobileInput("radio",_209,_20a);}:function(_20b,_20c){return new _1f9(_20b,_20c);});this._lastHighwayState=false;this.highway=_203({name:"highway",value:"highway",checked:this._lastHighwayState,onChange:dojo.hitch(this,this.onHighWayChanged),label:this.itineraryavoidhighways},this.ahNode);this._lastAvoidTollsState=false;this.toll=_203({name:"toll",value:"toll",checked:this._lastAvoidTollsState,onChange:dojo.hitch(this,this.onTollChanged),label:this.itineraryavoidtolls},this.atNode);var _20d=this.map.getDefaultLengthUnit();this.km=_208({checked:(_20d=="KILOMETERS"),value:"km",name:"unit",onChange:dojo.hitch(this,this.onUnitChanged),label:this.itinerarykm},this.kmNode);this.miles=_208({checked:(_20d=="MILES"),value:"mi",name:"unit",onChange:dojo.hitch(this,this.onUnitChanged),label:this.itinerarymiles},this.miNode);this.itineraryavoidhighways.innerHTML=ibm.tivoli.fwm.i18n.getMaxMsg("map","itineraryavoidhw");this.itineraryavoidtolls.innerHTML=ibm.tivoli.fwm.i18n.getMaxMsg("map","itineraryavoidtolls");this.itinerarykm.innerHTML=ibm.tivoli.fwm.i18n.getMaxMsg("map","itinerarykm");this.itinerarymiles.innerHTML=ibm.tivoli.fwm.i18n.getMaxMsg("map","itinerarymiles");this.addressLoading=ibm.tivoli.fwm.i18n.getMaxMsg("map","address_being_loaded");this.failedToLoadAddress=ibm.tivoli.fwm.i18n.getMaxMsg("map","address_info_not_found");},_highClick:function(){this._lastHighwayState=!this._lastHighwayState;this.highway.set("checked",this._lastHighwayState);if(this._isBingAndIE==true){this.onHighWayChanged(this._lastHighwayState);}},_tollsClick:function(){this._lastAvoidTollsState=!this._lastAvoidTollsState;this.toll.set("checked",this._lastAvoidTollsState);if(this._isBingAndIE==true){this.onTollChanged(this._lastAvoidTollsState);}},_kmClick:function(){this.km.set("checked",true);if(this._isBingAndIE==true){this.onUnitChanged(true);}},_milesClick:function(){this.miles.set("checked",true);if(this._isBingAndIE==true){this.onUnitChanged(true);}},onUnitChanged:function(_20e){if(_20e==true){this.onRouteControlsChanged(false);}},onTollChanged:function(){this.onRouteControlsChanged(true);},onHighWayChanged:function(arg){this.onRouteControlsChanged(true);},enableControls:function(_20f){this.miles.setDisabled(!_20f);this.km.setDisabled(!_20f);this.highway.setDisabled(!_20f);this.toll.setDisabled(!_20f);},onRouteControlsChanged:function(_210){this.enableControls(false);var _211=this.getControls();var conf=this.route.inputInfo;var me=this;if(!this.infoPanel){this._getInfoPanel();}var fct=function(_212){var _213=me.route.id;if(_210==true){me.routeManager.replaceRoute(_212,_213);_212.show();}me.updateRouteItinerary(_212.itinerary,me.routeManager,_212);me.enableControls(true);};var _214=function(_215){me.enableControls(true);conf.errorCb(_215);};if(_210==true){dojo.empty(this.routeInfo);dojo.create("img",{src:dojo.config.fwm.ctxRoot+"/webclient/skins/tivoli09/images/progressbar.gif"},this.routeInfo);this.routeManager.reGenerate(this.route,_211,fct,_214);}else{this.route.originalRouter.customConf=_211;fct(this.route);}},getControls:function(){var _216={};if(this.highway.get("value")!=false){_216.avoidHighway=true;}else{_216.avoidHighway=false;}if(this.toll.get("value")!=false){_216.avoidToll=true;}else{_216.avoidToll=false;}var km=this.km.get("value")!=false;var _217=this.miles.get("value")!=false;if(km==true){_216.distanceUnit=ibm.tivoli.fwm.mxmap.routing.DistanceUnit.KM;}else{_216.distanceUnit=ibm.tivoli.fwm.mxmap.routing.DistanceUnit.MILES;}return _216;},routeManager:null,route:null,_createLegFromInitialLocation:function(_218){var leg=_218;leg.marker=this.route.getMarkerForStop(0);leg.map=this.map;leg.distanceUnit=this.getControls().distanceUnit;var _219=new Leg(leg);return _219;},updateRouteItinerary:function(_21a,_21b,_21c){this.routeManager=_21b;this.route=_21c;if(this.route==null){this.enableControls(false);return;}this.enableControls(true);if(this.route.avoidTollsSupported==false&&this.route.avoidHighwaysSupported==false){dojo.style(this.avoidersNode,"display","none");}else{dojo.style(this.avoidersNode,"display","block");}this.legs=[];var _21d=_21a.getInitialLocation();var fct=function(){this.infoPanel.close();};if(_21d){_21d.marker=this.route.getMarkerForStop(0);_21d.closeDialog=dojo.hitch(this,fct);var _21e=this._createLegFromInitialLocation(_21d);dojo.place(_21e.domNode,this.startLocation,"only");}dojo.empty(this.routeInfo);for(var i=0;i<_21a.legs.length;i++){var leg=_21a.legs[i];leg.marker=this.route.getMarkerForStop(i+1);leg.map=this.map;leg.distanceUnit=this.getControls().distanceUnit;leg.closeDialog=dojo.hitch(this,fct);var _21e=new Leg(leg);dojo.place(_21e.domNode,this.routeInfo,"last");this.legs.push(_21e);}},_onInitialLocClick:function(args){var _21f=this.route.itinerary.getInitialLocation().location;this.map.setCenter(_21f);},isIt:false,showPanel:function(){if(this.isIt==false){this.isIt=true;this._getInfoPanel();this.infoPanel.setContent(this.domNode);}if(this.route==null){this.enableControls(false);}else{this.enableControls(true);}this.infoPanel.show();},_getInfoPanel:function(){if(this.infoPanel){this.infoPanel.close();this.infoPanel=null;}this.infoPanel=new _1fa({map:this.map,fitHeight:true});return this.infoPanel;}});return ibm.tivoli.fwm.mxmap.routing.itinerary.ItineraryManager;});},"ibm/tivoli/fwm/mxmap/panels/MobileInfoPanelLine":function(){define(["dojo/_base/declare","dijit/_Widget","dijit/_Templated"],function(_220,_221,_222){return _220([_221,_222],{templateString:"<tr role=\"row\" style=\"display: ;\" dojoAttachPoint=\"row\">\n\t<th>\n\t\t<img src=\"blank.gif\" style=\"display: none\" class=\"tablerow_blank_icon\" title=\"\" alt=\"\">\n\t</th>\n\t<td role=\"gridcell\" control=\"true\" dojoAttachPoint=\"clickable\" onmouseover=\"appendClass(this.parentNode,'trh')\" onmouseout=\"removeClass(this.parentNode,'trh')\" style=\"padding-left: 5px;\" class=\"tc hl cursor_hand\">\n\t\t<table role=\"presentation\" style=\"display: inline;\">\n\t\t\t<tbody>\n\t\t\t\t<tr>\n\t\t\t\t\t<td nowrap=\"nowrap\" valign=\"top\" style=\"vertical-align: top;\">\n\t\t\t\t\t\t<table role=\"presentation\" control=\"true\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" class=\" \" summary=\"\" style=\"width: 100%; vertical-align: top\">\n\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t<tr control=\"true\" style=\"vertical-align: top;\">\n\t\t\t\t\t\t\t\t\t<td nowrap=\"nowrap\" align=\"left\" valign=\"top\" style=\"vertical-align: top;\">\n\t\t\t\t\t\t\t\t\t\t<div aria-live=\"polite\" class=\"bc\">\n\t\t\t\t\t\t\t\t\t\t\t<span ctype=\"label\" tabindex=\"0\" \n\t\t\t\t\t\t\t\t\t\t\tclass=\"text txtplain  label  \" \n\t\t\t\t\t\t\t\t\t\t\tstyle=\"cursor: pointer;\"\n\t\t\t\t\t\t\t\t\t\t\ttitle=\"\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div dojoAttachPoint=\"content\"></div>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</tbody>\n\t\t</table>\n\t</td>\n</tr>",domNode:null,row:null,content:null,clickable:null,constructor:function(_223){dojo.mixin(this,_223);},postCreate:function(){dojo.parser.parse(this.domNode);},setCallbackFunction:function(_224){this.clickable.onclick=_224;},setRowClass:function(_225){dojo.addClass(this.row,_225);},setContent:function(_226){this.content.textContent=_226;}});});},"ibm/tivoli/fwm/mxmap/MapTipsManager":function(){define(["dojo/_base/declare","ibm/tivoli/fwm/mxmap/_Base","ibm/tivoli/fwm/i18n","dijit/form/Select","ibm/tivoli/fwm/mxmap/InfoSummaryPanelWidget","ibm/tivoli/fwm/mxmap/InfoSummaryWidget"],function(_227,_228,i18n,_229,_22a,_22b){return _227([_228],{_templateCache:{},_summaryTemplateCache:{},_menuCache:{},maximo:null,constructor:function(_22c){dojo.mixin(this,_22c);this._templateCache={};this._summaryTemplateCache={};this._menuCache={};},_cloneMarkerOpenBubbleImplementation:function(_22d){_22d.openBubble.clone=function(){var that=this;var temp=function temporary(){return that.apply(this,arguments);};for(key in this){temp[key]=this[key];}return temp;};var _22e=_22d.openBubble.clone();return _22e;},enableMarker:function(_22f,_230,_231){_22f.obclone=this._cloneMarkerOpenBubbleImplementation(_22f);var me=this;_22f.openBubble=function(){me._handleOpenBubble(_22f,_230,_231,_22f.obclone);};},updateMultiMarkerOpenBubbleHandler:function(_232,_233){var me=this;_232.clearReferencedMarkers();for(var i=0;i<_233.length;i++){if(_233[i].marker){_232.addReferencedMarker(_233[i].marker);}}_232.openBubble=function(){me._handleMultiMarkerOpenBubble(_232,_233,_232.obclone);};},enableMultiMarker:function(_234,_235){_234.obclone=this._cloneMarkerOpenBubbleImplementation(_234);this.updateMultiMarkerOpenBubbleHandler(_234,_235);},_isTemplateLoaded:function(_236,id){return this._templateCache[_236]&&this._templateCache[_236][id];},_isSummaryTemplateLoaded:function(_237,id){return this._summaryTemplateCache[_237]&&this._summaryTemplateCache[_237][id];},_getTemplate:function(_238,id){return this._templateCache[_238][id];},_getSummaryTemplate:function(_239,id){return this._summaryTemplateCache[_239][id];},_getSummaryTemplateWidget:function(_23a,id){var _23b=this._getSummaryTemplate(_23a,id);var _23c=new _22b();_23c.setContent(_23b);return _23c;},_onTemplateLoaded:function(html,_23d,_23e,fct){var _23f=_23e.mboName;var id=_23e.uid.value;this._updateTemplate(_23f,id,html);this._openMapTip(_23f,id,_23d,fct);},_updateTemplate:function(_240,id,html){if(!this._templateCache.hasOwnProperty(_240)){this._templateCache[_240]={};}this._templateCache[_240][id]=html;},_updateSummaryTemplate:function(_241,id,html){if(!this._summaryTemplateCache.hasOwnProperty(_241)){this._summaryTemplateCache[_241]={};}this._summaryTemplateCache[_241][id]=html;},_openMapTip:function(_242,id,_243,fct){var html=this._getTemplate(_242,id);var _244=this._getMenuData(_242);var _245=this._createInfoDOM(html,_244,_242,id);_243.setInfoBubble(_245);fct.apply(_243);},_openMapTipSummary:function(_246,_247,fct){var _248=new _22a();var div=dojo.create("div");for(var i=0;i<_246.length;i++){var _249=_246[i].mxdata.mboName;var id=_246[i].mxdata.uid.value;var _24a=this._getSummaryTemplateWidget(_249,id);if(_246[i].marker){_24a.setMarkerOpenBubbleFunction(_246[i].marker.openBubble);}dojo.place(_24a.domNode,div,"last");if(i<(_246.length-1)){dojo.place("<hr>",div,"last");if(dojo.isIE){dojo.style(div,"width","200px");}}}dojo.place(div,_248.infoSummaryPanel,"last");var _24b=dojo.create("div",{style:{overflow:"auto",marginTop:"8px",maxHeight:"300px"}});dojo.place(_248.infoSummaryPanel,_24b,"only");_247.setInfoBubble(_24b);fct.apply(_247);},_createInfoDOM:function(html,_24c,_24d,_24e){var _24f=dojo.create("div",{style:{overflow:"auto",marginTop:"8px",maxHeight:"300px"}});var _250=dojo.create("div",{innerHTML:html},_24f);if(_24c){var _251=dojo.create("div",null,_24f);this._newSelect(_24c,_251,_24d,_24e);}return _24f;},_handleOpenBubble:function(_252,_253,_254,fct){var _255=_253.mboName;if(this._isMenuLoaded(_255)){this._loadTemplate(_253,_254,_252,fct);}else{this._loadMenu(_253,_254,_252,fct);}},_handleMultiMarkerOpenBubble:function(_256,_257,fct){this._loadMultipleSummaryTemplate(_257,_256,fct);},_loadMenu:function(_258,_259,_25a,fct){var _25b=dojo.hitch(this,function(data){this._onMenuLoaded(data,_25a,_258,_259,fct);});var _25c=dojo.hitch(this,function(_25d){this._onMenuLoadError(_25d,_25a,_258,fct);});this.maximo.loadMapTipItems(_25b,_25c);},_loadTemplate:function(_25e,_25f,_260,fct){var _261=dojo.hitch(this,function(data){this._onTemplateLoaded(data,_260,_25e,fct);});var _262=dojo.hitch(this,function(_263){this._onTemplateLoadError(_263,_260,_25e,fct);});this.maximo.loadMapTipTemplate(_25e,_25f,_261,_262);},_loadMultipleSummaryTemplate:function(_264,_265,fct){var _266=0;var _267=dojo.hitch(this,function(_268){this._onTemplateLoadError(_268,_265,fct);});var _269=dojo.hitch(this,function(data){var _26a=_264[_266].mxdata.mboName;var id=_264[_266].mxdata.uid.value;this._updateSummaryTemplate(_26a,id,data);_266+=1;if(_266<_264.length){this.maximo.loadMapTipSummaryTemplate(_264[_266].mxdata,_264[_266].maptipoverrides,_269,_267);}else{this._openMapTipSummary(_264,_265,fct);}});this.maximo.loadMapTipSummaryTemplate(_264[_266].mxdata,_264[_266].maptipoverrides,_269,_267);},_onTemplateLoadError:function(_26b,_26c,fct){_26c.setInfoBubble("Error loading maptip "+_26b);fct.apply(_26c);},_onMenuLoadError:function(_26d,_26e,_26f,fct){_26e.setInfoBubble("Error loading maptipmenu "+_26d);fct.apply(_26e);},_onMenuLoaded:function(_270,_271,_272,_273,fct){for(var _274 in _270){var _275=_270[_274];this._updateMenu(_274,_275);}this._loadTemplate(_272,_273,_271,fct);},_updateMenu:function(_276,_277){var _278=ibm.tivoli.fwm.i18n.getMaxMsg("map","moredetailsaboutrecord");var _279=[{value:"noaction",label:_278,selected:true}];for(var _27a in _277){var _27b={value:_277[_27a],label:_277[_27a].name};_27b.itemData=_277[_27a];_279.push(_27b);}this._menuCache[_276]=_279;},_isMenuLoaded:function(_27c){return this._menuCache[_27c]!=null;},_newSelect:function(_27d,div,_27e,_27f){var _280;var _281=dojo.hitch(this,function(item){if("noaction"!=""+item){this.maximo.showMaximoDialog(item.dialogid,_27e,_27f,item.relationship);_280.reset();}});_280=new _229({onChange:_281},div);_280.addOption(_27d);_280.reset();_280.startup();if(navigator.userAgent.indexOf("Android")>-1){var _282="40px";_280.domNode.style.height=_282;var _283=_280.openDropDown;_280.openDropDown=function(){var _284=_280.dropDown.getChildren();_284.forEach(function(item){item.domNode.style.height=_282;});_283.apply(_280,arguments);};}},_getMenuData:function(_285){return this._menuCache[_285];},destroyRecursive:function(){this._templateCache={};this._summaryTemplateCache={};}});});},"ibm/tivoli/fwm/mxmap/toolbar/ext/QueryUnassignedWorkDispatcherTool":function(){define(["dojo/main","dojo/_base/declare","ibm/tivoli/fwm/mxmap/toolbar/ext/QueryUnassignedWorkTool","dijit/form/Button"],function(dojo,_286,_287,_288){return _286([_287],{lastDateIntervalsData:null,dispatcherDefaultRefreshOptions:null,constructor:function(_289){this.inherited(arguments);this.addSubscription("onMapRefresh_"+this.map.getId(),dojo.hitch(this,this._onMapRefresh));this.addSubscription("onDispatcherRefresh_"+this.map.getId(),dojo.hitch(this,this._onDispatcherRefresh));this.dispatcherDefaultRefreshOptions={zoom:false,disableMsgs:false,automatic:true};},executeOn:function(_28a){if(this.lastDateIntervalsData!=null){this.map.getMaximo().queryUnassignedWorkDispatcher(this.lastDateIntervalsData,dojo.hitch(this,function(data){this.queryReturned(data,this.dispatcherDefaultRefreshOptions);}),dojo.hitch(this,this.cancelQuery));}},_onMapRefresh:function(_28b){this._refreshUnassignedWorkOrders();},_onDispatcherRefresh:function(data){this.lastDateIntervalsData={queryData:data};this._refreshUnassignedWorkOrders();},_refreshUnassignedWorkOrders:function(){if(this.isActive()==true){this.executeOff();this.executeOn({refreshOptions:this.dispatcherDefaultRefreshOptions});}}});});},"ibm/tivoli/fwm/mxmap/layers/LegendLayer":function(){define(["dojo/_base/declare","ibm/tivoli/fwm/mxmap/layers/Layer"],function(_28c,_28d){return _28c([_28d],{symbol:null,minValue:null,maxValue:null,isDefault:false,init:function(){this._disabled=false;this.inherited(arguments);this._setRightIconURL();},enableButDontRedrawMarkers:function(){this._disabled=false;this._setLeftIconURL();},enable:function(){this.enableButDontRedrawMarkers();this._map.getLayersManager().redrawMarkers();},disable:function(){this._disabled=true;this._setLeftIconURL();this._map.getLayersManager().redrawMarkers();},getSymbolURL:function(){var _28e=null;if(this.symbol!=null){_28e=this.symbol.url;}return _28e;},getMinValue:function(){return this.minValue;},getMaxValue:function(){return this.maxValue;},isDefaultLegend:function(){return this.isDefault;},_setRightIconURL:function(){this._rightIconURL=this.getSymbolURL();}});});},"ibm/tivoli/fwm/mxmap/layers/manager/LayersManager":function(){define(["dojo/main","dojo/_base/declare","ibm/tivoli/fwm/mxmap/_Base","ibm/tivoli/fwm/mxmap/layers/Layer","ibm/tivoli/fwm/mxmap/ImageLibraryManager","ibm/tivoli/fwm/mxmap/layers/VirtualLayer"],function(dojo,_28f,_290,_291,_292,_293){return _28f([_290],{_layers:null,_layersById:null,symbManager:null,_map:null,_mboMarkerOptions:null,_visibleLayers:null,constructor:function(_294){dojo.mixin(this,_294);this._layers={};this._layersById={};this._visibleLayers=[];this._map=_294.map;this._multiMarkerOptions=new this.MultiMarkerOptionsTable();this.addSubscription("addRecordsToLayer_"+this._map.getId(),dojo.hitch(this,this.addRecordCustomLayer));this.addSubscription("removeRecordsFromLayer_"+this._map.getId(),dojo.hitch(this,this.removeRecordsFromLayer));this.addSubscription("removeLayer_"+this._map.getId(),dojo.hitch(this,this.removeLayerByName));this.addSubscription("changeLayerLatLngSource_"+this._map.getId(),dojo.hitch(this,this.changeLayerLatLngSource));},getVisibleLayers:function(){return this._visibleLayers;},addVisibleLayer:function(_295){var _296=this._visibleLayers.indexOf(_295);if(_296<0){this._visibleLayers.push(_295);}if(this._visibleLayers.length===0){this._visibleLayers.push(-1);}},removeVisibleLayer:function(_297){var _298=this._visibleLayers.indexOf(_297);if(_298>-1){this._visibleLayers.splice(_298,1);}if(this._visibleLayers.length===0){this._visibleLayers.push(-1);}},addRecord:function(_299,_29a){var _29b=this._getLayerForMbo(_299);_29b.addRecord(_299,_29a);},_getLayerForMbo:function(_29c){var _29d=_29c.mxdata.mboName;return this.getLayerForObjectName(_29d);},getLayerForObjectName:function(_29e){var _29f=this.getLayerById(_29e);if(_29f==null){_29f=new _291({layerId:_29e.toLowerCase(),layerType:ibm.tivoli.fwm.mxmap.layers.LayerType.LAYER,symbManager:this.symbManager,map:this.map});this.addLayer(_29f,false);_29f.enable();}return _29f;},getLayerIdForMbo:function(_2a0){var _2a1=_2a0.mxdata.mboName;return this.getLayerForObjectName(_2a1).getLayerId();},removeRecord:function(_2a2){var _2a3=_2a2.mxdata.mboName;var _2a4=this.getLayerById(_2a3);if(_2a4!=null){_2a4.removeRecord(_2a2);}},addRecordCustomLayer:function(_2a5,data,_2a6,_2a7,_2a8,_2a9){if(data.length>0){var _2aa=this.getLayerById(_2a5);if(_2aa==null){_2aa=new _293({layerId:_2a5,layerType:ibm.tivoli.fwm.mxmap.layers.LayerType.VIRTUAL_LAYER,symbManager:this.symbManager,map:this.map,objectType:data[0].mxdata.mboName});}this.resetLayer(_2aa,_2a9);for(var i in data){_2aa.addRecord(data[i]);}}},removeLayerByName:function(_2ab,_2ac,_2ad){var _2ae=this.getLayer(_2ab);if(_2ae){_2ae.removeMXRecordSetData();if(_2ac!=true){this._layers[_2ab]=null;delete this._layers[_2ab];}}if(_2ad&&this._layersById[_2ad]){this._layersById[_2ad]=null;}},removeLayer:function(_2af){delete this._layersById[_2af.getLayerId()];delete this._layers[_2af.getLayerName()];},addLayer:function(_2b0,_2b1){var _2b2=_2b0.getLayerName();var _2b3=_2b0.getLayerId();if(dojo.config.fwm.debug==true){}var _2b4=this.getLayer(_2b2);if(_2b4){if(_2b1){this.removeLayerByName(_2b2,false,_2b3);}_2b4.addMXRecordSet(_2b0.getMXRecordSet());}else{this._layers[_2b2]=_2b0;if(_2b3){this._layersById[_2b3]=_2b0;}}},resetLayer:function(_2b5,_2b6){var _2b7=_2b5.getLayerName();var _2b8=_2b5.getLayerId();var _2b9=this.getLayer(_2b7);if(_2b9){this.removeLayerByName(_2b7,false,_2b8);}if(_2b7){this._layers[_2b7]=_2b5;}if(_2b8){this._layersById[_2b8]=_2b5;}if(_2b5.isDisabled()&&_2b6!=true){_2b5.enable();}},showLayer:function(_2ba){var _2bb=this.getLayer(_2ba);if(_2bb){_2bb.show();}else{console.warn("[LayersManager] Cannot show layer "+_2ba+" because it was not found.");}},hideLayer:function(_2bc){var _2bd=this.getLayer(_2bc);if(_2bd){_2bd.hide();}else{console.warn("[LayersManager] Cannot hide layer "+_2bc+" because it was not found.");}},getLayer:function(_2be){if(this._layers.hasOwnProperty(_2be)==true){return this._layers[_2be];}return null;},redrawMarkers:function(){for(var key in this._layers){this._layers[key].redrawMarkers();}},getLayerById:function(_2bf){_2bf=_2bf.toLowerCase();for(id in this._layersById){var _2c0=id.toLowerCase();if(_2c0==_2bf){return this._layersById[id];}}return null;},getLayers:function(){var _2c1=[];for(var key in this._layers){_2c1.push(this._layers[key]);}return _2c1;},removeRecordsFromLayer:function(_2c2,data){var _2c3=this.getLayer(_2c2);if(_2c3){for(var i=0;i<data.length;i++){_2c3.removeRecord(data[i]);}}else{}this._map.refreshMap();},_getLayerByIdOrDefaultForMbo:function(_2c4,_2c5){if(_2c4){return this.getLayerById(_2c4);}else{return this._getLayerForMbo(_2c5);}},setMboMarkerInfo:function(_2c6,opt,_2c7){var _2c8=this._getLayerByIdOrDefaultForMbo(_2c7,_2c6);return _2c8.setMboMarkerInfo(_2c6,opt);},getMboMarkerInfo:function(_2c9,_2ca){var _2cb=this._getLayerByIdOrDefaultForMbo(_2ca,_2c9);return _2cb.getMboMarkerInfo(_2c9);},getLegendForRecord:function(_2cc,_2cd){var lyr=_2cd;var _2ce=null;var _2cf=null;var _2d0=this.symbManager.getActiveSymbology(lyr.getLayerId());if(_2d0==null){lyr=this.getLayerById(_2cc.mxdata.mboName);if(lyr){_2d0=this.symbManager.getActiveSymbology(lyr.getLayerId());}}if(_2d0!=null){symbologyFound=dojo.filter(lyr.getChildren(),function(_2d1){return (_2d1.getLayerId()==_2d0.id);});if(symbologyFound.length>0){var _2ce=symbologyFound[0];if(_2d0.id=="fwm_default"){_2cf=this._getDefaultLegend(_2ce);}else{if(_2d0.type=="numeric"){_2cf=this._getNumericLegend(_2cc,_2ce);}else{if(_2d0.type=="domainvalue"||_2d0.type=="tablevalue"){_2cf=this._getDomainLegend(_2cc,_2ce);}else{_2cf=this._getDefaultLegend(_2ce);}}}}}return _2cf;},_getDefaultLegend:function(_2d2){var _2d3=_2d2.getChildren();var _2d4=dojo.filter(_2d3,function(_2d5){return _2d5.getLayerConfig().isDefault==true;});return _2d4.length>0?_2d4[0]:null;},_getNumericLegend:function(_2d6,_2d7){var _2d8=_2d7.getChildren();var val=_2d6.mxdata.attributes[_2d7.getLayerId()];if(val==""){val="null";var _2d9=dojo.filter(_2d8,function(_2da){return (_2da.getLayerId()==val);});return (_2d9.length>0?_2d9[0]:this._getDefaultLegend(_2d7));}else{if(!val){return this._getDefaultLegend(_2d7);}else{var _2db=parseInt(val);var _2d9=dojo.filter(_2d8,function(_2dc){return (_2db>=parseInt(_2dc.getLayerConfig().minValue)&&_2db<=parseInt(_2dc.getLayerConfig().maxValue));});return (_2d9.length>0?_2d9[0]:this._getDefaultLegend(_2d7));}}},_getDomainLegend:function(_2dd,_2de){var _2df=_2de.getChildren();var _2e0=String(_2dd.mxdata.attributes[_2de.getLayerId()]).toLowerCase();if(_2e0==""){_2e0="null";}var _2e1=dojo.filter(_2df,function(_2e2){return (_2e2.getLayerId()==_2e0);});return (_2e1.length>0?_2e1[0]:this._getDefaultLegend(_2de));},isLegendEnabledForRecord:function(_2e3){var _2e4=true;if(_2e3!=null){if(_2e3.isDisabled()==true){_2e4=false;}}return _2e4;},resetLegends:function(_2e5,_2e6){var _2e7=_2e5.getChildren();for(var i=0;i<_2e7.length;i++){_2e7[i].enableButDontRedrawMarkers();}if(!_2e6){this.redrawMarkers();}},resetSymbologies:function(_2e8,_2e9){var _2ea=_2e8.getChildren();for(var i=0;i<_2ea.length;i++){this.resetLegends(_2ea[i],true);if(_2ea[i].isDefault()){_2ea[i].toggleStateButDontRedrawMarkers();}}if(!_2e9){this.redrawMarkers();}},resetLayers:function(){for(var _2eb in this._layers){var _2ec=this._layers[_2eb];if(_2ec.getLayerId()!="traffic"){this.resetSymbologies(_2ec,true);if(_2ec.isDisabled()){_2ec.enable();}else{_2ec.redrawMarkers();}}else{_2ec.disable();}}},iterateOverAllRecords:function(fct){for(var _2ed in this._layers){var _2ee=this._layers[_2ed];var _2ef=_2ee.getRecords();for(var i=0;i<_2ef.length;i++){if(fct){fct(_2ef[i]);}}}},addRecordsAtTheSameSpotReferences:function(_2f0){recordsAtTheSameSpot=[];this.iterateOverAllRecords(dojo.hitch(this,function(_2f1){if((_2f1.isOnMap==true)){if(!this.areMboInfosEqual(_2f0,_2f1)){if(this.areMbosAtTheSameSpot(_2f0,_2f1)){if(_2f0.recordsAtTheSameSpot==undefined){_2f0.recordsAtTheSameSpot=[];}if(_2f1.recordsAtTheSameSpot==undefined){_2f1.recordsAtTheSameSpot=[];}_2f0.recordsAtTheSameSpot.push(_2f1);_2f1.recordsAtTheSameSpot.push(_2f0);recordsAtTheSameSpot.push(_2f1);}}}}));recordsAtTheSameSpot.push(_2f0);return recordsAtTheSameSpot;},removeRecordsAtTheSameSpotReferences:function(_2f2){var _2f3=[];var _2f4=null;if(_2f2.recordsAtTheSameSpot!=undefined){if(_2f2.recordsAtTheSameSpot.length>0){while(_2f2.recordsAtTheSameSpot.length){_2f4=_2f2.recordsAtTheSameSpot.shift();if(_2f4.recordsAtTheSameSpot!=undefined){_2f3.push(_2f4);for(var i=0;i<_2f4.recordsAtTheSameSpot.length;i++){if(this.areMboInfosEqual(_2f2,_2f4.recordsAtTheSameSpot[i])){_2f4.recordsAtTheSameSpot.splice(i,1);i--;}}}}}}return _2f3;},areMboInfosEqual:function(_2f5,_2f6){var _2f7=(_2f5.mxdata.mboName==_2f6.mxdata.mboName)&&(_2f5.mxdata.uid.value==_2f6.mxdata.uid.value);if((_2f5.extrakey!=null)&&(_2f5.extrakey!=undefined)&&(_2f6.extrakey!=null)&&(_2f6.extrakey!=undefined)){if(_2f5.extrakey!=_2f6.extrakey){_2f7=false;}}return (_2f7);},areMbosAtTheSameSpot:function(_2f8,_2f9){var _2fa=false;var _2fb=this.map.getLatLngFromMboInfo(_2f8);var _2fc=this.map.getLatLngFromMboInfo(_2f9);if((_2fb!=null)&&(_2fc!=null)){_2fa=((_2fb.lat==_2fc.lat)&&(_2fb.lng==_2fc.lng));}return _2fa;},setMultiMarkerInfo:function(_2fd,opt){return this._multiMarkerOptions.setMultiMarkerInfo(_2fd,opt);},getMultiMarkerInfo:function(_2fe){return this._multiMarkerOptions.getMultiMarkerInfo(_2fe);},changeLayerLatLngSource:function(_2ff,_300){var _301=this.getLayerById(_2ff);if(_301){_301.setUseLBSPosition(_300);this._map.refreshMap();}},getMultiMarkerInfoUsingGisData:function(mbo){return this._multiMarkerOptions.getMultiMarkerInfoUsingGisData(mbo);},MultiMarkerOptionsTable:function(){this.multiMarkersOnMap={};this.setMultiMarkerInfo=function(_302,opt){this._createMultiMarkerHashRecord(_302);for(var _303 in opt){this.multiMarkersOnMap[_302.pointInCurrentSR.lat][_302.pointInCurrentSR.lng][_303]=opt[_303];}};this._createMultiMarkerHashRecord=function(_304){if(!this.multiMarkersOnMap[_304.pointInCurrentSR.lat]){this.multiMarkersOnMap[_304.pointInCurrentSR.lat]={};}if(!this.multiMarkersOnMap[_304.pointInCurrentSR.lat][_304.pointInCurrentSR.lng]){this.multiMarkersOnMap[_304.pointInCurrentSR.lat][_304.pointInCurrentSR.lng]={};}};this.getMultiMarkerInfo=function(_305){if(_305==null||!_305.pointInCurrentSR){return null;}if(!this.multiMarkersOnMap[_305.pointInCurrentSR.lat]){return null;}if(!this.multiMarkersOnMap[_305.pointInCurrentSR.lat][_305.pointInCurrentSR.lng]){return null;}return this.multiMarkersOnMap[_305.pointInCurrentSR.lat][_305.pointInCurrentSR.lng];};this.getMultiMarkerInfoUsingGisData=function(mbo){if(mbo==null||!mbo.gisdata){return null;}if(!this.multiMarkersOnMap[mbo.gisdata.lat]){return null;}if(!this.multiMarkersOnMap[mbo.gisdata.lat][mbo.gisdata.lng]){return null;}return this.multiMarkersOnMap[mbo.gisdata.lat][mbo.gisdata.lng];};}});});},"ibm/tivoli/fwm/mxmap/helpers/GeocoderHelper":function(){define(["dojo/_base/declare","ibm/tivoli/fwm/mxmap/_Base","ibm/tivoli/fwm/mxmap/util/AddressCandidatesFormatter","ibm/tivoli/fwm/mxmap/panels/MobileInfoPanelDialog","ibm/tivoli/fwm/i18n"],function(_306,_307,_308,_309,i18n){ibm.tivoli.fwm.mxmap.GeoCodeErrorCodes={ZERO_RESULTS:"ZERO_RESULTS",INVALID_REQUEST:"INVALID_REQUEST",REQUEST_DENIED:"REQUEST_DENIED",OVER_LIMIT:"OVER_LIMIT",UNKNOWN:"UNKNOWN"};return _306([_307],{map:null,key:null,_geocode:null,_candidateDialog:null,constructor:function(_30a){dojo.mixin(this,_30a);this.addSubscription("mxmap_geocoder_"+this.map.getId(),dojo.hitch(this,this.findLocation));this.addSubscription("addressCandidateSelectedOnMapId_"+this.map.getId(),dojo.hitch(this,this._addressCandidateSelected));},findLocation:function(_30b,_30c,_30d){if(!_30b||_30b.length==0){return;}if(!_30d){_30d=dojo.hitch(this,this.errorDuringGeocode);}if(!_30c){_30c=dojo.hitch(this,this.returnFindLocation);}this.map.geocode(_30c,_30d,this.key,_30b);},reverseGeocode:function(lat,lng,_30e,_30f){if(!_30f){_30f=dojo.hitch(this,this.errorDuringGeocode);}if(!_30e){_30e=dojo.hitch(this,this.returnUpdateAddress);}this.map.reverseGeocode(_30e,_30f,this.key,lat,lng);},convertGeocodedAddressIntoFormattedAddress:function(_310){return _310.formattedAddress;},returnFindLocation:function(_311){if(this.map.mapConf.provider=="spatial"){this.map.hideLoadingImg();}if(dojo.config.fwm.debug==true){}if(_311.length==1){var _312=_311[0];this.map.getMaximo().setCurrentRecordLocation({lat:_312.point.lat,lng:_312.point.lng,address:this.convertGeocodedAddressIntoFormattedAddress(_312)});dojo.publish("findLocationSelected",[]);}else{var me=this;var _313=ibm.tivoli.fwm.i18n.getMaxMsg("map","addresscandidates");var zInd=100000;if(this._candidateDialog==null){this._candidateDialog=new _309({map:me.map,title:_313,nonModal:true});}var _314=_308.createHTMLDOMWithList(_311,this.map.getId(),this._candidateDialog.getCalculatedWidth(),this._candidateDialog.getCalculatedHeight());this._candidateDialog.setContent(_314);this._candidateDialog.show();this._candidateDialog._theDialog.domNode.style.zIndex=zInd;}},returnUpdateAddress:function(_315){this.map.getMaximo().setCurrentRecordLocation({address:this.convertGeocodedAddressIntoFormattedAddress(_315)});},errorDuringGeocode:function(_316){switch(_316){case ibm.tivoli.fwm.mxmap.GeoCodeErrorCodes.ZERO_RESULTS:this.map.getMaximo().showMessage("mapserver","geocode_noresults");break;case ibm.tivoli.fwm.mxmap.GeoCodeErrorCodes.INVALID_REQUEST:this.map.getMaximo().showMessage("mapserver","geocode_invalid_req");break;case ibm.tivoli.fwm.mxmap.GeoCodeErrorCodes.REQUEST_DENIED:this.map.getMaximo().showMessage("mapserver","geocode_req_denied");break;case ibm.tivoli.fwm.mxmap.GeoCodeErrorCodes.OVER_LIMIT:this.map.getMaximo().showMessage("mapserver","geocode_limits_exceed");break;case ibm.tivoli.fwm.mxmap.GeoCodeErrorCodes.UNKNOWN:this.map.getMaximo().showMessage("mapserver","geocode_unknown_error");break;default:this.map.getMaximo().showMessage("mapserver","geocode_unknown_error");break;}if(this.map.mapConf.provider=="spatial"){this.map.hideLoadingImg();}},_addressCandidateSelected:function(_317){if(this._candidateDialog){this._candidateDialog.close();this._candidateDialog=null;}this.returnFindLocation([_317]);}});});},"dojo/parser":function(){define(["require","./_base/kernel","./_base/lang","./_base/array","./_base/config","./dom","./_base/window","./_base/url","./aspect","./promise/all","./date/stamp","./Deferred","./has","./json5","./query","./on","./ready"],function(_318,dojo,_319,_31a,_31b,dom,_31c,_31d,_31e,all,_31f,_320,has,_321,_322,don,_323){new Date("X");var _324;if(has("csp-restrictions")){_324=_321.parse;}else{_324=function(text){return eval("("+text+")");};}var _325=0;_31e.after(_319,"extend",function(){_325++;},true);function _326(ctor){var map=ctor._nameCaseMap,_327=ctor.prototype;if(!map||map._extendCnt<_325){map=ctor._nameCaseMap={};for(var name in _327){if(name.charAt(0)==="_"){continue;}map[name.toLowerCase()]=name;}map._extendCnt=_325;}return map;};function _328(_329,_32a){if(!_32a){_32a=_318;}var _32b=_32a._dojoParserCtorMap||(_32a._dojoParserCtorMap={});var ts=_329.join();if(!_32b[ts]){var _32c=[];for(var i=0,l=_329.length;i<l;i++){var t=_329[i];_32c[_32c.length]=(_32b[t]=_32b[t]||(_319.getObject(t)||(~t.indexOf("/")&&_32a(t))));}var ctor=_32c.shift();_32b[ts]=_32c.length?(ctor.createSubclass?ctor.createSubclass(_32c):ctor.extend.apply(ctor,_32c)):ctor;}return _32b[ts];};var _32d={_clearCache:function(){_325++;_ctorMap={};},_functionFromScript:function(_32e,_32f){var _330="",_331="",_332=(_32e.getAttribute(_32f+"args")||_32e.getAttribute("args")),_333=_32e.getAttribute("with");var _334=(_332||"").split(/\s*,\s*/);if(_333&&_333.length){_31a.forEach(_333.split(/\s*,\s*/),function(part){_330+="with("+part+"){";_331+="}";});}return new Function(_334,_330+_32e.innerHTML+_331);},instantiate:function(_335,_336,_337){_336=_336||{};_337=_337||{};var _338=(_337.scope||dojo._scopeName)+"Type",_339="data-"+(_337.scope||dojo._scopeName)+"-",_33a=_339+"type",_33b=_339+"mixins";var list=[];_31a.forEach(_335,function(node){var type=_338 in _336?_336[_338]:node.getAttribute(_33a)||node.getAttribute(_338);if(type){var _33c=node.getAttribute(_33b),_33d=_33c?[type].concat(_33c.split(/\s*,\s*/)):[type];list.push({node:node,types:_33d});}});return this._instantiate(list,_336,_337);},_instantiate:function(_33e,_33f,_340,_341){var _342=_31a.map(_33e,function(obj){var ctor=obj.ctor||_328(obj.types,_340.contextRequire);if(!ctor){throw new Error("Unable to resolve constructor for: '"+obj.types.join()+"'");}return this.construct(ctor,obj.node,_33f,_340,obj.scripts,obj.inherited);},this);function _343(_344){if(!_33f._started&&!_340.noStart){_31a.forEach(_344,function(_345){if(typeof _345.startup==="function"&&!_345._started){_345.startup();}});}return _344;};if(_341){return all(_342).then(_343);}else{return _343(_342);}},construct:function(ctor,node,_346,_347,_348,_349){var _34a=ctor&&ctor.prototype;_347=_347||{};var _34b={};if(_347.defaults){_319.mixin(_34b,_347.defaults);}if(_349){_319.mixin(_34b,_349);}var _34c;if(has("dom-attributes-explicit")){_34c=node.attributes;}else{if(has("dom-attributes-specified-flag")){_34c=_31a.filter(node.attributes,function(a){return a.specified;});}else{var _34d=/^input$|^img$/i.test(node.nodeName)?node:node.cloneNode(false),_34e=_34d.outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,"");_34c=_31a.map(_34e.split(/\s+/),function(name){var _34f=name.toLowerCase();return {name:name,value:(node.nodeName=="LI"&&name=="value")||_34f=="enctype"?node.getAttribute(_34f):node.getAttributeNode(_34f).value};});}}var _350=_347.scope||dojo._scopeName,_351="data-"+_350+"-",hash={};if(_350!=="dojo"){hash[_351+"props"]="data-dojo-props";hash[_351+"type"]="data-dojo-type";hash[_351+"mixins"]="data-dojo-mixins";hash[_350+"type"]="dojotype";hash[_351+"id"]="data-dojo-id";}var i=0,item,_352=[],_353,_354;while(item=_34c[i++]){var name=item.name,_355=name.toLowerCase(),_356=item.value;switch(hash[_355]||_355){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":_354=_356;break;case "data-dojo-id":case "jsid":_353=_356;break;case "data-dojo-attach-point":case "dojoattachpoint":_34b.dojoAttachPoint=_356;break;case "data-dojo-attach-event":case "dojoattachevent":_34b.dojoAttachEvent=_356;break;case "class":_34b["class"]=node.className;break;case "style":_34b["style"]=node.style&&node.style.cssText;break;default:if(!(name in _34a)){var map=_326(ctor);name=map[_355]||name;}if(name in _34a){switch(typeof _34a[name]){case "string":_34b[name]=_356;break;case "number":_34b[name]=_356.length?Number(_356):NaN;break;case "boolean":_34b[name]=_356.toLowerCase()!="false";break;case "function":if(_356===""||_356.search(/[^\w\.]+/i)!=-1){_34b[name]=new Function(_356);}else{_34b[name]=_319.getObject(_356,false)||new Function(_356);}_352.push(name);break;default:var pVal=_34a[name];try{_34b[name]=(pVal&&"length" in pVal)?(_356?_356.split(/\s*,\s*/):[]):(pVal instanceof Date)?(_356==""?new Date(""):_356=="now"?new Date():_31f.fromISOString(_356)):(pVal instanceof _31d)?(dojo.baseUrl+_356):_324(_356);}catch(error){console.error(error);}}}else{_34b[name]=_356;}}}for(var j=0;j<_352.length;j++){var _357=_352[j].toLowerCase();node.removeAttribute(_357);node[_357]=null;}if(_354){try{_354=_324.call(_347.propsThis,"{"+_354+"}");_319.mixin(_34b,_354);}catch(e){throw new Error(e.toString()+" in data-dojo-props='"+_354+"'");}}_319.mixin(_34b,_346);if(!_348){_348=(ctor&&(ctor._noScript||_34a._noScript)?[]:_322("> script[type^='dojo/']",node));}var _358=[],_359=[],_35a=[],ons=[];if(_348){for(i=0;i<_348.length;i++){var _35b=_348[i];node.removeChild(_35b);var _35c=(_35b.getAttribute(_351+"event")||_35b.getAttribute("event")),prop=_35b.getAttribute(_351+"prop"),_35d=_35b.getAttribute(_351+"method"),_35e=_35b.getAttribute(_351+"advice"),_35f=_35b.getAttribute("type"),nf=this._functionFromScript(_35b,_351);if(_35c){if(_35f=="dojo/connect"){_358.push({method:_35c,func:nf});}else{if(_35f=="dojo/on"){ons.push({event:_35c,func:nf});}else{_34b[_35c]=nf;}}}else{if(_35f=="dojo/aspect"){_358.push({method:_35d,advice:_35e,func:nf});}else{if(_35f=="dojo/watch"){_35a.push({prop:prop,func:nf});}else{_359.push(nf);}}}}}var _360=ctor.markupFactory||_34a.markupFactory;var _361=_360?_360(_34b,node,ctor):new ctor(_34b,node);function _362(_363){if(_353){_319.setObject(_353,_363);}for(i=0;i<_358.length;i++){_31e[_358[i].advice||"after"](_363,_358[i].method,_319.hitch(_363,_358[i].func),true);}for(i=0;i<_359.length;i++){_359[i].call(_363);}for(i=0;i<_35a.length;i++){_363.watch(_35a[i].prop,_35a[i].func);}for(i=0;i<ons.length;i++){don(_363,ons[i].event,ons[i].func);}return _363;};if(_361.then){return _361.then(_362);}else{return _362(_361);}},scan:function(root,_364){var list=[],mids=[],_365={};var _366=(_364.scope||dojo._scopeName)+"Type",_367="data-"+(_364.scope||dojo._scopeName)+"-",_368=_367+"type",_369=_367+"textdir",_36a=_367+"mixins";var node=root.firstChild;var _36b=_364.inherited;if(!_36b){var _36c=function _36c(node,attr){return (node.getAttribute&&node.getAttribute(attr))||(node.parentNode&&_36c(node.parentNode,attr));};_36b={dir:_36c(root,"dir"),lang:_36c(root,"lang"),textDir:_36c(root,_369)};for(var key in _36b){if(!_36b[key]){delete _36b[key];}}}var _36d={inherited:_36b};var _36e;var _36f;function _370(_371){if(!_371.inherited){_371.inherited={};var node=_371.node,_372=_370(_371.parent);var _373={dir:node.getAttribute("dir")||_372.dir,lang:node.getAttribute("lang")||_372.lang,textDir:node.getAttribute(_369)||_372.textDir};for(var key in _373){if(_373[key]){_371.inherited[key]=_373[key];}}}return _371.inherited;};while(true){if(!node){if(!_36d||!_36d.node){break;}node=_36d.node.nextSibling;_36f=false;_36d=_36d.parent;_36e=_36d.scripts;continue;}if(node.nodeType!=1){node=node.nextSibling;continue;}if(_36e&&node.nodeName.toLowerCase()=="script"){type=node.getAttribute("type");if(type&&/^dojo\/\w/i.test(type)){_36e.push(node);}node=node.nextSibling;continue;}if(_36f){node=node.nextSibling;continue;}var type=node.getAttribute(_368)||node.getAttribute(_366);var _374=node.firstChild;if(!type&&(!_374||(_374.nodeType==3&&!_374.nextSibling))){node=node.nextSibling;continue;}var _375;var ctor=null;if(type){var _376=node.getAttribute(_36a),_377=_376?[type].concat(_376.split(/\s*,\s*/)):[type];try{ctor=_328(_377,_364.contextRequire);}catch(e){}if(!ctor){_31a.forEach(_377,function(t){if(~t.indexOf("/")&&!_365[t]){_365[t]=true;mids[mids.length]=t;}});}var _378=ctor&&!ctor.prototype._noScript?[]:null;_375={types:_377,ctor:ctor,parent:_36d,node:node,scripts:_378};_375.inherited=_370(_375);list.push(_375);}else{_375={node:node,scripts:_36e,parent:_36d};}_36e=_378;_36f=node.stopParser||(ctor&&ctor.prototype.stopParser&&!(_364.template));_36d=_375;node=_374;}var d=new _320();if(mids.length){if(has("dojo-debug-messages")){console.warn("WARNING: Modules being Auto-Required: "+mids.join(", "));}var r=_364.contextRequire||_318;r(mids,function(){d.resolve(_31a.filter(list,function(_379){if(!_379.ctor){try{_379.ctor=_328(_379.types,_364.contextRequire);}catch(e){}}var _37a=_379.parent;while(_37a&&!_37a.types){_37a=_37a.parent;}var _37b=_379.ctor&&_379.ctor.prototype;_379.instantiateChildren=!(_37b&&_37b.stopParser&&!(_364.template));_379.instantiate=!_37a||(_37a.instantiate&&_37a.instantiateChildren);return _379.instantiate;}));});}else{d.resolve(list);}return d.promise;},_require:function(_37c,_37d){var hash=_324("{"+_37c.innerHTML+"}"),vars=[],mids=[],d=new _320();var _37e=(_37d&&_37d.contextRequire)||_318;for(var name in hash){vars.push(name);mids.push(hash[name]);}_37e(mids,function(){for(var i=0;i<vars.length;i++){_319.setObject(vars[i],arguments[i]);}d.resolve(arguments);});return d.promise;},_scanAmd:function(root,_37f){var _380=new _320(),_381=_380.promise;_380.resolve(true);var self=this;_322("script[type='dojo/require']",root).forEach(function(node){_381=_381.then(function(){return self._require(node,_37f);});node.parentNode.removeChild(node);});return _381;},parse:function(_382,_383){if(_382&&typeof _382!="string"&&!("nodeType" in _382)){_383=_382;_382=_383.rootNode;}var root=_382?dom.byId(_382):_31c.body();_383=_383||{};var _384=_383.template?{template:true}:{},_385=[],self=this;var p=this._scanAmd(root,_383).then(function(){return self.scan(root,_383);}).then(function(_386){return self._instantiate(_386,_384,_383,true);}).then(function(_387){return _385=_385.concat(_387);}).otherwise(function(e){console.error("dojo/parser::parse() error",e);throw e;});_319.mixin(_385,p);return _385;}};if(1){dojo.parser=_32d;}if(_31b.parseOnLoad){_323(100,_32d,"parse");}return _32d;});},"dijit/form/ToggleButton":function(){define(["dojo/_base/declare","dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(_388,_389,_38a,_38b){return _388("dijit.form.ToggleButton",[_38a,_38b],{baseClass:"dijitToggleButton",setChecked:function(_38c){_389.deprecated("setChecked("+_38c+") is deprecated. Use set('checked',"+_38c+") instead.","","2.0");this.set("checked",_38c);}});});},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(lang,_38d){var _38e={};lang.setObject("dojo.date.stamp",_38e);_38e.fromISOString=function(_38f,_390){if(!_38e._isoRegExp){_38e._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;}var _391=_38e._isoRegExp.exec(_38f),_392=null;if(_391){_391.shift();if(_391[1]){_391[1]--;}if(_391[6]){_391[6]*=1000;}if(_390){_390=new Date(_390);_38d.forEach(_38d.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(prop){return _390["get"+prop]();}),function(_393,_394){_391[_394]=_391[_394]||_393;});}_392=new Date(_391[0]||1970,_391[1]||0,_391[2]||1,_391[3]||0,_391[4]||0,_391[5]||0,_391[6]||0);if(_391[0]<100){_392.setFullYear(_391[0]||1970);}var _395=0,_396=_391[7]&&_391[7].charAt(0);if(_396!="Z"){_395=((_391[8]||0)*60)+(Number(_391[9])||0);if(_396!="-"){_395*=-1;}}if(_396){_395-=_392.getTimezoneOffset();}if(_395){_392.setTime(_392.getTime()+_395*60000);}}return _392;};_38e.toISOString=function(_397,_398){var _399=function(n){return (n<10)?"0"+n:n;};_398=_398||{};var _39a=[],_39b=_398.zulu?"getUTC":"get",date="";if(_398.selector!="time"){var year=_397[_39b+"FullYear"]();date=["0000".substr((year+"").length)+year,_399(_397[_39b+"Month"]()+1),_399(_397[_39b+"Date"]())].join("-");}_39a.push(date);if(_398.selector!="date"){var time=[_399(_397[_39b+"Hours"]()),_399(_397[_39b+"Minutes"]()),_399(_397[_39b+"Seconds"]())].join(":");var _39c=_397[_39b+"Milliseconds"]();if(_398.milliseconds){time+="."+(_39c<100?"0":"")+_399(_39c);}if(_398.zulu){time+="Z";}else{if(_398.selector!="time"){var _39d=_397.getTimezoneOffset();var _39e=Math.abs(_39d);time+=(_39d>0?"-":"+")+_399(Math.floor(_39e/60))+":"+_399(_39e%60);}}_39a.push(time);}return _39a.join("T");};return _38e;});},"ibm/tivoli/fwm/mxmap/impl/marker/BingMarker":function(){define(["dijit","dojo","dojox","dojo/require!ibm/tivoli/fwm/mxmap/_Marker"],function(_39f,dojo,_3a0){dojo.require("ibm.tivoli.fwm.mxmap._Marker");dojo.provide("ibm.tivoli.fwm.mxmap.impl.marker.BingMarker");dojo.declare("ibm.tivoli.fwm.mxmap.impl.marker.BingMarker",ibm.tivoli.fwm.mxmap._Marker,{toProprietary:function(){var pin;var map=this.map;var _3a1={draggable:this.draggable,visible:true};if(this.labelText!=null&&this.labelText.length>0){_3a1.text=this.labelText;_3a1.textOffset=new Microsoft.Maps.Point(2,6);}if(this.iconUrl){_3a1.icon=this.iconUrl;}if(this.iconSize){_3a1.height=this.iconSize[1]+"px";_3a1.width=this.iconSize[0]+"px";}if(this.iconAnchor){_3a1.anchor=new Microsoft.Maps.Point(this.iconAnchor[0]-2,this.iconAnchor[1]-2);}pin=new Microsoft.Maps.Pushpin(this.location.toProprietary(),_3a1);var me=this;Microsoft.Maps.Events.addHandler(pin,"mouseout",function(){pin.mxmapMarker.dragging=false;});var _3a2=map.getRootElement();if(this.infoBubble){var _3a3=new ibm.tivoli.fwm.mxmap.InfoWindow({map:map,mapId:me.compId,rootElement:_3a2,marker:me,isMobile:this.isMobile});this.proprietary_infowindow=_3a3;Microsoft.Maps.Events.addHandler(pin,"click",function(e){dojo.publish("onMarkerClicked_"+me.compId,[{marker:pin.mxmapMarker}]);if(pin.mxmapMarker.dragging==true){return;}pin.mxmapMarker.openBubble(e);});}if(this.draggable==true){var m=this;Microsoft.Maps.Events.addHandler(pin,"dragstart",function(){dojo.publish("startedUserInteractionOnMap_"+me.compId,[{objectSource:me,objectSourceName:"microsoftv8",eventName:"dragstart"}]);pin.mxmapMarker.hideTooltip();});Microsoft.Maps.Events.addHandler(pin,"drag",function(){pin.mxmapMarker.dragging=true;});Microsoft.Maps.Events.addHandler(pin,"dragend",function(){if(pin.mxmapMarker.dragging!=true){return;}me.fireMarkerEvent(me.MarkerEvents.dragend,{marker:me,newLocation:{lng:pin.getLocation().longitude,lat:pin.getLocation().latitude}});dojo.publish("endedUserInteractionOnMap_"+me.compId,[{objectSource:me,objectSourceName:"microsoftv8",eventName:"dragend"}]);});}if(this.tooltip&&this.tooltip.length>0){Microsoft.Maps.Events.addHandler(pin,"mouseover",function(){var _3a4=map.tryLocationToPixel(pin.getLocation(),Microsoft.Maps.PixelReference.control);pin.mxmapMarker.showTooltip(_3a4,map.getRootElement());});Microsoft.Maps.Events.addHandler(pin,"mouseout",function(){pin.mxmapMarker.hideTooltip();});}if(this.hoverIconUrl){Microsoft.Maps.Events.addHandler(pin,"mouseover",function(){_3a1.icon=hIcon;pin.setOptions(_3a1);});Microsoft.Maps.Events.addHandler(pin,"mouseout",function(){_3a1.icon=hIcon;pin.setOptions(_3a1);});}map.entities.push(pin);return pin;},openBubble:function(){if(this.onmap==true){var me=this;dojo.publish("startedUserInteractionOnMap_"+me.compId,[{objectSource:me,objectSourceName:"microsoftv8",eventName:"openBubble"}]);this.hideTooltip();var _3a5=this.proprietary_infowindow;var loc=this.proprietary_marker.getLocation();var _3a6=this.map.tryLocationToPixel(loc,Microsoft.Maps.PixelReference.control);this.proprietary_infowindow.setContent(this.infoBubble);if(this.hasReferencedMarkers()==true){this.proprietary_infowindow.moveUp();}this.proprietary_infowindow.show(_3a6.x,_3a6.y);var _3a7=this;var map=this.map;Microsoft.Maps.Events.addHandler(map,"viewchange",function(e){var _3a8=_3a7.map.tryLocationToPixel(_3a7.proprietary_marker.getLocation(),Microsoft.Maps.PixelReference.control);_3a5.updatePosition(_3a8.x,_3a8.y);});this.fireMarkerEvent(this.MarkerEvents.openInfoBubble,{"marker":this});var _3a9={zoom:map.getZoom(),center:loc};map.setView(_3a9);this.inherited(arguments);}},closeBubble:function(){if(this.hasOwnProperty("proprietary_infowindow")){this.proprietary_infowindow.close();this.fireMarkerEvent(this.MarkerEvents.closeInfoBubble,{"marker":this});}this.inherited(arguments);},hide:function(){var pin=this.proprietary_marker;pin.setOptions({visible:false});this.hideTooltip();},show:function(){var pin=this.proprietary_marker;pin.setOptions({visible:true});}});});},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","./when"],function(_3aa,lang,_3ab,when){return _3aa("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}return (apn[name]={s:"_"+name+"Setter",g:"_"+name+"Getter"});},postscript:function(_3ac){if(_3ac){this.set(_3ac);}},_get:function(name,_3ad){return typeof this[_3ad.g]==="function"?this[_3ad.g]():this[name];},get:function(name){return this._get(name,this._getAttrNames(name));},set:function(name,_3ae){if(typeof name==="object"){for(var x in name){if(name.hasOwnProperty(x)&&x!="_watchCallbacks"){this.set(x,name[x]);}}return this;}var _3af=this._getAttrNames(name),_3b0=this._get(name,_3af),_3b1=this[_3af.s],_3b2;if(typeof _3b1==="function"){_3b2=_3b1.apply(this,Array.prototype.slice.call(arguments,1));}else{this[name]=_3ae;}if(this._watchCallbacks){var self=this;when(_3b2,function(){self._watchCallbacks(name,_3b0,_3ae);});}return this;},_changeAttrValue:function(name,_3b3){var _3b4=this.get(name);this[name]=_3b3;if(this._watchCallbacks){this._watchCallbacks(name,_3b4,_3b3);}return this;},watch:function(name,_3b5){var _3b6=this._watchCallbacks;if(!_3b6){var self=this;_3b6=this._watchCallbacks=function(name,_3b7,_3b8,_3b9){var _3ba=function(_3bb){if(_3bb){_3bb=_3bb.slice();for(var i=0,l=_3bb.length;i<l;i++){_3bb[i].call(self,name,_3b7,_3b8);}}};_3ba(_3b6["_"+name]);if(!_3b9){_3ba(_3b6["*"]);}};}if(!_3b5&&typeof name==="function"){_3b5=name;name="*";}else{name="_"+name;}var _3bc=_3b6[name];if(typeof _3bc!=="object"){_3bc=_3b6[name]=[];}_3bc.push(_3b5);var _3bd={};_3bd.unwatch=_3bd.remove=function(){var _3be=_3ab.indexOf(_3bc,_3b5);if(_3be>-1){_3bc.splice(_3be,1);}};return _3bd;}});});},"dijit/form/ComboButton":function(){define(["dojo/_base/declare","dojo/keys","../focus","./DropDownButton","dojo/text!./templates/ComboButton.html","../a11yclick"],function(_3bf,keys,_3c0,_3c1,_3c2){return _3bf("dijit.form.ComboButton",_3c1,{templateString:_3c2,_setIdAttr:"",_setTabIndexAttr:["focusNode","titleNode"],_setTitleAttr:"titleNode",optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{"buttonNode":"dijitButtonNode","titleNode":"dijitButtonContents","_popupStateNode":"dijitDownArrowButton"},_focusedNode:null,_onButtonKeyDown:function(evt){if(evt.keyCode==keys[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"]){_3c0.focus(this._popupStateNode);evt.stopPropagation();evt.preventDefault();}},_onArrowKeyDown:function(evt){if(evt.keyCode==keys[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]){_3c0.focus(this.titleNode);evt.stopPropagation();evt.preventDefault();}},focus:function(_3c3){if(!this.disabled){_3c0.focus(_3c3=="start"?this.titleNode:this._popupStateNode);}}});});},"ibm/tivoli/fwm/mxmap/helpers/MapMarkersRefresher":function(){define(["dojo/_base/declare","dojox/timing/_base","ibm/tivoli/fwm/mxmap/_Base"],function(_3c4,_3c5,_3c6){return _3c4([_3c6],{maximo:null,interval:0,_timer:null,_signalCounter:0,map:null,constructor:function(_3c7){dojo.mixin(this,_3c7);dojo.require("dojox.timing");this.addSubscription("startedUserInteractionOnMap_"+this.map.getId(),dojo.hitch(this,this.disableMapRefresh));this.addSubscription("endedUserInteractionOnMap_"+this.map.getId(),dojo.hitch(this,this.checkToEnableMapRefresh));this._signalCounter=0;},start:function(){if(this._timer==null){if(this.interval>0){this._doStart();}else{}}else{}},disableMapRefresh:function(e){this._signalCounter=this._signalCounter+1;},checkToEnableMapRefresh:function(e){this._signalCounter=this._signalCounter-1;if(this._signalCounter<=0){this._signalCounter=0;}},stop:function(){if(this._timer==null){}else{this._timer.stop();this._timer=null;}},_doStart:function(){var that=this;this._timer=new dojox.timing.Timer(this.interval*1000);this._timer.onTick=function(){if(that._signalCounter==0){that.map.autoRefreshMap();}else{}};this._timer.onStart=function(){};this._timer.onStop=function(){};this._timer.start();},getMaximo:function(){return this.maximo;},destroyRecursive:function(){this.stop();this.inherited(arguments);}});});},"dijit/form/_TextBoxMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/sniff","dojo/keys","dojo/_base/lang","dojo/on","../main"],function(_3c8,_3c9,dom,has,keys,lang,on,_3ca){var _3cb=_3c9("dijit.form._TextBoxMixin"+(has("dojo-bidi")?"_NoBidi":""),null,{trim:false,uppercase:false,lowercase:false,propercase:false,maxLength:"",selectOnClick:false,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints);},_setValueAttr:function(_3cc,_3cd,_3ce){var _3cf;if(_3cc!==undefined){_3cf=this.filter(_3cc);if(typeof _3ce!="string"){if(_3cf!==null&&((typeof _3cf!="number")||!isNaN(_3cf))){_3ce=this.filter(this.format(_3cf,this.constraints));}else{_3ce="";}if(this.compare(_3cf,this.filter(this.parse(_3ce,this.constraints)))!=0){_3ce=null;}}}if(_3ce!=null&&((typeof _3ce)!="number"||!isNaN(_3ce))&&this.textbox.value!=_3ce){this.textbox.value=_3ce;this._set("displayedValue",this.get("displayedValue"));}this.inherited(arguments,[_3cf,_3cd]);},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value);},_setDisplayedValueAttr:function(_3d0){if(_3d0==null){_3d0="";}else{if(typeof _3d0!="string"){_3d0=String(_3d0);}}this.textbox.value=_3d0;this._setValueAttr(this.get("value"),undefined);this._set("displayedValue",this.get("displayedValue"));},format:function(_3d1){return _3d1==null?"":(_3d1.toString?_3d1.toString():_3d1);},parse:function(_3d2){return _3d2;},_refreshState:function(){},onInput:function(){},_onInput:function(evt){this._lastInputEventValue=this.textbox.value;this._processInput(this._lastInputProducingEvent||evt);delete this._lastInputProducingEvent;if(this.intermediateChanges){this._handleOnChange(this.get("value"),false);}},_processInput:function(){this._refreshState();this._set("displayedValue",this.get("displayedValue"));},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);function _3d3(e){var _3d4;if(e.type=="keydown"&&e.keyCode!=229){_3d4=e.keyCode;switch(_3d4){case keys.SHIFT:case keys.ALT:case keys.CTRL:case keys.META:case keys.CAPS_LOCK:case keys.NUM_LOCK:case keys.SCROLL_LOCK:return;}if(!e.ctrlKey&&!e.metaKey&&!e.altKey){switch(_3d4){case keys.NUMPAD_0:case keys.NUMPAD_1:case keys.NUMPAD_2:case keys.NUMPAD_3:case keys.NUMPAD_4:case keys.NUMPAD_5:case keys.NUMPAD_6:case keys.NUMPAD_7:case keys.NUMPAD_8:case keys.NUMPAD_9:case keys.NUMPAD_MULTIPLY:case keys.NUMPAD_PLUS:case keys.NUMPAD_ENTER:case keys.NUMPAD_MINUS:case keys.NUMPAD_PERIOD:case keys.NUMPAD_DIVIDE:return;}if((_3d4>=65&&_3d4<=90)||(_3d4>=48&&_3d4<=57)||_3d4==keys.SPACE){return;}var _3d5=false;for(var i in keys){if(keys[i]===e.keyCode){_3d5=true;break;}}if(!_3d5){return;}}}_3d4=e.charCode>=32?String.fromCharCode(e.charCode):e.charCode;if(!_3d4){_3d4=(e.keyCode>=65&&e.keyCode<=90)||(e.keyCode>=48&&e.keyCode<=57)||e.keyCode==keys.SPACE?String.fromCharCode(e.keyCode):e.keyCode;}if(!_3d4){_3d4=229;}if(e.type=="keypress"){if(typeof _3d4!="string"){return;}if((_3d4>="a"&&_3d4<="z")||(_3d4>="A"&&_3d4<="Z")||(_3d4>="0"&&_3d4<="9")||(_3d4===" ")){if(e.ctrlKey||e.metaKey||e.altKey){return;}}}var faux={faux:true},attr;for(attr in e){if(!/^(layer[XY]|returnValue|keyLocation)$/.test(attr)){var v=e[attr];if(typeof v!="function"&&typeof v!="undefined"){faux[attr]=v;}}}lang.mixin(faux,{charOrCode:_3d4,_wasConsumed:false,preventDefault:function(){faux._wasConsumed=true;e.preventDefault();},stopPropagation:function(){e.stopPropagation();}});this._lastInputProducingEvent=faux;if(this.onInput(faux)===false){faux.preventDefault();faux.stopPropagation();}if(faux._wasConsumed){return;}if(has("ie")<=9){switch(e.keyCode){case keys.TAB:case keys.ESCAPE:case keys.DOWN_ARROW:case keys.UP_ARROW:case keys.LEFT_ARROW:case keys.RIGHT_ARROW:break;default:if(e.keyCode==keys.ENTER&&this.textbox.tagName.toLowerCase()!="textarea"){break;}this.defer(function(){if(this.textbox.value!==this._lastInputEventValue){on.emit(this.textbox,"input",{bubbles:true});}});}}};this.own(on(this.textbox,"keydown, keypress, paste, cut, compositionend",lang.hitch(this,_3d3)),on(this.textbox,"input",lang.hitch(this,"_onInput")),on(this.domNode,"keypress",function(e){e.stopPropagation();}));},_blankValue:"",filter:function(val){if(val===null){return this._blankValue;}if(typeof val!="string"){return val;}if(this.trim){val=lang.trim(val);}if(this.uppercase){val=val.toUpperCase();}if(this.lowercase){val=val.toLowerCase();}if(this.propercase){val=val.replace(/[^\s]+/g,function(word){return word.substring(0,1).toUpperCase()+word.substring(1);});}return val;},_setBlurValue:function(){this._setValueAttr(this.get("value"),true);},_onBlur:function(e){if(this.disabled){return;}this._setBlurValue();this.inherited(arguments);},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd;},_onFocus:function(by){if(this.disabled||this.readOnly){return;}if(this.selectOnClick&&by=="mouse"){this._selectOnClickHandle=on.once(this.domNode,"mouseup, touchend",lang.hitch(this,function(evt){if(!this._isTextSelected()){_3cb.selectInputText(this.textbox);}}));this.own(this._selectOnClickHandle);this.defer(function(){if(this._selectOnClickHandle){this._selectOnClickHandle.remove();this._selectOnClickHandle=null;}},500);}this.inherited(arguments);this._refreshState();},reset:function(){this.textbox.value="";this.inherited(arguments);}});if(has("dojo-bidi")){_3cb=_3c9("dijit.form._TextBoxMixin",_3cb,{_setValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode);},_setDisplayedValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode);},_onInput:function(){this.applyTextDir(this.focusNode);this.inherited(arguments);}});}_3cb._setSelectionRange=_3ca._setSelectionRange=function(_3d6,_3d7,stop){if(_3d6.setSelectionRange){_3d6.setSelectionRange(_3d7,stop);}};_3cb.selectInputText=_3ca.selectInputText=function(_3d8,_3d9,stop){_3d8=dom.byId(_3d8);if(isNaN(_3d9)){_3d9=0;}if(isNaN(stop)){stop=_3d8.value?_3d8.value.length:0;}try{_3d8.focus();_3cb._setSelectionRange(_3d8,_3d9,stop);}catch(e){}};return _3cb;});},"ibm/tivoli/fwm/mxmap/findlocation/FindLocationPanelWidget":function(){define(["dojo/_base/declare","dojo/dom-construct","dijit/_Widget","dijit/_Templated","ibm/tivoli/fwm/mxmap/_Base","dojo/dom","dojo/dom-style","dojo/on","dojo/dom-class","dijit/form/Button","dijit/form/TextBox"],function(_3da,_3db,_3dc,_3dd,_3de,dom,_3df,on,_3e0,_3e1,_3e2){return _3da([_3dc,_3dd,_3de],{templateString:dojo.cache("ibm.tivoli.fwm.mxmap","templates/FindLocationPanelWidget.html","<div>\n\t<div data-dojo-attach-point=\"findLocationDiv\" id=\"findLocationToolDiv\" class=\"findLocationBar\"></div>\n</div>\n"),constructor:function(_3e3){dojo.mixin(this,_3e3);},createBar:function(){var _3e4=this.map.element;this.searchField=new _3e2({id:"findLocationToolInputField","class":"findLocationToolInputTxt",value:"",placeHolder:ibm.tivoli.fwm.i18n.getMaxMsg("map","findLocation")});this.searchButton=new _3e1({label:"",showLabel:false,iconClass:"findLocationToolButton findLocationToolFindButton",id:"findLocationToolFindButton",onClick:dojo.hitch(this,function(){this.searchButton.set("disabled",true);this.findAddressLocation();}),onDblClick:dojo.hitch(this,function(_3e5){_3e5.stopPropagation();})});this.searchButton.set("disabled",true);dojo.subscribe("findLocationSelected",dojo.hitch(this,function(){this.searchButton.set("disabled",false);}));on(this.searchField,"keyUp",dojo.hitch(this,function(evt){if(this.searchButton.get("disabled")){if(!this.searchField.displayedValue==""){this.searchButton.set("disabled",false);}}else{if(this.searchField.displayedValue==""){this.searchButton.set("disabled",true);}}}));on(this.searchField,"keyDown",dojo.hitch(this,function(evt){if(evt.keyCode=="13"){evt.preventDefault();this.findAddressLocation();}if(evt.keyCode=="27"){this.tool.execute();}}));if(this.map.mapConf.provider=="spatial"){_3e0.add(this.findLocationDiv,"spatialFindLocationBar");}else{if(this.map.mapConf.provider=="gmaps"){_3e0.add(this.findLocationDiv,"gMapsFindLocationBar");}else{if(this.map.mapConf.provider){_3e0.add(this.findLocationDiv,"bmapsFindLocationBar");}}}_3df.set(this.findLocationDiv,"z-index","1000");_3db.place(this.domNode,_3e4,"first");_3db.place(this.searchField.domNode,this.findLocationDiv,"first");_3db.place(this.searchButton.domNode,this.findLocationDiv,"last");this.searchButton.startup();},findAddressLocation:function(){var _3e6=this.searchField.getValue();this.map.geocoder.findLocation(_3e6);},show:function(){_3df.set(this.findLocationDiv,"display","inline");},hide:function(){_3df.set(this.findLocationDiv,"display","none");},destroy:function(){if(this.searchField){this.searchField.destroyRecursive();}if(this.searchButton){this.searchButton.destroyRecursive();}if(this.closeButton){this.closeButton.destroyRecursive();}}});});},"dijit/PopupMenuItem":function(){define(["dojo/_base/declare","dojo/dom-style","dojo/_base/lang","dojo/query","./popup","./registry","./MenuItem","./hccss"],function(_3e7,_3e8,lang,_3e9,pm,_3ea,_3eb){return _3e7("dijit.PopupMenuItem",_3eb,{baseClass:"dijitMenuItem dijitPopupMenuItem",_fillContent:function(){if(this.srcNodeRef){var _3ec=_3e9("*",this.srcNodeRef);this.inherited(arguments,[_3ec[0]]);this.dropDownContainer=this.srcNodeRef;}},_openPopup:function(_3ed,_3ee){var _3ef=this.popup;pm.open(lang.delegate(_3ed,{popup:this.popup,around:this.domNode}));if(_3ee&&_3ef.focus){_3ef.focus();}},_closePopup:function(){pm.close(this.popup);this.popup.parentMenu=null;},startup:function(){if(this._started){return;}this.inherited(arguments);if(!this.popup){var node=_3e9("[widgetId]",this.dropDownContainer)[0];this.popup=_3ea.byNode(node);}this.ownerDocumentBody.appendChild(this.popup.domNode);this.popup.domNode.setAttribute("aria-labelledby",this.containerNode.id);this.popup.startup();this.popup.domNode.style.display="none";if(this.arrowWrapper){_3e8.set(this.arrowWrapper,"visibility","");}this.focusNode.setAttribute("aria-haspopup","true");},destroyDescendants:function(_3f0){if(this.popup){if(!this.popup._destroyed){this.popup.destroyRecursive(_3f0);}delete this.popup;}this.inherited(arguments);}});});},"ibm/tivoli/fwm/mxmap/Radius":function(){define(["dojo/_base/declare"],function(_3f1){return _3f1(null,{constructor:function(_3f2){dojo.mixin(this,_3f2);if(this.center&&this.quality){var _3f3=this.center.latConv();var _3f4=this.center.lonConv();var rad=Math.PI/180;this.calcs=[];for(var i=0;i<360;i+=this.quality){this.calcs.push([Math.cos(i*rad)/_3f3,Math.sin(i*rad)/_3f4]);}}},getPolyline:function(_3f5,_3f6){var _3f7=[];for(var i=0;i<this.calcs.length;i++){var _3f8=this.map.latLng(this.center.lat+(_3f5*this.calcs[i][0]),this.center.lon+(_3f5*this.calcs[i][1]));_3f7.push(_3f8);}_3f7.push(_3f7[0]);var line=this.map.polyline({points:_3f7});line.setColor(_3f6);return line;}});});},"ibm/tivoli/fwm/mxmap/_BoundingBox":function(){define(["dojo/_base/declare"],function(_3f9){return _3f9(null,{sw:null,ne:null,constructor:function(_3fa,_3fb,_3fc,_3fd){this._init(_3fa,_3fb,_3fc,_3fd);},_init:function(_3fe,_3ff,_400,_401){this.sw=new ibm.tivoli.fwm.mxmap._LatLonPoint({lat:_3fe,lon:_3ff,lng:_3ff});this.ne=new ibm.tivoli.fwm.mxmap._LatLonPoint({lat:_400,lon:_401,lng:_401});},getSouthWest:function(){return this.sw;},getNorthEast:function(){return this.ne;},merge:function(bbox){if(bbox){this.extend(bbox.sw);this.extend(bbox.ne);}},extend:function(_402){if(_402){if(this.sw.lat>_402.lat){this.sw.lat=_402.lat;}if(this.sw.lng>_402.lng){this.sw.lng=this.sw.lon=_402.lng;}if(this.ne.lat<_402.lat){this.ne.lat=_402.lat;}if(this.ne.lng<_402.lng){this.ne.lng=this.ne.lon=_402.lng;}}return;}});});},"ibm/tivoli/fwm/mxmap/InfoSummaryPanelWidget":function(){define(["dojo/_base/declare","dijit/_Widget","dijit/_Templated"],function(_403,_404,_405){return _403([_404,_405],{templateString:dojo.cache("ibm.tivoli.fwm.mxmap","templates/InfoSummaryPanelWidget.html","<div class=\"text\">\n\t<div data-dojo-attach-point=\"infoSummaryPanel\"></div>\n</div>"),constructor:function(_406){dojo.mixin(this,_406);}});});},"dojo/hccss":function(){define(["require","./_base/config","./dom-class","./dom-style","./has","./domReady","./_base/window"],function(_407,_408,_409,_40a,has,_40b,win){has.add("highcontrast",function(){var div=win.doc.createElement("div");try{div.style.cssText="border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;"+"background-image: url(\""+(_408.blankGif||_407.toUrl("./resources/blank.gif"))+"\");";win.body().appendChild(div);var cs=_40a.getComputedStyle(div),_40c=cs.backgroundImage;return cs.borderTopColor==cs.borderRightColor||(_40c&&(_40c=="none"||_40c=="url(invalid-url:)"));}catch(e){console.warn("hccss: exception detecting high-contrast mode, document is likely hidden: "+e.toString());return false;}finally{if(has("ie")<=8){div.outerHTML="";}else{win.body().removeChild(div);}}});_40b(function(){if(has("highcontrast")){_409.add(win.body(),"dj_a11y");}});return has;});},"ibm/tivoli/fwm/mxmap/dispatcher/DispatcherManager":function(){define(["dijit","dojo","dojox","dojo/require!ibm/tivoli/fwm/mxmap/routing/MultipleRoutesManager,ibm/tivoli/fwm/mxmap/ImageLibraryManager"],function(_40d,dojo,_40e){dojo.provide("ibm.tivoli.fwm.mxmap.dispatcher.DispatcherManager");dojo.require("ibm.tivoli.fwm.mxmap.routing.MultipleRoutesManager");dojo.require("ibm.tivoli.fwm.mxmap.ImageLibraryManager");dojo.declare("ibm.tivoli.fwm.mxmap.dispatcher.DispatcherManager",ibm.tivoli.fwm.mxmap._Base,{map:null,_needsModelRefresh:false,applet:null,routeCache:null,routeManager:null,_calculatingRoutes:false,_callBuffer:[],_totalRequested:0,_totalCompleted:0,travelTimeToSave:[],errorCodes:null,_updateProjTries:10,constructor:function(_40f){dojo.mixin(this,_40f);if(this.map.isMapGraphite()){return;}this.map.registerDatasourceRefresh(dojo.hitch(this,this.refreshDS));this._executionOptions={};this.routeManager=this.map.routeManager;this.addSubscription("onWorkAssigned_"+this.map.getId(),dojo.hitch(this,this.onWorkAssigned));this.routeCache={};this._calculatingRoutes=false;this._callBuffer=[];this._needsModelRefresh=false;this.errorCodes=[];this._totalRequested=0;this._totalCompleted=0;this.travelTimeToSave=[];this._updateProjTries=10;},init:function(){if(this.map.isMapGraphite()){this.map.initRoutes();return;}var _410=ibm.tivoli.fwm.mxmap.ImageLibraryManager.getImageLibraryManager().getDefaultWorkOrderMarkerImageInfo();var _411={"id":"resource","labelGroup":"map","labelKey":"resourcesymbologylabel","legendTitleGroup":"map","legendTitleKey":"workorderresourcelegendtitle","type":"dynamic","legends":[{"id":"fwm_default","labelGroup":"map","labelKey":"defaultlayerlabel","symbol":{"url":_410.getImageURL(),"color":"","offsetx":_410.getImageAnchor()[0],"offsety":_410.getImageAnchor()[1],"width":_410.getImageSize()[0],"height":_410.getImageSize()[1]},"isDefault":true}]};var _412=this.map.layersManager.getLayerForObjectName("WORKORDER");this.routeSymbology=_412.createNewChildLayer({layerName:ibm.tivoli.fwm.i18n.getMaxMsg("map","resourcesymbologylabel"),layerId:_411.id,layerConf:_411,map:this.map,layerType:ibm.tivoli.fwm.mxmap.layers.LayerType.SYMBOLOGY,symbologyType:_411.type,childrenTitle:""});this.routeSymbology.toggleState();this.routeSymbology.setDefault();this.map.createRouteLayer();this.map.setDispatcher(this);this.addSubscription("onMarkerClicked_"+this.map.getId(),dojo.hitch(this,this._sendActivityToHighlight));},clearAllCurrentRoutes:function(){if(this.map.isMapGraphite()){this.map.clearRoutes();return;}this.data={};this.routeManager.clearAll();this.routeCache={};},drawAllRoutes:function(_413,_414,_415){if(this.map.isMapGraphite()){this.map.drawRoutes(_413);return;}this.resetMaximoTimer();if(this._calculatingRoutes==false){this.travelTimeToSave=[];this.errorCodes=[];}this._loadedData(_413);},_triggerBufferedCalls:function(){if(this._callBuffer.length>0){this._loadedData(this._callBuffer.shift());}},_loadedData:function(data){if(!window.ccc){window.ccc=0;}data.id=window.ccc++;if(this._calculatingRoutes==true){var _416=this._callBuffer[0];if(_416&&_416.options){if(_416.options.hasErrCallback==true){this._refreshInfo.errorCb();}else{if(_416.options.hasCallback==true){this._refreshInfo.callback();}}}this._callBuffer.push(data);}else{var _417=data.allRoutes;this._totalRequested=_417.length;this.data=data;if(this._totalRequested>0){this._startTime=new Date().getTime();this._calculatingRoutes=true;this._needsModelRefresh=false;if(dojo.config.fwm.debug==true){}this._totalCompleted=0;for(var i=0;i<_417.length;i++){var _418=_417[i];this._addRoute(id,_418);}}else{this.allSLRRequestsComplete();}}},__debugAddStopToMap:function(_419){var _41a=this.map.latLng(_419.lat,_419.lng);this.map.addMarker(_41a);},_addRoute:function(id,_41b){var _41c=_41b.color;if(_41c.substring(0,1)!="#"){_41c="#"+_41c;}var _41d=[];var cf=this.map.routeConf;cf.routecolor=_41c;_41d=_41b.stops;var _41e=_41b;if(_41b.noroute!=true&&_41d.length>1){var _41f=function(_420){if(this.routeCache[_41e.resource.id]){this.routeCache[_41e.resource.id].clear();}this.routeCache[_41e.resource.id]=_420;this.completeRoute(_420,_41e);};var _421=function(_422,msg){this._totalCompleted++;this.onError(_422,_41e,msg);if(this.routeCache[_41b.resource.id]){this.routeCache[_41b.resource.id].clear();this.routeCache[_41b.resource.id]=null;}if(this._totalCompleted==this._totalRequested){this.allSLRRequestsComplete();}};this.routeManager.createRoute(_41d,cf,dojo.hitch(this,_41f),dojo.hitch(this,_421),true);}else{this._totalCompleted++;if(_41b.noroute==true){if(dojo.config.fwm.debug==true){}}else{this.onError("MIN_STOPS_REQ",_41e);}if(this.routeCache[_41b.resource.id]){this.routeCache[_41b.resource.id].clear();this.routeCache[_41b.resource.id]=null;}if(this._totalCompleted==this._totalRequested){this.allSLRRequestsComplete();}}},completeRoute:function(_423,_424){if(dojo.config.fwm.debug==true){}this._totalCompleted++;for(var j in _424.stops){var item=_424.stops[j];if(j>0){var _425=_423.itinerary.legs[j-1];var _426=item.routedata;if(_426==null){console.error("Assignment ",item," with no route data info");continue;}if(_426.HASTRAVELTIME==false){if(_425){var _427=this.convertDurationToSeconds(_425.durationToLeg);if(_427){var _428={ASSIGNMENTID:_426.ASSIGNMENTID,SLROUTEID:_426.SLROUTEID,FROMLOCATIONSID:_426.FROMLOCATIONSID,TOLOCATIONSID:_426.TOLOCATIONSID,FROMASSIGNMENT:_426.FROMASSIGNMENT,TRAVELTIME_SECS:_427};this.travelTimeToSave.push(_428);this._needsModelRefresh=true;}}}}}if(this._totalCompleted==this._totalRequested){this.allSLRRequestsComplete();}},convertDurationToSeconds:function(_429){return Math.round(_429*60);},onError:function(_42a,_42b,msg){console.warn("Failed to draw route",_42a);var _42c=msg;if(msg&&msg.message){_42c=msg.message;}this.errorCodes.push({errorInfo:{code:_42a,msg:_42c},routeInfo:_42b});},postEvent:function(name,data,_42d,_42e){var _42f=new Event(name,"mapdispatcher-mxdispatcherctrl",data,REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_42f,"application/json","json",_42d,_42e);},_saveBulkOfSLRTravelTime:function(){var _430=function(_431){this._handleServerData(_431,"onSLRTravelTimeUpdated");};this.postEvent("SAVEBULKTRAVELTIME",this.travelTimeToSave,dojo.hitch(this,_430),dojo.hitch(this,this.genericError));},_saveSLRTravelTime:function(_432){var _433=function(data){};this.postEvent("SAVETRAVELTIME",_432,_433,this.genericError);},sendActionToServer:function(p,_434,_435){var _436=p.servermethod;var _437=p.serverparams;if(dojo.config.fwm.debug==true){}var _438=function(data){this._handleServerData(data,_434,_435);};this.postEvent(_436,_437,dojo.hitch(this,_438),dojo.hitch(this,_438));},allSLRRequestsComplete:function(){this._calculatingRoutes=false;if(this._callBuffer.length>0){this.handleExecutionFinished();this._triggerBufferedCalls();}else{if(!this.data.options||this.data.options.noZoom!=true){this.routeManager.zoomAndCenterOverAll(this.routeCache);}var _439=new Date().getTime();if(this.travelTimeToSave!=null&&this.travelTimeToSave.length>0){this._saveBulkOfSLRTravelTime();}if(this.map){if(this.errorCodes!=null&&this.errorCodes.length>0){var _43a=function(data){this.triggerMsgs();this.handleExecutionFinished();};this.postEvent("SHOWMULTIPLEROUTEERRORS",this.errorCodes,dojo.hitch(this,_43a),dojo.hitch(this,_43a));}else{this.handleExecutionFinished();}}}},handleExecutionFinished:function(){if(this.data.options&&this.data.options.hasCallback==true){this._refreshInfo.callback(this.routeManager);}},genericError:function(_43b){this._calculatingRoutes=false;this.triggerMsgs();console.error("Error ",_43b);},_handleServerData:function(data,_43c,_43d){if(data&&data.result=="failed"){console.warn("there was an error on server",data);if(data.mxerror==true){this.triggerMsgs();}if(_43d){this.getApplet().jsCallback(_43d,dojo.toJson(data));}}else{this.getApplet().jsCallback(_43c,dojo.toJson(data));}},bulkAssignmentsUpdates:function(_43e){var _43f=function(data){this._handleServerData(data,"onBulkAssignments");};this.postEvent("UPDATEASSIGNMENTS",_43e,dojo.hitch(this,_43f),dojo.hitch(this,this.genericError));this.resetMaximoTimer();},updateProject:function(_440){if(!this.getApplet()){this._updateProjTries--;if(this._updateProjTries<=0){this._updateProjTries=10;console.error("Can't find the applet or it's not loaded!");}else{var fct=function(){this.updateProject(_440);};setTimeout(dojo.hitch(this,fct),1000);}}this._updateProjTries=10;this.getApplet().updateProjId(_440);this.resetMaximoTimer();},triggerMsgs:function(){sendEvent("TRIGGERMSGS","mapdispatcher-mxdispatcherctrl");this.resetMaximoTimer();},getApplet:function(){try{this.applet.isLoaded();return this.applet;}catch(e){this.applet=dojo.byId("CalendarViewId");try{this.applet.isLoaded();return this.applet;}catch(e2){this.applet=window.CalendarViewId;try{this.applet.isLoaded();return this.applet;}catch(e3){console.warn("can't find applet to start communication",e3);}}}},refresh:function(){this.getApplet().updateModel();},_refreshInfo:null,refreshDS:function(_441,_442,_443){this._refreshInfo={callback:_441,errorCb:_442};var _444={noZoom:_443,refreshMap:true,hasCallback:false,hasErrCallback:false};if(_441){_444.hasCallback=true;}if(_441){_444.hasErrCallback=true;}this.getApplet().updateModelWithOptions(dojo.toJson(_444));},onWorkAssigned:function(){this.getApplet().updateModel();},resetMaximoTimer:function(){resetLogoutTimer(false);},showCachedRoutesLinesAndCalculatedMarkers:function(){for(resourceId in this.routeCache){if(this.routeCache[resourceId]!=null){this.routeCache[resourceId].setLineVisible(true);this.routeCache[resourceId].showCalculatedMarkers();}}},getRouteInfoForResource:function(_445,_446){var _447=this.routeCache[_445+":"+_446];return _447;},highlightStop:function(_448){var _449=this.map.getMarkers();dojo.forEach(_449,function(_44a){if(_44a.hasActivityId(_448)){_44a.openBubble();}});},_sendActivityToHighlight:function(_44b){if(this.getApplet()!=undefined){var _44c=_44b.marker;if(_44c!=undefined){var _44d=_44c.getActivityIdArray();if(_44d!=null){dojo.forEach(_44d,dojo.hitch(this,function(_44e){this.getApplet().highlightactivity(_44e);}));}if(_44c.hasReferencedMarkers()){referencedMarkers=_44c.getReferencedMarkers();dojo.forEach(referencedMarkers,dojo.hitch(this,function(_44f){_44d=_44f.getActivityIdArray();if(_44d!=null){dojo.forEach(_44d,dojo.hitch(this,function(_450){this.getApplet().highlightactivity(_450);}));}}));}}}else{console.error("Could not call this.getApplet().highlightactivity(activityId) because this.getApplet() returned undefined");}},updateUnAssignWODates:function(_451,_452){var data={startDate:dojo.number.parse(_451),endDate:dojo.number.parse(_452)};dojo.publish("onDispatcherRefresh_"+this.map.getId(),[data]);}});});},"dijit/form/RadioButton":function(){define(["dojo/_base/declare","./CheckBox","./_RadioButtonMixin"],function(_453,_454,_455){return _453("dijit.form.RadioButton",[_454,_455],{baseClass:"dijitRadio"});});},"ibm/tivoli/fwm/mxmap/_Polyline":function(){define(["dojo/_base/declare"],function(_456){return _456(null,{api:null,points:null,attributes:[],onmap:false,proprietary_polyline:false,constructor:function(_457){dojo.mixin(this,_457);this.pllID="mspll-"+new Date().getTime()+"-"+(Math.floor(Math.random()*Math.pow(2,16)));},fromProprietary:function(){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},hide:function(){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},show:function(){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},toProprietary:function(){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},update:function(){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},addData:function(_458){for(var sOpt in _458){if(_458.hasOwnProperty(sOpt)){switch(sOpt){case "color":this.setColor(_458.color);break;case "width":this.setWidth(_458.width);break;case "opacity":this.setOpacity(_458.opacity);break;case "closed":this.setClosed(_458.closed);break;case "fillColor":this.setFillColor(_458.fillColor);break;case "borderOpacity":this.setBorderOpacity(_458.borderOpacity);break;default:this.setAttribute(sOpt,_458[sOpt]);break;}}}},setChild:function(_459){this.proprietary_polyline=_459;this.onmap=true;},setColor:function(_45a){this.color=(_45a.length==7&&_45a[0]=="#")?_45a.toUpperCase():_45a;},setWidth:function(_45b){this.width=_45b;},setOpacity:function(_45c){this.opacity=_45c;},setClosed:function(_45d){this.closed=_45d;},setFillColor:function(_45e){this.fillColor=_45e;},setBorderOpacity:function(_45f){this.borderOpacity=_45f;},setAttribute:function(key,_460){this.attributes[key]=_460;},getAttribute:function(key){return this.attributes[key];},simplify:function(_461){var _462=[];_462[0]=this.points[0];var _463=0;for(var i=1;i<this.points.length-1;i++){if(this.points[i].distance(this.points[_463])>=_461){_462[_462.length]=this.points[i];_463=i;}}_462[_462.length]=this.points[this.points.length-1];this.points=_462;}});});},"ibm/tivoli/fwm/mxmap/toolbar/ext/MobileInfoPanel":function(){define(["dijit","dojo","dojox","dojo/require!ibm/tivoli/fwm/mxmap/_Base,dijit/form/Button,ibm/tivoli/fwm/mxmap/panels/MobileInfoPanelDialog"],function(_464,dojo,_465){dojo.provide("ibm.tivoli.fwm.mxmap.toolbar.ext.MobileInfoPanel");dojo.require("ibm.tivoli.fwm.mxmap._Base");dojo.require("dijit.form.Button");dojo.require("ibm.tivoli.fwm.mxmap.panels.MobileInfoPanelDialog");dojo.declare("ibm.tivoli.fwm.mxmap.toolbar.ext.MobileInfoPanel",ibm.tivoli.fwm.mxmap._Base,{label:"Info Panel",iconClass:"basicMapToolbarBtn",map:null,_dialog:null,constructor:function(_466){dojo.mixin(this,_466);this._dialog=null;var _467=ibm.tivoli.fwm.i18n.getMaxMsg("map","infopanel");this.label=_467||this.label;},createToolbarButton:function(){var _468=new _464.form.Button({label:this.label,showLabel:true,iconClass:this.iconClass,onClick:dojo.hitch(this,function(){this.execute();})});return _468;},execute:function(){if(this._dialog){this._dialog.close();this._dialog=null;}var me=this;this._dialog=new ibm.tivoli.fwm.mxmap.panels.MobileInfoPanelDialog({map:me.map});this._dialog.show();},disable:function(){},destroy:function(){this.destroyRecursive();}});});},"dijit/main":function(){define(["dojo/_base/kernel"],function(dojo){return dojo.dijit;});},"ibm/tivoli/fwm/mxmap/_Marker":function(){define(["dojo/main","dijit/main","dojox/main","dojo/_base/declare","ibm/tivoli/fwm/mxmap/_Base"],function(dojo,_469,_46a,_46b,_46c){return _46b([_46c],{api:null,location:null,onmap:false,proprietary_marker:false,attributes:null,referencedMarkers:null,infoBubbleOpen:false,constructor:function(_46d){this.attributes=[];this.referencedMarkers=[];dojo.mixin(this,_46d);this.location=_46d.point;},fromProprietary:function(){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},hide:function(){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},remove:function(){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},openBubble:function(){this.infoBubbleOpen=true;},closeBubble:function(){this.infoBubbleOpen=false;},closeBubbleIfNecessary:function(){if(this.infoBubbleOpen==true){this.infoBubbleOpen=false;this.closeBubble();this._sendCloseBubbleEventIfNecessary();}},show:function(){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},toProprietary:function(){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},update:function(){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},setChild:function(_46e){this.proprietary_marker=_46e;_46e.mxmapMarker=this;this.onmap=true;},setLabel:function(_46f){this.labelText=_46f;},setTooltip:function(_470){this.tooltip=_470;},showTooltip:function(_471,_472){if(this.tooltip&&this.tooltip.length>0){var _473=_471.y+"px";var _474=_471.x+"px";var dom=dojo.create("div",{style:{position:"absolute",top:_473,left:_474}},_472);var rtl=false;var _475=dojo.style(_472,"directions");if(document.body.dir=="rtl"&&_475!="ltr"){rtl=true;}_469.showTooltip(this.tooltip,dom,["after"],rtl);this._tooltipDom=dom;}},hideTooltip:function(){_469.hideTooltip(this._tooltipDom);},addData:function(_476){for(var _477 in _476){if(_476.hasOwnProperty(_477)){switch(_477){case "label":this.setLabel(_476.label);break;case "tooltip":this.setTooltip(_476.tooltip);break;case "infoBubble":this.setInfoBubble(_476.infoBubble);break;case "icon":if(_476.iconSize&&_476.iconAnchor){this.setIcon(_476.icon,_476.iconSize,_476.iconAnchor);}else{if(_476.iconSize){this.setIcon(_476.icon,_476.iconSize);}else{this.setIcon(_476.icon);}}break;case "iconShadow":if(_476.iconShadowSize){this.setShadowIcon(_476.iconShadow,[_476.iconShadowSize[0],_476.iconShadowSize[1]]);}else{this.setIcon(_476.iconShadow);}break;case "infoDiv":this.setInfoDiv(_476.infoDiv[0],_476.infoDiv[1]);break;case "draggable":this.setDraggable(_476.draggable);break;case "hover":this.setHover(_476.hover);this.setHoverIcon(_476.hoverIcon);break;case "hoverIcon":this.setHoverIcon(_476.hoverIcon);break;case "openBubble":this.openBubble();break;case "closeBubble":this.closeBubble();break;default:this.setAttribute(_477,_476[_477]);break;}}}},setInfoBubble:function(_478){this.infoBubble=_478;},setInfoDiv:function(_479,div){this.infoDiv=_479;this.div=div;},setIcon:function(_47a,_47b,_47c){this.iconUrl=_47a;if(_47b){this.iconSize=_47b;}if(_47c){this.iconAnchor=_47c;}},setShadowIcon:function(_47d,_47e){this.iconShadowUrl=_47d;if(_47e){this.iconShadowSize=_47e;}},setHoverIcon:function(_47f){this.hoverIconUrl=_47f;},setDraggable:function(_480){this.draggable=_480;},setHover:function(_481){this.hover=_481;},setAttribute:function(key,_482){this.attributes[key]=_482;},getAttribute:function(key){return this.attributes[key];},addMarkerEventHandler:function(_483,_484){this.addSubscription("marker_"+_483+"_"+this.compId,_484);},removeMarkerEventHandler:function(_485,_486){this.removeSubscription("marker_"+_485+"_"+this.compId,_486);},fireMarkerEvent:function(_487,data){dojo.publish("marker_"+_487+"_"+this.compId,data);},getTooltip:function(){return this.tooltip;},hasReferencedMarkers:function(){return ((this.referencedMarkers!=null)&&(this.referencedMarkers!=undefined)&&(this.referencedMarkers.length>0))?true:false;},addReferencedMarker:function(_488){if((_488!=null)&&(_488!=undefined)){if(this._isReferencedMarkerNew(_488)==true){this.referencedMarkers.push(_488);}}},clearReferencedMarkers:function(){this.referencedMarkers=[];},getReferencedMarkers:function(){return this.referencedMarkers;},_isReferencedMarkerNew:function(_489){for(var i=0;i<this.referencedMarkers.length;i++){if(_489==this.referencedMarkers[i]){return false;}}return true;},_sendCloseBubbleEventIfNecessary:function(){},getActivityIdArray:function(){var _48a=this.getAttribute("activityId");if(_48a!=null&&_48a!=undefined){if(_48a instanceof Array){return _48a;}else{return [_48a];}}return null;},hasActivityId:function(id){var _48b=false;var _48c=this.getActivityIdArray();if(_48c!=null){dojo.forEach(_48c,function(_48d){if(_48d==id){_48b=true;}});}return _48b;},MarkerEvents:{openInfoBubble:"openInfoBubble",closeInfoBubble:"closeInfoBubble",dragstart:"dragstart",drag:"drag",dragend:"dragend",click:"click"}});});},"ibm/tivoli/fwm/mxmap/geolocation/MyCurrentLocation":function(){define(["dojo/_base/declare","dojo/main","dijit/main","ibm/tivoli/fwm/mxmap/_Base"],function(_48e,dojo,_48f,_490){if(!ibm.tivoli.fwm.mxmap.geolocation){ibm.tivoli.fwm.mxmap.geolocation={};}ibm.tivoli.fwm.mxmap.geolocation.GeoLocationStatus={UNASSIGNED:-1,HAS_LOCATION:0,PERMISSION_DENIED:1,POSITION_UNAVAILABLE:2,GEOLOCATION_NOT_SUPPORTED:4,TIMEOUT:3};return {_instance:null,getMyCurrentLocationInstance:function(){if(!this._instance){this._instance=new this.MyCurrentLocation();}return this._instance;},MyCurrentLocation:_48e([_490],{_userLocation:null,_userLocationStatus:ibm.tivoli.fwm.mxmap.geolocation.GeoLocationStatus.UNASSIGNED,_timeout:5000,_watchPositionId:null,_waitingForTimeout:false,_callbackArray:null,_listenerArray:null,constructor:function(_491){dojo.mixin(this,_491);this._callbackArray=[];this._listenerArray=[];this._h=0;if(dojo.isMozilla){this._oldTimeout=this._timeout;this._timeout=10*60000;}},getPosition:function(){return this._userLocation;},getStatus:function(){return this._userLocationStatus;},_lastLocationTimestamp:0,gotUserLocation:function(_492){this._userLocation=_492;this._userLocationStatus=ibm.tivoli.fwm.mxmap.geolocation.GeoLocationStatus.HAS_LOCATION;this._lastLocationTimestamp=new Date().getTime();if(this._listenerArray){for(var _493 in this._listenerArray){var fct=this._listenerArray[_493];fct.success(_492);}}if(this._callbackArray){while(this._callbackArray.length>0){var _494=this._callbackArray.pop();_494.success(_492);}}this._callbackArray=[];},failedToGetLocation:function(_495){console.warn("Error finding user location",_495);this._userLocationStatus=_495.code;if(this._listenerArray){for(var _496 in this._listenerArray){var fct=this._listenerArray[_496];fct.failure(_495);}}if(this._callbackArray){while(this._callbackArray.length>0){var _497=this._callbackArray.pop();_497.failure(_495);}}this._callbackArray=[];},_isWaitingForTimeout:function(){var now=new Date();if(now.getTime()<(this._lastGetLocCall+this._timeout)){return true;}else{return false;}},_lastGetLocCall:0,getUserLocation:function(_498,_499){if(this._watchPositionId!=null&&this.isStatusHasLocation()){_498(this._userLocation);}else{this._callbackArray.push({success:_498,failure:_499});this.watchUserLocation();}},_h:null,createListener:function(_49a,_49b){this._h++;var h=this._h;this._listenerArray[h]={success:_49a,failure:_49b};return h;},listenToUserLocation:function(_49c){if(this._listenerArray[_49c]!=null){this.watchUserLocation();}else{console.warn("No listener for handler ",_49c);}},removeListeners:function(_49d){if(_49d!=null){this._listenerArray[_49d]=null;delete this._listenerArray[_49d];}},watchUserLocation:function(){if(navigator.geolocation){if(this._watchPositionId==null){var _49e=function(_49f){this.gotUserLocation(_49f);if(this._mozzilaTS){clearTimeout(this._mozzilaTS);}};var _4a0=function(_4a1){this.clearWatchUserLocation();if(_4a1.code==_4a1.TIMEOUT&&dojo.isMozilla&&this.isStatusHasLocation()==true){var now=new Date();var _4a2=(now.getTime()-this._requestTimestamp.getTime());if(_4a2<(this._timeout+5000)||_4a2>(this._timeout-5000)){this.watchUserLocation();return;}}this.failedToGetLocation(_4a1);};this._requestTimestamp=new Date();this._watchPositionId=navigator.geolocation.watchPosition(dojo.hitch(this,_49e),dojo.hitch(this,_4a0),{timeout:this._timeout});if(dojo.isMozilla){if(this.isStatusUnassigned()==true){var _4a3=dojo.hitch(this,function(){this.clearWatchUserLocation();var _4a4={TIMEOUT:true,code:ibm.tivoli.fwm.mxmap.geolocation.GeoLocationStatus.TIMEOUT,message:"Browser FF timeout"};this.clearWatchUserLocation();this.failedToGetLocation(_4a4);});this._mozzilaTS=setTimeout(_4a3,this._oldTimeout);}}}else{console.warn("Watch Position is already enabled");if(this.isStatusHasLocation()==true){this.gotUserLocation(this._userLocation);}else{if(this.isStatusUnassigned()!=true){var _4a5={code:this.getStatus(),message:"Failed"};this.clearWatchUserLocation();this.failedToGetLocation(_4a5);}}}}else{console.warn("no geolocation support");this._userLocationStatus=ibm.tivoli.fwm.mxmap.geolocation.GeoLocationStatus.GEOLOCATION_NOT_SUPPORTED;var _4a5={code:ibm.tivoli.fwm.mxmap.geolocation.GeoLocationStatus.GEOLOCATION_NOT_SUPPORTED,message:"Browser does not support geolocation"};this.failedToGetLocation(_4a5);}},clearWatchUserLocation:function(){if(this._watchPositionId!=null){if(navigator.geolocation){navigator.geolocation.clearWatch(this._watchPositionId);this._watchPositionId=null;}}else{}},isStatusUnassigned:function(){return this.isStatusEqual(ibm.tivoli.fwm.mxmap.geolocation.GeoLocationStatus.UNASSIGNED);},isStatusHasLocation:function(){return this.isStatusEqual(ibm.tivoli.fwm.mxmap.geolocation.GeoLocationStatus.HAS_LOCATION);},isStatusEqual:function(_4a6){return (this._userLocationStatus==_4a6);},convertPositionToMapPoint:function(map,_4a7,_4a8){var _4a9=this.getPosition();var _4aa=map.latLng(_4a9.coords.latitude,_4a9.coords.longitude);map.getAllPointsFromWGS84([_4aa],dojo.hitch(this,function(_4ab){_4a7(_4ab[0]);}));}})};});},"dojo/json5/parse":function(){define(["../string","./util"],function(_4ac,util){var _4ad;var _4ae;var _4af;var pos;var line;var _4b0;var _4b1;var key;var root;function _4b2(text,_4b3){_4ad=String(text);_4ae="start";_4af=[];pos=0;line=1;_4b0=0;_4b1=undefined;key=undefined;root=undefined;do{_4b1=lex();_4b4[_4ae]();}while(_4b1.type!=="eof");if(typeof _4b3==="function"){return _4b5({"":root},"",_4b3);}return root;};function _4b5(_4b6,name,_4b7){var _4b8=_4b6[name];if(_4b8!=null&&typeof _4b8==="object"){for(var _4b9 in _4b8){var _4ba=_4b5(_4b8,_4b9,_4b7);if(_4ba===undefined){delete _4b8[_4b9];}else{_4b8[_4b9]=_4ba;}}}return _4b7.call(_4b6,name,_4b8);};var _4bb;var _4bc;var _4bd;var sign;var c;function lex(){_4bb="default";_4bc="";_4bd=false;sign=1;for(;;){c=peek();var _4be=_4bf[_4bb]();if(_4be){return _4be;}}};function peek(){if(_4ad[pos]){return _4ac.fromCodePoint(_4ac.codePointAt(_4ad,pos));}};function read(){var c=peek();if(c==="\n"){line++;_4b0=0;}else{if(c){_4b0+=c.length;}else{_4b0++;}}if(c){pos+=c.length;}return c;};var _4bf={"default":function(){switch(c){case "\t":case "\v":case "\f":case " ":case "":case "":case "\n":case "\r":case "":case "":read();return;case "/":read();_4bb="comment";return;case undefined:read();return _4c0("eof");}if(util.isSpaceSeparator(c)){read();return;}return _4bf[_4ae]();},comment:function(){switch(c){case "*":read();_4bb="multiLineComment";return;case "/":read();_4bb="singleLineComment";return;}throw _4c1(read());},multiLineComment:function(){switch(c){case "*":read();_4bb="multiLineCommentAsterisk";return;case undefined:throw _4c1(read());}read();},multiLineCommentAsterisk:function(){switch(c){case "*":read();return;case "/":read();_4bb="default";return;case undefined:throw _4c1(read());}read();_4bb="multiLineComment";},singleLineComment:function(){switch(c){case "\n":case "\r":case "":case "":read();_4bb="default";return;case undefined:read();return _4c0("eof");}read();},value:function(){switch(c){case "{":case "[":return _4c0("punctuator",read());case "n":read();_4c2("ull");return _4c0("null",null);case "t":read();_4c2("rue");return _4c0("boolean",true);case "f":read();_4c2("alse");return _4c0("boolean",false);case "-":case "+":if(read()==="-"){sign=-1;}_4bb="sign";return;case ".":_4bc=read();_4bb="decimalPointLeading";return;case "0":_4bc=read();_4bb="zero";return;case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":_4bc=read();_4bb="decimalInteger";return;case "I":read();_4c2("nfinity");return _4c0("numeric",Infinity);case "N":read();_4c2("aN");return _4c0("numeric",NaN);case "\"":case "'":_4bd=(read()==="\"");_4bc="";_4bb="string";return;}throw _4c1(read());},identifierNameStartEscape:function(){if(c!=="u"){throw _4c1(read());}read();var u=_4c3();switch(u){case "$":case "_":break;default:if(!util.isIdStartChar(u)){throw _4c4();}break;}_4bc+=u;_4bb="identifierName";},identifierName:function(){switch(c){case "$":case "_":case "":case "":_4bc+=read();return;case "\\":read();_4bb="identifierNameEscape";return;}if(util.isIdContinueChar(c)){_4bc+=read();return;}return _4c0("identifier",_4bc);},identifierNameEscape:function(){if(c!=="u"){throw _4c1(read());}read();var u=_4c3();switch(u){case "$":case "_":case "":case "":break;default:if(!util.isIdContinueChar(u)){throw _4c4();}break;}_4bc+=u;_4bb="identifierName";},sign:function(){switch(c){case ".":_4bc=read();_4bb="decimalPointLeading";return;case "0":_4bc=read();_4bb="zero";return;case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":_4bc=read();_4bb="decimalInteger";return;case "I":read();_4c2("nfinity");return _4c0("numeric",sign*Infinity);case "N":read();_4c2("aN");return _4c0("numeric",NaN);}throw _4c1(read());},zero:function(){switch(c){case ".":_4bc+=read();_4bb="decimalPoint";return;case "e":case "E":_4bc+=read();_4bb="decimalExponent";return;case "x":case "X":_4bc+=read();_4bb="hexadecimal";return;}return _4c0("numeric",sign*0);},decimalInteger:function(){switch(c){case ".":_4bc+=read();_4bb="decimalPoint";return;case "e":case "E":_4bc+=read();_4bb="decimalExponent";return;}if(util.isDigit(c)){_4bc+=read();return;}return _4c0("numeric",sign*Number(_4bc));},decimalPointLeading:function(){if(util.isDigit(c)){_4bc+=read();_4bb="decimalFraction";return;}throw _4c1(read());},decimalPoint:function(){switch(c){case "e":case "E":_4bc+=read();_4bb="decimalExponent";return;}if(util.isDigit(c)){_4bc+=read();_4bb="decimalFraction";return;}return _4c0("numeric",sign*Number(_4bc));},decimalFraction:function(){switch(c){case "e":case "E":_4bc+=read();_4bb="decimalExponent";return;}if(util.isDigit(c)){_4bc+=read();return;}return _4c0("numeric",sign*Number(_4bc));},decimalExponent:function(){switch(c){case "+":case "-":_4bc+=read();_4bb="decimalExponentSign";return;}if(util.isDigit(c)){_4bc+=read();_4bb="decimalExponentInteger";return;}throw _4c1(read());},decimalExponentSign:function(){if(util.isDigit(c)){_4bc+=read();_4bb="decimalExponentInteger";return;}throw _4c1(read());},decimalExponentInteger:function(){if(util.isDigit(c)){_4bc+=read();return;}return _4c0("numeric",sign*Number(_4bc));},hexadecimal:function(){if(util.isHexDigit(c)){_4bc+=read();_4bb="hexadecimalInteger";return;}throw _4c1(read());},hexadecimalInteger:function(){if(util.isHexDigit(c)){_4bc+=read();return;}return _4c0("numeric",sign*Number(_4bc));},string:function(){switch(c){case "\\":read();_4bc+=_4c5();return;case "\"":if(_4bd){read();return _4c0("string",_4bc);}_4bc+=read();return;case "'":if(!_4bd){read();return _4c0("string",_4bc);}_4bc+=read();return;case "\n":case "\r":throw _4c1(read());case "":case "":_4c6(c);break;case undefined:throw _4c1(read());}_4bc+=read();},start:function(){switch(c){case "{":case "[":return _4c0("punctuator",read());}_4bb="value";},beforePropertyName:function(){switch(c){case "$":case "_":_4bc=read();_4bb="identifierName";return;case "\\":read();_4bb="identifierNameStartEscape";return;case "}":return _4c0("punctuator",read());case "\"":case "'":_4bd=(read()==="\"");_4bb="string";return;}if(util.isIdStartChar(c)){_4bc+=read();_4bb="identifierName";return;}throw _4c1(read());},afterPropertyName:function(){if(c===":"){return _4c0("punctuator",read());}throw _4c1(read());},beforePropertyValue:function(){_4bb="value";},afterPropertyValue:function(){switch(c){case ",":case "}":return _4c0("punctuator",read());}throw _4c1(read());},beforeArrayValue:function(){if(c==="]"){return _4c0("punctuator",read());}_4bb="value";},afterArrayValue:function(){switch(c){case ",":case "]":return _4c0("punctuator",read());}throw _4c1(read());},end:function(){throw _4c1(read());}};function _4c0(type,_4c7){return {type:type,value:_4c7,line:line,column:_4b0};};function _4c2(s){for(var _4c8=0,s_1=s;_4c8<s_1.length;_4c8++){var c_1=s_1[_4c8];var p=peek();if(p!==c_1){throw _4c1(read());}read();}};function _4c5(){var c=peek();switch(c){case "b":read();return "\b";case "f":read();return "\f";case "n":read();return "\n";case "r":read();return "\r";case "t":read();return "\t";case "v":read();return "\v";case "0":read();if(util.isDigit(peek())){throw _4c1(read());}return "\x00";case "x":read();return _4c9();case "u":read();return _4c3();case "\n":case "":case "":read();return "";case "\r":read();if(peek()==="\n"){read();}return "";case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":throw _4c1(read());case undefined:throw _4c1(read());}return read();};function _4c9(){var _4ca="";var c=peek();if(!util.isHexDigit(c)){throw _4c1(read());}_4ca+=read();c=peek();if(!util.isHexDigit(c)){throw _4c1(read());}_4ca+=read();return _4ac.fromCodePoint(parseInt(_4ca,16));};function _4c3(){var _4cb="";var _4cc=4;while(_4cc-->0){var c_2=peek();if(!util.isHexDigit(c_2)){throw _4c1(read());}_4cb+=read();}return _4ac.fromCodePoint(parseInt(_4cb,16));};var _4b4={start:function(){if(_4b1.type==="eof"){throw _4cd();}push();},beforePropertyName:function(){switch(_4b1.type){case "identifier":case "string":key=_4b1.value;_4ae="afterPropertyName";return;case "punctuator":pop();return;case "eof":throw _4cd();}},afterPropertyName:function(){if(_4b1.type==="eof"){throw _4cd();}_4ae="beforePropertyValue";},beforePropertyValue:function(){if(_4b1.type==="eof"){throw _4cd();}push();},beforeArrayValue:function(){if(_4b1.type==="eof"){throw _4cd();}if(_4b1.type==="punctuator"&&_4b1.value==="]"){pop();return;}push();},afterPropertyValue:function(){if(_4b1.type==="eof"){throw _4cd();}switch(_4b1.value){case ",":_4ae="beforePropertyName";return;case "}":pop();}},afterArrayValue:function(){if(_4b1.type==="eof"){throw _4cd();}switch(_4b1.value){case ",":_4ae="beforeArrayValue";return;case "]":pop();}},end:function(){}};function push(){var _4ce;switch(_4b1.type){case "punctuator":switch(_4b1.value){case "{":_4ce={};break;case "[":_4ce=[];break;}break;case "null":case "boolean":case "numeric":case "string":_4ce=_4b1.value;break;}if(root===undefined){root=_4ce;}else{var _4cf=_4af[_4af.length-1];if(Array.isArray(_4cf)){_4cf.push(_4ce);}else{_4cf[key]=_4ce;}}if(_4ce!==null&&typeof _4ce==="object"){_4af.push(_4ce);if(Array.isArray(_4ce)){_4ae="beforeArrayValue";}else{_4ae="beforePropertyName";}}else{var _4d0=_4af[_4af.length-1];if(_4d0==null){_4ae="end";}else{if(Array.isArray(_4d0)){_4ae="afterArrayValue";}else{_4ae="afterPropertyValue";}}}};function pop(){_4af.pop();var _4d1=_4af[_4af.length-1];if(_4d1==null){_4ae="end";}else{if(Array.isArray(_4d1)){_4ae="afterArrayValue";}else{_4ae="afterPropertyValue";}}};function _4c1(c){if(c===undefined){return _4d2("JSON5: invalid end of input at "+line+":"+_4b0);}return _4d2("JSON5: invalid character '"+_4d3(c)+"' at "+line+":"+_4b0);};function _4cd(){return _4d2("JSON5: invalid end of input at "+line+":"+_4b0);};function _4c4(){_4b0-=5;return _4d2("JSON5: invalid identifier character at "+line+":"+_4b0);};function _4c6(c){console.warn("JSON5: '"+_4d3(c)+"' in strings is not valid ECMAScript; consider escaping");};function _4d3(c){var _4d4={"'":"\\'","\"":"\\\"","\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\x00":"\\0","":"\\u2028","":"\\u2029"};if(_4d4[c]){return _4d4[c];}if(c<" "){var _4d5=c.charCodeAt(0).toString(16);return "\\x"+("00"+_4d5).substring(_4d5.length);}return c;};function _4d2(_4d6){var err=new SyntaxError(_4d6);err.lineNumber=line;err.columnNumber=_4b0;return err;};return _4b2;});},"ibm/tivoli/fwm/mxmap/layers/SymbologyLayer":function(){define(["dojo/_base/declare","ibm/tivoli/fwm/mxmap/layers/Layer"],function(_4d7,_4d8){return _4d7([_4d8],{symbologyType:null,_defaultSymbology:null,_disableSiblings:function(){var _4d9=this.getSiblings();dojo.forEach(_4d9,function(_4da){_4da.disable();});},toggleStateButDontRedrawMarkers:function(){this._disableSiblings();this.enableButDontRedrawMarkers();},toggleState:function(){this._disableSiblings();this.enable();},enableButDontRedrawMarkers:function(){this._disabled=false;this._setLeftIconURL();var _4db=this.getParentLayer().getLayerId();this._map.getSymbologyManager().setActiveSymbology(_4db,this.layerConf);},enable:function(){this.enableButDontRedrawMarkers();this._map.getLayersManager().redrawMarkers();},disable:function(){this._disabled=true;this._setLeftIconURL();},_setDefault:function(_4dc){this._defaultSymbology=_4dc;},setDefault:function(){var _4dd=this.getSiblings();dojo.forEach(_4dd,function(_4de){_4de._setDefault(false);});this._setDefault(true);},isDefault:function(){return (this._defaultSymbology==true);}});});},"ibm/tivoli/fwm/mxmap/ImageLibraryManager":function(){define(["dojo/_base/declare","ibm/tivoli/fwm/mxmap/MarkerImageInfo"],function(_4df,_4e0){return {_instance:null,getImageLibraryManager:function(){if(!this._instance){this._instance=new this.ImageLibraryManager();}return this._instance;},ImageLibraryManager:_4df(null,{_infoCache:null,constructor:function(_4e1){dojo.mixin(this,_4e1);this._loadCache();},getMarkerImageInfoForObject:function(_4e2){var _4e3=_4e2?this._infoCache[_4e2.toUpperCase()]:null;if(!_4e3){console.warn("[ImageLibraryManager] No marker image found for object "+_4e2);console.warn("[ImageLibraryManager] returning default one");return this.getDefaultMarkerImageInfo();}return _4e3;},getLBSMarkerImageInfo:function(_4e4){if(_4e4){if(_4e4.is_weather_alert_impact){return this.getMarkerImageInfoForObject("WEATHER_ALERT_IMPACT");}else{if("EXCEEDED_TOLERANCE"===_4e4.max_accuracy_state){return this.getMarkerImageInfoForObject("__LBS_EXCEEDED_ACCURACY");}else{if("EXCEEDED_TOLERANCE"===_4e4.last_update_condition_state){return this.getMarkerImageInfoForObject("__LBS_EXCEEDED_UPDATE_COND");}else{return this.getMarkerImageInfoForObject("__LBS_INSIDE_TOLERANCE");}}}}console.warn("no lbs data!");return null;},getDefaultMarkerImageInfo:function(){return this._infoCache["__DEFAULT_MARKER"];},getStartPositionMarkerImageInfo:function(){return this._infoCache["__START_POSITION_MARKER"];},getEndPositionMarkerImageInfo:function(){return this._infoCache["__END_POSITION_MARKER"];},getLayerOnImageInfo:function(){return this._infoCache["__LAYER_ON"];},getLayerOffImageInfo:function(){return this._infoCache["__LAYER_OFF"];},getLayerDetailsImageInfo:function(){return this._infoCache["__LAYER_DETAILS"];},getLayerDetailsOffImageInfo:function(){return this._infoCache["__LAYER_DETAILS_OFF"];},getDefaultReadOnlyMarkerImageInfo:function(){return this._infoCache["__DEFAULT_RO_MARKER"];},getMyLocationMarkerImageInfo:function(){return this._infoCache["__MY_LOCATION"];},getDefaultWorkOrderMarkerImageInfo:function(){return this._infoCache["WORKORDER"];},getResourcesPath:function(){return dojo.moduleUrl("ibm.tivoli.fwm.mxmap","resources");},getMultiMarkerImageInfo:function(){return this._infoCache["MULTIMARKER"];},updateDefaultMarkerImageURL:function(_4e5){this.getDefaultMarkerImageInfo().setImageURL(_4e5);},_loadCache:function(){var _4e6="";if(document.body.dir=="rtl"){_4e6="/rtl";}this._infoCache={};this._infoCache["LABOR"]=new _4e0({imageUrl:this.getResourcesPath()+_4e6+"/symbology/labor/map_locationLabor.png",imageSize:[47,36],imageAnchor:[24,41]});this._infoCache["AMCREW"]=new _4e0({imageUrl:this.getResourcesPath()+_4e6+"/symbology/crew/map_locationCrew.png",imageSize:[47,36],imageAnchor:[24,41]});this._infoCache["WORKORDER"]=new _4e0({imageUrl:this.getResourcesPath()+_4e6+"/symbology/workorder/map_WO_default.png",imageSize:[47,36],imageAnchor:[24,36]});this._infoCache["__DEFAULT_MARKER"]=new _4e0({imageUrl:this.getResourcesPath()+_4e6+"/symbology/map_default_marker.svg",imageSize:[36,36],imageAnchor:[11,36]});this._infoCache["__START_POSITION_MARKER"]=new _4e0({imageUrl:this.getResourcesPath()+_4e6+"/map16_pointMarker_start.png",imageSize:[16,16],imageAnchor:[8,8]});this._infoCache["__END_POSITION_MARKER"]=new _4e0({imageUrl:this.getResourcesPath()+_4e6+"/map16_pointMarker_red.png",imageSize:[16,16],imageAnchor:[8,8]});this._infoCache["__DEFAULT_RO_MARKER"]=new _4e0({imageUrl:this.getResourcesPath()+_4e6+"/symbology/map_default_marker.svg",imageSize:[32,32],imageAnchor:[0,32]});this._infoCache["__LBS_EXCEEDED_ACCURACY"]=new _4e0({imageUrl:this.getResourcesPath()+_4e6+"/map16_pointMarker_red.png",imageSize:[16,16],imageAnchor:[8,8]});this._infoCache["__LBS_EXCEEDED_UPDATE_COND"]=new _4e0({imageUrl:this.getResourcesPath()+_4e6+"/map16_pointMarker_yellow.png",imageSize:[16,16],imageAnchor:[8,8]});this._infoCache["__LBS_INSIDE_TOLERANCE"]=new _4e0({imageUrl:this.getResourcesPath()+_4e6+"/map16_pointMarker_blue.png",imageSize:[16,16],imageAnchor:[8,8]});this._infoCache["__MY_LOCATION"]=new _4e0({imageUrl:this.getResourcesPath()+_4e6+"/map16_pointMarker_blue.png",imageSize:[16,16],imageAnchor:[8,8]});this._infoCache["__LAYER_ON"]=new _4e0({imageUrl:this.getResourcesPath()+_4e6+"/checkBox_selected.png",imageSize:[15,15],imageAnchor:[0,0]});this._infoCache["__LAYER_OFF"]=new _4e0({imageUrl:this.getResourcesPath()+_4e6+"/checkBox_unselected.png",imageSize:[15,15],imageAnchor:[0,0]});this._infoCache["__LAYER_DETAILS"]=new _4e0({imageUrl:this.getResourcesPath()+_4e6+"/symbologyMenu_arrow.png",imageSize:[15,15],imageAnchor:[0,0]});this._infoCache["__LAYER_DETAILS_OFF"]=new _4e0({imageUrl:this.getResourcesPath()+_4e6+"/symbologyMenu_arrow_off.png",imageSize:[15,15],imageAnchor:[0,0]});this._infoCache["UNASSIGNEDWORK"]=new _4e0({imageUrl:this.getResourcesPath()+_4e6+"/marker_yellow.png",imageSize:[20,34],imageAnchor:[10,34]});this._infoCache["MULTIMARKER"]=new _4e0({imageUrl:this.getResourcesPath()+_4e6+"/map_multiMarkerOverlay.png",imageSize:[47,36],imageAnchor:[24,36]});this._infoCache["WEATHER_ALERT_IMPACT"]=new _4e0({imageUrl:this.getResourcesPath()+_4e6+"/map32_pointMarker_orange.png",imageSize:[32,32],imageAnchor:[16,16]});}})};});},"dijit/_OnDijitClickMixin":function(){define(["dojo/on","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/has","./a11yclick"],function(on,_4e7,keys,_4e8,has,_4e9){var ret=_4e8("dijit._OnDijitClickMixin",null,{connect:function(obj,_4ea,_4eb){return this.inherited(arguments,[obj,_4ea=="ondijitclick"?_4e9:_4ea,_4eb]);}});ret.a11yclick=_4e9;return ret;});},"dojo/dnd/autoscroll":function(){define(["../_base/lang","../sniff","../_base/window","../dom-geometry","../dom-style","../window"],function(lang,has,win,_4ec,_4ed,_4ee){var _4ef={};lang.setObject("dojo.dnd.autoscroll",_4ef);_4ef.getViewport=_4ee.getBox;_4ef.V_TRIGGER_AUTOSCROLL=32;_4ef.H_TRIGGER_AUTOSCROLL=32;_4ef.V_AUTOSCROLL_VALUE=16;_4ef.H_AUTOSCROLL_VALUE=16;var _4f0,doc=win.doc,_4f1=Infinity,_4f2=Infinity;_4ef.autoScrollStart=function(d){doc=d;_4f0=_4ee.getBox(doc);var html=win.body(doc).parentNode;_4f1=Math.max(html.scrollHeight-_4f0.h,0);_4f2=Math.max(html.scrollWidth-_4f0.w,0);};_4ef.autoScroll=function(e){var v=_4f0||_4ee.getBox(doc),html=win.body(doc).parentNode,dx=0,dy=0;if(e.clientX<_4ef.H_TRIGGER_AUTOSCROLL){dx=-_4ef.H_AUTOSCROLL_VALUE;}else{if(e.clientX>v.w-_4ef.H_TRIGGER_AUTOSCROLL){dx=Math.min(_4ef.H_AUTOSCROLL_VALUE,_4f2-html.scrollLeft);}}if(e.clientY<_4ef.V_TRIGGER_AUTOSCROLL){dy=-_4ef.V_AUTOSCROLL_VALUE;}else{if(e.clientY>v.h-_4ef.V_TRIGGER_AUTOSCROLL){dy=Math.min(_4ef.V_AUTOSCROLL_VALUE,_4f1-html.scrollTop);}}window.scrollBy(dx,dy);};_4ef._validNodes={"div":1,"p":1,"td":1};_4ef._validOverflow={"auto":1,"scroll":1};_4ef.autoScrollNodes=function(e){var b,t,w,h,rx,ry,dx=0,dy=0,_4f3,_4f4;for(var n=e.target;n;){if(n.nodeType==1&&(n.tagName.toLowerCase() in _4ef._validNodes)){var s=_4ed.getComputedStyle(n),_4f5=(s.overflowX.toLowerCase() in _4ef._validOverflow),_4f6=(s.overflowY.toLowerCase() in _4ef._validOverflow);if(_4f5||_4f6){b=_4ec.getContentBox(n,s);t=_4ec.position(n,true);}if(_4f5){w=Math.min(_4ef.H_TRIGGER_AUTOSCROLL,b.w/2);rx=e.pageX-t.x;if(has("webkit")||has("opera")){rx+=win.body().scrollLeft;}dx=0;if(rx>0&&rx<b.w){if(rx<w){dx=-w;}else{if(rx>b.w-w){dx=w;}}_4f3=n.scrollLeft;n.scrollLeft=n.scrollLeft+dx;}}if(_4f6){h=Math.min(_4ef.V_TRIGGER_AUTOSCROLL,b.h/2);ry=e.pageY-t.y;if(has("webkit")||has("opera")){ry+=win.body().scrollTop;}dy=0;if(ry>0&&ry<b.h){if(ry<h){dy=-h;}else{if(ry>b.h-h){dy=h;}}_4f4=n.scrollTop;n.scrollTop=n.scrollTop+dy;}}if(dx||dy){return;}}try{n=n.parentNode;}catch(x){n=null;}}_4ef.autoScroll(e);};return _4ef;});},"dijit/form/_RadioButtonMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/_base/lang","dojo/query!css2","../registry"],function(_4f7,_4f8,_4f9,lang,_4fa,_4fb){return _4f8("dijit.form._RadioButtonMixin",null,{type:"radio",_getRelatedWidgets:function(){var ary=[];_4fa("input[type=radio]",this.focusNode.form||this.ownerDocument).forEach(lang.hitch(this,function(_4fc){if(_4fc.name==this.name&&_4fc.form==this.focusNode.form){var _4fd=_4fb.getEnclosingWidget(_4fc);if(_4fd){ary.push(_4fd);}}}));return ary;},_setCheckedAttr:function(_4fe){this.inherited(arguments);if(!this._created){return;}if(_4fe){_4f7.forEach(this._getRelatedWidgets(),lang.hitch(this,function(_4ff){if(_4ff!=this&&_4ff.checked){_4ff.set("checked",false);}}));}},_getSubmitValue:function(_500){return _500==null?"on":_500;},_onClick:function(e){if(this.checked||this.disabled){e.stopPropagation();e.preventDefault();return false;}if(this.readOnly){e.stopPropagation();e.preventDefault();_4f7.forEach(this._getRelatedWidgets(),lang.hitch(this,function(_501){_4f9.set(this.focusNode||this.domNode,"checked",_501.checked);}));return false;}var _502=false;var _503;_4f7.some(this._getRelatedWidgets(),function(_504){if(_504.checked){_503=_504;return true;}return false;});this.checked=true;_503&&(_503.checked=false);if(this.onClick(e)===false||e.defaultPrevented){_502=true;}this.checked=false;_503&&(_503.checked=true);if(_502){e.preventDefault();}else{this.set("checked",true);}return !_502;}});});},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(_505,_506){var _507=_506.prototype.onMove;return _505("dojo.dnd.TimedMoveable",_506,{timeout:40,constructor:function(node,_508){if(!_508){_508={};}if(_508.timeout&&typeof _508.timeout=="number"&&_508.timeout>=0){this.timeout=_508.timeout;}},onMoveStop:function(_509){if(_509._timer){clearTimeout(_509._timer);_507.call(this,_509,_509._leftTop);}_506.prototype.onMoveStop.apply(this,arguments);},onMove:function(_50a,_50b){_50a._leftTop=_50b;if(!_50a._timer){var _50c=this;_50a._timer=setTimeout(function(){_50a._timer=null;_507.call(_50c,_50a,_50a._leftTop);},this.timeout);}}});});},"ibm/tivoli/fwm/mxmap/layers/VirtualLayer":function(){define(["dojo/_base/declare","ibm/tivoli/fwm/mxmap/layers/Layer","ibm/tivoli/fwm/mxmap/_Base"],function(_50d,_50e,_50f){return _50d([_50e],{constructor:function(_510){this._layerName=_510.layerId;this._layerId=_510.layerId;this.enable();this.layerConf=this.symbManager.getLayerConfigById(_510.objectType);}});});},"ibm/tivoli/fwm/mxmap/factories/gmaps":function(){define(["dijit","dojo","dojox","dojo/require!dojo/io/script,ibm/tivoli/fwm/mxmap/impl/GMaps"],function(_511,dojo,_512){dojo.provide("ibm.tivoli.fwm.mxmap.factories.gmaps");dojo.require("dojo.io.script");dojo.require("ibm.tivoli.fwm.mxmap.impl.GMaps");ibm.tivoli.fwm.mxmap.factories.gmaps={compId:null,apiLoaded:function(){ibm.tivoli.fwm.mxmap.factory.apiInitialized("ibm.tivoli.fwm.mxmap.impl.GMaps","gmaps");},init:function(_513){var _514="3.8";var _515=_513.mapConf.GMAPS;if(_515&&_515.apiVersion){_514=_515.apiVersion;_514.toString();}var _516="";var _517=_513.mapConf.clientSecret;if(_513.mapConf.gmapAuthMethod=="CLIENTID"){if(_513.mapConf.key){_516="&client="+_513.mapConf.key;}if(_517!=""&&_517!=null&&_517!=undefined){_516=_516+"&signature="+_517;}}else{if(_513.mapConf.apiKey){_516="&key="+_513.mapConf.apiKey;}}this._loadJSApi(_513.mapConf.key,_513.mapConf.https,_514,_516);},_loadJSApi:function(key,_518,_519,_51a){var _51b="http";if(_518){_51b="https";}dojo.io.script.get({url:_51b+"://maps.google.com/maps/api/js?v="+_519+"&sensor=true&callback=ibm.tivoli.fwm.mxmap.factories.gmaps.apiLoaded"+_51a,timeout:30000,error:function(){console.error("Failed to load google apis");alert("Failed to load google maps api, check your internet conncetion.");}});}};});},"dojo/cache":function(){define(["./_base/kernel","./text"],function(dojo){return dojo.cache;});},"ibm/tivoli/fwm/mxmap/InfoWindow":function(){define(["dojo/main","dojo/_base/declare","ibm/tivoli/fwm/mxmap/_Base","dijit/_Widget","dijit/_Templated","dojo/parser","dojo/dom-style"],function(dojo,_51c,_51d,_51e,_51f,_520,_521){ibm.tivoli.fwm.mxmap.infoWindowZIndex=0;ibm.tivoli.fwm.mxmap.getNextInfoWindowZIndex=function(){return ibm.tivoli.fwm.mxmap.infoWindowZIndex++;};return _51c([_51d,_51e,_51f],{map:null,isRTL:null,templateString:"<div>\n<div style=\"position: relative; width: 0pt; height: 0pt; line-height: 0; border-color: transparent rgb(255, 255, 255) transparent transparent; margin-left: 0px; margin-top: 0px; border-style: solid; float: left; border-width: 15px 15px 15px 2px;\"></div>\n\n<div dojoAttachPoint=\"mainDialog\" style=\"padding:5px;position:relative;float:left;border:1px solid #000;background-color:#fff;min-width:100px;min-height:50px;\">\n\t<div dojoAttachPoint=\"closeBtn\" style=\"padding:0;margin:0;float:right;width:29px;height:29px;cursor: pointer;text-align:right;position:absolute;background-position: 8px 6px;\" ></div>\t\n\t<div dojoAttachPoint=\"content\" style=\"overflow-x:auto;\"></div>\n\t</div>\n</div>",_display:null,rootElement:null,domNode:null,mapId:null,constructor:function(_522){dojo.mixin(this,_522);this._display=false;if(!this.isRTL){this.isRTL=document.body.dir=="rtl";}},postCreate:function(){var me=this;_520.parse(this.domNode);_521.set(this.domNode,"display","none");_521.set(this.domNode,"position","absolute");if(this.enableScrollBars()){var _523=this.map.getHeight?this.map.getHeight():this.map.height;_521.set(this.content,"maxHeight",_523/2);}this._display=false;this.placeAt(this.rootElement);_521.set(this.closeBtn,"background","url("+dojo.config.fwm.servletBase+"/javascript/ibm/tivoli/fwm/mxmap/resources/ac16_winClose.png) no-repeat");if(this.isRTL==true){_521.set(this.closeBtn,"float","left");_521.set(this.closeBtn,"left","3px");_521.set(this.content,"marginLeft","20px");_521.set(this.domNode,"direction","rtl");}else{_521.set(this.closeBtn,"float","right");_521.set(this.closeBtn,"right","3px");_521.set(this.content,"marginRight","20px");_521.set(this.domNode,"direction","ltr");}if(dojo.isIE){if(this.content){_521.set(this.content,"overflow","hidden");_521.set(this.content,"overflow-x","hidden");}}dojo.connect(this.domNode,"oncontextmenu",function(evt){dojo.stopEvent(evt);});dojo.connect(this.domNode,"mousedown",function(evt){dojo.stopEvent(evt);});dojo.connect(this.domNode,"touchstart",function(evt){dojo.stopEvent(evt);});dojo.connect(this.closeBtn,"click",function(evt){me.close();});dojo.connect(this.closeBtn,"touchend",function(evt){me.close();});},updatePosition:function(x,y){var _524={x:0,y:0};var px=x+_524.x+this.offset.x;var py=y+_524.y+this.offset.y;_521.set(this.domNode,"left",px+"px");_521.set(this.domNode,"top",py+"px");},isDisplayed:function(){return (this._display==true);},setContent:function(_525){if(typeof (_525)=="object"){this.setDomContent(_525);}else{dojo.empty(this.content);dojo.create("div",{innerHTML:_525},this.content);}},setDomContent:function(_526){dojo.place(_526,this.content,"only");},close:function(){_521.set(this.domNode,"display","none");this._display=false;dojo.publish("endedUserInteractionOnMap_"+this.mapId,[{objectSource:this,objectSourceName:"infowindow",eventName:"closeBubble"}]);},offset:{y:-15,x:0},show:function(x,y){var _527={x:0,y:0};var px=x+_527.x+this.offset.x;var py=y+_527.y+this.offset.y;_521.set(this.domNode,"top",py+"px");_521.set(this.domNode,"left",px+"px");_521.set(this.domNode,"display","block");_521.set(this.domNode,"zIndex",ibm.tivoli.fwm.mxmap.getNextInfoWindowZIndex());this._display=true;if(dojo.isIE){var _528=this.map.getHeight?this.map.getHeight():this.map.height;var _529=_528/2;if(this.content.offsetHeight>_529){_521.set(this.content,"height",_529+"px");}}},moveUp:function(){_521.set(this.mainDialog,"marginTop","-40px");},enableScrollBars:function(){return (this.isMobile!=true);}});});},"ibm/tivoli/fwm/mxmap/toolbar/ext/WorkOrderSymbologyTool":function(){define(["dojo/_base/declare","ibm/tivoli/fwm/mxmap/layers/LayerPanelWidget","ibm/tivoli/fwm/mxmap/_Base","ibm/tivoli/fwm/mxmap/toolbar/ext/LayersTool","dijit/form/Button"],function(_52a,_52b,_52c,_52d,_52e){ibm.tivoli.fwm.mxmap.toolbar.ext.WorkOrderSymbologyTool=_52a([_52d],{iconClass:"basicMapToolbarBtn workOrderSymbologyMapToolbarBtn",constructor:function(_52f){dojo.mixin(this,_52f);var _530=ibm.tivoli.fwm.i18n.getMaxMsg("map","workordersymbology");this.label=_530||this.label;},execute:function(){var _531=this.map.getLayersManager().getLayerById("workorder");if((_531!=null)&&(_531.hasChildren())){this._destroyCurrentPanelWidget();var _532=new ibm.tivoli.fwm.mxmap.layers.LayerPanelWidget({map:this.map,tool:this,title:_531.getChildrenTitle()});_532.updateLayers(_531.getChildren());}}});return ibm.tivoli.fwm.mxmap.toolbar.ext.WorkOrderSymbologyTool;});},"dojo/promise/all":function(){define(["../_base/array","../_base/lang","../Deferred","../when"],function(_533,lang,_534,when){"use strict";var some=_533.some;return function all(_535){var _536,_533;if(lang.isArray(_535)){_533=_535;}else{if(_535&&typeof _535==="object"){_536=_535;}}var _537;var _538=[];if(_536){_533=[];for(var key in _536){if(Object.hasOwnProperty.call(_536,key)){_538.push(key);_533.push(_536[key]);}}_537={};}else{if(_533){_537=[];}}if(!_533||!_533.length){return new _534().resolve(_537);}var _539=new _534();_539.promise.always(function(){_537=_538=null;});var _53a=_533.length;some(_533,function(_53b,_53c){if(!_536){_538.push(_53c);}when(_53b,function(_53d){if(!_539.isFulfilled()){_537[_538[_53c]]=_53d;if(--_53a===0){_539.resolve(_537);}}},_539.reject);return _539.isFulfilled();});return _539.promise;};});},"ibm/tivoli/fwm/mxmap/toolbar/ext/RefresherTool":function(){define(["dijit","dojo","dojox","dojo/require!ibm/tivoli/fwm/mxmap/toolbar/ext/_ToolTemplate,ibm/tivoli/fwm/mxmap/_Base,dijit/form/Button"],function(_53e,dojo,_53f){dojo.provide("ibm.tivoli.fwm.mxmap.toolbar.ext.RefresherTool");dojo.require("ibm.tivoli.fwm.mxmap.toolbar.ext._ToolTemplate");dojo.require("ibm.tivoli.fwm.mxmap._Base");dojo.require("dijit.form.Button");dojo.declare("ibm.tivoli.fwm.mxmap.toolbar.ext.RefresherTool",ibm.tivoli.fwm.mxmap.toolbar.ext._ToolTemplate,{label:"Refresh",iconClass:"basicMapToolbarBtn refreshMapToolbarBtn",map:null,constructor:function(_540){dojo.mixin(this,_540);var _541=ibm.tivoli.fwm.i18n.getMaxMsg("map","refreshtoolbar");this.label=_541||this.label;},execute:function(){var _542={zoom:true,disableMsgs:false,automatic:false};this.map.refreshMap(_542);},disable:function(){},destroy:function(){this.destroyRecursive();}});});},"dojo/_base/url":function(){define(["./kernel"],function(dojo){var ore=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),ire=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$"),_543=function(){var n=null,_544=arguments,uri=[_544[0]];for(var i=1;i<_544.length;i++){if(!_544[i]){continue;}var _545=new _543(_544[i]+""),_546=new _543(uri[0]+"");if(_545.path==""&&!_545.scheme&&!_545.authority&&!_545.query){if(_545.fragment!=n){_546.fragment=_545.fragment;}_545=_546;}else{if(!_545.scheme){_545.scheme=_546.scheme;if(!_545.authority){_545.authority=_546.authority;if(_545.path.charAt(0)!="/"){var path=_546.path.substring(0,_546.path.lastIndexOf("/")+1)+_545.path;var segs=path.split("/");for(var j=0;j<segs.length;j++){if(segs[j]=="."){if(j==segs.length-1){segs[j]="";}else{segs.splice(j,1);j--;}}else{if(j>0&&!(j==1&&segs[0]=="")&&segs[j]==".."&&segs[j-1]!=".."){if(j==(segs.length-1)){segs.splice(j,1);segs[j-1]="";}else{segs.splice(j-1,2);j-=2;}}}}_545.path=segs.join("/");}}}}uri=[];if(_545.scheme){uri.push(_545.scheme,":");}if(_545.authority){uri.push("//",_545.authority);}uri.push(_545.path);if(_545.query){uri.push("?",_545.query);}if(_545.fragment){uri.push("#",_545.fragment);}}this.uri=uri.join("");var r=this.uri.match(ore);this.scheme=r[2]||(r[1]?"":n);this.authority=r[4]||(r[3]?"":n);this.path=r[5];this.query=r[7]||(r[6]?"":n);this.fragment=r[9]||(r[8]?"":n);if(this.authority!=n){r=this.authority.match(ire);this.user=r[3]||n;this.password=r[4]||n;this.host=r[6]||r[7];this.port=r[9]||n;}};_543.prototype.toString=function(){return this.uri;};return dojo._Url=_543;});},"dojox/main":function(){define(["dojo/_base/kernel"],function(dojo){return dojo.dojox;});},"ibm/tivoli/fwm/mxmap/LoadEsriPlugin":function(){define(function(){return {load:function(id,_547,_548){_547([id],function(mod){_548(mod);});}};});},"dojo/text":function(){define(["./_base/kernel","require","./has","./request"],function(dojo,_549,has,_54a){var _54b;if(1){_54b=function(url,sync,load){_54a(url,{sync:!!sync,headers:{"X-Requested-With":null}}).then(load);};}else{if(_549.getText){_54b=_549.getText;}else{console.error("dojo/text plugin failed to load because loader does not support getText");}}var _54c={},_54d=function(text){if(text){text=text.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var _54e=text.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(_54e){text=_54e[1];}}else{text="";}return text;},_54f={},_550={};dojo.cache=function(_551,url,_552){var key;if(typeof _551=="string"){if(/\//.test(_551)){key=_551;_552=url;}else{key=_549.toUrl(_551.replace(/\./g,"/")+(url?("/"+url):""));}}else{key=_551+"";_552=url;}var val=(_552!=undefined&&typeof _552!="string")?_552.value:_552,_553=_552&&_552.sanitize;if(typeof val=="string"){_54c[key]=val;return _553?_54d(val):val;}else{if(val===null){delete _54c[key];return null;}else{if(!(key in _54c)){_54b(key,true,function(text){_54c[key]=text;});}return _553?_54d(_54c[key]):_54c[key];}}};return {dynamic:true,normalize:function(id,_554){var _555=id.split("!"),url=_555[0];return (/^\./.test(url)?_554(url):url)+(_555[1]?"!"+_555[1]:"");},load:function(id,_556,load){var _557=id.split("!"),_558=_557.length>1,_559=_557[0],url=_556.toUrl(_557[0]),_55a="url:"+url,text=_54f,_55b=function(text){load(_558?_54d(text):text);};if(_559 in _54c){text=_54c[_559];}else{if(_556.cache&&_55a in _556.cache){text=_556.cache[_55a];}else{if(url in _54c){text=_54c[url];}}}if(text===_54f){if(_550[url]){_550[url].push(_55b);}else{var _55c=_550[url]=[_55b];_54b(url,!_556.async,function(text){_54c[_559]=_54c[url]=text;for(var i=0;i<_55c.length;){_55c[i++](text);}delete _550[url];});}}else{_55b(text);}}};});},"ibm/tivoli/fwm/mxmap/toolbar/ext/_ToggleTool":function(){define(["dojo/main","dijit/main","dojox/main","dojo/_base/declare","ibm/tivoli/fwm/mxmap/_Base","dijit/form/ToggleButton","ibm/tivoli/fwm/mxmap/toolbar/ext/_ToolTemplate"],function(dojo,_55d,_55e,_55f,_560,_561,_562){return _55f([_562],{toolActive:false,constructor:function(_563){dojo.mixin(this,_563);},createToolbarButton:function(){this._button=new _55d.form.ToggleButton({label:this.label,showLabel:false,iconClass:this.iconClass,onClick:dojo.hitch(this,function(_564){this.execute(_564);})});return this._button;},execute:function(_565){this.toggleStatus(_565);},toggleStatus:function(_566){if(this.isActive()==true){this.setActive(false);this.executeOff(_566);}else{this.setActive(true);this.executeOn(_566);}},isActive:function(){return this.toolActive;},executeOn:function(){console.error("to be implemented");},executeOff:function(){console.error("to be implemented");},setActive:function(_567){if(this._button!=null){this._button.set({checked:_567});}this.toolActive=_567;}});});},"ibm/tivoli/fwm/mxmap/toolbar/ext/MyLocationTool":function(){define(["dojo/_base/declare","ibm/tivoli/fwm/mxmap/_Base","ibm/tivoli/fwm/mxmap/toolbar/ext/_ToggleTool","dijit/form/Button","ibm/tivoli/fwm/mxmap/ImageLibraryManager","ibm/tivoli/fwm/mxmap/geolocation/MyCurrentLocation","ibm/tivoli/fwm/mxmap/Radius"],function(_568,_569,_56a,_56b,_56c,_56d,_56e){ibm.tivoli.fwm.mxmap.toolbar.ext.MyLocationToolStatus={DISABLED:-1,MARKER_CENTERED:0,MARKER_NOT_CENTERED:1};return _568([_56a],{label:"My Location",iconClass:"basicMapToolbarBtn myLocationMapToolbarBtn",map:null,myLocationToolStatus:null,myLocationMarker:null,lbsCircle:null,imageLibManager:null,myCurrentLocationInstance:null,_executedAtLeastOnce:false,_onEndPanFct:null,_createOnEndPanFct:null,_setCenterTimer:null,_setCenterTimerInterval:0,_setCenterPending:false,constructor:function(_56f){dojo.mixin(this,_56f);var _570=ibm.tivoli.fwm.i18n.getMaxMsg("map","mylocationtool");this.resetMyLocationTool();this.label=_570||this.label;this.imageLibManager=_56c.getImageLibraryManager();this.myCurrentLocationInstance=_56d.getMyCurrentLocationInstance();this._onEndPanFct=dojo.hitch(this,this.onEndPan);this._createOnEndPanFct=dojo.hitch(this,this.createOnEndPan);this._setCenterTimerInterval=this.getSetCenterInterval();},disable:function(){},destroy:function(){this.stopSetCenterControlTimer();this.resetMyLocationTool();this.destroyRecursive();},toggleStatus:function(){this.toggleMyLocationStatus();},toggleMyLocationStatus:function(){switch(this.myLocationToolStatus){case ibm.tivoli.fwm.mxmap.toolbar.ext.MyLocationToolStatus.DISABLED:this.setActive(true);this.myLocationToolStatus=ibm.tivoli.fwm.mxmap.toolbar.ext.MyLocationToolStatus.MARKER_CENTERED;this.watchMyLocationMarkerPosition();this.startSetCenterControlTimer();break;case ibm.tivoli.fwm.mxmap.toolbar.ext.MyLocationToolStatus.MARKER_NOT_CENTERED:this.setActive(true);this.myLocationToolStatus=ibm.tivoli.fwm.mxmap.toolbar.ext.MyLocationToolStatus.MARKER_CENTERED;this.setCenterAndUpdateMarkerPosition({recenter:true});break;case ibm.tivoli.fwm.mxmap.toolbar.ext.MyLocationToolStatus.MARKER_CENTERED:this.resetMyLocationTool();this.stopSetCenterControlTimer();break;default:break;}},setCenterAndUpdateMarkerPosition:function(_571){var _572=((_571==null)||(_571==undefined)||(_571.recenter==undefined)||(_571.recenter!=true))?true:false;var _573=((this._setCenterTimerInterval==0)||(this._executedAtLeastOnce==false)||(_572==false))?true:false;this._executedAtLeastOnce=true;if(this.myLocationToolStatus!=ibm.tivoli.fwm.mxmap.toolbar.ext.MyLocationToolStatus.DISABLED){if(this.myCurrentLocationInstance){if(this.myCurrentLocationInstance.getPosition()&&this.myCurrentLocationInstance.getPosition().coords){var _574=this.myCurrentLocationInstance.getPosition().coords;var lat=_574.latitude;var lng=_574.longitude;var _575=_574.accuracy;var _576=this.map.latLng(lat,lng);if(_572==true){this.removeMyLocationMarker();this.createMyLocationMarker(_576,_575);this._setCenterPending=true;}if(_573==true){this._setCenterPending=false;if(this.myLocationToolStatus==ibm.tivoli.fwm.mxmap.toolbar.ext.MyLocationToolStatus.MARKER_CENTERED){this.map.removeMapEventHandler(this.map.Events.endPan,this._onEndPanFct);this.map.addMapEventHandler(this.map.Events.endPan,this._createOnEndPanFct);this._center(_576);}}}}}},_handler:null,watchMyLocationMarkerPosition:function(){if(this.myCurrentLocationInstance){this._handler=this.myCurrentLocationInstance.createListener(dojo.hitch(this,this.setCenterAndUpdateMarkerPosition),dojo.hitch(this,this.failedToGetLocation));this.myCurrentLocationInstance.listenToUserLocation(this._handler);}},convertedPoints:{},createMyLocationMarker:function(_577,_578){var _579=function(_57a){var p=_57a[0];this.convertedPoints[_577]=p;var _57b=this.imageLibManager.getMyLocationMarkerImageInfo().generateMarkerData("");this.createAccuracyCircle(p,_578);this.myLocationMarker=this.map.addMarker(p,_57b);};var _57c=function(_57d){console.error("error",_57d);};this.map.getAllPointsFromWGS84([_577],dojo.hitch(this,_579),dojo.hitch(this,_57c));},_center:function(_57e){var _57f=function(_580){var p=_580[0];this.map.setCenter(p);};var _581=function(_582){console.error("error",_582);};this.map.getAllPointsFromWGS84([_57e],dojo.hitch(this,_57f),dojo.hitch(this,_581));},removeMyLocationMarker:function(){if(this.myLocationMarker){this.map.removeMarker(this.myLocationMarker);this.myLocationMarker=null;}if(this.lbsCircle){this.map.removePolyline(this.lbsCircle);this.lbsCircle=null;}},failedToGetLocation:function(){if(this._executedAtLeastOnce==false){this.map.failedToGetLocation();this.resetMyLocationTool();}else{this.map.failedToGetLocationStatusMessages();}},resetMyLocationTool:function(){this.myLocationToolStatus=ibm.tivoli.fwm.mxmap.toolbar.ext.MyLocationToolStatus.DISABLED;this.removeMyLocationMarker();this.stopWatchingMyLocationMarkerPosition();this._executedAtLeastOnce=false;this.setActive(false);this.map.removeMapEventHandler(this.map.Events.endPan,this._onEndPanFct);},stopWatchingMyLocationMarkerPosition:function(){if(this.myCurrentLocationInstance!=null){this.myCurrentLocationInstance.removeListeners(this._handler);}},createOnEndPan:function(){this.map.removeMapEventHandler(this.map.Events.endPan,this._createOnEndPanFct);this.map.addMapEventHandler(this.map.Events.endPan,this._onEndPanFct);},onEndPan:function(_583,_584,_585){if(this.myLocationToolStatus==ibm.tivoli.fwm.mxmap.toolbar.ext.MyLocationToolStatus.MARKER_CENTERED){if(this.map.isExecutingFullScreen()==false){this.myLocationToolStatus=ibm.tivoli.fwm.mxmap.toolbar.ext.MyLocationToolStatus.MARKER_NOT_CENTERED;}}},createAccuracyCircle:function(_586,_587){if(this.lbsCircle==null){var _588=this.map.radius(_586,10);var _589=(_587/1000);if(this.lbsCircle){this.removeMyLocationMarker();}this.lbsCircle=_588.getPolyline(_589,"#C6DBEB");this.map.addPolyline(this.lbsCircle,{centerPoint:_586,width:3,opacity:0.5,fillColor:"#D0E0EC",closed:true,radiusInKMs:_589});}},_doStart:function(){this._setCenterTimer=new dojox.timing.Timer(this._setCenterTimerInterval*1000);this._setCenterTimer.onTick=dojo.hitch(this,function(){if(this._setCenterPending==true){this.setCenterAndUpdateMarkerPosition({recenter:true});this._setCenterPending=false;}});this._setCenterTimer.onStart=dojo.hitch(this,function(){if(dojo.config.fwm.debug==true){}});this._setCenterTimer.onStop=dojo.hitch(this,function(){if(dojo.config.fwm.debug==true){}});this._setCenterTimer.start();},startSetCenterControlTimer:function(){if(this._setCenterTimer==null){if(this._setCenterTimerInterval>0){if(dojo.config.fwm.debug==true){}this._doStart();}else{if(dojo.config.fwm.debug==true){}}}else{if(dojo.config.fwm.debug==true){}}},stopSetCenterControlTimer:function(){if(this._setCenterTimer==null){if(dojo.config.fwm.debug==true){}}else{if(dojo.config.fwm.debug==true){}this._setCenterTimer.stop();this._setCenterTimer=null;}},getSetCenterInterval:function(){return this.map.mapConf.myLocationToolSetCenterInterval;}});});},"ibm/tivoli/fwm/mxmap/toolbar/ext/QueryUnassignedWorkTool":function(){define(["dojo/main","dojo/_base/declare","ibm/tivoli/fwm/mxmap/toolbar/ext/_ToggleTool","dijit/form/Button"],function(dojo,_58a,_58b,_58c){return _58a([_58b],{label:"Unassigned Work Orders",iconClass:"basicMapToolbarBtn unassignedWorkOrderMapToolbarBtn",map:null,layerLabel:null,constructor:function(_58d){dojo.mixin(this,_58d);var _58e=ibm.tivoli.fwm.i18n.getMaxMsg("map","unassignedworktool");this.label=_58e||this.label;this.addSubscription("onQueryUnassignedWorkResult_"+this.map.getId(),dojo.hitch(this,this.queryReturned));this.addSubscription("onWorkAssigned_"+this.map.getId(),dojo.hitch(this,this.onWorkAssigned));this.addSubscription("onQueryUnassignedWorkCancel_"+this.map.getId(),dojo.hitch(this,this.cancelQuery));},onWorkAssigned:function(data){if(this.isActive()==true){dojo.publish("removeRecordsFromLayer_"+this.map.getId(),[this.layerLabel,[data]]);}},_lastQueryData:null,_lastQueryBounds:null,executeOn:function(){this._lastQueryBounds=this.map.getBounds();this.map.getMaximo().showQueryUnassignedWorkDialog(this._lastQueryBounds);},executeOff:function(){this._clearUnassignedLayer();},_clearUnassignedLayer:function(){if(this.layerLabel!=null){dojo.publish("removeLayer_"+this.map.getId(),[this.layerLabel]);}},queryReturned:function(data,_58f){var _590=_58f&&_58f.automatic;var _591=false;if(_58f){_591=true;}if(data==null){if(!_590){this.map.getMaximo().showMessage("mapserver","noworkordersinarea");this.setActive(false);}return;}this._lastQueryData=data.queryData;if(data.records.length==0&&(!data.spatialEnabledRecords||data.spatialEnabledRecords.length==0)){if(!_590){if(data.error){this.map.getMaximo().showMessage(data.error.group,data.error.key,[data.error.params]);}else{this.map.getMaximo().showMessage("mapserver","noworkordersinarea");}this.setActive(false);}}else{this.layerLabel=data.layerLabel;if(data.spatialEnabledRecords!=null&&data.spatialEnabledRecords.length>0){var fct=function(mbos,_592){var _593=data.records.concat(mbos);if(_593.length==0){if(!_590){this.setActive(false);this.map.getMaximo().showMessage("mapserver","noworkordersinarea");}}else{this._addDefaultMarkerInfo(_593);dojo.publish("addRecordsToLayer_"+this.map.getId(),[data.layerLabel,_593,true,null,null,_591]);}};this.map.filterRecordsInMapView(data.spatialEnabledRecords,dojo.hitch(this,fct));}else{var _594=data.records;this._addDefaultMarkerInfo(_594);dojo.publish("addRecordsToLayer_"+this.map.getId(),[data.layerLabel,_594,true,null,null,_591]);}}},_addDefaultMarkerInfo:function(_595){var _596={"url":ibm.tivoli.fwm.mxmap.ImageLibraryManager.getImageLibraryManager().getResourcesPath()+"/symbology/workorder/map_WO_Unassigned.png","offsetx":24,"offsety":36,"width":47,"height":36};for(var i in _595){_595[i].ownDefaultMarker=_596;}},cancelQuery:function(data){this.setActive(false);},disable:function(){},destroy:function(){this.destroyRecursive();}});});},"ibm/tivoli/fwm/mxmap/layers/LayerWidget":function(){define(["dojo/_base/declare","ibm/tivoli/fwm/mxmap/_Base","dijit/_Widget","dijit/_Templated"],function(_597,_598,_599,_59a){ibm.tivoli.fwm.mxmap.layers.LayerWidget=_597([_599,_59a],{templateString:dojo.cache("ibm.tivoli.fwm.mxmap","templates/LayerWidget.html","<div style=\"border: 1px solid #E0E0E0; border-bottom:0px\">\n<table style=\"width: 99%;height:35px;\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td data-dojo-attach-event=\"ondijitclick:_enableOrDisableLayer\" style=\"padding: 5px;\">\n\t\t\t\t<div data-dojo-attach-point=\"activeOrHiddenImage\"></div>\n\t\t\t</td>\n\t\t\t<td style=\"width: 90%;\" data-dojo-attach-event=\"ondijitclick:_enableOrDisableLayer\" >\n\t\t\t\t<div data-dojo-attach-point=\"layerInfo\"></div>\n\t\t\t</td>\n\t\t\t<td data-dojo-attach-event=\"ondijitclick:_showChildrenLayerWidget\" style=\"padding: 0px 4px 0px 12px; height: 35px;\">\n\t\t\t\t<div data-dojo-attach-point=\"submenu\" style=\"float:right;\"></div>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>"),layer:null,_layerLeftImageDom:null,_layerRightImageDom:null,layerPanel:null,_symbologyPanelManager:null,constructor:function(_59b){dojo.mixin(this,_59b);},postCreate:function(){this.layerInfo.textContent=this.layer.getLayerName();this.setLeftIcon();this.setRightIcon();dojo.style(this.layerInfo,"float",(document.body.dir=="rtl")?"right":"left");},_showChildrenLayerWidget:function(){if(this.layer.hasChildren()==true){if(this.layer.isDisabled()){this.layer.toggleState();}var _59c=new ibm.tivoli.fwm.mxmap.layers.LayerPanelWidget({map:this.layerPanel.map,tool:this.layerPanel.tool,title:this.layer.getChildrenTitle()});_59c.updateLayers(this.layer.getChildren());this.layerPanel.close();}},_enableOrDisableLayer:function(){this.layer.toggleState();if(this.layerPanel&&this.closeOnAction){this.layerPanel.close();}else{this.layerPanel.updateIcons();}},destroyRecursive:function(){this.inherited(arguments);if(this._layerImageDom){dojo.destroy(this._layerImageDom);}if(this._layerRightImageDom){dojo.destroy(this._layerRightImageDom);}},setLeftIcon:function(){var _59d=this.layer.getLeftIconURL();if(_59d!=null){if(this._layerLeftImageDom){dojo.attr(this._layerLeftImageDom,"src",_59d);}else{this._layerLeftImageDom=dojo.create("img",{src:_59d},this.activeOrHiddenImage,"only");dojo.style(this._layerLeftImageDom,{opacity:1,visibility:"visible"});}}},setRightIcon:function(){var _59e=this.layer.getRightIconURL();this._layerRightImageDom=dojo.create("img",{src:_59e},this.submenu,"last");if(_59e==null){dojo.style(this._layerRightImageDom,{visibility:"hidden"});}}});return ibm.tivoli.fwm.mxmap.layers.LayerWidget;});},"dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./domReady","./sniff","./_base/window"],function(_59f,lang,_5a0,has,_5a1){var html=_5a1.doc.documentElement,ie=has("ie"),_5a2=has("trident"),_5a3=has("opera"),maj=Math.floor,ff=has("ff"),_5a4=_59f.boxModel.replace(/-/,""),_5a5={"dj_quirks":has("quirks"),"dj_opera":_5a3,"dj_khtml":has("khtml"),"dj_webkit":has("webkit"),"dj_safari":has("safari"),"dj_chrome":has("chrome"),"dj_edge":has("edge"),"dj_gecko":has("mozilla"),"dj_ios":has("ios"),"dj_android":has("android")};if(ie){_5a5["dj_ie"]=true;_5a5["dj_ie"+maj(ie)]=true;_5a5["dj_iequirks"]=has("quirks");}if(_5a2){_5a5["dj_trident"]=true;_5a5["dj_trident"+maj(_5a2)]=true;}if(ff){_5a5["dj_ff"+maj(ff)]=true;}_5a5["dj_"+_5a4]=true;var _5a6="";for(var clz in _5a5){if(_5a5[clz]){_5a6+=clz+" ";}}html.className=lang.trim(html.className+" "+_5a6);_5a0(function(){if(!_59f.isBodyLtr()){var _5a7="dj_rtl dijitRtl "+_5a6.replace(/ /g,"-rtl ");html.className=lang.trim(html.className+" "+_5a7+"dj_rtl dijitRtl "+_5a6.replace(/ /g,"-rtl "));}});return has;});},"dijit/Tooltip":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/fx","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/on","dojo/sniff","./_base/manager","./place","./_Widget","./_TemplatedMixin","./BackgroundIframe","dojo/text!./templates/Tooltip.html","./main"],function(_5a8,_5a9,fx,dom,_5aa,_5ab,_5ac,lang,_5ad,on,has,_5ae,_5af,_5b0,_5b1,_5b2,_5b3,_5b4){var _5b5=_5a9("dijit._MasterTooltip",[_5b0,_5b1],{duration:_5ae.defaultDuration,templateString:_5b3,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.bgIframe=new _5b2(this.domNode);this.fadeIn=fx.fadeIn({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,"_onShow")});this.fadeOut=fx.fadeOut({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,"_onHide")});},show:function(_5b6,_5b7,_5b8,rtl,_5b9,_5ba,_5bb){if(this.aroundNode&&this.aroundNode===_5b7&&this.containerNode.innerHTML==_5b6){return;}if(this.fadeOut.status()=="playing"){this._onDeck=arguments;return;}this.containerNode.innerHTML=_5b6;if(_5b9){this.set("textDir",_5b9);}this.containerNode.align=rtl?"right":"left";var pos=_5af.around(this.domNode,_5b7,_5b8&&_5b8.length?_5b8:_5bc.defaultPosition,!rtl,lang.hitch(this,"orient"));var _5bd=pos.aroundNodePos;if(pos.corner.charAt(0)=="M"&&pos.aroundCorner.charAt(0)=="M"){this.connectorNode.style.top=_5bd.y+((_5bd.h-this.connectorNode.offsetHeight)>>1)-pos.y+"px";this.connectorNode.style.left="";}else{if(pos.corner.charAt(1)=="M"&&pos.aroundCorner.charAt(1)=="M"){this.connectorNode.style.left=_5bd.x+((_5bd.w-this.connectorNode.offsetWidth)>>1)-pos.x+"px";}else{this.connectorNode.style.left="";this.connectorNode.style.top="";}}_5ac.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=true;this.aroundNode=_5b7;this.onMouseEnter=_5ba||noop;this.onMouseLeave=_5bb||noop;},orient:function(node,_5be,_5bf,_5c0,_5c1){this.connectorNode.style.top="";var _5c2=_5c0.h,_5c3=_5c0.w;node.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[_5be+"-"+_5bf];this.domNode.style.width="auto";var size=_5ab.position(this.domNode);if(has("ie")||has("trident")){size.w+=2;}var _5c4=Math.min((Math.max(_5c3,1)),size.w);_5ab.setMarginBox(this.domNode,{w:_5c4});if(_5bf.charAt(0)=="B"&&_5be.charAt(0)=="B"){var bb=_5ab.position(node);var _5c5=this.connectorNode.offsetHeight;if(bb.h>_5c2){var _5c6=_5c2-((_5c1.h+_5c5)>>1);this.connectorNode.style.top=_5c6+"px";this.connectorNode.style.bottom="";}else{this.connectorNode.style.bottom=Math.min(Math.max(_5c1.h/2-_5c5/2,0),bb.h-_5c5)+"px";this.connectorNode.style.top="";}}else{this.connectorNode.style.top="";this.connectorNode.style.bottom="";}return Math.max(0,size.w-_5c3);},_onShow:function(){if(has("ie")){this.domNode.style.filter="";}},hide:function(_5c7){if(this._onDeck&&this._onDeck[1]==_5c7){this._onDeck=null;}else{if(this.aroundNode===_5c7){this.fadeIn.stop();this.isShowingNow=false;this.aroundNode=null;this.fadeOut.play();}else{}}this.onMouseEnter=this.onMouseLeave=noop;},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";if(this._onDeck){this.show.apply(this,this._onDeck);this._onDeck=null;}}});if(has("dojo-bidi")){_5b5.extend({_setAutoTextDir:function(node){this.applyTextDir(node);_5a8.forEach(node.children,function(_5c8){this._setAutoTextDir(_5c8);},this);},_setTextDirAttr:function(_5c9){this._set("textDir",_5c9);if(_5c9=="auto"){this._setAutoTextDir(this.containerNode);}else{this.containerNode.dir=this.textDir;}}});}_5b4.showTooltip=function(_5ca,_5cb,_5cc,rtl,_5cd,_5ce,_5cf){if(_5cc){_5cc=_5a8.map(_5cc,function(val){return {after:"after-centered",before:"before-centered"}[val]||val;});}if(!_5bc._masterTT){_5b4._masterTT=_5bc._masterTT=new _5b5();}return _5bc._masterTT.show(_5ca,_5cb,_5cc,rtl,_5cd,_5ce,_5cf);};_5b4.hideTooltip=function(_5d0){return _5bc._masterTT&&_5bc._masterTT.hide(_5d0);};var _5d1="DORMANT",_5d2="SHOW TIMER",_5d3="SHOWING",_5d4="HIDE TIMER";function noop(){};var _5bc=_5a9("dijit.Tooltip",_5b0,{label:"",showDelay:400,hideDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(_5d5){_5a8.forEach(this._connections||[],function(_5d6){_5a8.forEach(_5d6,function(_5d7){_5d7.remove();});},this);this._connectIds=_5a8.filter(lang.isArrayLike(_5d5)?_5d5:(_5d5?[_5d5]:[]),function(id){return dom.byId(id,this.ownerDocument);},this);this._connections=_5a8.map(this._connectIds,function(id){var node=dom.byId(id,this.ownerDocument),_5d8=this.selector,_5d9=_5d8?function(_5da){return on.selector(_5d8,_5da);}:function(_5db){return _5db;},self=this;return [on(node,_5d9(_5ad.enter),function(){self._onHover(this);}),on(node,_5d9("focusin"),function(){self._onHover(this);}),on(node,_5d9(_5ad.leave),lang.hitch(self,"_onUnHover")),on(node,_5d9("focusout"),lang.hitch(self,"set","state",_5d1))];},this);this._set("connectId",_5d5);},addTarget:function(node){var id=node.id||node;if(_5a8.indexOf(this._connectIds,id)==-1){this.set("connectId",this._connectIds.concat(id));}},removeTarget:function(node){var id=node.id||node,idx=_5a8.indexOf(this._connectIds,id);if(idx>=0){this._connectIds.splice(idx,1);this.set("connectId",this._connectIds);}},buildRendering:function(){this.inherited(arguments);_5aa.add(this.domNode,"dijitTooltipData");},startup:function(){this.inherited(arguments);var ids=this.connectId;_5a8.forEach(lang.isArrayLike(ids)?ids:[ids],this.addTarget,this);},getContent:function(node){return this.label||this.domNode.innerHTML;},state:_5d1,_setStateAttr:function(val){if(this.state==val||(val==_5d2&&this.state==_5d3)||(val==_5d4&&this.state==_5d1)){return;}if(this._hideTimer){this._hideTimer.remove();delete this._hideTimer;}if(this._showTimer){this._showTimer.remove();delete this._showTimer;}switch(val){case _5d1:if(this._connectNode){_5bc.hide(this._connectNode);delete this._connectNode;this.onHide();}break;case _5d2:if(this.state!=_5d3){this._showTimer=this.defer(function(){this.set("state",_5d3);},this.showDelay);}break;case _5d3:var _5dc=this.getContent(this._connectNode);if(!_5dc){this.set("state",_5d1);return;}_5bc.show(_5dc,this._connectNode,this.position,!this.isLeftToRight(),this.textDir,lang.hitch(this,"set","state",_5d3),lang.hitch(this,"set","state",_5d4));this.onShow(this._connectNode,this.position);break;case _5d4:this._hideTimer=this.defer(function(){this.set("state",_5d1);},this.hideDelay);break;}this._set("state",val);},_onHover:function(_5dd){if(this._connectNode&&_5dd!=this._connectNode){this.set("state",_5d1);}this._connectNode=_5dd;this.set("state",_5d2);},_onUnHover:function(_5de){this.set("state",_5d4);},open:function(_5df){this.set("state",_5d1);this._connectNode=_5df;this.set("state",_5d3);},close:function(){this.set("state",_5d1);},onShow:function(){},onHide:function(){},destroy:function(){this.set("state",_5d1);_5a8.forEach(this._connections||[],function(_5e0){_5a8.forEach(_5e0,function(_5e1){_5e1.remove();});},this);this.inherited(arguments);}});_5bc._MasterTooltip=_5b5;_5bc.show=_5b4.showTooltip;_5bc.hide=_5b4.hideTooltip;_5bc.defaultPosition=["after-centered","before-centered"];return _5bc;});},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(_5e2,lang){var _5e3=/[&<>'"\/]/g;var _5e4={"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#x27;","/":"&#x2F;"};var _5e5={};lang.setObject("dojo.string",_5e5);_5e5.escape=function(str){if(!str){return "";}return str.replace(_5e3,function(c){return _5e4[c];});};_5e5.codePointAt=String.prototype.codePointAt?function(str,_5e6){return String.prototype.codePointAt.call(str,_5e6);}:function(str,_5e7){if(str==null){throw new TypeError("codePointAt called on null or undefined");}var size;var _5e8;var _5e9;var _5ea;str=String(str);size=str.length;_5ea=_5e7?Number(_5e7):0;if(_5ea!=_5ea){_5ea=0;}if(_5ea<0||_5ea>=size){return undefined;}_5e8=str.charCodeAt(_5ea);if(_5e8>=55296&&_5e8<=56319&&size>_5ea+1){_5e9=str.charCodeAt(_5ea+1);if(_5e9>=56320&&_5e9<=57343){return (_5e8-55296)*1024+_5e9-56320+65536;}}return _5e8;};_5e5.fromCodePoint=String.fromCodePoint||function(){var _5eb=[];var _5ec=0;var _5ed="";var _5ee;var _5ef;for(_5ef=0,len=arguments.length;_5ef!==len;++_5ef){_5ee=+arguments[_5ef];if(!(_5ee<1114111&&(_5ee>>>0)===_5ee)){throw RangeError("Invalid code point: "+_5ee);}if(_5ee<=65535){_5ec=_5eb.push(_5ee);}else{_5ee-=65536;_5ec=_5eb.push((_5ee>>10)+55296,(_5ee%1024)+56320);}if(_5ec>=16383){_5ed+=String.fromCharCode.apply(null,_5eb);_5eb.length=0;}}return _5ed+String.fromCharCode.apply(null,_5eb);};_5e5.rep=function(str,num){if(num<=0||!str){return "";}var buf=[];for(;;){if(num&1){buf.push(str);}if(!(num>>=1)){break;}str+=str;}return buf.join("");};_5e5.pad=function(text,size,ch,end){if(!ch){ch="0";}var out=String(text),pad=_5e5.rep(ch,Math.ceil((size-out.length)/ch.length));return end?out+pad:pad+out;};_5e5.substitute=function(_5f0,map,_5f1,_5f2){_5f2=_5f2||_5e2.global;_5f1=_5f1?lang.hitch(_5f2,_5f1):function(v){return v;};return _5f0.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(_5f3,key,_5f4){if(key==""){return "$";}var _5f5=lang.getObject(key,false,map);if(_5f4){_5f5=lang.getObject(_5f4,false,_5f2).call(_5f2,_5f5,key);}var _5f6=_5f1(_5f5,key);if(typeof _5f6==="undefined"){throw new Error("string.substitute could not find key \""+key+"\" in template");}return _5f6.toString();});};_5e5.trim=String.prototype.trim?lang.trim:function(str){str=str.replace(/^\s+/,"");for(var i=str.length-1;i>=0;i--){if(/\S/.test(str.charAt(i))){str=str.substring(0,i+1);break;}}return str;};return _5e5;});},"ibm/tivoli/fwm/mxmap/routing/RouterFactory":function(){define(["dijit","dojo","dojox","dojo/require!ibm/tivoli/fwm/mxmap/_Base"],function(_5f7,dojo,_5f8){dojo.provide("ibm.tivoli.fwm.mxmap.routing.RouterFactory");dojo.require("ibm.tivoli.fwm.mxmap._Base");dojo.declare("ibm.tivoli.fwm.mxmap.routing.RouterFactory",ibm.tivoli.fwm.mxmap._Base,{provider:null,router:null,map:null,constructor:function(_5f9){dojo.mixin(this,_5f9);},createRouter:function(_5fa){var _5fb="ibm.tivoli.fwm.mxmap.routing.impl."+this.provider;var _5fc="dojo."+"require('"+_5fb+"')";eval(_5fc);if(this.router!=null){return this.router;}var me=this;var _5fd=new Promise(function(_5fe,_5ff){dojo.ready(function(){me._params=_5fa;var _600=" me._routerInstance = new ibm.tivoli.fwm.mxmap.routing.impl."+me.provider+"(me._params)";eval(_600);me.router=me._routerInstance;me._routerInstance.init();_5fe(me._routerInstance);});});return _5fd;}});});},"ibm/tivoli/fwm/mxmap/routing/itinerary/Leg":function(){define(["dojo/_base/declare","dojo/main","ibm/tivoli/fwm/mxmap/_Base","dijit/_Widget","dijit/_Templated","ibm/tivoli/fwm/mxmap/routing/itinerary/Step","ibm/tivoli/fwm/mxmap/routing/Router"],function(_601,dojo,_602,_603,_604,Step,_605){return _601([_603,_604,_602],{templateString:dojo.cache("ibm.tivoli.fwm.mxmap","templates/Leg.html","<div  style=\"width:100%;margin-bottom:10px;\">\n<div data-dojo-attach-point=\"distanceNode\" style=\"text-align: center;width: 100%;\"></div>\n<div data-dojo-attach-point=\"stepsNode\"></div>\n<div data-dojo-attach-event=\"ondijitclick:_onClick\" data-dojo-attach-point=\"legInfo\" style=\"background-color: #FAFAFA;border: 1px solid #E0E0E0;margin: 1px;padding: 10px 2px;\">\n<span data-dojo-attach-point=\"markerNode\" style=\"float:left;margin-top:-10px\"></span>\n<span data-dojo-attach-point=\"endLocDescNode\"></span>\n</div>\n</div>"),location:null,info:null,marker:null,steps:[],stepWidgets:[],needsToGeocode:null,distanceToLeg:null,durationToLeg:null,distanceUnit:null,map:null,_maxMarkerImageWidth:47,setMap:function(map){this.map=map;},constructor:function(_606){dojo.mixin(this,_606);this.steps=[];this.stepWidgets=[];},postCreate:function(){this.addressLoading=ibm.tivoli.fwm.i18n.getMaxMsg("map","address_being_loaded");this.failedToLoadAddress=ibm.tivoli.fwm.i18n.getMaxMsg("map","address_info_not_found");if(this.distanceToLeg!=null){this.distanceNode.innerHTML=ibm.tivoli.fwm.mxmap.routing.DistanceUnit.formatDistance(this.distanceToLeg,this.distanceUnit);this.distanceNode.innerHTML+=" - ";}if(this.durationToLeg!=null){this.distanceNode.innerHTML+=ibm.tivoli.fwm.mxmap.routing.DistanceUnit.formatTime(this.durationToLeg);}if(this.marker!=null){dojo.create("img",{src:(this.marker.iconUrl!=undefined)?this.marker.iconUrl:this.marker.icon},this.markerNode,"only");var _607=(this.marker.labelText!=undefined)?this.marker.labelText:this.marker.label;var _608=(this.marker.attributes.iconSize!=undefined)?this.marker.attributes.iconSize:this.marker.iconSize;var _609=(this.marker.attributes.iconAnchor!=undefined)?this.marker.attributes.iconAnchor:this.marker.iconAnchor;if(_607){var _60a=this._calculateLabelOffset(_607);var _60b;var _60c;if(dojo.isIE){_60b=_609[0]-_60a;_60c=6-_608[1];}else{_60c=9;_60b=_609[0]+4+_60a;}_60b+="px";_60c+="px";dojo.create("div",{innerHTML:_607,style:{"float":"left","left":_60b,"top":_60c,"position":"relative","color":"white"}},this.markerNode,"last");}var _60d=Math.floor(this._maxMarkerImageWidth/2);var _60e=_608[0]-_609[0];if(_60e<_60d){var _60f=(_60d-_60e)+"px";dojo.style(this.markerNode,"marginLeft",_60f);dojo.style(this.markerNode,"marginRight",_60f);}}if(this.info||this.needsToGeocode==true){if(this.needsToGeocode==true){var _610=function(_611){var _612=_611[0].formattedAddress;this.endLocDescNode.innerHTML=_612;this.needsToGeocode=false;this.info=_612;};var _613=function(_614){this.endLocDescNode.innerHTML=this.failedToLoadAddress;};this.map.geocoder.reverseGeocode(this.location.lat,this.location.lng,dojo.hitch(this,_610),dojo.hitch(this,_613));this.endLocDescNode.innerHTML=this.addressLoading;}else{this.endLocDescNode.innerHTML=this.info;}}for(var i=0;i<this.steps.length;i++){var step=this.steps[i];step.position=i+1;step.distanceUnit=this.distanceUnit;step.map=this.map;step.closeDialog=this.closeDialog;var _615=new ibm.tivoli.fwm.mxmap.routing.itinerary.Step(step,this.map);dojo.place(_615.domNode,this.stepsNode,"last");this.stepWidgets.push(_615);}},_onClick:function(evt){this.map.setCenter(this.location);this.closeDialog();},_calculateLabelOffset:function(_616){var _617=0;var _618=parseInt(_616);if((_618/100)>=1){_617=7;}else{if((_618/10)>=1){_617=4;}}return _617;}});});},"dijit/form/DropDownButton":function(){define(["dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","dojo/query","../registry","../popup","./Button","../_Container","../_HasDropDown","dojo/text!./templates/DropDownButton.html","../a11yclick"],function(_619,_61a,lang,_61b,_61c,_61d,_61e,_61f,_620,_621){return _619("dijit.form.DropDownButton",[_61e,_61f,_620],{baseClass:"dijitDropDownButton",templateString:_621,_fillContent:function(){var _622=this.srcNodeRef;var dest=this.containerNode;if(_622&&dest){while(_622.hasChildNodes()){var _623=_622.firstChild;if(_623.hasAttribute&&(_623.hasAttribute("data-dojo-type")||_623.hasAttribute("dojoType")||_623.hasAttribute("data-"+_61a._scopeName+"-type")||_623.hasAttribute(_61a._scopeName+"Type"))){this.dropDownContainer=this.ownerDocument.createElement("div");this.dropDownContainer.appendChild(_623);}else{dest.appendChild(_623);}}}},startup:function(){if(this._started){return;}if(!this.dropDown&&this.dropDownContainer){this.dropDown=_61c.byNode(this.dropDownContainer.firstChild);delete this.dropDownContainer;}if(this.dropDown){_61d.hide(this.dropDown);}this.inherited(arguments);},isLoaded:function(){var _624=this.dropDown;return (!!_624&&(!_624.href||_624.isLoaded));},loadDropDown:function(_625){var _626=this.dropDown;var _627=_626.on("load",lang.hitch(this,function(){_627.remove();_625();}));_626.refresh();},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown;}});});},"dijit/form/_FormValueMixin":function(){define(["dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","./_FormWidgetMixin"],function(_628,_629,keys,lang,on,has,_62a){return _628("dijit.form._FormValueMixin",_62a,{readOnly:false,_setReadOnlyAttr:function(_62b){if(has("trident")&&"disabled" in this){_629.set(this.focusNode,"readOnly",_62b||this.disabled);}else{_629.set(this.focusNode,"readOnly",_62b);}this._set("readOnly",_62b);},postCreate:function(){this.inherited(arguments);if(this._resetValue===undefined){this._lastValueReported=this._resetValue=this.value;}},_setValueAttr:function(_62c,_62d){this._handleOnChange(_62c,_62d);},_handleOnChange:function(_62e,_62f){this._set("value",_62e);this.inherited(arguments);},undo:function(){this._setValueAttr(this._lastValueReported,false);},reset:function(){this._hasBeenBlurred=false;this._setValueAttr(this._resetValue,true);}});});},"dijit/form/_FormWidgetMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/on","dojo/sniff","dojo/window","../a11y"],function(_630,_631,_632,_633,lang,_634,on,has,_635,a11y){return _631("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:false,intermediateChanges:false,scrollOnFocus:true,_setIdAttr:"focusNode",_setDisabledAttr:function(_636){this._set("disabled",_636);if(/^(button|input|select|textarea|optgroup|option|fieldset)$/i.test(this.focusNode.tagName)){_632.set(this.focusNode,"disabled",_636);if(has("trident")&&"readOnly" in this){_632.set(this.focusNode,"readonly",_636||this.readOnly);}}else{this.focusNode.setAttribute("aria-disabled",_636?"true":"false");}if(this.valueNode){_632.set(this.valueNode,"disabled",_636);}if(_636){this._set("hovering",false);this._set("active",false);var _637="tabIndex" in this.attributeMap?this.attributeMap.tabIndex:("_setTabIndexAttr" in this)?this._setTabIndexAttr:"focusNode";_630.forEach(lang.isArray(_637)?_637:[_637],function(_638){var node=this[_638];if(has("webkit")||a11y.hasDefaultTabStop(node)){node.setAttribute("tabIndex","-1");}else{node.removeAttribute("tabIndex");}},this);}else{if(this.tabIndex!=""){this.set("tabIndex",this.tabIndex);}}},_onFocus:function(by){if(by=="mouse"&&this.isFocusable()){var _639=this.own(on(this.focusNode,"focus",function(){_63a.remove();_639.remove();}))[0];var _63b=has("pointer-events")?"pointerup":has("MSPointer")?"MSPointerUp":has("touch-events")?"touchend, mouseup":"mouseup";var _63a=this.own(on(this.ownerDocumentBody,_63b,lang.hitch(this,function(evt){_63a.remove();_639.remove();if(this.focused){if(evt.type=="touchend"){this.defer("focus");}else{this.focus();}}})))[0];}if(this.scrollOnFocus){this.defer(function(){_635.scrollIntoView(this.domNode);});}this.inherited(arguments);},isFocusable:function(){return !this.disabled&&this.focusNode&&(_633.get(this.domNode,"display")!="none");},focus:function(){if(!this.disabled&&this.focusNode.focus){try{this.focusNode.focus();}catch(e){}}},compare:function(val1,val2){if(typeof val1=="number"&&typeof val2=="number"){return (isNaN(val1)&&isNaN(val2))?0:val1-val2;}else{if(val1>val2){return 1;}else{if(val1<val2){return -1;}else{return 0;}}}},onChange:function(){},_onChangeActive:false,_handleOnChange:function(_63c,_63d){if(this._lastValueReported==undefined&&(_63d===null||!this._onChangeActive)){this._resetValue=this._lastValueReported=_63c;}this._pendingOnChange=this._pendingOnChange||(typeof _63c!=typeof this._lastValueReported)||(this.compare(_63c,this._lastValueReported)!=0);if((this.intermediateChanges||_63d||_63d===undefined)&&this._pendingOnChange){this._lastValueReported=_63c;this._pendingOnChange=false;if(this._onChangeActive){if(this._onChangeHandle){this._onChangeHandle.remove();}this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(_63c);});}}},create:function(){this.inherited(arguments);this._onChangeActive=true;},destroy:function(){if(this._onChangeHandle){this._onChangeHandle.remove();this.onChange(this._lastValueReported);}this.inherited(arguments);}});});},"ibm/tivoli/fwm/mxmap/util/AddressCandidatesFormatter":function(){define(["dojo/_base/declare","dojo/main","dijit/main","ibm/tivoli/fwm/mxmap/_Base","ibm/tivoli/fwm/mxmap/panels/MobileInfoPanelLine"],function(_63e,dojo,_63f,_640,_641){return {createHTMLDOMWithList:function(_642,_643,_644,_645){var _646=dojo.create("div");var _647=_644-25;var _648=dojo.create("table",{role:"grid",valign:"top",width:"100%","class":"addressCandidateTable"},_646,"last");var _649=dojo.create("tbody",{},_648,"last");var _64a=function(_64b){return function(){dojo.publish("addressCandidateSelectedOnMapId_"+_643,[_64b]);};};if(_642.length>10){_642=_642.slice(0,10);}for(var _64c in _642){var _64d=_642[_64c];var _64e=_64c%2!=0?"":"addresscandidateRowStyle";var _64f=_64a(_64d);var _650=_64d.formattedAddress;var _651=new _641();_651.setRowClass(_64e);_651.setCallbackFunction(_64f);_651.setContent(_650);_651.placeAt(_649,"last");}return _646;}};});},"dijit/a11yclick":function(){define(["dojo/keys","dojo/mouse","dojo/on","dojo/touch"],function(keys,_652,on,_653){function _654(e){if((e.keyCode===keys.ENTER||e.keyCode===keys.SPACE)&&!/input|button|textarea/i.test(e.target.nodeName)){for(var node=e.target;node;node=node.parentNode){if(node.dojoClick){return true;}}}};var _655;on(document,"keydown",function(e){if(_654(e)){_655=e.target;e.preventDefault();}else{_655=null;}});on(document,"keyup",function(e){if(_654(e)&&e.target==_655){_655=null;on.emit(e.target,"click",{cancelable:true,bubbles:true,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,altKey:e.altKey,_origType:e.type});}});var _656=function(node,_657){node.dojoClick=true;return on(node,"click",_657);};_656.click=_656;_656.press=function(node,_658){var _659=on(node,_653.press,function(evt){if(evt.type=="mousedown"&&!_652.isLeft(evt)){return;}_658(evt);}),_65a=on(node,"keydown",function(evt){if(evt.keyCode===keys.ENTER||evt.keyCode===keys.SPACE){_658(evt);}});return {remove:function(){_659.remove();_65a.remove();}};};_656.release=function(node,_65b){var _65c=on(node,_653.release,function(evt){if(evt.type=="mouseup"&&!_652.isLeft(evt)){return;}_65b(evt);}),_65d=on(node,"keyup",function(evt){if(evt.keyCode===keys.ENTER||evt.keyCode===keys.SPACE){_65b(evt);}});return {remove:function(){_65c.remove();_65d.remove();}};};_656.move=_653.move;return _656;});},"ibm/tivoli/fwm/mxmap/routing/Route":function(){define(["dijit","dojo","dojox","dojo/require!ibm/tivoli/fwm/mxmap/_Base,ibm/tivoli/fwm/mxmap/ImageLibraryManager"],function(_65e,dojo,_65f){dojo.provide("ibm.tivoli.fwm.mxmap.routing.Route");dojo.require("ibm.tivoli.fwm.mxmap._Base");dojo.require("ibm.tivoli.fwm.mxmap.ImageLibraryManager");dojo.declare("ibm.tivoli.fwm.mxmap.routing.Route",ibm.tivoli.fwm.mxmap._Base,{totalDuration:0,inputInfo:null,totalDistance:0,stops:[],legsData:null,routeBounds:null,copyrights:null,polyline:null,markers:null,map:null,itinerary:null,initialConf:null,originalRouter:null,distanceUnit:null,lineVisible:true,setItinerary:function(data){this.itinerary=data;},customMarkerOptions:null,constructor:function(_660){dojo.mixin(this,_660);},zoomToRoute:function(){try{this.map.setBounds(this.getBounds());}catch(e){console.error("zoom to route",e);}},getBounds:function(){if(this.routeBounds==null){this.routeBounds=this.map.getBoundingBoxFromPoints(this.polyline.points);if(this.routeBounds){this.routeBounds.merge(this.map.getBoundingBoxFromPoints(this.stops));}else{this.routeBounds=this.map.getBoundingBoxFromPoints(this.stops);}}return this.routeBounds;},clear:function(){for(var i=0;i<this.inputInfo.stops.length;i++){try{if(this.inputInfo.stops[i].calculatedStop!=true){this.map.removeMboFromLayerManager(this.inputInfo.stops[i]);}}catch(e){}}this.hideCalculatedMarkers();this.markers=null;if(this.polyline){try{this.map.removePolyline(this.polyline);}catch(e){console.error("cannot remove polyline");}}},showLines:function(){if(this.lineVisible){this.map.addPolyline(this.polyline);}},showMarkers:function(){if(this.markers==null){this._createMarkers();}},show:function(){this.showLines();this.showMarkers();},redraw:function(){this.clear();this.show();},_addMarker:function(p,_661){var _662=(_661>0)?ibm.tivoli.fwm.mxmap.ImageLibraryManager.getImageLibraryManager().getEndPositionMarkerImageInfo():ibm.tivoli.fwm.mxmap.ImageLibraryManager.getImageLibraryManager().getStartPositionMarkerImageInfo();var aa={label:"",tooltip:"",draggable:false,icon:_662.getImageURL(),iconSize:_662.getImageSize(),iconAnchor:_662.getImageAnchor(),hover:true,dontDrawAsOverlay:true};var m=this.map.addMarker(p,aa);m.label=String(_661);return m;},_woStopNumber:1,_addNewMarker:function(_663){if(this.inputInfo.stops[_663].calculatedStop!=true){var _664=this.inputInfo.stops[_663];_664.routeInfo={stopNumber:_663};var _665=_663;var fct=function(_666){if(this.markers==null){this.markers=[];}this.markers[_665]=_666;};var _667="";var _668="";if(_664&&_664.mxdata&&(_664.mxdata.mboName=="WORKORDER"||_664.mxdata.extendsMboName=="WORKORDER")){_667=String(this._woStopNumber++);}if(this.map.isMobile!=true){_668=((_664.mouseover!=null)&&(_664.mouseover!=undefined))?_664.mouseover:"";}var _669={"draggable":false,"enableMapTips":true,"label":_667,"tooltip":_668,"color":this.polyline.color,"markerReferenceCallback":dojo.hitch(this,fct)};this.map.addMboToLayerManager(_664,_669);}else{var m=this._addMarker(this.stops[_663],_663);this.markers[_663]=m;this.markers[_663].calculated=true;}},getMarkerForStop:function(_66a){if(this.markers!=null&&this.markers.length>_66a){return this.markers[_66a];}else{return null;}},_createMarkers:function(){this.markers=[];var _66b=null;if(this.itinerary){_66b=this.itinerary.getInitialLocation();}var _66c=1;if(_66b){var p=_66b.location;this._addNewMarker(0);}for(var i=1;i<this.stops.length;i++){var p=this.stops[i];this._addNewMarker(i);}},avoidTollsSupported:true,setSupportAvoidToll:function(_66d){this.avoidTollsSupported=_66d;},avoidHighwaysSupported:true,setSupportAvoidHighway:function(_66e){this.avoidHighwaysSupported=_66e;},hideCalculatedMarkers:function(){if(this.markers!=null){for(var i=0;i<this.markers.length;i++){try{if(this.markers[i].calculated==true){this.map.removeMarker(this.markers[i]);}}catch(e){}}}},showCalculatedMarkers:function(){if(this.markers!=null){for(var i=0;i<this.markers.length;i++){try{if(this.markers[i].calculated==true){var m=this._addMarker(this.stops[i],i);this.markers[i]=m;this.markers[i].calculated=true;}}catch(e){}}}},setLineVisible:function(_66f){if(_66f==this.lineVisible){return;}this.lineVisible=_66f;if(this.lineVisible==true){this.map.addPolyline(this.polyline);}else{this.map.removePolyline(this.polyline);}},getRouteWarningCodes:function(){var _670=[];for(var i=0;i<this.inputInfo.stops.length;i++){if(this.inputInfo.stops[i].warning!=undefined){_670.push(this.inputInfo.stops[i].warning);}}return _670;}});});},"ibm/tivoli/fwm/mxmap/routing/impl/spatial":function(){define(["dojo/_base/declare","ibm/tivoli/fwm/mxmap/_Base","ibm/tivoli/fwm/mxmap/routing/Router","ibm/tivoli/fwm/mxmap/routing/Route","ibm/tivoli/fwm/mxmap/LoadEsriPlugin!esri/tasks/RouteTask","ibm/tivoli/fwm/mxmap/LoadEsriPlugin!esri/symbols/SimpleMarkerSymbol","ibm/tivoli/fwm/mxmap/LoadEsriPlugin!esri/symbols/SimpleLineSymbol","ibm/tivoli/fwm/mxmap/LoadEsriPlugin!esri/tasks/FeatureSet","ibm/tivoli/fwm/mxmap/LoadEsriPlugin!esri/tasks/RouteParameters","ibm/tivoli/fwm/mxmap/LoadEsriPlugin!esri/geometry/Point","ibm/tivoli/fwm/mxmap/LoadEsriPlugin!esri/symbols/TextSymbol","ibm/tivoli/fwm/mxmap/LoadEsriPlugin!esri/symbols/Font","ibm/tivoli/fwm/mxmap/LoadEsriPlugin!esri/graphic","ibm/tivoli/fwm/mxmap/LoadEsriPlugin!esri/SpatialReference","ibm/tivoli/fwm/mxmap/LoadEsriPlugin!esri/IdentityManager","ibm/tivoli/fwm/mxmap/LoadEsriPlugin!esri/urlUtils"],function(_671,_672,_673,_674,_675,_676,_677,_678,_679,_67a,_67b,Font,_67c,_67d,_67e,_67f){return _671("ibm.tivoli.fwm.mxmap.routing.impl.spatial",[ibm.tivoli.fwm.mxmap.routing.Router,ibm.tivoli.fwm.mxmap._Base],{directionsService:null,map:null,_stopSymbol:null,_routeSymbol:null,_spatialReference:null,_esriMap:null,_spatialReference:null,conf:null,_lastStop:null,_successCallback:null,_failureCallback:null,_routeLimits:10,_oldWGS84Point:null,_token:null,_tokenExpirationPeriod:720,_isRequestingToken:false,_routeQueue:null,constructor:function(_680){dojo.mixin(this,_680);this._routeQueue=[];this._stopSymbol=new _676().setStyle(_676.STYLE_CROSS).setSize(15);this._stopSymbol.outline.setWidth(4);this._routeSymbol=new _677().setColor(new dojo.Color()).setWidth(this.routeLineWidth);this._esriMap=this.map.getProviderMap();this._spatialReference=this._esriMap.spatialReference;},_init:function(){if((this.getRoutingServiceUserName()!="")&&(this.getRoutingServicePassword()!="")){this.requestToken();}else{this.directionsService=new _675(this.routeUrl);}},_onSolveRoute:function(_681,_682){if(_682){_682(_681);}},_routeFailed:function(_683,_684,_685){if(_684){if(!_685){_685=ibm.tivoli.fwm.mxmap.routing.RoutingErrorCodes.UNKNOWN;}_684(_685,_683);}},_createStop:function(lat,lng,text,_686){var _687=_686?new _67d(_686):this._spatialReference;var _688=new _67a(lng,lat,_687);var ss=new _67b(text).setColor(new dojo.Color([256,0,0])).setAlign(Font.ALIGN_START).setFont(new Font("12pt").setWeight(Font.WEIGHT_BOLD));var stop=new _67c(_688,ss);if(window.DEBUGLEVEL&&window.DEBUGLEVEL>1){this.map.getProviderMap().graphics.add(stop);}return stop;},_getLatLngFromStop:function(stop){var _689=null;var _68a=new ibm.tivoli.fwm.mxmap.MXRecord({mboInfo:stop,map:this.map});if(_68a.hasGISData()){if(_68a.useLBSData()&&_68a.hasPointInCurrentSR()){_689=_68a.getPointInCurrentSR();}else{if(_68a.hasSPATIALCoordinates()){_689=this.map.getPointFromMboInfo(_68a.getMboInfo());}else{if(_68a.hasGISCoordinates()){_689=_68a.getGISPoint();}else{if(_68a.hasAutolocateSpatialData()){_689=this.map.getPointFromMboInfo(_68a.getAutolocateMboInfo());}else{if(_68a.hasAutolocateGISCoordinates()){_689=_68a.getAutolocateGISPoint();}else{console.warn("Stop doesn't have gis coords",stop);}}}}}}else{if(stop.lat==null){console.error("stop does not have lat/lng",stop);}else{_689=this.map.latLng(stop.lat,stop.lng);}}return _689;},_prepareParams:function(_68b,_68c,_68d){var _68e=new _678();for(var i=_68b;i<_68c;i++){var stop=_68d[i];var _68f=null;var _690=this._getLatLngFromStop(stop);if(_690){_68f=this._createStop(_690.lat,_690.lng,i,_690.sr);if(_68f){_68e.features.push(_68f);}}}return _68e;},_getLatLngArrayFromStops:function(_691){var lls=[];for(var _692=0;_692<_691.length;_692++){lls.push(this._getLatLngFromStop(_691[_692]));}return lls;},showRoute:function(_693,_694,_695,a,_696){if(this._isRequestingToken==true){console.warn("Token validation going on, queue the route request.");this._routeQueue.push({stops:_693,callback:_694,errCb:_695,instanceConf:_696});return;}if(this._checkIfAnyFeaturedClass(_693)==true){var fct=function(){this._showRouteAllPointsWithXY(_693,_694,_695,_696);};this._convertAnyFeatureStop(_693,dojo.hitch(this,fct),_695);}else{this._showRouteAllPointsWithXY(_693,_694,_695,_696);}},_convertAnyFeatureStop:function(_697,_698,_699){var _69a=[];for(var j=0;j<_697.length;j++){var stop=_697[j];var _69b=new ibm.tivoli.fwm.mxmap.MXRecord({mboInfo:stop,map:this.map});if((stop.calculatedStop==null)&&!_69b.useLBSData()){if(_69b.hasSPATIALCoordinates()==true){_69a.push(_69b.getMboInfo());}else{if(_69b.hasAutolocateSpatialData()){_69a.push(_69b.getAutolocateMboInfo());}else{console.warn("no SPATIAL GIS info for stop ",stop);}}}}var test=function(args){_698();};this.map.queryMultipleRecordsAtOnce(_69a,test,_699);},_checkIfAnyFeaturedClass:function(_69c){for(var i in _69c){var stop=_69c[i];var _69d=new ibm.tivoli.fwm.mxmap.MXRecord({mboInfo:stop,map:this.map});if(!_69d.useLBSData()&&_69d.hasSPATIALCoordinates()||(_69d.hasGISCoordinates()==false&&_69d.hasAutolocateSpatialData()==true)){return true;}}},_retrieveStopInfo:function(pt,_69e,_69f,_6a0,_6a1){var txt="";if(_69e.mxdata!=null&&_69e.mxdata.attributes!=null&&_69e.mxdata.attributes.formattedaddress!=null&&_69e.mxdata.attributes.formattedaddress.length>0){_6a1[pt]=_69e.mxdata.attributes.formattedaddress;txt=_6a1[pt];}else{var _69f=_6a0.legs.length;var _6a2=function(_6a3){var _6a4=_6a3[0].formattedAddress;if(_69f>=0){_6a0.legs[_69f].info=_6a4;}else{_6a0.initialLocation.info=_6a4;}_6a1[pt]=_6a4;};var _6a5=function(_6a6){console.error("could not find leg ",_69f,"info");};this.map.geocoder.reverseGeocode(pt.lat,pt.lng,dojo.hitch(this,_6a2),dojo.hitch(this,_6a5));}return txt;},_showRouteAllPointsWithXY:function(_6a7,_6a8,_6a9,_6aa){var _6ab=_6aa.routecolor;if(_6ab.indexOf("#")!=0){_6ab="#"+_6ab;}var _6ac=new _679();if(dojo.config.fwm.debug==true){}_6ac.outSpatialReference=new _67d({wkid:this._spatialReference});_6ac.returnDirections=true;if(this.isOptimizeRoute()){_6ac.findBestSequence=true;_6ac.preserveFirstStop=true;_6ac.preserveLastStop=true;}_6ac.directionsLengthUnits="esriKilometers";_6ac.travelMode=this.getTravelMode();_6ac.returnRoutes=true;_6ac.returnStops=true;var _6ad=0;var _6ae={totalDuration:0,totalDistance:0,stops:[],legsData:null,polyline:null,copyrights:"",map:this.map};var _6af=[];var th=this._startTimer();var _6b0=dojo.require("ibm.tivoli.fwm.mxmap.routing.itinerary.Itinerary");var _6b1=new _6b0();var _6b2=0;var _6b3=function(_6b4){this._stopTimer(th,_6a7.length);var _6b5=_6b4.routeResults[0].stops;if(_6b4.messages&&_6b4.messages.length>0){console.warn("Route service returend the following messages :");for(var i=0;i<_6b4.messages.length;i++){var msg=_6b4.messages[i];console.warn(msg.description,msg);}if(msg.type==50){if(this.map.getShowMarkersOnRouteError()==true){this.renderRoute([],_6ae,_6b1,_6a7,_6a8,_6a9,_6aa,_6ab,_6b5);}else{this._routeFailed(msg,_6a9,ibm.tivoli.fwm.mxmap.routing.RoutingErrorCodes.ZERO_RESULTS);}if(!_6b4.routeResults||_6b4.routeResults.length==0||!_6b4.routeResults[0].directions||!_6b4.routeResults[0].directions.features||_6b4.routeResults[0].directions.features.length==0){return;}}}var _6b6=_6b4.routeResults[0].directions;var _6b7=[];var c=1;var _6b8=0;var _6b9=0;var _6ba=false;var _6bb=_6b4.routeResults[0].directions.features;for(var i=0;i<_6bb.length;i++){var _6bc=_6b4.routeResults[0].directions.features[i];var step={distance:_6bc.attributes.length,duration:_6bc.attributes.time,info:_6bc.attributes.text,location:this.map._getLatLngFromFeature(_6bc)};_6b7.push(step);_6b8+=_6bc.attributes.length;_6b9+=_6bc.attributes.time;if(_6ba==true&&_6bc.attributes.length==0){var pt=this.map._getLatLngFromFeature(_6bc);var txt=_6bc.attributes.text;var lpos=_6b1.addLeg(pt,txt,_6b8,_6b9,null,_6b7,null);var _6bd=_6a7[lpos+1];var _6be=true;if(_6bd.mxdata){var _6bf=new ibm.tivoli.fwm.mxmap.MXRecord({mboInfo:_6bd,map:this.map});if(_6bf.hasGISCoordinates()==true||_6bf.hasSPATIALCoordinates()==true){if(_6bf.hasAddress()==true){_6be=false;_6b1.legs[lpos].info=_6bf.getAddress();}}else{if(_6bf.hasAutolocateGISOnlyCoordinates()==true||_6bf.hasAutolocateSpatialData()==true){var _6c0=_6bf.getAutolocateAddress();if(_6c0!=null&&_6c0.length>0){_6be=false;_6b1.legs[lpos].info=_6c0;}}}}_6b1.legs[lpos].needsToGeocode=_6be;_6b7=[];_6b8=0;_6b9=0;c++;_6ba=false;}else{if(_6ba==false&&_6bc.attributes.length==0){_6ba=true;}}}if(_6b2==0){var geom=_6b4.routeResults[0].directions.features[0].geometry;var pt=this.map._getLatLngFromFeature(_6b4.routeResults[0].directions.features[0]);var txt=_6b4.routeResults[0].directions.features[0].attributes.text;_6b1.setInitialLocation(txt,pt,null,null,true);}var _6c1=dojo.require("ibm.tivoli.fwm.mxmap.impl.polyline.MaximoSpatialPolyline");var pol=new _6c1({map:this.map});pol.fromProprietary(_6b6.mergedGeometry);_6af=_6af.concat(pol.points);_6ae.totalDistance+=_6b6.totalLength;_6ae.totalDuration+=_6b6.totalTime;if(_6ad<_6a7.length){_6b2=_6ad-1;_6ad=_6ad+this._routeLimits;if(_6ad>_6a7.length){_6ad=_6a7.length;}if((_6ad-_6b2)>=this._routeLimits){_6ad--;}_6ac.stops=this._prepareParams(_6b2,_6ad,_6a7);th=this._startTimer(th,_6a7.length);var _6c2=function(_6c3){this._routeFailed(_6c3,_6a9);};this.directionsService.solve(_6ac,dojo.hitch(this,_6b3),dojo.hitch(this,_6c2));}else{this.renderRoute(_6af,_6ae,_6b1,_6a7,_6a8,_6a9,_6aa,_6ab,_6b5);}};if(_6a7.length>this._routeLimits){_6ad=_6ad+this._routeLimits;}else{_6ad=_6a7.length;}_6ac.stops=this._prepareParams(_6b2,_6ad,_6a7);if(_6ac.stops.features.length>=2){var _6c4=function(_6c5){if(this.map.getShowMarkersOnRouteError()==true){this.renderRoute([],_6ae,_6b1,_6a7,_6a8,_6a9,_6aa,_6ab,stopsFromResponse);}else{this._routeFailed(_6c5,_6a9);}};this.directionsService.solve(_6ac,dojo.hitch(this,_6b3),dojo.hitch(this,_6c4));}else{this._routeFailed("at least 2 stops are needed",_6a9,ibm.tivoli.fwm.mxmap.routing.RoutingErrorCodes.MIN_STOPS_REQ);}},renderRoute:function(_6c6,_6c7,_6c8,_6c9,_6ca,_6cb,_6cc,_6cd,_6ce){_6c7.stops=_6ce.map(dojo.hitch(this,function(stop){return this.map.latLng(stop.geometry.y,stop.geometry.x,JSON.stringify(stop.geometry.spatialReference));}));_6c7.itinerary=_6c8;_6c7.inputInfo={stops:_6c9,successCb:_6ca,errorCb:_6cb};_6c7.originalRouter=this;_6c7.instanceConf=_6cc;_6c7.distanceUnit=this.getCurrentDistanceUnit();var _6cf=dojo.require("ibm.tivoli.fwm.mxmap.impl.polyline.MaximoSpatialPolyline");var poly=new _6cf({points:_6c6,map:this.map});poly.addData({color:_6cd,opacity:this.routeOpacity,width:this.routeLineWidth});_6c7.polyline=poly;var _6d0=new ibm.tivoli.fwm.mxmap.routing.Route(_6c7);_6d0.setSupportAvoidToll(false);_6d0.setSupportAvoidHighway(false);this._onSolveRoute(_6d0,_6ca);if(dojo.config.fwm.debug==true){}this._stopTimer(null,_6c9.length);},getUserLocation:function(_6d1,_6d2){if(this.myCurrentLocationInstance){var _6d3=function(){if(this.map){this.map.failedToGetLocation();}_6d2();};var _6d4=function(){this._convertToSpatialCoordSystem(_6d1);};this.myCurrentLocationInstance.getUserLocation(dojo.hitch(this,_6d4),dojo.hitch(this,_6d3));}},_convertToSpatialCoordSystem:function(_6d5){var _6d6=function(_6d7){this.myCurrentLocationInstance._esriSRLatLng=_6d7;this.myCurrentLocationInstance._oldWGS84Point=this.myCurrentLocationInstance.getPosition();if(_6d5){_6d5();}};this.myCurrentLocationInstance.convertPositionToMapPoint(this.map,dojo.hitch(this,_6d6));},_isESRIUpToDate:function(){var _6d8=this.myCurrentLocationInstance.getPosition();var _6d9=this.myCurrentLocationInstance._oldWGS84Point;if(_6d9==null){this._convertToSpatialCoordSystem();return false;}if(_6d8.coords!=_6d9.coords){this._convertToSpatialCoordSystem();return false;}return true;},_getUserLocationStop:function(){return this.myCurrentLocationInstance._esriSRLatLng;},isLocationStatusUnassigned:function(){if(this.myCurrentLocationInstance.isStatusHasLocation()){return !this.isLocationStatusHasLocation();}return this.inherited(arguments);},isLocationStatusHasLocation:function(){if(this.myCurrentLocationInstance.isStatusHasLocation()){return this._isESRIUpToDate();}return this.inherited(arguments);},requestToken:function(){this._isRequestingToken=true;var me=this;var _6da=function(data){if(data&&data.token){me._token=data.token;_67f.addProxyRule({urlPrefix:"route.arcgis.com",proxyUrl:"/maximo/webclient/pluss/plusstokenproxy.jsp?token="+me._token+"&"});me.directionsService=new _675(me.routeUrl+"/plusstokenstart/"+me._token+"/plusstokenend/");}else{if(data&&data.error){var _6db=data.error;errorMsg=_6db.message;if(_6db.details&&(_6db.details.length>0)){for(var i=0;i<_6db.details.length;i++){errorMsg+=" "+_6db.details[i];}}console.error("Error validating token: "+_6db.code+": "+errorMsg);var _6dc=me.map.getMaximo();_6dc.showMessage("mapserver","route_unknown_failure",[errorMsg]);}}me._isRequestingToken=false;me.executeQueuedRouteRequests();};var _6dd=this.getRoutingServiceUserName();var _6de=this.getRoutingServicePassword();var _6df=this.getRoutingServiceUrl();var _6e0=window.location.href.substring(0,window.location.href.indexOf("?"));var _6e1="https://www.arcgis.com/sharing/generateToken";var xhr=this.createCORSRequest("POST",_6e1);if(!xhr){return;}xhr.onreadystatechange=function(){if(this.readyState==XMLHttpRequest.DONE&&this.status==200){var data=xhr.responseText;if(typeof data=="string"){data=JSON.parse(data);}_6da(data);}};xhr.onerror=function(){var data=xhr.responseText;if(typeof error=="string"){data=JSON.parse(data);}var _6e2=me.map.getMaximo();_6e2.showMessage("mapserver","route_unknown_failure",[data.error.message]);me._isRequestingToken=false;me.executeQueuedRouteRequests();};xhr.send("username="+_6dd+"&password="+_6de+"&referer="+_6e0+"&f=pjson");},createCORSRequest:function(_6e3,url){var xhr=new XMLHttpRequest();if("withCredentials" in xhr){xhr.open(_6e3,url,true);}else{if(typeof XDomainRequest!="undefined"){xhr=new XDomainRequest();xhr.open(_6e3,url);}else{xhr=null;}}xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");return xhr;},getRoutingServiceUserName:function(){var _6e4=this.map.mapConf;if((_6e4!=null)&&(_6e4!=undefined)&&(_6e4.username!=null)&&(_6e4.username!=undefined)){return _6e4.username;}else{return "";}},getRoutingServicePassword:function(){var _6e5=this.map.mapConf;if((_6e5!=null)&&(_6e5!=undefined)&&(_6e5.password!=null)&&(_6e5.password!=undefined)){return _6e5.password;}else{return "";}},getRoutingServiceUrl:function(){var _6e6=this.map.mapConf;if((_6e6!=null)&&(_6e6!=undefined)&&(_6e6.routeServiceUrl!=null)&&(_6e6.routeServiceUrl!=undefined)){return _6e6.routeServiceUrl;}else{return "";}},getTravelMode:function(){var _6e7=this.map.mapConf;if((_6e7!=null)&&(_6e7!=undefined)&&(_6e7.travelMode!=null)&&(_6e7.travelMode!=undefined)){return _6e7.travelMode;}else{return 1;}},executeQueuedRouteRequests:function(){while(this._routeQueue.length>0){var obj=this._routeQueue.pop();this.showRoute(obj.stops,obj.callback,obj.errCb,null,obj.instanceConf);}}});});},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(_6e8,_6e9,_6ea){return _6ea("dijit.Destroyable",null,{destroy:function(_6eb){this._destroyed=true;},own:function(){var _6ec=["destroyRecursive","destroy","remove"];_6e8.forEach(arguments,function(_6ed){var _6ee;var odh=_6e9.before(this,"destroy",function(_6ef){_6ed[_6ee](_6ef);});var hdhs=[];function _6f0(){odh.remove();_6e8.forEach(hdhs,function(hdh){hdh.remove();});};if(_6ed.then){_6ee="cancel";_6ed.then(_6f0,_6f0);}else{_6e8.forEach(_6ec,function(_6f1){if(typeof _6ed[_6f1]==="function"){if(!_6ee){_6ee=_6f1;}hdhs.push(_6e9.after(_6ed,_6f1,_6f0,true));}});}},this);return arguments;}});});},"ibm/tivoli/fwm/mxmap/UserSessionManager":function(){define(["dojo/_base/declare","ibm/tivoli/fwm/mxmap/_Base"],function(_6f2,_6f3){return _6f2([_6f3],{map:null,lastUserLocation:null,constructor:function(_6f4){dojo.mixin(this,_6f4);dojo.addOnUnload(dojo.hitch(this,this.onMapExit));if(this.map.getSessionData()&&this.map.getSessionData().lastUserLocation){this.lastUserLocation=dojo.fromJson(this.map.getSessionData().lastUserLocation);}},hasLastUserLocation:function(){if(this.lastUserLocation!=null&&this.lastUserLocation.lat&&this.lastUserLocation.lng){return true;}return false;},getLastUserLocation:function(){return this.lastUserLocation;},onMapExit:function(){var _6f5={lat:this.map.getCenter().lat,lng:this.map.getCenter().lng,level:this.map.getZoom(),customData:this.map.getInitialLocationCustomInfo()};if(this.map.toolbar){this.map.toolbar.destroyRecursive();}this.map.getMaximo().storeUserLocation(_6f5);}});});},"ibm/tivoli/fwm/mxmap/MXRecord":function(){define(["dojo/_base/declare","ibm/tivoli/fwm/mxmap/_Base","ibm/tivoli/fwm/mxmap/ImageLibraryManager"],function(_6f6,_6f7,_6f8){var _6f9=4326;return _6f6([_6f7],{mboInfo:null,map:null,markerImgUrl:null,markerImgInfo:null,lbsMarker:null,lbsMarkerImgInfo:null,lbsCircle:null,imageLibManager:null,isMboOnMap:false,constructor:function(_6fa){dojo.mixin(this,_6fa);},hasAddress:function(){return (this.mboInfo&&this.mboInfo.gisdata&&this.mboInfo.gisdata.address!=null&&this.mboInfo.gisdata.address!="");},getAddress:function(){return this.getGISData().address;},getMXData:function(){return this.mboInfo.mxdata;},getMboName:function(){return this.getMXData().mboName;},setIsOnMap:function(_6fb){this.mboInfo.isOnMap=_6fb;},hasAutolocateAddress:function(){return (this.mboInfo&&this.mboInfo.gisdata&&this.mboInfo.gisdata.address!=null&&this.mboInfo.gisdata.address!="");},getAutolocateAddress:function(){return this.getAutolocateGISData().address;},hasGISData:function(){return (this.mboInfo&&(this.mboInfo.gisdata!=null)&&(this.mboInfo.gisdata!=undefined));},hasGISCoordinates:function(){return (this.hasGISData()&&(this.mboInfo.gisdata.lat!=null)&&(this.mboInfo.gisdata.lng!=null));},hasAutolocateData:function(){return (this.mboInfo&&this.mboInfo.autolocate!=null&&this.mboInfo.autolocate.gisdata!=null);},hasAutolocateGISCoordinates:function(){return (this.hasAutolocateData()&&this.getAutolocateGISData().lng!=null)||this.hasAutolocateSpatialData();},hasAutolocateGISOnlyCoordinates:function(){return (this.hasAutolocateData()&&this.mboInfo.autolocate.gisdata.lng!=null);},hasAutolocateSpatialData:function(){return (this.hasAutolocateData()&&this.mboInfo.autolocate.gisdata.PLUSSISGIS!=null&&this.mboInfo.autolocate.gisdata.PLUSSISGIS==true);},getAutolocateGISData:function(){return this.getAutolocateMboInfo().gisdata;},getAutolocateGISLat:function(){return this.getAutolocateGISData().lat;},getAutolocateGISLng:function(){return this.getAutolocateGISData().lng;},getAutolocateGISPoint:function(){var sr=this.areGISCoordinatesLatLong()?{"wkid":_6f9}:null;return this.map.latLng(this.getAutolocateGISLat(),this.getAutolocateGISLng(),sr);},hasAnyGISCoordinates:function(){return this.hasGISCoordinates()||this.hasAutolocateGISCoordinates()||this.hasSPATIALCoordinates();},hasAnyCoordinates:function(){return this.useLBSData()||this.hasAnyGISCoordinates();},hasLBSData:function(){return (this.mboInfo&&(this.mboInfo.lbsdata!=null)&&(this.mboInfo.lbsdata!=undefined));},isLBS:function(){return (this.hasGISData()&&(this.getGISData().islbs==true));},isLBSOnly:function(){return (this.hasLBSData()&&(this.mboInfo.lbsdata.lbsonly==true));},hasLBSCoordinates:function(){return (this.hasLBSData()&&(this.mboInfo.lbsdata.lat!=null));},getLBSData:function(){return this.mboInfo.lbsdata;},getLBSLat:function(){return this.getLBSData().lat;},getLBSLng:function(){return this.getLBSData().lng;},getLBSPoint:function(){return this.map.latLng(this.getLBSLat(),this.getLBSLng());},hasOwnLatLngProperties:function(){return this.mboInfo.hasOwnProperty("lat")&&this.mboInfo.hasOwnProperty("lng");},getOwnLat:function(){return this.mboInfo.lat;},getOwnLng:function(){return this.mboInfo.lng;},getOwnLatLng:function(){return this.map.latLng(this.getOwnLat(),this.getOwnLng());},hasMouseover:function(){return (this.getMboInfo().mouseover!=null)&&(this.getMboInfo()!=undefined);},getMouseover:function(){return this.getMboInfo().mouseover;},setMarker:function(_6fc){this.mboInfo.marker=_6fc;},useLBSData:function(){var _6fd=false;if(this.isLBS()){if(this.isLBSOnly()){if(this.hasLBSCoordinates()){_6fd=true;}}else{var _6fe=this.map.getLayersManager().getLayerForObjectName(this.getMboName());if(_6fe){var _6ff=_6fe.useLBSPosition();if(_6ff){if(this.hasLBSCoordinates()){_6fd=_6ff;}else{this.mboInfo.warning=ibm.tivoli.fwm.mxmap.WarningCodes.NO_LBS_LOCATION_FOUND;}}}}}return _6fd;},hasSPATIALCoordinates:function(){return (this.hasGISData()&&this.mboInfo.gisdata.PLUSSISGIS==true);},_removeHighlight:function(){this.map.removeMboHighligh(this.mboInfo);},_removeMarker:function(){this.map.removeMboMarker(this.mboInfo);this.isMboOnMap=false;},serverUpdated:function(data){this.mboInfo=data;this.isMboOnMap=false;this._updateMarkerLocation(data);},_updateMarkerLocation:function(_700,_701){this._removeMarker();this._removeHighlight();this.mboInfo=_700;if(this.hasAnyCoordinates()){this._placeMarker();if(_701!=true){this.center();}}},_placeMarker:function(){this.map.addMboToLayerManager(this.mboInfo);this.isMboOnMap=true;},center:function(){this.centerAndZoom();},centerAndZoom:function(_702){if(this.hasAnyCoordinates()){if(this.isMboOnMap==false){this._placeMarker();}this.map.centerOnMbo(this.mboInfo,_702);}},getGISData:function(){return this.mboInfo.gisdata;},getGISLat:function(){return this.getGISData().lat;},getGISLng:function(){return this.getGISData().lng;},getGISPoint:function(){var sr=this.areGISCoordinatesLatLong()?{"wkid":_6f9}:null;return this.map.latLng(this.getGISLat(),this.getGISLng(),sr);},getGISDataFlags:function(){return this.getGISData().flags;},areGISCoordinatesLatLong:function(){var _703=false;if(this.map.providerName=="maximospatial"){var _704=this.getGISData();if(_704&&_704.isCoordLatLong){_703=true;}}return _703;},isGISDataReadOnly:function(){return (this.getGISDataFlags().readonly==true);},hasPointInCurrentSR:function(){return (this.mboInfo&&(this.mboInfo.pointInCurrentSR!=null)&&(this.mboInfo.pointInCurrentSR!=undefined));},getPointInCurrentSRLat:function(){return this.mboInfo.pointInCurrentSR.lat;},getPointInCurrentSRLng:function(){return this.mboInfo.pointInCurrentSR.lng;},getPointInCurrentSR:function(){return this.map.latLng(this.getPointInCurrentSRLat(),this.getPointInCurrentSRLng());},setPointInCurrentSR:function(_705){this.mboInfo.pointInCurrentSR=_705;},getMboInfo:function(){return this.mboInfo;},getAutolocateMboInfo:function(){return this.mboInfo.autolocate;},_isDraggable:function(){if(this.mboInfo.gisdata&&this.mboInfo.gisdata.flags&&this.mboInfo.gisdata.flags.readonly==true){return false;}return (this.draggable&&this.draggable==true);},hide:function(){},remove:function(){this._removeMarker();},show:function(){if(this.isMboOnMap==false){if(this.hasAnyCoordinates()==true){this._placeMarker();}}},getWarning:function(){return this.mboInfo.warning;},getActivityId:function(){return this.mboInfo.activityid;},getMapTipOverrides:function(){return this.mboInfo.maptipoverrides;}});});},"dijit/layout/_ContentPaneResizeMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang","dojo/query","../registry","../Viewport","./utils"],function(_706,_707,_708,_709,_70a,lang,_70b,_70c,_70d,_70e){return _707("dijit.layout._ContentPaneResizeMixin",null,{doLayout:true,isLayoutContainer:true,startup:function(){if(this._started){return;}var _70f=this.getParent();this._childOfLayoutWidget=_70f&&_70f.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);if(this._isShown()){this._onShow();}if(!this._childOfLayoutWidget){this.own(_70d.on("resize",lang.hitch(this,"resize")));}},_checkIfSingleChild:function(){if(!this.doLayout){return;}var _710=[],_711=false;_70b("> *",this.containerNode).some(function(node){var _712=_70c.byNode(node);if(_712&&_712.resize){_710.push(_712);}else{if(!/script|link|style/i.test(node.nodeName)&&node.offsetHeight){_711=true;}}});this._singleChild=_710.length==1&&!_711?_710[0]:null;_708.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild);},resize:function(_713,_714){this._resizeCalled=true;this._scheduleLayout(_713,_714);},_scheduleLayout:function(_715,_716){if(this._isShown()){this._layout(_715,_716);}else{this._needLayout=true;this._changeSize=_715;this._resultSize=_716;}},_layout:function(_717,_718){delete this._needLayout;if(!this._wasShown&&this.open!==false){this._onShow();}if(_717){_709.setMarginBox(this.domNode,_717);}var cn=this.containerNode;if(cn===this.domNode){var mb=_718||{};lang.mixin(mb,_717||{});if(!("h" in mb)||!("w" in mb)){mb=lang.mixin(_709.getMarginBox(cn),mb);}this._contentBox=_70e.marginBox2contentBox(cn,mb);}else{this._contentBox=_709.getContentBox(cn);}this._layoutChildren();},_layoutChildren:function(){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var cb=this._contentBox||_709.getContentBox(this.containerNode);this._singleChild.resize({w:cb.w,h:cb.h});}else{var _719=this.getChildren(),_71a,i=0;while(_71a=_719[i++]){if(_71a.resize){_71a.resize();}}}},_isShown:function(){if(this._childOfLayoutWidget){if(this._resizeCalled&&"open" in this){return this.open;}return this._resizeCalled;}else{if("open" in this){return this.open;}else{var node=this.domNode,_71b=this.domNode.parentNode;return (node.style.display!="none")&&(node.style.visibility!="hidden")&&!_708.contains(node,"dijitHidden")&&_71b&&_71b.style&&(_71b.style.display!="none");}}},_onShow:function(){this._wasShown=true;if(this._needLayout){this._layout(this._changeSize,this._resultSize);}this.inherited(arguments);}});});},"ibm/tivoli/fwm/mxmap/CurrentMXRecordSet":function(){define(["dojo/main","dojo/_base/declare","ibm/tivoli/fwm/mxmap/_Base","ibm/tivoli/fwm/mxmap/MXRecord"],function(dojo,_71c,_71d,_71e){return _71c([_71d],{map:null,records:null,mxRecords:null,mboInfoArray:null,markerImgUrl:null,_hidden:false,constructor:function(_71f){dojo.mixin(this,_71f);this.mxRecords=[];this.mboInfoArray=[];this.addSubscription("onCurrentRecordSetUpdated_"+this.map.getId(),dojo.hitch(this,this.updateRecordSetAndRefresh));if(this.records!=null){this.updateRecordSet(this.records);}},isEmpty:function(){if(this.mxRecords){for(var id in this.mxRecords){return false;}}return true;},centerAndZoom:function(){this.map.zoomToMbos(this.mboInfoArray);},showMXRecordsOnMap:function(_720){var _721={"enableMapTips":true};this.map.showAllMboRecords(this.mboInfoArray,_721,_720!=true);this._hidden=false;},updateRecordSetAndRefresh:function(_722,_723){this.updateRecordSet(_722);this.showMXRecordsOnMap(_723);},length:function(){return this.mxRecords.length;},updateRecordSet:function(_724){while(this.mxRecords.length>0){var _725=this.mxRecords.pop();_725._removeMarker();}this.records=_724;this.mxRecords=[];this.mboInfoArray=[];for(var id in this.records){var _725=new _71e({mboInfo:this.records[id],map:this.map});if(_725.hasAnyCoordinates()){this.mxRecords.push(_725);this.mboInfoArray.push(this.records[id]);}}},destroyRecursive:function(){this.inherited(arguments);},getWarning:function(){var _726=null;for(var i=0;i<this.mxRecords.length;i++){_726=this.mxRecords[i].getWarning();if(_726){break;}}return _726;}});});},"dojo/dnd/Moveable":function(){define(["../_base/array","../_base/declare","../_base/lang","../dom","../dom-class","../Evented","../has","../on","../topic","../touch","./common","./Mover","../_base/window"],function(_727,_728,lang,dom,_729,_72a,has,on,_72b,_72c,dnd,_72d,win){var _72e;var _72f=function(){};function _730(){if("touchAction" in document.body.style){_72e="touchAction";}else{if("msTouchAction" in document.body.style){_72e="msTouchAction";}}_72f=function _72f(node,_731){node.style[_72e]=_731;};_72f(arguments[0],arguments[1]);};if(has("touch-action")){_72f=_730;}var _732=_728("dojo.dnd.Moveable",[_72a],{handle:"",delay:0,skip:false,constructor:function(node,_733){this.node=dom.byId(node);_72f(this.node,"none");if(!_733){_733={};}this.handle=_733.handle?dom.byId(_733.handle):null;if(!this.handle){this.handle=this.node;}this.delay=_733.delay>0?_733.delay:0;this.skip=_733.skip;this.mover=_733.mover?_733.mover:_72d;this.events=[on(this.handle,_72c.press,lang.hitch(this,"onMouseDown")),on(this.handle,"dragstart",lang.hitch(this,"onSelectStart")),on(this.handle,"selectstart",lang.hitch(this,"onSelectStart"))];},markupFactory:function(_734,node,Ctor){return new Ctor(node,_734);},destroy:function(){_727.forEach(this.events,function(_735){_735.remove();});_72f(this.node,"");this.events=this.node=this.handle=null;},onMouseDown:function(e){if(this.skip&&dnd.isFormElement(e)){return;}if(this.delay){this.events.push(on(this.handle,_72c.move,lang.hitch(this,"onMouseMove")),on(this.handle.ownerDocument,_72c.release,lang.hitch(this,"onMouseUp")));this._lastX=e.pageX;this._lastY=e.pageY;}else{this.onDragDetected(e);}e.stopPropagation();e.preventDefault();},onMouseMove:function(e){if(Math.abs(e.pageX-this._lastX)>this.delay||Math.abs(e.pageY-this._lastY)>this.delay){this.onMouseUp(e);this.onDragDetected(e);}e.stopPropagation();e.preventDefault();},onMouseUp:function(e){for(var i=0;i<2;++i){this.events.pop().remove();}e.stopPropagation();e.preventDefault();},onSelectStart:function(e){if(!this.skip||!dnd.isFormElement(e)){e.stopPropagation();e.preventDefault();}},onDragDetected:function(e){new this.mover(this.node,e,this);},onMoveStart:function(_736){_72b.publish("/dnd/move/start",_736);_729.add(win.body(),"dojoMove");_729.add(this.node,"dojoMoveItem");},onMoveStop:function(_737){_72b.publish("/dnd/move/stop",_737);_729.remove(win.body(),"dojoMove");_729.remove(this.node,"dojoMoveItem");},onFirstMove:function(){},onMove:function(_738,_739){this.onMoving(_738,_739);var s=_738.node.style;s.left=_739.l+"px";s.top=_739.t+"px";this.onMoved(_738,_739);},onMoving:function(){},onMoved:function(){}});return _732;});},"ibm/tivoli/fwm/mxmap/CurrentMXRecManager":function(){define(["dojo/main","dojo/_base/declare","ibm/tivoli/fwm/mxmap/MXRecord","ibm/tivoli/fwm/mxmap/_Base","ibm/tivoli/fwm/mxmap/ImageLibraryManager"],function(dojo,_73a,_73b,_73c,_73d){return _73a([_73b],{map:null,currentMarker:null,markerImgUrl:null,recordSet:null,currentFromRecSet:false,mbo:null,mboInfo:null,draggable:true,constructor:function(_73e){dojo.mixin(this,_73e);if(!this.markerImgUrl){this.markerImgUrl=_73d.getImageLibraryManager().getDefaultMarkerImageInfo().getImageURL();}this.addSubscription("onCurrentRecordUpdate_"+this.map.getId(),dojo.hitch(this,this.serverUpdated));this.recordSet=this.map.getCurrentRecordSetControl();this.mboInfo=_73e.mbo;},disposeMarker:function(){this._removeMarker();},showCurrentRecord:function(_73f){if(this.mbo){this.serverUpdated(this.mbo,_73f);}},serverUpdated:function(data,_740){if(this.mboInfo&&this.mboInfo.mxdata){if(this.mboInfo.mxdata.uid.name!=data.mxdata.uid.name||this.mboInfo.mxdata.uid.value!=data.mxdata.uid.value){this.disposeMarker();this.isMboOnMap=false;}}this.currentFromRecSet=false;if(this.mboInfo.highlightGraphic){data.highlightGraphic=this.mboInfo.highlightGraphic;}this.mboInfo=data;this.mbo=data;this._updateMarkerLocation(data,_740);},_placeMarker:function(){var that=this;var _741;if(this.map.mapConf.provider=="spatial"){if(this.mboInfo.gisdata.isCoordLatLong&&this.map.map.spatialReference.wkid!="4326"){var _742=new esri.geometry.Point(that.mboInfo.gisdata.lng,that.mboInfo.gisdata.lat,new esri.SpatialReference({wkid:4326}));_741=esri.geometry.project(_742,this.map.map.spatialReference);that.mboInfo.gisdata.lng=_741.x;that.mboInfo.gisdata.lat=_741.y;that.mboInfo.gisdata.isCoordLatLong=false;that.mboInfo.gisdata.convertedFromLatLong=true;}}var _743={"events":{"onMoveEnd":dojo.hitch(that,that.movedMarker)},"enableMapTips":true,"dontDrawAsOverlay":true};that.map.addMboToLayerManager(that.mboInfo,_743);that.isMboOnMap=true;},_updateMarkerLocation:function(_744,_745){this.inherited(arguments);dojo.publish("onCurrentLocationUpdated_"+this.map.getId());},movedMarker:function(_746){if(dojo.config.fwm.debug==true){}this.reverseGeocodeCurrentRecord(_746.newLocation,false);},setServersCurrentRecordLocation:function(_747){this.map.getMaximo().setCurrentRecordLocation(_747);},reverseGeocodeCurrentRecord:function(_748,_749){if(!_748){if(dojo.config.fwm.debug==true){}_748=this.currentMarker.location;}var _74a=function(_74b){this.reverseGeocodeCallbackError(_74b,_748,_749);};var _74c=function(_74d){this.reverseGeocodeCallback(_74d,_748);};this.map.geocoder.reverseGeocode(_748.lat,_748.lng,dojo.hitch(this,_74c),dojo.hitch(this,_74a));},reverseGeocodeAddressOnly:function(){this.reverseGeocodeCurrentRecord(null,true);},reverseGeocodeCallbackError:function(_74e,_74f,_750){if(dojo.config.fwm.debug==true){}if(_750&&_750==true){if(dojo.config.fwm.debug==true){}this.map.getMaximo().showMessage("mapserver","auto_revgeocode_noresults");return;}else{if(!this.currentMaker||_74f.lat!=this.currentMarker.location.lat||_74f.lng!=this.currentMarker.location.lng){if(dojo.config.fwm.debug==true){}if(_74f.lat&&_74f.lng){this.map.getMaximo().setCurrentRecordLocation({lat:_74f.lat,lng:_74f.lng},"FAILED_REV_GEOCODE");}}}},reverseGeocodeCallback:function(_751,_752){if(dojo.config.fwm.debug==true){}var _753=_752;if(this.map.mapConf.provider=="spatial"){if((this.mboInfo.gisdata.isCoordLatLong||this.mboInfo.gisdata.convertedFromLatLong)&&this.map.map.spatialReference.wkid!="4326"){var _754=new esri.geometry.Point(_753.lng,_753.lat,this.map.map.spatialReference);convertedPoint=esri.geometry.project(_754,new esri.SpatialReference({wkid:4326}));_753.lng=convertedPoint.x;_753.lat=convertedPoint.y;}}var _755=_751[0].formattedAddress;this.map.getMaximo().setCurrentRecordLocation({lat:_753.lat,lng:_753.lng,address:_755});},convertFromLatLongToXY:function(lat,lon,_756){if(this.map.mapConf.provider!="spatial"){_756(lat,lon);return;}if(this.map.mapConf.geometryServiceUrl){var SR=new esri.SpatialReference({wkid:102100});var p=new esri.geometry.Point(lon,lat,SR);_756(p.y,p.x);}else{_756(lat,lon);}}});});},"ibm/tivoli/fwm/mxmap/helpers/MapFullScreenHelper":function(){define(["dojo/_base/declare","dojo/dom","ibm/tivoli/fwm/mxmap/_Base"],function(_757,dom,_758){return _757([_758],{map:null,mapDivElement:null,mapDivWidth:null,mapDivHeight:null,tabGroupShell:null,_fullScreenOn:false,_keyHandler:null,_origViewPortContent:null,_oldOverflow:null,_oldBodyParentOverflow:null,_origClientAreaInfo:null,_origOnScrollFunction:null,mapToolbar:null,_isAndroid:false,constructor:function(_759){dojo.mixin(this,_759);this._fullScreenOn=false;this._isAndroid=navigator.userAgent.indexOf("Android")>-1;},_checkForESCKey:function(_75a){if(_75a.keyCode==dojo.keys.ESCAPE){this.fullScreenModeOff();}},_doPreSetupIfIE:function(_75b){if(dojo.isIE&&true!==this.map.isMobile){if(window.clientAreaId){var _75c=dojo.byId(window.clientAreaId);if(_75c){if(true===_75b){var _75d=(_75c.style.position||"relative");var _75e=(_75c.style.overflow||"auto");this._origClientAreaInfo={height:_75c.style.height,width:_75c.style.width,scrollTop:_75c.scrollTop,scrollLeft:_75c.scrollLeft,position:_75d,overflow:_75e};}else{this._origClientAreaInfo={height:_75c.style.height,width:_75c.style.width,scrollTop:this._origClientAreaInfo.scrollTop,scrollLeft:this._origClientAreaInfo.scrollLeft,position:this._origClientAreaInfo.position,overflow:this._origClientAreaInfo.overflow};}_75c.scrollTop=0;_75c.scrollLeft=0;dojo.style(_75c,{"width":dijit.getViewport().w+"px","height":dijit.getViewport().h+"px","top":"0px","left":"0px","position":"absolute","overflow":"hidden"});}}var _75f=dojo.byId("calviewAppletDiv");if(_75f!=null){dojo.style(_75f,{"display":"none"});}}},_undoPreSetupIfIE:function(){if(dojo.isIE&&true!==this.map.isMobile){if(window.clientAreaId){var _760=dojo.byId(window.clientAreaId);if(_760){dojo.style(_760,{"width":this._origClientAreaInfo.width,"height":this._origClientAreaInfo.height,"position":this._origClientAreaInfo.position,"overflow":this._origClientAreaInfo.overflow});_760.scrollTop=this._origClientAreaInfo.scrollTop;_760.scrollLeft=this._origClientAreaInfo.scrollLeft;}}var _761=dojo.byId("calviewAppletDiv");if(_761!=null){dojo.style(_761,{"display":"block"});}}},fullScreenModeOn:function(){if(this._fullScreenOn==false){this._doPreSetupIfIE(true);this._adjustScrolls();this._setViewPortSettings();this._adjustMapToFullScreen();this._hideElementsHackOn();this._adjustOpacity();this._fullScreenOn=true;this._keyHandler=dojo.connect(document,"onkeypress",dojo.hitch(this,this._checkForESCKey));var _762=0;window.top.scrollTo(_762,0);var _763=0;if(this.map.toolbar){_763=this.map.toolbar.getToolbarHeight();}this.map.resizeTo(dijit.getViewport().w,dijit.getViewport().h-_763);dojo.publish("mapFullScreenModeChanged_"+this.map.getId(),[{modeOn:true}]);}else{if(dojo.config.fwm.debug==true){}}},_getIsRTL:function(){if(document&&document.body){return document.body.getAttribute("dir")==="rtl";}return false;},_adjustMapToFullScreen:function(){if(dijit.getViewport().w<200||dijit.getViewport().h<200){return;}var _764="0px";var _765=0;var _766="100%";var _767=0;var _768=this._getIsRTL()?"right":"left";var _769=dojo.query(".application-navigation-menu")[0];if(_769){_767=parseInt(dojo.style(_769,"width"))||0;_766="calc(100% - "+_767+"px)";}if(this.mapToolbar){var _76a=this.mapToolbar.getToolbarDivElement();this.tabGroupShell=dojo.query(".tabgroupShell");if(dojo.isIE&&(this.map.isMobile==true)){dojo.style(_76a,{"width":dijit.getViewport().w+"px","top":"0px","left":_765+"px","position":"absolute"});}else{var _76b={"width":_766,"top":"0px","position":"fixed","zIndex":"1001"};_76b[_768]=_767+"px";dojo.style(_76a,_76b);if(this.tabGroupShell.length){this.tabGroupShell.style("display","none");}}_764=_76a.offsetHeight+"px";}var _76c=0;if(this.map.toolbar){_76c=this.map.toolbar.getToolbarHeight();}if(dojo.isIE&&(this.map.isMobile==true)){dojo.style(this.mapDivElement,{"width":dijit.getViewport().w+"px","height":(dijit.getViewport().h-_76c)+"px","top":_764,"left":_765+"px","position":"absolute"});}else{var _76b={"width":_766,"height":(dijit.getViewport().h-_76c)+"px","top":_764,"position":"fixed","zIndex":"1001"};_76b[_768]=_767+"px";dojo.style(this.mapDivElement,_76b);}},_hideElementsHackOn:function(){if(this._isAndroid||dojo.isIE){this.mapParent=this._removeMapFromParent();this._hidePageElements();this._addMapToParent(document.body);}},_hideElementsHackOff:function(){if(this._isAndroid||dojo.isIE){this._removeMapFromParent();this._addMapToParent(this.mapParent);this._showPageElements();}if(dojo.isIE&&(dojo.isIE<10)){window.onresize();}},_removeMapFromParent:function(){var _76d=this.mapDivElement.parentNode;_76d.removeChild(this.mapDivElement);if(this.mapToolbar){_76d.removeChild(this.mapToolbar.getToolbarDivElement());}return _76d;},_addMapToParent:function(_76e){if(this.mapToolbar){_76e.appendChild(this.mapToolbar.getToolbarDivElement());}_76e.appendChild(this.mapDivElement);},_hidePageElements:function(){var _76f=dojo.byId("dialogholder");var _770=dojo.query(".dijitDialog");var _771=dojo.byId("wait");var _772=[_76f,_771].concat(_770);dojo.query("body *").forEach(function(node,_773,arr){if(node.style&&!dojo.some(_772,function(_774){return dojo.dom.isDescendant(node,_774);})){node._fwm_display_=node.style.display;node.style.display="none";}});},_showPageElements:function(){dojo.query("body *").forEach(function(node,_775,arr){if(node.style&&"_fwm_display_" in node){node.style.display=node._fwm_display_;}});},_adjustOpacity:function(){for(var _776=0;_776<100;_776+=5){dojo.query(".opacity_"+_776).style("opacity","1.0");}},_restoreOpacity:function(){for(var _777=0;_777<100;_777+=5){dojo.query(".opacity_"+_777).style("opacity","."+_777);}},_adjustScrolls:function(){var body=dojo.body();if(body.style&&body.style.overflow){this._oldOverflow=dojo.style(body,"overflow");}else{this._oldOverflow="";}if(dojo.isIE){if(body.parentNode&&body.parentNode.style&&body.parentNode.style.overflow){this._oldBodyParentOverflow=body.parentNode.style.overflow;}else{try{this._oldBodyParentOverflow=dojo.style(body.parentNode,"overflow");}catch(e){this._oldBodyParentOverflow="scroll";}}dojo.style(body.parentNode,"overflow","hidden");}dojo.style(body,"overflow","hidden");this._origOnScrollFunction=window.onscroll;window.onscroll=function(e){window.top.scrollTo(0,0);};},_restoreScrolls:function(){var body=dojo.body();if(dojo.isIE&&!dojo.isQuirks){body.parentNode.style.overflow=this._oldBodyParentOverflow;}dojo.style(body,"overflow",this._oldOverflow);window.onscroll=this._origOnScrollFunction;},_setViewPortSettings:function(){var _778=dojo.query("meta[name=\"viewport\"]")[0];if(_778){this._origViewPortContent=dojo.attr(_778,"content");if(this._isAndroid){dojo.attr(_778,"content",null);dojo.attr(_778,"content","initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no,width=device-width");}else{dojo.attr(_778,"content","initial-scale=1.0,user-scalable=no,width=device-width");}}else{var meta=dojo.create("meta",{name:"viewport",content:"initial-scale=1.0, user-scalable=no"});this._origViewPortContent=dojo.create("meta",{name:"viewport",content:"initial-scale=1.0, user-scalable=yes"});document.getElementsByTagName("head")[0].appendChild(meta);}},_removeViewPortSettings:function(){var _779=dojo.query("meta[name=\"viewport\"]")[0];if(_779){dojo.attr(_779,"content",null);dojo.attr(_779,"content",this._origViewPortContent);}},fullScreenModeOff:function(){if(this._fullScreenOn==true){if(this.tabGroupShell.length){this.tabGroupShell.style("display","flex");}this._hideElementsHackOff();this._undoPreSetupIfIE();this._restoreMapToOriginalSize();this._restoreScrolls();this._restoreOpacity();this._fullScreenOn=false;if(this._keyHandler){dojo.disconnect(this._keyHandler);this._keyHandler=null;}this._removeViewPortSettings();this.map._resize();dojo.publish("mapFullScreenModeChanged_"+this.map.getId(),[{modeOn:false}]);}else{if(dojo.config.fwm.debug==true){console.warn("[MapFullScreenHelper] Full Screen is already off");}}},_restoreMapToOriginalSize:function(){dojo.style(this.mapDivElement,{"width":this.mapDivWidth,"height":this.mapDivHeight,"position":"relative","zIndex":"","right":"","left":"","top":""});if(this.mapToolbar){var _77a=this.mapToolbar.getToolbarDivElement();dojo.style(_77a,{"width":this.mapDivWidth,"position":"relative","zIndex":"","right":"","left":"","top":""});}},updateMapDimensions:function(_77b,_77c){this.mapDivWidth=_77b;this.mapDivHeight=_77c;if(this._fullScreenOn==true){this._doPreSetupIfIE(false);this._adjustMapToFullScreen();}}});});},"ibm/tivoli/fwm/mxmap/routing/impl/gmaps":function(){define(["dijit","dojo","dojox","dojo/require!ibm/tivoli/fwm/mxmap/_Base,ibm/tivoli/fwm/mxmap/routing/Router,ibm/tivoli/fwm/mxmap/routing/Route"],function(_77d,dojo,_77e){dojo.provide("ibm.tivoli.fwm.mxmap.routing.impl.gmaps");dojo.require("ibm.tivoli.fwm.mxmap._Base");dojo.require("ibm.tivoli.fwm.mxmap.routing.Router");dojo.require("ibm.tivoli.fwm.mxmap.routing.Route");dojo.declare("ibm.tivoli.fwm.mxmap.routing.impl.gmaps",[ibm.tivoli.fwm.mxmap.routing.Router,ibm.tivoli.fwm.mxmap._Base],{directionsService:null,_routeLimits:25,_routeRequestIntervalInMiliseconds:300,_markerHost:"http://maps.gstatic.com/mapfiles/markers2/",_allowParallelRouteCreation:true,constructor:function(_77f){this._routeQueueParallel=[];dojo.mixin(this,_77f);this.directionsService=new google.maps.DirectionsService();if(this.map.mapConf.key==null||this.map.mapConf.key.length==0){this._routeLimits=10;}var _780=this.map.mapConf.GMAPS;if(_780&&(_780.routeRequestInterval>0)){this._allowParallelRouteCreation=false;this._routeRequestIntervalInMiliseconds=_780.routeRequestInterval;}},_getPathCoords:function(r){var _781=[];for(var k in r.overview_path){var p=r.overview_path[k];var _782=this.map.pointFromProprietary(p);_781.push(_782);}return _781;},_iterateOverLegs:function(_783,_784,map){var _785={distance:0,duration:0,legData:[],markers:[],stops:[],polyline:[]};var _786=null;var _787="";for(var k=0;k<_783.legs.length;k++){var leg=_783.legs[k];_785.distance+=leg.distance.value;_785.duration+=leg.duration.value;var _788=this._getStepsData(leg.steps);var _789=_788.stepData;var _78a=this.map.pointFromProprietary(leg.start_location);var ep=this.map.pointFromProprietary(leg.end_location);_785.legData.push({distance:leg.distance.value,duration:leg.duration.value,startAddress:leg.start_address,endAddress:leg.end_address,endLatLng:ep,startLatLng:_78a,steps:_789});_785.polyline=_785.polyline.concat(_788.polyStops);_785.stops.push(_78a);_786=leg.end_location;_787=leg.end_address;}var _78b=this.map.pointFromProprietary(_786);_785.stops.push(_78b);return _785;},_getStepsData:function(_78c){var data=[];var _78d=[];if(_78c){for(var _78e=0;_78e<_78c.length;_78e++){var step=_78c[_78e];var _78f=step.distance.value;var loc=this.map.pointFromProprietary(step.start_location);_78f/=1000;data.push({distance:_78f,duration:step.duration.value,info:step.instructions,location:loc});_78d=_78d.concat(step.path);}}return {stepData:data,polyStops:_78d};},ccs:["#ff0000","#00ff00","#ffffff"],co:0,_multipleRouteSuccess:function(_790,_791,_792,_793,_794){var map=this.map.getProviderMap();var _795={totalDistance:0,totalDuration:0,legsData:[],polyline:null,stops:[],copyrights:null};var _796=[];if(_790&&(_790.length>0)){for(var _797=0;_797<_790.length;_797++){var r=_790[_797].routes[0];if(_795.copyrights==null){_795.copyrights=r.copyrights;}else{_795.copyrights+=", "+r.copyrights;}var rd=this._iterateOverLegs(r,true,map);for(var k=0;k<rd.polyline.length;k++){var p=rd.polyline[k];var _798=this.map.pointFromProprietary(p);_796.push(_798);}_795.totalDistance+=rd.distance;_795.totalDuration+=rd.duration;_795.legsData=_795.legsData.concat(rd.legData);var _799=rd.stops;if(_790[_797].overlapPrevious==true){_799=_799.slice(1,_799.length);}_795.stops=_795.stops.concat(_799);}}else{for(var i=0;i<_793.length;i++){_795.stops.push(this.map.pointFromProprietary(this.__convertMboToGmapsLatLng(_793[i])));}}if(_794!=null&&_794.routecolor){this.routecolor=_794.routecolor;}var _79a={points:_796,color:this.routecolor,opacity:this.routeOpacity,width:this.routeLineWidth};var poly=this.map.polyline(_79a);if(dojo.config.fwm.debug==true){}_795.polyline=poly;_795.map=this.map;var _79b=function(_79c){this._markerHost=_79c;this._counter=0;this.getNext=function(){return {icon:this._generateMarkerImageUrl(),size:[20,34],anchor:[10,34]};};this._generateMarkerImageUrl=function(){var _79d="_green";var _79e=(this._counter%26);var _79f=String.fromCharCode(65+_79e);if(dojo.config.fwm.debug==true){}this._counter++;return this._markerHost+"marker"+_79d+_79f+".png";};};_795.customMarkerOptions=new _79b(this._markerHost);var _7a0=new ibm.tivoli.fwm.mxmap.routing.itinerary.Itinerary();var _7a1=false;if(_793[0].calculatedStop==true){_7a1=true;}if(_795.legsData&&_795.legsData.length>0){_7a0.setInitialLocation(_795.legsData[0].startAddress,_795.legsData[0].startLatLng,null,null,_7a1);for(var _797=0;_797<_795.legsData.length;_797++){var loc=_795.legsData[_797].endLatLng;var info=_795.legsData[_797].endAddress;var _7a2=_795.legsData[_797].distance;var _7a3=_795.legsData[_797].duration/60;var _7a4=_795.legsData[_797].steps;_7a2/=1000;_7a0.addLeg(loc,info,_7a2,_7a3,null,_7a4,null,null);}if(_793[_793.length-1].calculatedStop==true){_7a0.legs[_7a0.legs.length-1].needsToGeocode=true;}}_795.itinerary=_7a0;_795.inputInfo={stops:_793,successCb:_791,errorCb:_792};_795.originalRouter=this;_795.distanceUnit=this.getCurrentDistanceUnit();var _7a5=new ibm.tivoli.fwm.mxmap.routing.Route(_795);if(_791){_791(_7a5);}},distanceUnit:null,_routeQueueParalel:null,showRoute:function(_7a6,_7a7,_7a8,a,_7a9,_7aa){if(this._allowParallelRouteCreation==false){if(_7aa!=true){this._routeQueueParallel.push({stops:_7a6,callback:_7a7,errCb:_7a8,instanceConf:_7a9});if(this._routeQueueParallel.length==1){this.executeQueuedParallel();}return;}}this._counter=0;var _7ab=0;var _7ac=0;var _7ad=[];var th=this._startTimer();this.distanceUnit=google.maps.UnitSystem.IMPERIAL;if(this.getCurrentDistanceUnit()==ibm.tivoli.fwm.mxmap.routing.DistanceUnit.KM){this.distanceUnit=google.maps.UnitSystem.METRIC;}var _7ae=0;var _7af=false;var _7b0=function(_7b1){if(_7b1){_7b1.overlapPrevious=_7af;_7af=false;_7ad.push(_7b1);if(dojo.config.fwm.debug==true){}if(_7ab<_7a6.length){_7ae=_7ab;_7ab+=this._routeLimits;if(_7ab>=_7a6.length){_7ab=_7a6.length;}if(_7ae>0){_7ae--;if((_7ab-_7ae)>=this._routeLimits){_7ab--;}_7af=true;}var _7b2=_7a6.slice(_7ae,_7ab);if(dojo.config.fwm.debug==true){}this._calculateRoute(_7b2,dojo.hitch(this,_7b0),_7a8);}else{this._multipleRouteSuccess(_7ad,_7a7,_7a8,_7a6,_7a9);this._stopTimer(null,_7a6.length);}}else{_7ad=[];this._multipleRouteSuccess(_7ad,_7a7,_7a8,_7a6,_7a9);this._stopTimer(null,_7a6.length);}};_7ab+=this._routeLimits;if(_7ab>=_7a6.length){_7ab=_7a6.length;}th=this._startTimer();if(dojo.config.fwm.debug==true){}this._calculateRoute(_7a6.slice(_7ae,_7ab),dojo.hitch(this,_7b0),_7a8);},__convertMboToGmapsLatLng:function(_7b3){var _7b4=null;var _7b5=new ibm.tivoli.fwm.mxmap.MXRecord({mboInfo:_7b3,map:this.map});if(_7b5.hasGISData()){if(_7b5.useLBSData()){if(_7b5.hasPointInCurrentSR()){_7b4=new google.maps.LatLng(parseFloat(_7b5.getPointInCurrentSRLat()),parseFloat(_7b5.getPointInCurrentSRLng()));}else{_7b4=new google.maps.LatLng(parseFloat(_7b5.getLBSLat()),parseFloat(_7b5.getLBSLng()));}}else{if(_7b5.hasGISCoordinates()){_7b4=new google.maps.LatLng(parseFloat(_7b5.getGISLat()),parseFloat(_7b5.getGISLng()));}else{if(_7b5.hasAutolocateGISOnlyCoordinates()){_7b4=new google.maps.LatLng(parseFloat(_7b5.getAutolocateGISLat()),parseFloat(_7b5.getAutolocateGISLng()));}else{if(_7b5.hasOwnLatLngProperties()){_7b4=new google.maps.LatLng(parseFloat(_7b5.getOwnLat()),parseFloat(_7b5.getOwnLng()));}else{console.warn("Stop doesn't have gis coords",_7b3);}}}}}else{_7b4=new google.maps.LatLng(parseFloat(_7b5.getOwnLat()),parseFloat(_7b5.getOwnLng()));}return _7b4;},_calculateRoute:function(_7b6,_7b7,_7b8){var _7b9=this.__convertMboToGmapsLatLng(_7b6[0]);var end=this.__convertMboToGmapsLatLng(_7b6[_7b6.length-1]);var _7ba={origin:_7b9,destination:end,travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem.METRIC,waypoints:[]};_7ba.avoidHighways=this.getAvoidHighways();_7ba.avoidTolls=this.getAvoidTolls();for(var i=1;i<_7b6.length-1;i++){var stop=_7b6[i];var ll=this.__convertMboToGmapsLatLng(stop);if((ll!=null)&&(ll!=undefined)){var wp={location:ll,stopover:true};_7ba.waypoints.push(wp);}}if(this.isOptimizeRoute()){_7ba.optimizeWaypoints=true;}if(dojo.config.fwm.debug==true){}var th=this._startTimer();var me=this;this.directionsService.route(_7ba,function(_7bb,_7bc){if(dojo.config.fwm.debug==true){}me._stopTimer(th,_7b6.length);if(_7bc==google.maps.DirectionsStatus.OK){if(_7b7){_7b7(_7bb);}}else{if(this.map&&this.map.getShowMarkersOnRouteError()==true){if(_7b7){_7b7(null);}}else{if(_7b8){switch(_7bc){case google.maps.DirectionsStatus.ZERO_RESULTS:_7b8(ibm.tivoli.fwm.mxmap.routing.RoutingErrorCodes.ZERO_RESULTS,_7bc);break;case google.maps.DirectionsStatus.OVER_QUERY_LIMIT:_7b8(ibm.tivoli.fwm.mxmap.routing.RoutingErrorCodes.OVER_LIMIT,_7bc);break;case google.maps.DirectionsStatus.REQUEST_DENIED:_7b8(ibm.tivoli.fwm.mxmap.routing.RoutingErrorCodes.REQUEST_DENIED,_7bc);break;default:_7b8(ibm.tivoli.fwm.mxmap.routing.RoutingErrorCodes.UNKNOWN_ERROR,_7bc);break;}}}}});},executeQueuedParallel:function(){var me=this;if(this._routeQueueParallel.length>0){setTimeout(function(){var obj=me._routeQueueParallel.pop();me.showRoute(obj.stops,obj.callback,obj.errCb,null,obj.instanceConf,true);me.executeQueuedParallel();},me._routeRequestIntervalInMiliseconds);}}});});},"dijit/MenuItem":function(){define(["dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/kernel","dojo/sniff","dojo/_base/lang","./_Widget","./_TemplatedMixin","./_Contained","./_CssStateMixin","dojo/text!./templates/MenuItem.html"],function(_7bd,dom,_7be,_7bf,_7c0,has,lang,_7c1,_7c2,_7c3,_7c4,_7c5){var _7c6=_7bd("dijit.MenuItem"+(has("dojo-bidi")?"_NoBidi":""),[_7c1,_7c2,_7c3,_7c4],{templateString:_7c5,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(val){this._set("label",val);var _7c7="";var text;var ndx=val.search(/{\S}/);if(ndx>=0){_7c7=val.charAt(ndx+1);var _7c8=val.substr(0,ndx);var _7c9=val.substr(ndx+3);text=_7c8+_7c7+_7c9;val=_7c8+"<span class=\"dijitMenuItemShortcutKey\">"+_7c7+"</span>"+_7c9;}else{text=val;}this.domNode.setAttribute("aria-label",text+" "+this.accelKey);this.containerNode.innerHTML=val;this._set("shortcutKey",_7c7);},iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:false,_fillContent:function(_7ca){if(_7ca&&!("label" in this.params)){this._set("label",_7ca.innerHTML);}},buildRendering:function(){this.inherited(arguments);var _7cb=this.id+"_text";_7be.set(this.containerNode,"id",_7cb);if(this.accelKeyNode){_7be.set(this.accelKeyNode,"id",this.id+"_accel");}dom.setSelectable(this.domNode,false);},onClick:function(){},focus:function(){try{if(has("ie")==8){this.containerNode.focus();}this.focusNode.focus();}catch(e){}},_setSelected:function(_7cc){_7bf.toggle(this.domNode,"dijitMenuItemSelected",_7cc);},setLabel:function(_7cd){_7c0.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",_7cd);},setDisabled:function(_7ce){_7c0.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",_7ce);},_setDisabledAttr:function(_7cf){this.focusNode.setAttribute("aria-disabled",_7cf?"true":"false");this._set("disabled",_7cf);},_setAccelKeyAttr:function(_7d0){if(this.accelKeyNode){this.accelKeyNode.style.display=_7d0?"":"none";this.accelKeyNode.innerHTML=_7d0;_7be.set(this.containerNode,"colSpan",_7d0?"1":"2");}this._set("accelKey",_7d0);}});if(has("dojo-bidi")){_7c6=_7bd("dijit.MenuItem",_7c6,{_setLabelAttr:function(val){this.inherited(arguments);if(this.textDir==="auto"){this.applyTextDir(this.textDirNode);}}});}return _7c6;});},"ibm/tivoli/fwm/mxmap/panels/MobileInfoPanelDialog":function(){define(["dojo/_base/declare","dojo/main","dijit/main","dijit/Dialog","dijit/form/Button"],function(_7d1,dojo,_7d2,_7d3,_7d4,_7d5,i18n){return _7d1(null,{map:null,title:null,_theDialog:null,_content:null,mainSec:null,undercontent:null,fitHeight:false,constructor:function(_7d6){dojo.mixin(this,_7d6);},createDialog:function(){var _7d7=this.getCalculatedHeight();var _7d8=this.getCalculatedWidth();var _7d9=this.title||"";var _7da={title:_7d9,draggable:this.map.isMobile?false:true,closable:false,style:"width: "+(_7d8)+"px; max-height: "+(_7d7)+"px; overflow-y: auto;"};if(this.nonModal&&!this.map.isMobile){_7da["class"]="nonModal";}this._theDialog=new _7d3(_7da);this._cancelHandler=dojo.connect(this._theDialog,"onCancel",dojo.hitch(this,this._resetMaximoDialogStates));dojo.connect(window,"onresize",this,this._onResize);},full:null,center:null,bottom:null,_createContentSection:function(_7db){if(this.center!=null&&false){dojo.place(_7db,this.center,"first");return this.full;}else{var _7dc=dojo.create("div",{style:{width:(this.getCalculatedWidth()-this.fixedpaddingw)+"px"}});this.full=_7dc;var _7dd=dojo.create("div",{style:{overflowY:"auto",overflowX:"auto",maxHeight:(this.getCalculatedHeight()-this.fixedpaddingh)+"px",width:(this.getCalculatedWidth()-this.fixedpaddingw)+"px"}},_7dc);if(dojo.isIE&&this.fitHeight){_7dd.style.height=(this.getCalculatedHeight()-this.fixedpaddingh)+"px";}this.center=_7dd;dojo.place(_7db,_7dd,"only");var _7de=dojo.create("div",{"mxnId":"btnDiv","class":"infoPanelCloseBtn","style":{"textAlign":(document.body.dir=="rtl")?"left":"right"}},_7dc);this.btnDiv=_7de;if(this.customButtons&&(this.customButtons.length>0)){for(var i=0;i<this.customButtons.length;i++){var _7df=dojo.create("div"+i,{},_7de);new _7d2.form.Button({label:this.customButtons[i].label,onClick:this.customButtons[i].onClick},_7df);}}var btn2=dojo.create("div",{"mxnId":"btn"},_7de);var _7e0=ibm.tivoli.fwm.i18n.getMaxMsg("map","infopaneldialogclose");this.closeBtn=new _7d4({label:_7e0,onClick:dojo.hitch(this,function(){this.close();})},btn2);return _7dc;}},_myFct:function(){},setContent:function(_7e1){this.createDialog();this._theDialog._myFct=function(){};this._theDialog.set("content",this._createContentSection(_7e1));},_onResize:function(){if(this._theDialog&&this._theDialog.get("open")){this._recalculateDimensions();}},_recalculateDimensions:function(){var _7e2=this.getCalculatedWidth();if(this.fitHeight){var _7e3=this.getCalculatedHeight();this._theDialog.resize({w:_7e2,h:_7e3});this.center.style.height=(_7e3-this.fixedpaddingh)+"px";}else{this._theDialog.resize({w:_7e2});}this.center.style.width=(_7e2-this.fixedpaddingw)+"px";this.btnDiv.style.width=(_7e2-this.fixedpaddingw)+"px";this._theDialog.show();},getCalculatedWidth:function(){var _7e4=navigator.userAgent.indexOf("Android")>-1;if(_7e4){this.map._resize();}var _7e5=310;var _7e6=this.map.getWidthInPixels();if(this.map.isMobile){var _7e7=Math.ceil(_7e6*0.4);}else{var _7e7=Math.ceil(_7e6*0.5);}if(_7e7>_7e5){return _7e7;}if(_7e5>_7e6){return _7e6;}return _7e5;},getCalculatedHeight:function(){var _7e8=Math.min(dojo.window.getBox().h,dojo.marginBox(this.map.getElement()).h);var _7e9=Math.ceil(_7e8*0.85);if(this.map.isMobile){return _7e9;}var _7ea=400;if(_7e9>_7ea){return _7e9;}return _7ea;},close:function(){if(this._theDialog){this._theDialog.hide();}this._resetMaximoDialogStates();},_resetMaximoDialogStates:function(){if(dialogCount>0){dialogCount--;}showObjs();},fixedpaddingw:25,fixedpaddingh:80,show:function(){this._recalculateDimensions();this._theDialog.show();hideObjs();dialogCount++;},closeBtn:null,onCancel:function(){this.close();}});});},"dijit/ToolbarSeparator":function(){define(["dojo/_base/declare","dojo/dom","./_Widget","./_TemplatedMixin"],function(_7eb,dom,_7ec,_7ed){return _7eb("dijit.ToolbarSeparator",[_7ec,_7ed],{templateString:"<div class=\"dijitToolbarSeparator dijitInline\" role=\"presentation\"></div>",buildRendering:function(){this.inherited(arguments);dom.setSelectable(this.domNode,false);},isFocusable:function(){return false;}});});},"ibm/tivoli/fwm/mxmap/_MapProvider":function(){define(["dojo/_base/declare","dojo/main","dijit/main","dojox/main","dojo/topic","ibm/tivoli/fwm/mxmap/_Base","ibm/tivoli/fwm/mxmap/Radius","ibm/tivoli/fwm/mxmap/_BoundingBox"],function(_7ee,dojo,_7ef,_7f0,_7f1,_7f2,_7f3,_7f4){return _7ee([_7f2],{WGS84WKID:4326,Events:{click:"click",rightclick:"righclick",endPan:"endPan",changeZoom:"changeZoom",dragEnd:"dragEnd",load:"load"},MapType:{ROAD:1,SATELLITE:2,HYBRID:3,PHYSICAL:4},providerInitialized:false,markers:[],polylines:[],map:null,element:null,init:function(_7f5,_7f6){var me=this;this.providerInitialized=true;var def=new dojo.Deferred();if(this.mapConf.provider=="spatial"){this._init(_7f5,_7f6).then(function(){me.addSubscription("startedUserInteractionOnMap_"+me.compId,dojo.hitch(me,me.closeAllOtherMarkerInfoBubbles));def.callback(me);});}else{this._init(_7f5,_7f6);this.addSubscription("startedUserInteractionOnMap_"+me.compId,dojo.hitch(me,me.closeAllOtherMarkerInfoBubbles));}return def;},_init:function(_7f7,_7f8){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},isProviderInitialized:function(){return this.providerInitialized;},destroyMap:function(){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},isLoaded:function(){return this.loaded;},addOnload:function(fct){this.addSubscription(this.Events.load+this.getId(),dojo.hitch(this,fct));},_loaded:function(){dojo.publish(this.Events.load+this.getId());},getElement:function(){return this.element;},getProviderMap:function(){return this.map;},getMapType:function(){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},setMapType:function(type){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},getCenter:function(){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},setCenter:function(_7f9,_7fa){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},getZoom:function(){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},setZoom:function(zoom){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},setCenterAndZoom:function(_7fb,zoom){this.setCenter(_7fb);this.setZoom(zoom);},autoCenterAndZoom:function(_7fc){if((_7fc!=undefined)&&(_7fc.length>this.markers.length)){var me=this;setTimeout(function(){me.autoCenterAndZoom();},5000);}else{var _7fd=false;var _7fe=-(2e+32);var _7ff=(2e+32);var _800=-(2e+32);var _801=(2e+32);var lat,lon;var _802=function(){if(lat>_7fe){_7fe=lat;}if(lat<_7ff){_7ff=lat;}if(lon>_800){_800=lon;}if(lon<_801){_801=lon;}};for(var i=0;i<this.markers.length;i++){lat=this.markers[i].location.lat;lon=this.markers[i].location.lon;_802();_7fd=true;}for(i=0;i<this.polylines.length;i++){for(var j=0;j<this.polylines[i].points.length;j++){lat=this.polylines[i].points[j].lat;lon=this.polylines[i].points[j].lon;_802();}_7fd=true;}if(_7fd==true){this.setBounds(new this.getBoundingBox(_7ff,_801,_7fe,_800));}}},getBounds:function(){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},setBounds:function(_803){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},getBoundingBox:function(_804,_805,_806,_807){return new ibm.tivoli.fwm.mxmap._BoundingBox(_804,_805,_806,_807);},getBoundingBoxFromPoints:function(_808){var _809=null;if(_808&&_808.length>0){_809=this.getBoundingBox(_808[0].lat,_808[0].lng,_808[0].lat,_808[0].lng);for(var i=1,len=_808.length;i<len;i++){_809.extend(_808[i]);}}return _809;},getBoundingBoxFromSwAndNe:function(sw,ne){var _80a=null;if(sw&&ne){_80a=this.getBoundingBox(sw.lat,sw.lng,ne.lat,ne.lng);}return _80a;},getAllPointsFromWGS84:function(_80b,_80c,_80d){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},getAllPointsInWGS84:function(_80e,_80f,_810){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},resizeTo:function(_811,_812){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},addMarker:function(_813,_814){var _815=this.createProviderMarker(_813,_814);this.markers.push(_815);return _815;},createProviderMarker:function(_816){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},removeMarker:function(_817){var _818;for(var i=0;i<this.markers.length;i++){_818=this.markers[i];if(_817==_818){this.removeProviderMarker(_817);_817.onmap=false;this.markers.splice(i,1);_818.destroyRecursive();break;}}},removeProviderMarker:function(_819){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},removeAllMarkers:function(){var _81a;while(this.markers.length>0){_81a=this.markers.pop();this.removeProviderMarker(_81a);_81a.destroyRecursive();}},addPolyline:function(_81b,_81c){var _81d=this.createProviderPolyline(_81b,_81c);_81b.setChild(_81d);this.polylines.push(_81b);},createProviderPolyline:function(_81e){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},removePolyline:function(_81f){var _820;for(var i=0;i<this.polylines.length;i++){_820=this.polylines[i];if(_81f==_820){this.polylines.splice(i,1);this.removeProviderPolyline(_81f);_81f.onmap=false;break;}}},removeProviderPolyline:function(_821){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},removeAllPolylines:function(){var _822;while(this.polylines.length>0){_822=this.polylines.pop();this.removeProviderPolyline(_822);_822.onmap=false;}},setShowTraffic:function(_823){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},latLng:function(lat,lng,sr){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},polyline:function(_824){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},radius:function(_825,_826){var _827={center:_825,quality:_826,map:this};return new _7f3(_827);},addMapEventHandler:function(_828,_829){this.addSubscription("mapProvider_"+_828+"_"+this.getId(),_829);},removeMapEventHandler:function(_82a,_82b){this.removeSubscription("mapProvider_"+_82a+"_"+this.getId(),_82b);},fireMapEvent:function(_82c,data){dojo.publish("mapProvider_"+_82c+"_"+this.getId(),data);},pointToProprietary:function(_82d){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},pointFromProprietary:function(_82e){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},geocode:function(_82f,_830,key,_831){this.providerGeocode(_82f,_830,key,_831);},reverseGeocode:function(_832,_833,key,lat,lng){this.providerReverseGeocode(_832,_833,key,lat,lng);},providerGeocode:function(){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},providerReverseGeocode:function(){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},getMarkers:function(){return this.markers;},destroyRecursive:function(){if(this.markers){this.removeAllMarkers();this.removeAllPolylines();}this.inherited(arguments);},stopEventPropagation:function(e){if(!e){var e=window.event;}e.cancelBubble=true;if(e.stopPropagation){e.stopPropagation();}if(e.stopEvent){e.stopEvent();}e.handled=true;if(e.originalEvent){e.originalEvent.cancelBubble=true;e.originalEvent.handled=true;stopBubble(e.originalEvent);cancelEvent(e.originalEvent);if(e.originalEvent.stopPropagation){e.originalEvent.stopPropagation();}}},closeAllOtherMarkerInfoBubbles:function(e){if(e.eventName=="openBubble"){var _834=e.objectSource;if((_834!=null)&&(_834!=undefined)){for(var i=0;i<this.markers.length;i++){if(this.markers[i]!=_834){this.markers[i].closeBubbleIfNecessary();}}}}}});});},"ibm/tivoli/fwm/mxmap/factories/bingmaps":function(){define(["dijit","dojo","dojox","dojo/require!dojo/io/script,ibm/tivoli/fwm/mxmap/impl/BingMaps"],function(_835,dojo,_836){dojo.provide("ibm.tivoli.fwm.mxmap.factories.bingmaps");dojo.require("dojo.io.script");dojo.require("ibm.tivoli.fwm.mxmap.impl.BingMaps");ibm.tivoli.fwm.mxmap.factories.bingmaps={loaded:false,apiLoaded:function(){ibm.tivoli.fwm.mxmap.factories.bingmaps.loaded=true;ibm.tivoli.fwm.mxmap.factory.apiInitialized("ibm.tivoli.fwm.mxmap.impl.BingMaps","bingmaps");},init:function(_837){this._loadJSApi(_837.mapConf.key,_837.mapConf.https,_837.mapConf.locale);},_loadJSApi:function(key,_838,_839){var _83a="";var _83b="http";var _83c="";if(_838){_83b="https";}if(key){_83c="&key="+key;_83a+=_83c;}else{console.warn("no bing maps key was set.");}window.fwmBingMapsLoaded=function(){ibm.tivoli.fwm.mxmap.factories.bingmaps.apiLoaded();};dojo.io.script.get({url:_83b+"://www.bing.com/api/maps/mapcontrol?callback=fwmBingMapsLoaded"+_83a,timeout:30000,error:function(){console.error("Failed to load bing apis");alert("Failed to load bing maps api");}});},apiPooler:function(){try{if(Microsoft&&Microsoft.Maps){ibm.tivoli.fwm.mxmap.factories.bingmaps.apiLoaded();return;}}catch(e){}if(ibm.tivoli.fwm.mxmap.factories.bingmaps.loaded!=true){setTimeout("ibm.tivoli.fwm.mxmap.factories.bingmaps.apiPooler",500);}}};});},"ibm/tivoli/fwm/mxmap/MapResize":function(){define(["dojo/_base/declare"],function(_83d){return _83d(null,{_isLayoutReady:false,MAP_TAB_PARENT_ID:"SystemNavAppContent-sc_div",DEFINED_APP_PARENTS_WIDTH:{TECHTABLET:{width:"100%",},},constructor:function(_83e,map){this.mapConf=_83e.mapConf;this.divId=_83e.divId;this.map=map;},destroy:function(){if(this.scrollbarsObserver){this.scrollbarsObserver.disconnect();}this.scrollbarsObserver=null;},resize:function(){if(this.mapConf.isInMapManager){return;}this.resizer=setInterval(dojo.hitch(this,function(){if(!this.isLayoutReady()){return;}clearInterval(this.resizer);this.resizeAfterReady();this.createScroolbarsObserver();}),50);},createScroolbarsObserver:function(){var _83f=this.getScrollbars();if(!_83f.length){return;}if(!this.scrollbarsObserver){this.scrollbarsObserver=new MutationObserver(dojo.hitch(this,this.onScrollbarChanged));}dojo.forEach(_83f,dojo.hitch(this,function(_840){this.scrollbarsObserver.observe(_840,{attributes:true});}));},onScrollbarChanged:function(){var _841=dojo.query(".custom-scroller",this.MAP_TAB_PARENT_ID)[0];if(_841){var _842=_841.children[0];if(_842){dojo.style(_842,{"margin-inline-end":"0px","margin-bottom":"0px"});}}this.resizeAfterReady();this.hideScrollbars();},getScrollbars:function(){return dojo.query(".custom-scroller-track",this.MAP_TAB_PARENT_ID);},hideScrollbars:function(){var _843=this.getScrollbars();if(_843){dojo.forEach(_843,dojo.hitch(this,function(_844){dojo.style(_844,"display","none");}));}},resizeAfterReady:function(){this.removeMapBorder();this.fillMapSpace(this.divId);},isLayoutReady:function(){if(this._isLayoutReady){return this._isLayoutReady;}var _845=this.getMapParentApplication();if(this.getDefinedAppParent(_845)){return this._isLayoutReady=true;}var _846=this.mapConf&&this.mapConf.tabGroupId;if(_846){return this._isLayoutReady=dojo.byId(this.mapConf.tabGroupId).style.paddingTop==="3rem";}return this._isLayoutReady=true;},removeMapBorder:function(){var _847=document.getElementsByClassName("tabBodyTableStretch");if(_847.length>0){var _848=_847[0];dojo.setStyle(_848,"border-spacing","0px");}},fillMapSpace:function(_849){var _84a=dojo.byId(_849);if(!_84a){return;}if(_84a.contentDocument&&_84a.contentDocument.body){dojo.setStyle(_84a.contentDocument.body,"overflow","hidden");}var _84b=this.getMapParentTab();if(!_84b){var _84c=this.getMapParentApplication();if(_84c){this.setMapSpaceByParentApplication(_84c,_84a);}return;}var _84d=1;if(this.inDispatchMap()){_84d=0.5;}var _84e=window.getComputedStyle(_84b);var _84f=_84e.width;var _850=parseFloat(_84f.replace("px",""));var _851=(_850*_84d)+"px";dojo.setStyle(_84a,"width",_851);var _852=1;if(this.isLinearVisualControlOpen()){_852=0.5;}var _853=_84b.offsetHeight-_84a.offsetTop;dojo.setStyle(_84a,"height",(_853*_852)+"px");},getMapParentTab:function(){return dojo.byId(this.MAP_TAB_PARENT_ID);},inDispatchMap:function(){var _854=dojo.query(".dispatch");return _854.length>0;},isLinearVisualControlOpen:function(){if(!this.map||!this.map.RefLinearView||!this.map.RefLinearView.setMapVisibleCtrl){return false;}return true;},getMapParentApplication:function(){return this.mapConf.parentApplication;},setMapSpaceByParentApplication:function(_855,_856){var _857=this.getDefinedAppParent(_855);if(_857){dojo.setStyle(_856,"width",_857.width);}},getDefinedAppParent:function(_858){var _859=this.DEFINED_APP_PARENTS_WIDTH[_858];return _859;}});});},"dojo/request/script":function(){define(["module","./watch","./util","../_base/kernel","../_base/array","../_base/lang","../on","../dom","../dom-construct","../has","../_base/window"],function(_85a,_85b,util,_85c,_85d,lang,on,dom,_85e,has,win){has.add("script-readystatechange",function(_85f,_860){var _861=_860.createElement("script");return typeof _861["onreadystatechange"]!=="undefined"&&(typeof _85f["opera"]==="undefined"||_85f["opera"].toString()!=="[object Opera]");});var mid=_85a.id.replace(/[\/\.\-]/g,"_"),_862=0,_863=has("script-readystatechange")?"readystatechange":"load",_864=/complete|loaded/,_865=_85c.global[mid+"_callbacks"]={},_866=[];function _867(id,url,_868,_869){var doc=(_868||win.doc),_86a=doc.createElement("script");if(_869){on.once(_86a,"error",_869);}_86a.type="text/javascript";try{_86a.src=url;}catch(err){_869&&_869(_86a);}_86a.id=id;_86a.async=true;_86a.charset="utf-8";return doc.getElementsByTagName("head")[0].appendChild(_86a);};function _86b(id,_86c,_86d){_85e.destroy(dom.byId(id,_86c));if(_865[id]){if(_86d){_865[id]=function(){delete _865[id];};}else{delete _865[id];}}};function _86e(dfd){var _86f=dfd.response.options,_870=_86f.ioArgs?_86f.ioArgs.frameDoc:_86f.frameDoc;_866.push({id:dfd.id,frameDoc:_870});if(_86f.ioArgs){_86f.ioArgs.frameDoc=null;}_86f.frameDoc=null;};function _871(dfd,_872){if(dfd.canDelete){_873._remove(dfd.id,_872.options.frameDoc,true);}};function _874(_875){if(_866&&_866.length){_85d.forEach(_866,function(_876){_873._remove(_876.id,_876.frameDoc);_876.frameDoc=null;});_866=[];}return _875.options.jsonp?!_875.data:true;};function _877(_878){return !!this.scriptLoaded;};function _879(_87a){var _87b=_87a.options.checkString;return _87b&&eval("typeof("+_87b+") !== \"undefined\"");};function _87c(_87d,_87e){if(this.canDelete){_86e(this);}if(_87e){this.reject(_87e);}else{this.resolve(_87d);}};function _873(url,_87f,_880){var _881=util.parseArgs(url,util.deepCopy({},_87f));url=_881.url;_87f=_881.options;var dfd=util.deferred(_881,_871,_874,_87f.jsonp?null:(_87f.checkString?_879:_877),_87c);lang.mixin(dfd,{id:mid+(_862++),canDelete:false});if(_87f.jsonp){var _882=new RegExp("[?&]"+_87f.jsonp+"=");if(!_882.test(url)){url+=(~url.indexOf("?")?"&":"?")+_87f.jsonp+"="+(_87f.frameDoc?"parent.":"")+mid+"_callbacks."+dfd.id;}dfd.canDelete=true;_865[dfd.id]=function(json){_881.data=json;dfd.handleResponse(_881);};}if(util.notify){util.notify.emit("send",_881,dfd.promise.cancel);}if(!_87f.canAttach||_87f.canAttach(dfd)){var node=_873._attach(dfd.id,url,_87f.frameDoc,function(_883){if(!(_883 instanceof Error)){var _884=new Error("Error loading "+(_883.target?_883.target.src:"script"));_884.source=_883;_883=_884;}dfd.reject(_883);_873._remove(dfd.id,_87f.frameDoc,true);});if(!_87f.jsonp&&!_87f.checkString){var _885=on(node,_863,function(evt){if(evt.type==="load"||_864.test(node.readyState)){_885.remove();dfd.scriptLoaded=evt;}});}}_85b(dfd);return _880?dfd:dfd.promise;};_873.get=_873;_873._attach=_867;_873._remove=_86b;_873._callbacksProperty=mid+"_callbacks";return _873;});},"dijit/popup":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","./place","./BackgroundIframe","./Viewport","./main","dojo/touch"],function(_886,_887,_888,dom,_889,_88a,_88b,_88c,has,keys,lang,on,_88d,_88e,_88f,_890){function _891(){if(this._popupWrapper){_88a.destroy(this._popupWrapper);delete this._popupWrapper;}};var _892=_888(null,{_stack:[],_beginZIndex:1000,_idGen:1,_repositionAll:function(){if(this._firstAroundNode){var _893=this._firstAroundPosition,_894=_88b.position(this._firstAroundNode,true),dx=_894.x-_893.x,dy=_894.y-_893.y;if(dx||dy){this._firstAroundPosition=_894;for(var i=0;i<this._stack.length;i++){var _895=this._stack[i].wrapper.style;_895.top=(parseFloat(_895.top)+dy)+"px";if(_895.right=="auto"){_895.left=(parseFloat(_895.left)+dx)+"px";}else{_895.right=(parseFloat(_895.right)-dx)+"px";}}}this._aroundMoveListener=setTimeout(lang.hitch(this,"_repositionAll"),dx||dy?10:50);}},_createWrapper:function(_896){var _897=_896._popupWrapper,node=_896.domNode;if(!_897){_897=_88a.create("div",{"class":"dijitPopup",style:{display:"none"},role:"region","aria-label":_896["aria-label"]||_896.label||_896.name||_896.id},_896.ownerDocumentBody);_897.appendChild(node);var s=node.style;s.display="";s.visibility="";s.position="";s.top="0px";_896._popupWrapper=_897;_887.after(_896,"destroy",_891,true);if("ontouchend" in document){on(_897,"touchend",function(evt){if(!/^(input|button|textarea)$/i.test(evt.target.tagName)){evt.preventDefault();}});}_897.dojoClick=true;}return _897;},moveOffScreen:function(_898){var _899=this._createWrapper(_898);var ltr=_88b.isBodyLtr(_898.ownerDocument),_89a={visibility:"hidden",top:"-9999px",display:""};_89a[ltr?"left":"right"]="-9999px";_89a[ltr?"right":"left"]="auto";_88c.set(_899,_89a);return _899;},hide:function(_89b){var _89c=this._createWrapper(_89b);_88c.set(_89c,{display:"none",height:"auto",overflowY:"visible",border:""});var node=_89b.domNode;if("_originalStyle" in node){node.style.cssText=node._originalStyle;}},getTopPopup:function(){var _89d=this._stack;for(var pi=_89d.length-1;pi>0&&_89d[pi].parent===_89d[pi-1].widget;pi--){}return _89d[pi];},open:function(args){var _89e=this._stack,_89f=args.popup,node=_89f.domNode,_8a0=args.orient||["below","below-alt","above","above-alt"],ltr=args.parent?args.parent.isLeftToRight():_88b.isBodyLtr(_89f.ownerDocument),_8a1=args.around,id=(args.around&&args.around.id)?(args.around.id+"_dropdown"):("popup_"+this._idGen++);while(_89e.length&&(!args.parent||!dom.isDescendant(args.parent.domNode,_89e[_89e.length-1].widget.domNode))){this.close(_89e[_89e.length-1].widget);}var _8a2=this.moveOffScreen(_89f);if(_89f.startup&&!_89f._started){_89f.startup();}var _8a3,_8a4=_88b.position(node);if("maxHeight" in args&&args.maxHeight!=-1){_8a3=args.maxHeight||Infinity;}else{var _8a5=_88f.getEffectiveBox(this.ownerDocument),_8a6=_8a1?_88b.position(_8a1,false):{y:args.y-(args.padding||0),h:(args.padding||0)*2};_8a3=Math.floor(Math.max(_8a6.y,_8a5.h-(_8a6.y+_8a6.h)));}if(_8a4.h>_8a3){var cs=_88c.getComputedStyle(node),_8a7=cs.borderLeftWidth+" "+cs.borderLeftStyle+" "+cs.borderLeftColor;_88c.set(_8a2,{overflowY:"scroll",height:_8a3+"px",border:_8a7});node._originalStyle=node.style.cssText;node.style.border="none";}_889.set(_8a2,{id:id,style:{zIndex:this._beginZIndex+_89e.length},"class":"dijitPopup "+(_89f.baseClass||_89f["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:args.parent?args.parent.id:""});if(_89e.length==0&&_8a1){this._firstAroundNode=_8a1;this._firstAroundPosition=_88b.position(_8a1,true);this._aroundMoveListener=setTimeout(lang.hitch(this,"_repositionAll"),50);}if(has("config-bgIframe")&&!_89f.bgIframe){_89f.bgIframe=new _88e(_8a2);}var _8a8=_89f.orient?lang.hitch(_89f,"orient"):null,best=_8a1?_88d.around(_8a2,_8a1,_8a0,ltr,_8a8):_88d.at(_8a2,args,_8a0=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],args.padding,_8a8);_8a2.style.visibility="visible";node.style.visibility="visible";var _8a9=[];_8a9.push(on(_8a2,"keydown",lang.hitch(this,function(evt){if(evt.keyCode==keys.ESCAPE&&args.onCancel){evt.stopPropagation();evt.preventDefault();args.onCancel();}else{if(evt.keyCode==keys.TAB){evt.stopPropagation();evt.preventDefault();var _8aa=this.getTopPopup();if(_8aa&&_8aa.onCancel){_8aa.onCancel();}}}})));if(_89f.onCancel&&args.onCancel){_8a9.push(_89f.on("cancel",args.onCancel));}_8a9.push(_89f.on(_89f.onExecute?"execute":"change",lang.hitch(this,function(){var _8ab=this.getTopPopup();if(_8ab&&_8ab.onExecute){_8ab.onExecute();}})));_89e.push({widget:_89f,wrapper:_8a2,parent:args.parent,onExecute:args.onExecute,onCancel:args.onCancel,onClose:args.onClose,handlers:_8a9});if(_89f.onOpen){_89f.onOpen(best);}return best;},close:function(_8ac){var _8ad=this._stack;while((_8ac&&_886.some(_8ad,function(elem){return elem.widget==_8ac;}))||(!_8ac&&_8ad.length)){var top=_8ad.pop(),_8ae=top.widget,_8af=top.onClose;if(_8ae.bgIframe){_8ae.bgIframe.destroy();delete _8ae.bgIframe;}if(_8ae.onClose){_8ae.onClose();}var h;while(h=top.handlers.pop()){h.remove();}if(_8ae&&_8ae.domNode){this.hide(_8ae);}if(_8af){_8af();}}if(_8ad.length==0&&this._aroundMoveListener){clearTimeout(this._aroundMoveListener);this._firstAroundNode=this._firstAroundPosition=this._aroundMoveListener=null;}}});return (_890.popup=new _892());});},"dijit/_base/manager":function(){define(["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(_8b0,_8b1,lang,_8b2,_8b3){var _8b4={};_8b0.forEach(["byId","getUniqueId","findWidgets","_destroyAll","byNode","getEnclosingWidget"],function(name){_8b4[name]=_8b2[name];});lang.mixin(_8b4,{defaultDuration:_8b1["defaultDuration"]||200});lang.mixin(_8b3,_8b4);return _8b3;});},"dojo/dnd/Mover":function(){define(["../_base/array","../_base/declare","../_base/lang","../sniff","../_base/window","../dom","../dom-geometry","../dom-style","../Evented","../on","../touch","./common","./autoscroll"],function(_8b5,_8b6,lang,has,win,dom,_8b7,_8b8,_8b9,on,_8ba,dnd,_8bb){return _8b6("dojo.dnd.Mover",[_8b9],{constructor:function(node,e,host){this.node=dom.byId(node);this.marginBox={l:e.pageX,t:e.pageY};this.mouseButton=e.button;var h=(this.host=host),d=node.ownerDocument;function _8bc(e){e.preventDefault();e.stopPropagation();};this.events=[on(d,_8ba.move,lang.hitch(this,"onFirstMove")),on(d,_8ba.move,lang.hitch(this,"onMouseMove")),on(d,_8ba.release,lang.hitch(this,"onMouseUp")),on(d,"dragstart",_8bc),on(d.body,"selectstart",_8bc)];_8bb.autoScrollStart(d);if(h&&h.onMoveStart){h.onMoveStart(this);}},onMouseMove:function(e){_8bb.autoScroll(e);var m=this.marginBox;this.host.onMove(this,{l:m.l+e.pageX,t:m.t+e.pageY},e);e.preventDefault();e.stopPropagation();},onMouseUp:function(e){if(has("webkit")&&has("mac")&&this.mouseButton==2?e.button==0:this.mouseButton==e.button){this.destroy();}e.preventDefault();e.stopPropagation();},onFirstMove:function(e){var s=this.node.style,l,t,h=this.host;switch(s.position){case "relative":case "absolute":l=Math.round(parseFloat(s.left))||0;t=Math.round(parseFloat(s.top))||0;break;default:s.position="absolute";var m=_8b7.getMarginBox(this.node);var b=win.doc.body;var bs=_8b8.getComputedStyle(b);var bm=_8b7.getMarginBox(b,bs);var bc=_8b7.getContentBox(b,bs);l=m.l-(bc.l-bm.l);t=m.t-(bc.t-bm.t);break;}this.marginBox.l=l-this.marginBox.l;this.marginBox.t=t-this.marginBox.t;if(h&&h.onFirstMove){h.onFirstMove(this,e);}this.events.shift().remove();},destroy:function(){_8b5.forEach(this.events,function(_8bd){_8bd.remove();});var h=this.host;if(h&&h.onMoveStop){h.onMoveStop(this);}this.events=this.node=this.host=null;}});});},"dojo/request/default":function(){define(["exports","require","../has"],function(_8be,_8bf,has){var _8c0=has("config-requestProvider"),_8c1;if(1||has("host-webworker")){_8c1="./xhr";}else{if(0){_8c1="./node";}}if(!_8c0){_8c0=_8c1;}_8be.getPlatformDefaultId=function(){return _8c1;};_8be.load=function(id,_8c2,_8c3,_8c4){_8bf([id=="platform"?_8c1:_8c0],function(_8c5){_8c3(_8c5);});};});},"ibm/tivoli/fwm/mxmap/toolbar/ext/QueryWeatherAlertsTool":function(){define(["dijit","dojo","dojox","dojo/require!ibm/tivoli/fwm/mxmap/toolbar/ext/QueryWeatherAlerts"],function(_8c6,dojo,_8c7){dojo.provide("ibm.tivoli.fwm.mxmap.toolbar.ext.QueryWeatherAlertsTool");dojo.require("ibm.tivoli.fwm.mxmap.toolbar.ext.QueryWeatherAlerts");dojo.declare("ibm.tivoli.fwm.mxmap.toolbar.ext.QueryWeatherAlertsTool",ibm.tivoli.fwm.mxmap.toolbar.ext.QueryWeatherAlerts,{_sendEventToLayer:function(_8c8,_8c9,_8ca){var disp=this.map.getDispatcher();if(disp){for(var i in _8c9){_8c9[i].lbsdata.location_accuracy=_8c9[i].lbsdata.location_accuracy*1000;}}dojo.publish("addRecordsToLayer_"+this.map.getId(),[_8c8,_8c9,true,null,null,_8ca]);}});});},"dijit/BackgroundIframe":function(){define(["require","./main","dojo/_base/config","dojo/dom-construct","dojo/dom-style","dojo/_base/lang","dojo/on","dojo/sniff"],function(_8cb,_8cc,_8cd,_8ce,_8cf,lang,on,has){has.add("config-bgIframe",(has("ie")||has("trident"))&&!/IEMobile\/10\.0/.test(navigator.userAgent));var _8d0=new function(){var _8d1=[];this.pop=function(){var _8d2;if(_8d1.length){_8d2=_8d1.pop();_8d2.style.display="";}else{if(has("ie")<9){var burl=_8cd["dojoBlankHtmlUrl"]||_8cb.toUrl("dojo/resources/blank.html")||"javascript:\"\"";var html="<iframe src='"+burl+"' role='presentation'"+" style='position: absolute; left: 0px; top: 0px;"+"z-index: -1; filter:Alpha(Opacity=\"0\");'>";_8d2=document.createElement(html);}else{_8d2=_8ce.create("iframe");_8d2.src="javascript:\"\"";_8d2.className="dijitBackgroundIframe";_8d2.setAttribute("role","presentation");_8cf.set(_8d2,"opacity",0.1);}_8d2.tabIndex=-1;}return _8d2;};this.push=function(_8d3){_8d3.style.display="none";_8d1.push(_8d3);};}();_8cc.BackgroundIframe=function(node){if(!node.id){throw new Error("no id");}if(has("config-bgIframe")){var _8d4=(this.iframe=_8d0.pop());node.appendChild(_8d4);if(has("ie")<7||has("quirks")){this.resize(node);this._conn=on(node,"resize",lang.hitch(this,"resize",node));}else{_8cf.set(_8d4,{width:"100%",height:"100%"});}}};lang.extend(_8cc.BackgroundIframe,{resize:function(node){if(this.iframe){_8cf.set(this.iframe,{width:node.offsetWidth+"px",height:node.offsetHeight+"px"});}},destroy:function(){if(this._conn){this._conn.remove();this._conn=null;}if(this.iframe){this.iframe.parentNode.removeChild(this.iframe);_8d0.push(this.iframe);delete this.iframe;}}});return _8cc.BackgroundIframe;});},"dojo/json5/unicode":function(){define({Space_Separator:/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,ID_Start:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,ID_Continue:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/});},"ibm/tivoli/fwm/mxmap/routing/Router":function(){define(["dijit","dojo","dojox","dojo/require!ibm/tivoli/fwm/mxmap/_Base,ibm/tivoli/fwm/mxmap/geolocation/MyCurrentLocation,ibm/tivoli/fwm/mxmap/MXRecord"],function(_8d5,dojo,_8d6){dojo.provide("ibm.tivoli.fwm.mxmap.routing.Router");dojo.require("ibm.tivoli.fwm.mxmap._Base");dojo.require("ibm.tivoli.fwm.mxmap.geolocation.MyCurrentLocation");dojo.require("ibm.tivoli.fwm.mxmap.MXRecord");ibm.tivoli.fwm.mxmap.routing.CalculatedStops={CONF_START_STOP:"ConfiguredStartLocation",CONF_END_STOP:"ConfiguredEndLocation",USER_LOCATION_STOP:"UserGeoLocation"};ibm.tivoli.fwm.mxmap.routing.RoutingErrorCodes={ZERO_RESULTS:"ZERO_RESULTS",INVALID_REQUEST:"INVALID_REQUEST",REQUEST_DENIED:"REQUEST_DENIED",OVER_LIMIT:"OVER_LIMIT",MIN_STOPS_REQ:"MIN_STOPS_REQ",TIMEOUT:"TIMEOUT",UNKNOWN:"UNKNOWN"};ibm.tivoli.fwm.mxmap.routing.DistanceUnit={KM:0,MILES:1,getLabel:function(_8d7){if(_8d7==this.KM){return ibm.tivoli.fwm.i18n.getMaxMsg("map","distancekm");}else{return ibm.tivoli.fwm.i18n.getMaxMsg("map","distancemi");}},getBy1000Label:function(_8d8){if(_8d8==this.KM){return ibm.tivoli.fwm.i18n.getMaxMsg("map","distancemeters");}else{return ibm.tivoli.fwm.i18n.getMaxMsg("map","distanceft");}},formatDistance:function(_8d9,unit){var val=0;var _8da="";var _8db="";if(unit==this.MILES){_8d9=_8d9/1.6;}if(_8d9<=0.1){val=(_8d9*10000);_8da=this.getBy1000Label(unit);}else{val=_8d9*10;_8da=this.getLabel(unit);}val=Math.round(val);val=val/10;_8db=_8da.replace("{0}",val.toString());return _8db;},formatTime:function(time){var _8dc="";var _8dd="";var hr=Math.floor(time/60),min=Math.round(time%60);if(hr<1&&min<1){return _8dd;}else{if(hr<1){_8dc=ibm.tivoli.fwm.i18n.getMaxMsg("map","timemin");_8dd=_8dc.replace("{0}",min.toString());}else{_8dc=ibm.tivoli.fwm.i18n.getMaxMsg("map","timehmin");_8dd=_8dc.replace("{0}",hr.toString());_8dd=_8dd.replace("{1}",min.toString());}}return _8dd;}};dojo.declare("ibm.tivoli.fwm.mxmap.routing.Router",ibm.tivoli.fwm.mxmap._Base,{routecolor:null,endLocation:null,startLocation:null,optimizeroute:false,myCurrentLocationInstance:null,constructor:function(_8de){dojo.mixin(this,_8de);this.myCurrentLocationInstance=ibm.tivoli.fwm.mxmap.geolocation.MyCurrentLocation.getMyCurrentLocationInstance();},init:function(){this._init();},_init:function(){},getUserLocation:function(_8df,_8e0){if(this.myCurrentLocationInstance){var _8e1=function(){if(this.map){this.map.failedToGetLocation();}_8e0();};this.myCurrentLocationInstance.getUserLocation(_8df,dojo.hitch(this,_8e1));}},_getUserLocationStop:function(){var _8e2=null;if(this.myCurrentLocationInstance){var _8e3=this.myCurrentLocationInstance.getPosition();_8e2={name:"currentLocation",lat:_8e3.coords.latitude,lng:_8e3.coords.longitude};}return _8e2;},isLocationStatusUnassigned:function(){var _8e4=false;if(this.myCurrentLocationInstance){_8e4=this.myCurrentLocationInstance.isStatusUnassigned();}return _8e4;},isLocationStatusHasLocation:function(){var _8e5=false;if(this.myCurrentLocationInstance){_8e5=this.myCurrentLocationInstance.isStatusHasLocation();}return _8e5;},_checkForCalculatedAndLBSStops:function(_8e6,_8e7){if(_8e6&&_8e6.length>0){if(_8e6[0].calculatedStop==true){_8e6=_8e6.slice(1,_8e6.length);}if(dojo.config.fwm.debug==true){}var _8e8=0;if(_8e6.length==0){return _8e6;}if(_8e6.length>0){_8e8=_8e6.length-1;}if(_8e6[_8e6.length-1].calculatedStop==true){_8e6=_8e6.slice(0,_8e6.length-1);}}var i=0;var _8e9=[];while(i<_8e6.length){var stop=_8e6[i];var _8ea=new ibm.tivoli.fwm.mxmap.MXRecord({mboInfo:stop,map:this.map});if(_8ea.useLBSData()){var _8eb=_8ea.getLBSPoint();_8eb.sr=this.map.WGS84WKID;_8eb.idx=i;_8e9.push(_8eb);_8ea.setPointInCurrentSR(_8ea.getLBSPoint());i++;}else{if(_8ea.hasAnyGISCoordinates()==false){console.warn("Stop",stop,"Has no GIS info",_8e6.length);_8e6=_8e6.slice(0,i).concat(_8e6.slice(i+1));console.warn("Stop",_8e6.length);}else{i++;}}}if(_8e9.length>0){var _8ec=function(_8ed){for(i=0;i<_8e9.length;i++){_8e6[_8e9[i].idx].pointInCurrentSR=_8ed[i];}_8e7(_8e6);};var _8ee=function(err){console.error("Error converting point to current SR",err);};this.map.getAllPointsFromWGS84(_8e9,dojo.hitch(this,_8ec));}else{_8e7(_8e6);}return _8e6;},drawRoute:function(_8ef,_8f0,_8f1,_8f2){this._checkForCalculatedAndLBSStops(_8ef,dojo.hitch(this,function(_8f3){if(this.isStartWithCurrentLocation(_8f2)&&this.isLocationStatusUnassigned()){var fct=function(){this.drawRoute(_8f3,_8f0,_8f1,_8f2);};var _8f4=function(){this.drawRoute(_8f3,_8f0,_8f1,_8f2);};this.getUserLocation(dojo.hitch(this,fct),dojo.hitch(this,_8f4));}else{var _8f5=[];if(this.isStartWithCurrentLocation(_8f2)&&this.isLocationStatusHasLocation()){var ul=this._getUserLocationStop(_8f2);ul.calculatedStop=true;ul.calculatedStopType=ibm.tivoli.fwm.mxmap.routing.CalculatedStops.USER_LOCATION_STOP;_8f5.push(ul);}else{var _8f6=this.startLocation;if(_8f2&&_8f2.startLocation!=null){_8f6=_8f2.startLocation;}if(_8f6&&_8f6.hasOwnProperty("lat")&&_8f6.lat!=null){_8f6.calculatedStop=true;_8f6.calculatedStopType=ibm.tivoli.fwm.mxmap.routing.CalculatedStops.CONF_START_STOP;_8f5.push(_8f6);}}_8f5=_8f5.concat(_8f3);var _8f7=this.endLocation;if(_8f2&&_8f2.endLocation!=null){_8f7=_8f2.endLocation;}if(_8f7&&_8f7.hasOwnProperty("lat")&&_8f7.lat!=null){_8f7.calculatedStop=true;_8f7.calculatedStopType=ibm.tivoli.fwm.mxmap.routing.CalculatedStops.CONF_END_STOP;_8f5.push(_8f7);}if(_8f5.length<2){console.warn("at least 2 stops are needed");_8f1(ibm.tivoli.fwm.mxmap.routing.RoutingErrorCodes.MIN_STOPS_REQ,"at least 2 stops are needed");return;}this.showRoute(_8f5,_8f0,_8f1,true,_8f2);}}));},showRoute:function(_8f8,cb,_8f9,_8fa){throw "No showRoute implementation";},isStartWithCurrentLocation:function(_8fb){if(_8fb&&_8fb.startithcurrentlocation){return _8fb.startwithcurrentlocation=="true";}else{return this.startwithcurrentlocation=="true";}},isOptimizeRoute:function(){return this.optimizeroute=="true";},destroyRecursive:function(){this.inherited(arguments);},getCurrentDistanceUnit:function(){if(this.customConf){return this.customConf.distanceUnit;}else{return ibm.tivoli.fwm.mxmap.routing.DistanceUnit.KM;}},getAvoidHighways:function(){if(this.customConf){return this.customConf.avoidHighway;}return false;},getAvoidTolls:function(){if(this.customConf){return this.customConf.avoidToll;}return false;},timers:null,_startTimer:function(){try{if(dojo.config.fwm.debug==true){if(this.timers==null){this.timers=[];}this.timers.push(new Date().getTime());return this.timers.length-1;}return -1;}catch(e){}},_stopTimer:function(h,_8fc){try{if(dojo.config.fwm.debug==true){var endt=new Date().getTime();if(h==null){this.timers=null;}else{}}}catch(e){}}});});},"ibm/tivoli/fwm/mxmap/impl/polyline/GmapsPolyline":function(){define(["dijit","dojo","dojox","dojo/require!ibm/tivoli/fwm/mxmap/_Polyline"],function(_8fd,dojo,_8fe){dojo.require("ibm.tivoli.fwm.mxmap._Polyline");dojo.provide("ibm.tivoli.fwm.mxmap.impl.polyline.GmapsPolyline");dojo.declare("ibm.tivoli.fwm.mxmap.impl.polyline.GmapsPolyline",ibm.tivoli.fwm.mxmap._Polyline,{toProprietary:function(){var _8ff=[];for(var i=0;i<this.points.length;i++){_8ff.push(this.points[i].toProprietary("googlev3"));}var _900=null;if(this.closed&&this.closed==true){var _901={paths:[_8ff],fillColor:this.fillColor||"#000000",fillOpacy:this.opacity||1,strokeColor:this.color||"#000000",strokeOpacity:this.borderOpacity||1,strokeWeight:this.width||3,clickable:false,editable:false};_900=new google.maps.Polygon(_901);}else{var _902={path:_8ff,strokeColor:this.color||"#000000",strokeOpacity:this.opacity||1,strokeWeight:this.width||3,clickable:false};_900=new google.maps.Polyline(_902);}return _900;}});});},"dijit/form/Button":function(){define(["require","dojo/_base/declare","dojo/dom-class","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/ready","./_FormWidget","./_ButtonMixin","dojo/text!./templates/Button.html","../a11yclick"],function(_903,_904,_905,has,_906,lang,_907,_908,_909,_90a){if(has("dijit-legacy-requires")){_907(0,function(){var _90b=["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"];_903(_90b);});}var _90c=_904("dijit.form.Button"+(has("dojo-bidi")?"_NoBidi":""),[_908,_909],{showLabel:true,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:_90a,_setValueAttr:"valueNode",_setNameAttr:function(name){if(this.valueNode){this.valueNode.setAttribute("name",name);}},postCreate:function(){this.inherited(arguments);this._setLabelFromContainer();},_setLabelFromContainer:function(){if(this.containerNode&&!this.label){this.label=lang.trim(this.containerNode.innerHTML);this.onLabelSet();}},_setShowLabelAttr:function(val){if(this.containerNode){_905.toggle(this.containerNode,"dijitDisplayNone",!val);}this._set("showLabel",val);},setLabel:function(_90d){_906.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",_90d);},onLabelSet:function(){this.inherited(arguments);if(!this.showLabel&&!("title" in this.params)){this.titleNode.title=lang.trim(this.containerNode.innerText||this.containerNode.textContent||"");}}});if(has("dojo-bidi")){_90c=_904("dijit.form.Button",_90c,{onLabelSet:function(){this.inherited(arguments);if(this.titleNode.title){this.applyTextDir(this.titleNode,this.titleNode.title);}},_setTextDirAttr:function(_90e){if(this._created&&this.textDir!=_90e){this._set("textDir",_90e);this._setLabelAttr(this.label);}}});}return _90c;});},"dijit/_WidgetBase":function(){define(["require","dojo/_base/array","dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/ready","dojo/Stateful","dojo/topic","dojo/_base/window","./Destroyable","dojo/has!dojo-bidi?./_BidiMixin","./registry"],function(_90f,_910,_911,_912,_913,_914,dom,_915,_916,_917,_918,_919,has,_91a,lang,on,_91b,_91c,_91d,win,_91e,_91f,_920){has.add("dijit-legacy-requires",!_91a.isAsync);has.add("dojo-bidi",false);if(has("dijit-legacy-requires")){_91b(0,function(){var _921=["dijit/_base/manager"];_90f(_921);});}var _922={};function _923(obj){var ret={};for(var attr in obj){ret[attr.toLowerCase()]=true;}return ret;};function _924(attr){return function(val){_915[val?"set":"remove"](this.domNode,attr,val);this._set(attr,val);};};function _925(a,b){return a===b||(a!==a&&b!==b);};var _926=_914("dijit._WidgetBase",[_91c,_91e],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:_924("lang"),dir:"",_setDirAttr:_924("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(val){this._set("ownerDocument",val);},attributeMap:{},_blankGif:_912.blankGif||_90f.toUrl("dojo/resources/blank.gif"),textDir:"",_introspect:function(){var ctor=this.constructor;if(!ctor._setterAttrs){var _927=ctor.prototype,_928=ctor._setterAttrs=[],_929=(ctor._onMap={});for(var name in _927.attributeMap){_928.push(name);}for(name in _927){if(/^on/.test(name)){_929[name.substring(2).toLowerCase()]=name;}if(/^_set[A-Z](.*)Attr$/.test(name)){name=name.charAt(4).toLowerCase()+name.substr(5,name.length-9);if(!_927.attributeMap||!(name in _927.attributeMap)){_928.push(name);}}}}},postscript:function(_92a,_92b){this.create(_92a,_92b);},create:function(_92c,_92d){this._introspect();this.srcNodeRef=dom.byId(_92d);this._connects=[];this._supportingWidgets=[];if(this.srcNodeRef&&this.srcNodeRef.id&&(typeof this.srcNodeRef.id=="string")){this.id=this.srcNodeRef.id;}if(_92c){this.params=_92c;lang.mixin(this,_92c);}this.postMixInProperties();if(!this.id){this.id=_920.getUniqueId(this.declaredClass.replace(/\./g,"_"));if(this.params){delete this.params.id;}}this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=win.body(this.ownerDocument);_920.add(this);this.buildRendering();var _92e;if(this.domNode){this._applyAttributes();var _92f=this.srcNodeRef;if(_92f&&_92f.parentNode&&this.domNode!==_92f){_92f.parentNode.replaceChild(this.domNode,_92f);_92e=true;}this.domNode.setAttribute("widgetId",this.id);}this.postCreate();if(_92e){delete this.srcNodeRef;}this._created=true;},_applyAttributes:function(){var _930={};for(var key in this.params||{}){_930[key]=this._get(key);}_910.forEach(this.constructor._setterAttrs,function(key){if(!(key in _930)){var val=this._get(key);if(val){this.set(key,val);}}},this);for(key in _930){this.set(key,_930[key]);}},postMixInProperties:function(){},buildRendering:function(){if(!this.domNode){this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div");}if(this.baseClass){var _931=this.baseClass.split(" ");if(!this.isLeftToRight()){_931=_931.concat(_910.map(_931,function(name){return name+"Rtl";}));}_916.add(this.domNode,_931);}},postCreate:function(){},startup:function(){if(this._started){return;}this._started=true;_910.forEach(this.getChildren(),function(obj){if(!obj._started&&!obj._destroyed&&lang.isFunction(obj.startup)){obj.startup();obj._started=true;}});},destroyRecursive:function(_932){this._beingDestroyed=true;this.destroyDescendants(_932);this.destroy(_932);},destroy:function(_933){this._beingDestroyed=true;this.uninitialize();function _934(w){if(w.destroyRecursive){w.destroyRecursive(_933);}else{if(w.destroy){w.destroy(_933);}}};_910.forEach(this._connects,lang.hitch(this,"disconnect"));_910.forEach(this._supportingWidgets,_934);if(this.domNode){_910.forEach(_920.findWidgets(this.domNode,this.containerNode),_934);}this.destroyRendering(_933);_920.remove(this.id);this._destroyed=true;},destroyRendering:function(_935){if(this.bgIframe){this.bgIframe.destroy(_935);delete this.bgIframe;}if(this.domNode){if(_935){_915.remove(this.domNode,"widgetId");}else{_917.destroy(this.domNode);}delete this.domNode;}if(this.srcNodeRef){if(!_935){_917.destroy(this.srcNodeRef);}delete this.srcNodeRef;}},destroyDescendants:function(_936){_910.forEach(this.getChildren(),function(_937){if(_937.destroyRecursive){_937.destroyRecursive(_936);}});},uninitialize:function(){return false;},_setStyleAttr:function(_938){var _939=this.domNode;if(lang.isObject(_938)){_919.set(_939,_938);}else{if(_939.style.cssText){_939.style.cssText+="; "+_938;}else{_939.style.cssText=_938;}}this._set("style",_938);},_attrToDom:function(attr,_93a,_93b){_93b=arguments.length>=3?_93b:this.attributeMap[attr];_910.forEach(lang.isArray(_93b)?_93b:[_93b],function(_93c){var _93d=this[_93c.node||_93c||"domNode"];var type=_93c.type||"attribute";switch(type){case "attribute":if(lang.isFunction(_93a)){_93a=lang.hitch(this,_93a);}var _93e=_93c.attribute?_93c.attribute:(/^on[A-Z][a-zA-Z]*$/.test(attr)?attr.toLowerCase():attr);if(_93d.tagName){_915.set(_93d,_93e,_93a);}else{_93d.set(_93e,_93a);}break;case "innerText":_93d.innerHTML="";_93d.appendChild(this.ownerDocument.createTextNode(_93a));break;case "textContent":_93d.textContent=_93a;break;case "innerHTML":_93d.innerHTML=_93a;break;case "class":_916.replace(_93d,_93a,this[attr]);break;case "toggleClass":_916.toggle(_93d,_93c.className||attr,_93a);break;}},this);},get:function(name){var _93f=this._getAttrNames(name);return this[_93f.g]?this[_93f.g]():this._get(name);},set:function(name,_940){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _941=this._getAttrNames(name),_942=this[_941.s];if(lang.isFunction(_942)){var _943=_942.apply(this,Array.prototype.slice.call(arguments,1));}else{var _944=this.focusNode&&!lang.isFunction(this.focusNode)?"focusNode":"domNode",tag=this[_944]&&this[_944].tagName,_945=tag&&(_922[tag]||(_922[tag]=_923(this[_944]))),map=name in this.attributeMap?this.attributeMap[name]:_941.s in this?this[_941.s]:((_945&&_941.l in _945&&typeof _940!="function")||/^aria-|^data-|^role$/.test(name))?_944:null;if(map!=null){this._attrToDom(name,_940,map);}this._set(name,_940);}return _943||this;},_attrPairNames:{},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}var uc=name.replace(/^[a-z]|-[a-zA-Z]/g,function(c){return c.charAt(c.length-1).toUpperCase();});return (apn[name]={n:name+"Node",s:"_set"+uc+"Attr",g:"_get"+uc+"Attr",l:uc.toLowerCase()});},_set:function(name,_946){var _947=this[name];this[name]=_946;if(this._created&&!_925(_947,_946)){if(this._watchCallbacks){this._watchCallbacks(name,_947,_946);}this.emit("attrmodified-"+name,{detail:{prevValue:_947,newValue:_946}});}},_get:function(name){return this[name];},emit:function(type,_948,_949){_948=_948||{};if(_948.bubbles===undefined){_948.bubbles=true;}if(_948.cancelable===undefined){_948.cancelable=true;}if(!_948.detail){_948.detail={};}_948.detail.widget=this;var ret,_94a=this["on"+type];if(_94a){ret=_94a.apply(this,_949?_949:[_948]);}if(this._started&&!this._beingDestroyed){on.emit(this.domNode,type.toLowerCase(),_948);}return ret;},on:function(type,func){var _94b=this._onMap(type);if(_94b){return _911.after(this,_94b,func,true);}return this.own(on(this.domNode,type,func))[0];},_onMap:function(type){var ctor=this.constructor,map=ctor._onMap;if(!map){map=(ctor._onMap={});for(var attr in ctor.prototype){if(/^on/.test(attr)){map[attr.replace(/^on/,"").toLowerCase()]=attr;}}}return map[typeof type=="string"&&type.toLowerCase()];},toString:function(){return "[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]";},getChildren:function(){return this.containerNode?_920.findWidgets(this.containerNode):[];},getParent:function(){return _920.getEnclosingWidget(this.domNode.parentNode);},connect:function(obj,_94c,_94d){return this.own(_913.connect(obj,_94c,this,_94d))[0];},disconnect:function(_94e){_94e.remove();},subscribe:function(t,_94f){return this.own(_91d.subscribe(t,lang.hitch(this,_94f)))[0];},unsubscribe:function(_950){_950.remove();},isLeftToRight:function(){return this.dir?(this.dir.toLowerCase()=="ltr"):_918.isBodyLtr(this.ownerDocument);},isFocusable:function(){return this.focus&&(_919.get(this.domNode,"display")!="none");},placeAt:function(_951,_952){var _953=!_951.tagName&&_920.byId(_951);if(_953&&_953.addChild&&(!_952||typeof _952==="number")){_953.addChild(this,_952);}else{var ref=_953&&("domNode" in _953)?(_953.containerNode&&!/after|before|replace/.test(_952||"")?_953.containerNode:_953.domNode):dom.byId(_951,this.ownerDocument);_917.place(this.domNode,ref,_952);if(!this._started&&(this.getParent()||{})._started){this.startup();}}return this;},defer:function(fcn,_954){var _955=setTimeout(lang.hitch(this,function(){if(!_955){return;}_955=null;if(!this._destroyed){lang.hitch(this,fcn)();}}),_954||0);return {remove:function(){if(_955){clearTimeout(_955);_955=null;}return null;}};}});if(has("dojo-bidi")){_926.extend(_91f);}return _926;});},"ibm/tivoli/fwm/mxmap/MapZIndexHandler":function(){define(["dojo/_base/declare","ibm/tivoli/fwm/mxmap/_Base","dijit/Dialog","dijit/popup",],function(_956,_957,_958,_959){return _956([_957],{_map:null,_dojo:null,_mapLoadedListener:null,_infoWindowFocusedListener:null,_dialogOverrideListener:null,_dialogChangeZIndexListener:null,_dialogShowListener:null,_toolHighlightedListener:null,_popupShowListener:null,_activeToolName:null,_highestMapZIndex:0,_fullScreenModeChangeListener:null,Z_INDEX_UPDATED_CLASS:"z-index-updated",constructor:function(_95a){this._map=_95a.map;this._dojo=this.selectDojoVersion();this._mapLoadedListener=this._dojo.subscribe("mxmap.mapLoaded",this._dojo.hitch(this,this.onMapLoaded));this._dialogOverrideListener=this._dojo.subscribe("mapZIndexHandler.onDialogOverride",this._dojo.hitch(this,this.updateDialogZIndex));this._dialogChangeZIndexListener=this._dojo.subscribe("mapZIndexHandler.onDialogZIndexChange",this._dojo.hitch(this,this.updateDialogZIndex));this._toolHighlightedListener=this._dojo.subscribe("_ToolSpatialTemplate.enableHighlightButton",this._dojo.hitch(this,this.moveHighlightedToolDialogToTop));this._infoWindowFocusedListener=this._dojo.subscribe("infoWindowFocused",this._dojo.hitch(this,this.moveInfoWindowToTop));this._dialogShowListener=this._dojo.connect(_958._DialogLevelManager,"show",this._dojo.hitch(this,this.updateDialogZIndex));this._popupShowListener=this._dojo.connect(_959,"open",this._dojo.hitch(this,this.movePopupToTop));},postCreate:function(){this._fullScreenModeChangeListener=this._dojo.subscribe("mapFullScreenModeChanged_"+this._map.getId(),this._dojo.hitch(this,this.onMapFullScreenModeChanged));},updateRelatedDropDownZIndex:function(_95b,_95c){var _95d=this._dojo.query(".dijitComboBoxMenuPopup"+"."+this.Z_INDEX_UPDATED_CLASS);_95d.forEach(function(_95e){var _95f=_95e.getAttribute("dijitpopupparent");var _960=this._dojo.byId("widget_"+_95f);var _961=_960.closest(".dijitDialog");if(_961===_95b){this.updateAndMarkHTMLElement(_95e,_95c);}},this);},updateDialogZIndex:function(_962){if(_962){this.updateDomNodeZIndex(_962.domNode);}},updateDomNodeZIndex:function(_963){if(_963){var _964=this.configureMapElements();if(_964&&_963){var _965=this._dojo.query(".dijitDialogUnderlayWrapper")[0];this.updateAndMarkHTMLElement(_965,_964+1);this.updateAndMarkHTMLElement(_963,_964+2);this.updateRelatedDropDownZIndex(_963,_964+3);}}},onMapLoaded:function(map){if(map){this._dojo.query("body").attr("data-mxmaploaded","true");this.configureMapElements();}},onMapFullScreenModeChanged:function(){this.configureMapElements();},configureMapElements:function(_966){var _967=this.getMapElements();var _968=_967.openMap;var _969=_967.appContent;var _96a=_967.mapManagerDialog;var _96b=_967.mapToolsDialogs;var _96c=this._highestMapZIndex;if(!_966){this._highestMapZIndex=0;if(_969){var _96d=this._dojo.query("*",_969);this._highestMapZIndex=this.getHighestIndex(_96d);}if(_968){var _96e=this._dojo.query("*",_968);this._highestMapZIndex=Math.max(this._highestMapZIndex,this.getHighestIndex(_96e));}if(_96a){var _96f=this._dojo.query("*",_96a);this._highestMapZIndex=Math.max(this._highestMapZIndex,this.getHighestIndex(_96f));}_96c=this._highestMapZIndex;}_96c=this.placeDialogsOverMapElements(_96b,_96c);return _96c;},getHighestIndex:function(_970){var _971=0;_970.forEach(function(node){var _972=this._dojo.query(node).style("z-index")[0];var _973=this._dojo.query(node).style("display")[0];if(parseInt(_972)>_971&&_973!=="none"){_971=parseInt(_972);}},this);return _971;},moveInfoWindowToTop:function(_974){if(!_974||this._activeToolName==="InfoWindow"){return;}this._activeToolName="InfoWindow";var _975=this.configureMapElements();this.updateAndMarkHTMLElement(_974,_975+1);},moveHighlightedToolDialogToTop:function(_976){if(this._activeToolName===_976){return;}this._activeToolName=_976;var _977=this.getMapToolDialog(_976);if(_977){this.updateDomNodeZIndex(_977);}},movePopupToTop:function(_978){if(_978){var _979=_978.popup._popupWrapper;var _97a=this.configureMapElements();this.updateAndMarkHTMLElement(_979,_97a+1);}},markHTMLElement:function(_97b){this._dojo.addClass(_97b,this.Z_INDEX_UPDATED_CLASS,true);},unmarkHTMLElement:function(_97c){this._dojo.removeClass(_97c,this.Z_INDEX_UPDATED_CLASS);},getMapElements:function(){var _97d=this._dojo.byId("plussselectmaplocation-dialog_inner");var _97e=this._dojo.byId("pluss_open_map-dialog_inner");var _97f=this._dojo.byId("SystemNavAppContent-sc_div");var _980=this.getZIndexUpdatedElements();var _981=this._dojo.query(".esriPopup.esriPopupVisible")[0];if(_981){_980.push(_981);}return {appContent:_97f,mapManagerDialog:_97d,mapToolsDialogs:_980,openMap:_97e,};},getZIndexUpdatedElements:function(){return this._dojo.query("."+this.Z_INDEX_UPDATED_CLASS);},getMapToolDialog:function(_982){return this._dojo.byId("dialog"+_982+"Dialog");},updateAndMarkHTMLElement:function(_983,_984){this._dojo.style(_983,"z-index",_984);this.markHTMLElement(_983);return _984;},getHTMLElementZIndex:function(_985){if(!_985){return 0;}var _986=parseInt(this._dojo.style(_985,"z-index"));if(isNaN(_986)){return 0;}return _986;},placeDialogsOverMapElements:function(_987,_988){if(!_987.length){return _988;}var _989=_988+1;_987.sort(this._dojo.hitch(this,this.sortByZIndex));var _98a=this._dojo.map(_987,this._dojo.hitch(this,this.getHTMLElementZIndex));_987.forEach(this._dojo.hitch(this,function(_98b,_98c){var _98d=_98a[_98c-1];var _98e=_98d===this.getHTMLElementZIndex(_98b);if(_98e){this.updateAndMarkHTMLElement(_98b,_98d);}else{this.updateAndMarkHTMLElement(_98b,_989+_98c);}}));return this.getHTMLElementZIndex(_987[_987.length-1]);},sortByZIndex:function(_98f,_990){var _991=this.getHTMLElementZIndex(_98f);var _992=this.getHTMLElementZIndex(_990);return _991-_992;},resetZIndexUpdatedElements:function(){var _993=this.getZIndexUpdatedElements();_993.forEach(this._dojo.hitch(this,function(_994){this.unmarkHTMLElement(_994);}));},destroy:function(){this._map=null;this._dojo.unsubscribe(this._mapLoadedListener);this._dojo.unsubscribe(this._dialogOverrideListener);this._dojo.unsubscribe(this._dialogChangeZIndexListener);this._dojo.unsubscribe(this._toolHighlightedListener);this._dojo.unsubscribe(this._infoWindowFocusedListener);this._dojo.unsubscribe(this._fullScreenModeChangeListener);this._dojo.disconnect(this._dialogShowListener);this._dojo.disconnect(this._popupShowListener);this._dojo.query("body").removeAttr("data-mxmaploaded");this.resetZIndexUpdatedElements();this._activeToolName=null;this._highestMapZIndex=0;},});});},"ibm/tivoli/fwm/mxmap/factory":function(){define(["dojo/main","dijit/main","dojox/main","dojo/io/script","ibm/tivoli/fwm/mxmap/MapGraphite"],function(dojo,_995,_996,_997,_998){if(!ibm.tivoli.fwm.mxmap){ibm.tivoli.fwm.mxmap={};}if(!ibm.tivoli.fwm.mxmap.stack){ibm.tivoli.fwm.mxmap.stack={};}ibm.tivoli.fwm.mxmap.factory={events:{mapImplLoaded:"mxmap.mapImplLoaded"},dojoToDomId:null,esriVersion:"3.42",options:null,initialized:false,readyToCreateMap:false,tries:10,init:function(){this.initialized=true;this.registry={};},createMap:function(_999){if(_999.mapConf.error&&_999.mapConf.error==true){if(_999.mapConf.showErrorObject&&_999.mapConf.showErrorObject==true){var _99a={msgKey:_999.mapConf.key,msgGroup:_999.mapConf.group,params:_999.mapConf.params};sendEvent("showErrorsParamObject",_999.compId,JSON.stringify(_99a));}else{addCommInput("msgKey",_999.mapConf.key);addCommInput("msgGroup",_999.mapConf.group);sendEvent("showErrors",_999.compId,_999.mapConf.key);}return;}if(this.initialized!=true){this.init();}if(this.mapExists(_999.compId)){this.destroyCurrentMap(_999.compId);}var _99b=_999.mapConf.provider;var _99c="ibm/tivoli/fwm/mxmap/factories/"+_99b;this.options=_999;var me=this;if(_99b=="spatial"||_99b=="openmaps"){var _99d=this.buildMapGraphite(_999);this.registry[_999.compId]={currentMap:_99d};}else{if(!this.loaded[_99b]){ibm.tivoli.fwm.mxmap.stack[_99b]=[];ibm.tivoli.fwm.mxmap.stack[_99b].push(_999);this.loaded[_99b]=-1;require([_99c],function(_99e){_99e.init(_999);});}else{if(this.loaded[_99b]==-1){ibm.tivoli.fwm.mxmap.stack[_99b].push(_999);}else{dojo.publish(this.events.mapImplLoaded,[this.loaded[_99b],_99b]);this._createProviderMap(_999,this.loaded[_99b]);}}}},skipGraphite:function(){return window.localStorage.getItem("skipGraphiteMap");},buildMapGraphite:function(_99f){var _9a0=new _998(_99f);return _9a0;},setReadyToCreateMap:function(_9a1){this.readyToCreateMap=_9a1;},mapExists:function(_9a2){return this.registry[_9a2]&&this.registry[_9a2].currentMap;},destroyCurrentMap:function(_9a3){try{if(this.readyToCreateMapHandle){dojo.unsubscribe(this.readyToCreateMapHandle);}if(this.openMaximoDialogHandler){this.openMaximoDialogHandler.remove();this.openMaximoDialogHandler=null;}if(this.registry[_9a3]&&this.registry[_9a3].currentMap){this.registry[_9a3].currentMap.destroyRecursive();}}catch(e){}this.registry[_9a3]=null;},loaded:{},apiInitialized:function(_9a4,_9a5){this.loaded[_9a5]=_9a4;dojo.publish(this.events.mapImplLoaded,[_9a4,_9a5]);this.executeStack(_9a4,_9a5);},publishMapEvent:function(_9a6,_9a7,_9a8){if(!this.skipGraphite()){window.mapBus.onServerUpdates(_9a7,_9a8);return;}if(this.registry&&this.registry[_9a6]){var _9a9=this.registry[_9a6].currentMap;if(_9a9.providerName==="maximospatial"){_9a9.publishMapEvent(_9a7,_9a8);}else{dojo.publish(_9a7,_9a8);}}},executeStack:function(_9aa,_9ab){if(ibm.tivoli.fwm.mxmap.stack[_9ab]){var _9ac=ibm.tivoli.fwm.mxmap.stack[_9ab];for(var id=0;id<_9ac.length;id++){var _9ad=_9ac[id];this._createProviderMap(_9ad,_9aa);}}},_createProviderMap:function(_9ae,_9af){var _9b0=null;eval("this._instance = new "+_9af+"();");_9b0=this._instance;_9b0.createMap(_9ae);this.registry[_9ae.compId]={currentMap:_9b0};},};return ibm.tivoli.fwm.mxmap.factory;});},"ibm/tivoli/fwm/mxmap/layers/RouteLayer":function(){define(["dojo/_base/declare","ibm/tivoli/fwm/mxmap/layers/Layer"],function(_9b1,_9b2){return _9b1([_9b2],{init:function(){this.inherited(arguments);this.enable();},enable:function(){this.inherited(arguments);this._map.enableRoutes();},disable:function(){this.inherited(arguments);this._map.disableRoutes();}});});},"ibm/tivoli/fwm/mxmap/layers/TrafficLayer":function(){define(["dojo/_base/declare","ibm/tivoli/fwm/mxmap/layers/Layer"],function(_9b3,_9b4){return _9b3([_9b4],{enable:function(){this.inherited(arguments);this._map.enableTraffic();},disable:function(){this.inherited(arguments);this._map.disableTraffic();}});});},"ibm/tivoli/fwm/mxmap/symbology/SymbologyManager":function(){define(["dojo/_base/declare","ibm/tivoli/fwm/mxmap/_Base"],function(_9b5,_9b6){return _9b5([_9b6],{_mapSymbologyJson:null,_map:null,_objectMap:null,_defaultSymbologyConfig:null,constructor:function(_9b7){dojo.mixin(this,_9b7);this._map=_9b7.map;this._mapSymbologyJson=this._map.mapConf.symbologyConfig;this._objectMap=this._buildObjectMap(this._mapSymbologyJson);this._defaultSymbologyConfig=_9b7.defaultSymbologyConfig;},_buildObjectMap:function(_9b8){var _9b9={};if((this._mapSymbologyJson!=null)&&(this._mapSymbologyJson.layers!=null)){for(id in this._mapSymbologyJson.layers){var _9ba=this._mapSymbologyJson.layers[id];_9b9[_9ba.id]=_9ba;if(_9ba.symbologies&&_9ba.symbologies[0]){this.setActiveSymbologyForLayer(_9ba,_9ba.symbologies[0]);}}}return _9b9;},getDefaultLayerConfigFor:function(_9bb){this._layerIdXlation[_9bb]="others";return this.getLayerConfigById(_9bb);},getLayerConfigById:function(id2){var _9bc=id2.toLowerCase();if(this._layerIdXlation[_9bc]!=null){_9bc=this._layerIdXlation[_9bc];}return this._objectMap[_9bc];},getSymbologyConfigArrayByLayer:function(_9bd){var _9be={};if((_9bd!=null)&&(_9bd.symbologies!=null)){dojo.forEach(_9bd.symbologies,function(_9bf){if(_9bf.id!=null&&_9bf.id!=""){_9be[_9bf.id]=_9bf;}});}return _9be;},getLinearSymbologyDefinition:function(_9c0,_9c1,_9c2,_9c3){var _9c4=this.getLayerConfigById(_9c0);var _9c5=null;var _9c6=null;var _9c7=null;var _9c8=null;if(_9c4){_9c5=_9c4.linearSymbology;if(_9c5){dojo.forEach(_9c5,function(_9c9){if(_9c9.objectName!=null&&_9c9.objectName!=""&&_9c9.objectName==_9c1){_9c6=_9c9;}});if(_9c6){var _9ca=_9c6.attributes;dojo.forEach(_9ca,function(_9cb){if(_9cb.name!=null&&_9cb.name==_9c2){_9c7=_9cb;}});if(!_9c7){if(_9c2=="linearDefaultAttribute"&&_9c3=="linearDefaultValue"){return null;}return this.getLinearSymbologyDefinition(_9c0,_9c1,"linearDefaultAttribute","linearDefaultValue");}var _9cc=_9c7.values;dojo.forEach(_9cc,function(_9cd){if(!_9c8){if(_9cd.value!=null&&_9cd.value!=""&&_9cd.value==_9c3){_9c8=_9cd;}else{if(_9cd.value==null||_9cd.value==undefined||_9cd.value==""){var _9ce=_9cd.startValue;var _9cf=_9cd.endValue;if(_9ce!=null&&_9ce!=undefined&&_9ce!=""&&_9cf!=null&&_9cf!=undefined&&_9cf!=""){if(_9ce<=_9c3&&_9c3<=_9cf){_9c8=_9cd;}}else{if((_9ce==null||_9ce==undefined||_9ce=="")&&(_9cf==null||_9cf==undefined||_9cf=="")){_9c8=_9cd;}}}}}});if(!_9c8){if(_9c2=="linearDefaultAttribute"&&_9c3=="linearDefaultValue"){return null;}return this.getLinearSymbologyDefinition(_9c0,_9c1,"linearDefaultAttribute","linearDefaultValue");}}}}return _9c8.symbology;},getPinPointDefinition:function(id){var _9d0=this.getLayerConfigById(id);var _9d1=null;if(_9d0){_9d1=_9d0.pinPointDefinition;}return _9d1;},getHighlightConfigByLayer:function(_9d2,id){return _9d2.highlightGeometry;},getLegendConfigArrayBySymbology:function(_9d3){var _9d4={};if((_9d3!=null)&&(_9d3.legends!=null)){dojo.forEach(_9d3.legends,function(_9d5){if(_9d5.id!=null&&_9d5.id!=""){_9d4[_9d5.id]=_9d5;}});}return _9d4;},_layerIdXlation:{},setActiveSymbology:function(_9d6,_9d7){var _9d8=this.getLayerConfigById(_9d6);this.setActiveSymbologyForLayer(_9d8,_9d7);},setActiveSymbologyForLayer:function(_9d9,_9da){_9d9.activeSymbology=_9da;},getActiveSymbology:function(_9db){var _9dc=this.getLayerConfigById(_9db);var _9dd=null;if(_9dc){_9dd=_9dc.activeSymbology;}return _9dd;},getLegendSymbolForObject:function(_9de,_9df){var _9e0=this.getLayerConfigById(_9de.mxdata.mboName);return this.getLegendSymbolForObjectAndLayer(_9e0,_9de,_9df);},fixSymbolUrl:function(_9e1){if(!_9e1.urlFixed){_9e1.url=dojo.config.fwm.servletBase+_9e1.url;_9e1.urlRTL=dojo.config.fwm.servletBase+_9e1.urlRTL;_9e1.urlFixed=true;}return _9e1;},getLegendSymbolForObjectAndLayer:function(_9e2,_9e3,_9e4){var _9e5=_9e2.activeSymbology;if(_9e5==null){return ibm.tivoli.fwm.mxmap.ImageLibraryManager.getImageLibraryManager().getDefaultMarkerImageInfo();}if(_9e5.id=="resource"){if(_9e3.routedata==null){if(_9e3.ownDefaultMarker!=null){return _9e3.ownDefaultMarker;}else{return this._getDefaultSymbol(_9e5);}}else{var _9e6="";if(document.body.dir=="rtl"){_9e6="/rtl";}return {"url":ibm.tivoli.fwm.mxmap.ImageLibraryManager.getImageLibraryManager().getResourcesPath()+_9e6+"/symbology/workorder/map_WO_"+_9e4.replace("#","").toLowerCase()+".png","color":"","offsetx":24,"offsety":36,"width":47,"height":36};}}else{if(((_9e2.id=="labor")||(_9e2.id=="amcrew"))&&(_9e3.routeInfo!=undefined)&&(_9e3.routeInfo.polyline!=undefined)){var _9e4=_9e3.routeInfo.polyline.color;var _9e7=(_9e2.id=="labor")?"/labor/map_locationLabor_":"/crew/map_locationCrew_";var _9e6=(document.body.dir=="rtl")?"/rtl":"";return {"url":ibm.tivoli.fwm.mxmap.ImageLibraryManager.getImageLibraryManager().getResourcesPath()+_9e6+"/symbology"+_9e7+_9e4.replace("#","").toLowerCase()+".png","color":"","offsetx":24,"offsety":36,"width":47,"height":36};}else{if(_9e5.id=="fwm_default"){if(_9e3.ownDefaultMarker!=null){return _9e3.ownDefaultMarker;}else{return this.fixSymbolUrl(_9e5.legends[0].symbol);}}else{if(_9e5.type=="numeric"){return this._getNumericSymbol(_9e3,_9e5);}else{if(_9e5.type=="domainvalue"||_9e5.type=="tablevalue"){return this._getDomainSymbol(_9e3,_9e5);}}return this._getDefaultSymbol(_9e5);}}}},_getDefaultSymbol:function(_9e8){var _9e9=dojo.filter(_9e8.legends,function(_9ea){return _9ea.isDefault==true;});return _9e9.length>0?this.fixSymbolUrl(_9e9[0].symbol):null;},_getNumericSymbol:function(_9eb,_9ec){var val=_9eb.mxdata.attributes[_9ec.id];if(val==""){val="null";var _9ed=dojo.filter(_9ec.legends,function(_9ee){return (_9ee.id==val);});return (_9ed.length>0?this.fixSymbolUrl(_9ed[0].symbol):this._getDefaultSymbol(_9ec));}else{if(!val){return this._getDefaultSymbol(_9ec);}else{var _9ef=parseInt(val);var _9ed=dojo.filter(_9ec.legends,function(_9f0){return (_9ef>=parseInt(_9f0.minValue)&&_9ef<=parseInt(_9f0.maxValue));});return (_9ed.length>0?this.fixSymbolUrl(_9ed[0].symbol):this._getDefaultSymbol(_9ec));}}},_getDomainSymbol:function(_9f1,_9f2){var _9f3=String(_9f1.mxdata.attributes[_9f2.id]).toLowerCase();if(_9f3==""){_9f3="null";}var _9f4=dojo.filter(_9f2.legends,function(_9f5){return (_9f5.id==_9f3);});return (_9f4.length>0?this.fixSymbolUrl(_9f4[0].symbol):this._getDefaultSymbol(_9f2));},getDefaultSymbologyForLayer:function(_9f6){var _9f7=null;if(this._defaultSymbologyConfig!=null){var _9f8=null;_9f8=dojo.filter(this._defaultSymbologyConfig,function(pair){return (pair.layer==_9f6);});if(_9f8.length>0){_9f7=_9f8[0].symbology;}}return _9f7;}});});},"ibm/tivoli/fwm/mxmap/toolbar/ext/ToggleComboButton":function(){define(["dojo/_base/declare","dojo/main","dijit/main","dijit/form/ComboButton","dijit/form/ToggleButton"],function(_9f9,dojo,_9fa,_9fb,_9fc){var _9fd=dojo.dojox;return _9f9([_9fb,_9fc],{});});},"ibm/tivoli/fwm/mxmap/geolocation/LocationMonitor":function(){define(["dijit","dojo","dojox","dojo/require!dojox/timing/_base,ibm/tivoli/fwm/mxmap/_Base,ibm/tivoli/fwm/mxmap/geolocation/MyCurrentLocation"],function(_9fe,dojo,_9ff){dojo.provide("ibm.tivoli.fwm.mxmap.geolocation.LocationMonitor");dojo.require("dojox.timing._base");dojo.require("ibm.tivoli.fwm.mxmap._Base");dojo.require("ibm.tivoli.fwm.mxmap.geolocation.MyCurrentLocation");ibm.tivoli.fwm.mxmap.geolocation.LocationMonitor._instance=null;dojo.declare("ibm.tivoli.fwm.mxmap.geolocation.LocationMonitor",ibm.tivoli.fwm.mxmap._Base,{interval:0,_timer:null,compId:null,_myCurrentLocation:null,resetTimer:true,constructor:function(_a00){dojo.mixin(this,_a00);this._myCurrentLocation=ibm.tivoli.fwm.mxmap.geolocation.MyCurrentLocation.getMyCurrentLocationInstance();},start:function(){if(this._timer==null){if(this.interval>0){this._doStart();}else{}}else{}},stop:function(){if(this._timer==null){}else{this._timer.stop();this._timer=null;}},started:function(){return (this._timer!=null);},_doStart:function(){this._myCurrentLocation.getUserLocation(dojo.hitch(this,this._updateMaximoRecord),dojo.hitch(this,this._failedToGetCurrentLocation));this._timer=new _9ff.timing.Timer(this.interval*1000);this._timer.onTick=dojo.hitch(this,function(){if(this._myCurrentLocation){this._myCurrentLocation.getUserLocation(dojo.hitch(this,this._updateMaximoRecord),dojo.hitch(this,this._failedToGetCurrentLocation));}});this._timer.onStart=dojo.hitch(this,function(){});this._timer.onStop=dojo.hitch(this,function(){});this._timer.start();},_updateMaximoRecord:function(_a01){if(_a01&&_a01.coords){var _a02=_a01.coords;var _a03=new Event("loadLaborLBS",this.compId,{lat:_a02.latitude,lng:_a02.longitude,locationAccuracy:_a02.accuracy,altitudeAccuracy:_a02.altitudeAccuracy,altitude:_a02.altitude,heading:_a02.heading,speed:_a02.speed},REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_a03,"text/html","text",dojo.hitch(this,this._messageSuccessfullySentToMaximo),dojo.hitch(this,this._failedToSendMessageToMaximo));if(this.resetTimer==true){startLogoutTimer();}}},_failedToGetCurrentLocation:function(){if(this._myCurrentLocation){switch(this._myCurrentLocation.getStatus()){case ibm.tivoli.fwm.mxmap.geolocation.GeoLocationStatus.PERMISSION_DENIED:this.stop();console.warn("[LocationMonitor] Could not retrieve current location (PERMISSION_DENIED). LBS data collection stopped.");this._logPermissionDenied();break;case ibm.tivoli.fwm.mxmap.geolocation.GeoLocationStatus.GEOLOCATION_NOT_SUPPORTED:this.stop();console.warn("[LocationMonitor] Could not retrieve current location (GEOLOCATION_NOT_SUPPORTED). LBS data collection stopped.");this._logNotSupported();break;case ibm.tivoli.fwm.mxmap.geolocation.GeoLocationStatus.TIMEOUT:console.warn("[LocationMonitor] Could not retrieve current location (TIMEOUT).");break;case ibm.tivoli.fwm.mxmap.geolocation.GeoLocationStatus.POSITION_UNAVAILABLE:console.warn("[LocationMonitor] Could not retrieve current location (POSITION_UNAVAILABLE).");break;default:break;}}},_failedToSendMessageToMaximo:function(){console.error("[LocationMonitor] Failed to send current location to Maximo");},_messageSuccessfullySentToMaximo:function(){},_logPermissionDenied:function(){sendEvent("logLBSCollectionPermissionDenied",this.compId,"");},_logNotSupported:function(){sendEvent("logLBSCollectionNotSupported",this.compId,"");},destroyRecursive:function(){this.stop();this.inherited(arguments);}});ibm.tivoli.fwm.mxmap.geolocation.LocationMonitor.getLocationMonitorInstance=function(_a04){if(!ibm.tivoli.fwm.mxmap.geolocation.LocationMonitor._instance){ibm.tivoli.fwm.mxmap.geolocation.LocationMonitor._instance=new ibm.tivoli.fwm.mxmap.geolocation.LocationMonitor(_a04);}return ibm.tivoli.fwm.mxmap.geolocation.LocationMonitor._instance;};});},"ibm/tivoli/fwm/mxmap/routing/impl/bingmaps":function(){define(["dijit","dojo","dojox","dojo/require!ibm/tivoli/fwm/mxmap/_Base,ibm/tivoli/fwm/mxmap/routing/Router,ibm/tivoli/fwm/mxmap/routing/Route"],function(_a05,dojo,_a06){dojo.provide("ibm.tivoli.fwm.mxmap.routing.impl.bingmaps");dojo.require("ibm.tivoli.fwm.mxmap._Base");dojo.require("ibm.tivoli.fwm.mxmap.routing.Router");dojo.require("ibm.tivoli.fwm.mxmap.routing.Route");ibm.tivoli.fwm.mxmap.routing.impl.bcc=0;ibm.tivoli.fwm.mxmap.routing.impl.bingmapsId=function(){return ibm.tivoli.fwm.mxmap.routing.impl.bcc++;};ibm.tivoli.fwm.mxmap.routing.impl.routeCallbackId=0;ibm.tivoli.fwm.mxmap.routing.impl.getRouteCallbackId=function(){return ibm.tivoli.fwm.mxmap.routing.impl.routeCallbackId++;};dojo.declare("ibm.tivoli.fwm.mxmap.routing.impl.bingmaps",[ibm.tivoli.fwm.mxmap.routing.Router,ibm.tivoli.fwm.mxmap._Base],{directionsService:null,map:null,conf:null,_isLoaded:false,_routeQueue:[],_msHandlers:[],_routeLimits:10,_routeBaseURL:null,c:0,_allowParallelRouteCreation:true,constructor:function(_a07){this.id=ibm.tivoli.fwm.mxmap.routing.impl.bingmapsId();this._msHandlers=[];this._routeQueueParalel=[];this._isLoaded=false;dojo.mixin(this,_a07);this.c=0;this._routeBaseURL=_a07.routeUrl;},_routedOk:function(_a08,_a09){_a08.totalDistance=_a08.distance;_a08.totalDuration=_a08.time;_a08.map=this.map;var _a0a=new ibm.tivoli.fwm.mxmap.routing.itinerary.Itinerary();var _a0b=_a08.inputInfo.stops;if((_a08.itineraryLegInfo!=null)&&(_a08.itineraryLegInfo!=undefined)){if(_a08.itineraryLegInfo.length>0){_a0a.setInitialLocation(_a08.itineraryLegInfo[0].startAddress,_a08.itineraryLegInfo[0].startLoc,null,null,true);}_a0a.addAllLegs(_a08.itineraryLegInfo);if(_a0b[_a0b.length-1].calculatedStop==true){_a0a.legs[_a0a.legs.length-1].needsToGeocode=true;}}_a08.itinerary=_a0a;_a08.distanceUnit=this.getCurrentDistanceUnit();if(_a09){var _a0c=new ibm.tivoli.fwm.mxmap.routing.Route(_a08);_a09(_a0c);}this.isExecuting=false;if(this._allowParallelRouteCreation==false){this.executeQueuedParalel();}},_routeError:function(_a0d,_a0e){console.error("route failed",_a0d,_a0e);if(_a0e){switch(_a0d.responseCode){case 2:case 3:case 4:case 5:case 8:case 15:_a0e(ibm.tivoli.fwm.mxmap.routing.RoutingErrorCodes.ZERO_RESULTS,_a0d);break;case 13:case 16:case 18:case 17:_a0e(ibm.tivoli.fwm.mxmap.routing.RoutingErrorCodes.REQUEST_DENIED,_a0d);break;case 11:_a0e(ibm.tivoli.fwm.mxmap.routing.RoutingErrorCodes.TIMEOUT,_a0d);break;default:_a0e(ibm.tivoli.fwm.mxmap.routing.RoutingErrorCodes.UNKNOWN_ERROR,_a0d);break;}}if(this._allowParallelRouteCreation==false){this.executeQueuedParalel();}},executeQueuedParalel:function(){if(this._routeQueueParalel.length>0){var obj=this._routeQueueParalel.pop();this.showRoute(obj.stops,obj.callback,obj.errCb,null,obj.instanceConf);}},_extractItineraryStepsFromItineraryItems:function(_a0f){var _a10=[];var _a11=0;for(var id=0;id<_a0f.length;id++){var item=_a0f[id];var loc=this.map.latLng();loc.fromProprietary(item.maneuverPoint);var step={distance:_a11,duration:item.travelDuration,info:item.instruction.text,location:loc};_a10.push(step);_a11=item.travelDistance;}return _a10;},_extractRouteInfoFromRestResponse:function(resp){var _a12=null;var _a13=[];var _a14=[];var _a15=[];for(var j=0;j<resp.resources.length;j++){var _a16=resp.resources[j].routeLegs;for(var k=0;k<_a16.length;k++){var leg=_a16[k];if(!leg){continue;}var _a17=this.map.latLng();_a17.fromProprietary(leg.actualStart);_a13.push(_a17);var _a18=this.map.latLng();_a18.fromProprietary(leg.actualEnd);var _a19={location:_a18,startLoc:_a17,distanceToLeg:leg.travelDistance,durationToLeg:Math.round(leg.travelDuration/6)/10,info:null,startAddress:null,marker:null,steps:null,onclick:null,needsToGeocode:true};_a19.steps=this._extractItineraryStepsFromItineraryItems(leg.itineraryItems);_a15.push(_a19);_a12=this.map.latLng();_a12.fromProprietary(leg.actualEnd);}var _a1a=resp.resources[j].routePath;_a14=_a14.concat(this._getPolylineVerticesFromRoutePath(_a1a));}return {lastWayPoint:_a12,locations:_a13,itineraryInfo:_a15,polylineVertices:_a14};},_getPolylineVerticesFromRoutePath:function(_a1b){var _a1c=[];if(_a1b&&_a1b.line&&_a1b.line.coordinates){var _a1d=_a1b.line.coordinates;for(var i=0;i<_a1d.length;i++){var lat=_a1d[i][0];var lng=_a1d[i][1];_a1c.push(this.map.latLng(lat,lng));}}return _a1c;},_routeQueueParalel:null,showRoute:function(_a1e,_a1f,_a20,a,_a21){if(this._allowParallelRouteCreation==false){if(this.isExecuting==true){console.warn("there's a execution going on");this._routeQueueParalel.push({stops:_a1e,callback:_a1f,errCb:_a20,instanceConf:_a21});return;}}this.isExecuting=true;var _a22=function(_a23){this.isExecuting=false;this._routeError(_a23,_a20);};var map=this.map.getProviderMap();var _a24={distance:0,time:0};if(_a21!=null&&_a21.routecolor){this.routecolor=_a21.routecolor;}var _a25=0;var _a26=[];var _a27=[];var _a28=[];var th=this._startTimer();var _a29=function(_a2a){if(_a2a.resourceSets.length>0){var _a2b=_a2a.resourceSets[0];_a24.distance=_a2b.travelDistance;_a24.time=_a2b.travelDuration;var _a2c=this._extractRouteInfoFromRestResponse(_a2b);_a26=_a26.concat(_a2c.polylineVertices);_a28=_a28.concat(_a2c.itineraryInfo);_a27=_a27.concat(_a2c.locations);this._stopTimer(th,_a27.length);var _a2d=_a2c.lastWayPoint;if(_a25<_a1e.length){var _a2e=_a25;_a25+=this._routeLimits;if(_a25>=_a1e.length){_a25=_a1e.length;}if(_a2e>0){_a2e=_a2e-1;}th=this._startTimer();this._calculateRouteUsingRestApi(_a1e.slice(_a2e,_a25),dojo.hitch(this,_a29),dojo.hitch(this,_a22));}else{_a27.push(_a2d);this._renderRoute(_a27,_a26,_a24,map,_a1f,_a20,_a28,_a1e,_a21);}}else{if(_a2a.hasOwnProperty("errorDetails")){if(this.map.getShowMarkersOnRouteError()==true){this._renderRoute(null,[],_a24,map,_a1f,_a20,null,_a1e,_a21);}else{var _a2f="";for(var k=0;k<_a2a.errorDetails.length;k++){_a2f=_a2f+_a2a.errorDetails[k]+" ";}_a20(ibm.tivoli.fwm.mxmap.routing.RoutingErrorCodes.UNKNOWN,_a2f);}}}};if(_a25<_a1e.length){var _a30=_a25;_a25+=this._routeLimits;if(_a25>=_a1e.length){_a25=_a1e.length;}if(_a30>0){_a30=_a30-1;}this._calculateRouteUsingRestApi(_a1e.slice(_a30,_a25),dojo.hitch(this,_a29),dojo.hitch(this,_a22));}return;},_renderRoute:function(_a31,_a32,_a33,map,_a34,_a35,_a36,_a37,_a38){var _a39=_a38.routecolor;var _a3a=this.routeLineWidth;var _a3b=this.routeOpacity;var _a3c={points:_a32,color:_a39,opacity:_a3b,width:_a3a};var poly=this.map.polyline(_a3c);if((_a31==null)){var _a3d=[];for(var i=0;i<_a37.length;i++){_a3d.push(this._convertMboToPoint(_a37[i]));}_a33.stops=_a3d;}else{_a33.stops=_a31;}_a33.polyline=poly;if(_a39.indexOf("#")!=0){_a39="#"+_a39;}var _a3e=Microsoft.Maps.Color.fromHex(_a39);var wp={waypointPushpinOptions:{draggable:false},drivingPolylineOptions:{strokeColor:new Microsoft.Maps.Color(_a3b*255,_a3e.r,_a3e.g,_a3e.b),strokeThickness:_a3a},autoUpdateMapView:false};wp.draggable=false;var _a3f=function(opts){this.wp=opts;this._counter=0;this.getNext=function(){this.wp.text=this._generateMarkerText();return this.wp;};this._generateMarkerText=function(){var _a40=(this._counter%26);var dis=parseInt(this._counter/26);var _a41=String.fromCharCode(65+_a40);this._counter++;if(dis>0){_a41+=dis;}return _a41;};};_a33.customMarkerOptions=new _a3f(wp);_a33.itineraryLegInfo=_a36;this._stopTimer(null,_a33.stops.length);_a33.inputInfo={stops:_a37,successCb:_a34,errorCb:_a35};_a33.originalRouter=this;_a33.instanceConf=_a38;this._routedOk(_a33,_a34);},_convertMboToMSLocation:function(_a42){var _a43=this._convertMboToPoint(_a42);var _a44=new Microsoft.Maps.Location(_a43.lat,_a43.lng);return _a44;},_convertMboToPoint:function(_a45){var _a46;var _a47=new ibm.tivoli.fwm.mxmap.MXRecord({mboInfo:_a45,map:this.map});if(_a47.hasGISData()){if(_a47.useLBSData()){if(_a47.hasPointInCurrentSR()){_a46=_a47.getPointInCurrentSR();}else{_a46=_a47.getLBSCoordinates();}}else{if(_a47.hasGISCoordinates()){_a46=_a47.getGISPoint();}else{if(_a47.hasAutolocateGISCoordinates()){_a46=_a47.getAutolocateGISPoint();}else{if(_a47.hasOwnLatLngProperties()){_a46=_a47.getOwnLatLng();}else{console.warn("Stop doesn't have gis coords",_a45);}}}}}else{_a46=this.map.latLng(_a45.lat,_a45.lng);}return _a46;},_calculateRouteUsingRestApi:function(_a48,_a49,_a4a){var _a4b=this._routeBaseURL+"?";var _a4c="";for(var i=0;i<_a48.length;i++){if(i>0){_a4c+="&";}var pt=this._convertMboToPoint(_a48[i]);if((pt!=null)&&(pt!=undefined)){_a4c+="wp."+i+"="+pt.lat+","+pt.lng;}}var _a4d="&travelMode=Driving";var _a4e="&distanceUnit=km";var _a4f="&routePathOutput=Points";var _a50="";if(this.getAvoidHighways()==true||this.getAvoidTolls()==true){_a50="&avoid=highways,tolls";}else{if(this.getAvoidTolls()==true){_a50="&avoid=tolls";}else{if(this.getAvoidHighways()==true){_a50="&avoid=highways";}}}var _a51="";if(_a50==""&&this.isOptimizeRoute()){_a51="&optmz=distance";}var _a52="&key="+this.map.mapConf.key;var _a53="bingRouteCallback"+ibm.tivoli.fwm.mxmap.routing.impl.getRouteCallbackId();var _a54="&jsonp="+_a53;window[_a53]=function(_a55){_a49(_a55);window[_a53]=null;};var _a56=_a4b+_a4c+_a4d+_a4e+_a4f+_a50+_a51+_a54+_a52;var _a57={url:_a56,error:function(e){_a4a(ibm.tivoli.fwm.mxmap.routing.RoutingErrorCodes.UNKNOWN,e);}};dojo.io.script.get(_a57);},destroyRecursive:function(){this.inherited(arguments);for(var hid in this._msHandlers){var _a58=this._msHandlers[hid];if(!_a58){continue;}Microsoft.Maps.Events.removeHandler(_a58);}}});});},"dijit/Toolbar":function(){define(["require","dojo/_base/declare","dojo/has","dojo/keys","dojo/ready","./_Widget","./_KeyNavContainer","./_TemplatedMixin"],function(_a59,_a5a,has,keys,_a5b,_a5c,_a5d,_a5e){if(has("dijit-legacy-requires")){_a5b(0,function(){var _a5f=["dijit/ToolbarSeparator"];_a59(_a5f);});}return _a5a("dijit.Toolbar",[_a5c,_a5e,_a5d],{templateString:"<div class=\"dijit\" role=\"toolbar\" tabIndex=\"${tabIndex}\" data-dojo-attach-point=\"containerNode\">"+"</div>",baseClass:"dijitToolbar",_onLeftArrow:function(){this.focusPrev();},_onRightArrow:function(){this.focusNext();}});});},"ibm/tivoli/fwm/mxmap/impl/geocoder/GmapsGeocoder":function(){define(["dijit","dojo","dojox","dojo/require!ibm/tivoli/fwm/mxmap/_Geocoder"],function(_a60,dojo,_a61){dojo.require("ibm.tivoli.fwm.mxmap._Geocoder");dojo.provide("ibm.tivoli.fwm.mxmap.impl.geocoder.GmapsGeocoder");dojo.declare("ibm.tivoli.fwm.mxmap.impl.geocoder.GmapsGeocoder",ibm.tivoli.fwm.mxmap._Geocoder,{_init:function(){this.geocoder=new google.maps.Geocoder();},geocode:function(_a62){var me=this;if(!_a62.hasOwnProperty("address")||_a62.address===null||_a62.address===""){_a62.address=[_a62.street,_a62.locality,_a62.region,_a62.country].join(", ");}if(_a62.hasOwnProperty("lat")&&(_a62.hasOwnProperty("lon")||_a62.hasOwnProperty("lng"))){var lng=(_a62.lng)?_a62.lng:_a62.lon;var lat=_a62.lat;var _a63=new google.maps.LatLng(lat,lng);this.geocoder.geocode({"latLng":_a63},function(_a64,_a65){me.geocode_callback(_a64,_a65);});}else{var _a66={"address":_a62.address};if(me.optParams.map&&me.optParams.map.getBounds()){var ne=me.optParams.map.getBounds().getNorthEast();var sw=me.optParams.map.getBounds().getSouthWest();var _a67=new google.maps.LatLngBounds(sw.toProprietary(),ne.toProprietary());_a66.bounds=_a67;}this.geocoder.geocode(_a66,function(_a68,_a69){me.geocode_callback(_a68,_a69);});}},geocode_callback:function(_a6a,_a6b){var _a6c=function(_a6d){var _a6e=false;if(_a6d.geometry&&_a6d.geometry.location_type){var _a6f=_a6d.geometry.location_type;_a6e=(_a6f==google.maps.GeocoderLocationType.ROOFTOP);}return _a6e;};var _a70=[];if(_a6b!=google.maps.GeocoderStatus.OK){this.error_callback(_a6b);}else{for(var rid in _a6a){var _a71=_a6a[rid];var _a72=[];var _a73={street:"",locality:"",postcode:"",region:"",country:"",formatted_address:""};_a73.formattedAddress=_a71.formatted_address;for(var i=0;i<_a71.address_components.length;i++){var _a74=_a71.address_components[i];for(var j=0;j<_a74.types.length;j++){var _a75=_a74.types[j];switch(_a75){case "country":_a73.country=_a74.long_name;break;case "administrative_area_level_1":_a73.region=_a74.long_name;break;case "locality":_a73.locality=_a74.long_name;break;case "street_address":_a73.street=_a74.long_name;break;case "postal_code":_a73.postcode=_a74.long_name;break;case "street_number":_a72.unshift(_a74.long_name);break;case "route":_a72.push(_a74.long_name);break;}}}if(_a73.street===""&&_a72.length>0){_a73.street=_a72.join(" ");}_a73.point=this.optParams.map.latLng(_a71.geometry.location.lat(),_a71.geometry.location.lng());if(_a6c(_a71)==true){this.callback([_a73]);return;}_a70.push(_a73);}this.callback(_a70);}}});});},"ibm/tivoli/fwm/mxmap/routing/itinerary/Itinerary":function(){define(["dijit","dojo","dojox","dojo/require!ibm/tivoli/fwm/mxmap/_Base"],function(_a76,dojo,_a77){dojo.provide("ibm.tivoli.fwm.mxmap.routing.itinerary.Itinerary");dojo.require("ibm.tivoli.fwm.mxmap._Base");dojo.declare("ibm.tivoli.fwm.mxmap.routing.itinerary.Itinerary",ibm.tivoli.fwm.mxmap._Base,{initialLocation:null,legs:null,constructor:function(_a78){dojo.mixin(this,_a78);this.legs=[];this.initialLocation={};},setInitialLocation:function(info,_a79,_a7a,_a7b,_a7c){this.initialLocation={location:_a79,info:info,needsToGeocode:_a7c,marker:_a7a,onclick:_a7b};},addAllLegs:function(legs){this.legs=this.legs.concat(legs);},addLeg:function(_a7d,info,_a7e,_a7f,_a80,_a81,_a82,pos){var leg={location:_a7d,distanceToLeg:_a7e,durationToLeg:_a7f,info:info,needsToGeocode:false,marker:_a80,steps:_a81,onclick:_a82};if(!pos){this.legs.push(leg);return this.legs.length-1;}else{this.legs[pos]=leg;return pos;}},getInitialLocation:function(){return this.initialLocation;},clearAll:function(){this.legs=[];this.initialLocation={};}});});},"dijit/DropDownMenu":function(){define(["dojo/_base/declare","dojo/keys","dojo/text!./templates/Menu.html","./_MenuBase"],function(_a83,keys,_a84,_a85){return _a83("dijit.DropDownMenu",_a85,{templateString:_a84,baseClass:"dijitMenu",_onUpArrow:function(){this.focusPrev();},_onDownArrow:function(){this.focusNext();},_onRightArrow:function(evt){this._moveToPopup(evt);evt.stopPropagation();evt.preventDefault();},_onLeftArrow:function(evt){if(this.parentMenu){if(this.parentMenu._isMenuBar){this.parentMenu.focusPrev();}else{this.onCancel(false);}}else{evt.stopPropagation();evt.preventDefault();}}});});},"dijit/_AttachMixin":function(){define(["require","dojo/_base/array","dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dojo/mouse","dojo/on","dojo/touch","./_WidgetBase"],function(_a86,_a87,_a88,_a89,lang,_a8a,on,_a8b,_a8c){var _a8d=lang.delegate(_a8b,{"mouseenter":_a8a.enter,"mouseleave":_a8a.leave,"keypress":_a88._keypress});var _a8e;var _a8f=_a89("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[];this._attachEvents=[];},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);this._beforeFillContent();},_beforeFillContent:function(){},_attachTemplateNodes:function(_a90){var node=_a90;while(true){if(node.nodeType==1&&(this._processTemplateNode(node,function(n,p){return n.getAttribute(p);},this._attach)||this.searchContainerNode)&&node.firstChild){node=node.firstChild;}else{if(node==_a90){return;}while(!node.nextSibling){node=node.parentNode;if(node==_a90){return;}}node=node.nextSibling;}}},_processTemplateNode:function(_a91,_a92,_a93){var ret=true;var _a94=this.attachScope||this,_a95=_a92(_a91,"dojoAttachPoint")||_a92(_a91,"data-dojo-attach-point");if(_a95){var _a96,_a97=_a95.split(/\s*,\s*/);while((_a96=_a97.shift())){if(lang.isArray(_a94[_a96])){_a94[_a96].push(_a91);}else{_a94[_a96]=_a91;}ret=(_a96!="containerNode");this._attachPoints.push(_a96);}}var _a98=_a92(_a91,"dojoAttachEvent")||_a92(_a91,"data-dojo-attach-event");if(_a98){var _a99,_a9a=_a98.split(/\s*,\s*/);var trim=lang.trim;while((_a99=_a9a.shift())){if(_a99){var _a9b=null;if(_a99.indexOf(":")!=-1){var _a9c=_a99.split(":");_a99=trim(_a9c[0]);_a9b=trim(_a9c[1]);}else{_a99=trim(_a99);}if(!_a9b){_a9b=_a99;}this._attachEvents.push(_a93(_a91,_a99,lang.hitch(_a94,_a9b)));}}}return ret;},_attach:function(node,type,func){type=type.replace(/^on/,"").toLowerCase();if(type=="dijitclick"){type=_a8e||(_a8e=_a86("./a11yclick"));}else{type=_a8d[type]||type;}return on(node,type,func);},_detachTemplateNodes:function(){var _a9d=this.attachScope||this;_a87.forEach(this._attachPoints,function(_a9e){delete _a9d[_a9e];});this._attachPoints=[];_a87.forEach(this._attachEvents,function(_a9f){_a9f.remove();});this._attachEvents=[];},destroyRendering:function(){this._detachTemplateNodes();this.inherited(arguments);}});lang.extend(_a8c,{dojoAttachEvent:"",dojoAttachPoint:""});return _a8f;});},"dijit/form/_FormMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/window"],function(_aa0,_aa1,_aa2,lang,on,_aa3){return _aa1("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(_aa4){var res=[];_aa0.forEach(_aa4||this.getChildren(),function(_aa5){if("value" in _aa5){res.push(_aa5);}else{res=res.concat(this._getDescendantFormWidgets(_aa5.getChildren()));}},this);return res;},reset:function(){_aa0.forEach(this._getDescendantFormWidgets(),function(_aa6){if(_aa6.reset){_aa6.reset();}});},validate:function(){var _aa7=false;return _aa0.every(_aa0.map(this._getDescendantFormWidgets(),function(_aa8){_aa8._hasBeenBlurred=true;var _aa9=_aa8.disabled||!_aa8.validate||_aa8.validate();if(!_aa9&&!_aa7){_aa3.scrollIntoView(_aa8.containerNode||_aa8.domNode);_aa8.focus();_aa7=true;}return _aa9;}),function(item){return item;});},setValues:function(val){_aa2.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",val);},_setValueAttr:function(obj){var map={};_aa0.forEach(this._getDescendantFormWidgets(),function(_aaa){if(!_aaa.name){return;}var _aab=map[_aaa.name]||(map[_aaa.name]=[]);_aab.push(_aaa);});for(var name in map){if(!map.hasOwnProperty(name)){continue;}var _aac=map[name],_aad=lang.getObject(name,false,obj);if(_aad===undefined){continue;}_aad=[].concat(_aad);if(typeof _aac[0].checked=="boolean"){_aa0.forEach(_aac,function(w){w.set("value",_aa0.indexOf(_aad,w._get("value"))!=-1);});}else{if(_aac[0].multiple){_aac[0].set("value",_aad);}else{_aa0.forEach(_aac,function(w,i){w.set("value",_aad[i]);});}}}},getValues:function(){_aa2.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value");},_getValueAttr:function(){var obj={};_aa0.forEach(this._getDescendantFormWidgets(),function(_aae){var name=_aae.name;if(!name||_aae.disabled){return;}var _aaf=_aae.get("value");if(typeof _aae.checked=="boolean"){if(/Radio/.test(_aae.declaredClass)){if(_aaf!==false){lang.setObject(name,_aaf,obj);}else{_aaf=lang.getObject(name,false,obj);if(_aaf===undefined){lang.setObject(name,null,obj);}}}else{var ary=lang.getObject(name,false,obj);if(!ary){ary=[];lang.setObject(name,ary,obj);}if(_aaf!==false){ary.push(_aaf);}}}else{var prev=lang.getObject(name,false,obj);if(typeof prev!="undefined"){if(lang.isArray(prev)){prev.push(_aaf);}else{lang.setObject(name,[prev,_aaf],obj);}}else{lang.setObject(name,_aaf,obj);}}});return obj;},isValid:function(){return this.state=="";},onValidStateChange:function(){},_getState:function(){var _ab0=_aa0.map(this._descendants,function(w){return w.get("state")||"";});return _aa0.indexOf(_ab0,"Error")>=0?"Error":_aa0.indexOf(_ab0,"Incomplete")>=0?"Incomplete":"";},disconnectChildren:function(){},connectChildren:function(_ab1){this._descendants=this._getDescendantFormWidgets();_aa0.forEach(this._descendants,function(_ab2){if(!_ab2._started){_ab2.startup();}});if(!_ab1){this._onChildChange();}},_onChildChange:function(attr){if(!attr||attr=="state"||attr=="disabled"){this._set("state",this._getState());}if(!attr||attr=="value"||attr=="disabled"||attr=="checked"){if(this._onChangeDelayTimer){this._onChangeDelayTimer.remove();}this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;this._set("value",this.get("value"));},10);}},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var self=this;this.own(on(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(evt){if(evt.target==self.domNode){return;}self._onChildChange(evt.type.replace("attrmodified-",""));}));this.watch("state",function(attr,_ab3,_ab4){this.onValidStateChange(_ab4=="");});},destroy:function(){this.inherited(arguments);}});});},"dijit/Menu":function(){define(["require","dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","dojo/_base/window","dojo/window","./popup","./DropDownMenu","dojo/ready"],function(_ab5,_ab6,_ab7,dom,_ab8,_ab9,_aba,keys,lang,on,has,win,_abb,pm,_abc,_abd){if(has("dijit-legacy-requires")){_abd(0,function(){var _abe=["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"];_ab5(_abe);});}return _ab7("dijit.Menu",_abc,{constructor:function(){this._bindings=[];},targetNodeIds:[],selector:"",contextMenuForWindow:false,leftClickToOpen:false,refocus:true,postCreate:function(){if(this.contextMenuForWindow){this.bindDomNode(this.ownerDocumentBody);}else{_ab6.forEach(this.targetNodeIds,this.bindDomNode,this);}this.inherited(arguments);},_iframeContentWindow:function(_abf){return _abb.get(this._iframeContentDocument(_abf))||this._iframeContentDocument(_abf)["__parent__"]||(_abf.name&&document.frames[_abf.name])||null;},_iframeContentDocument:function(_ac0){return _ac0.contentDocument||(_ac0.contentWindow&&_ac0.contentWindow.document)||(_ac0.name&&document.frames[_ac0.name]&&document.frames[_ac0.name].document)||null;},bindDomNode:function(node){node=dom.byId(node,this.ownerDocument);var cn;if(node.tagName.toLowerCase()=="iframe"){var _ac1=node,_ac2=this._iframeContentWindow(_ac1);cn=win.body(_ac2.document);}else{cn=(node==win.body(this.ownerDocument)?this.ownerDocument.documentElement:node);}var _ac3={node:node,iframe:_ac1};_ab8.set(node,"_dijitMenu"+this.id,this._bindings.push(_ac3));var _ac4=lang.hitch(this,function(cn){var _ac5=this.selector,_ac6=_ac5?function(_ac7){return on.selector(_ac5,_ac7);}:function(_ac8){return _ac8;},self=this;return [on(cn,_ac6(this.leftClickToOpen?"click":"contextmenu"),function(evt){evt.stopPropagation();evt.preventDefault();if((new Date()).getTime()<self._lastKeyDown+500){return;}self._scheduleOpen(this,_ac1,{x:evt.pageX,y:evt.pageY},evt.target);}),on(cn,_ac6("keydown"),function(evt){if(evt.keyCode==93||(evt.shiftKey&&evt.keyCode==keys.F10)||(self.leftClickToOpen&&evt.keyCode==keys.SPACE)){evt.stopPropagation();evt.preventDefault();self._scheduleOpen(this,_ac1,null,evt.target);self._lastKeyDown=(new Date()).getTime();}})];});_ac3.connects=cn?_ac4(cn):[];if(_ac1){_ac3.onloadHandler=lang.hitch(this,function(){var _ac9=this._iframeContentWindow(_ac1),cn=win.body(_ac9.document);_ac3.connects=_ac4(cn);});if(_ac1.addEventListener){_ac1.addEventListener("load",_ac3.onloadHandler,false);}else{_ac1.attachEvent("onload",_ac3.onloadHandler);}}},unBindDomNode:function(_aca){var node;try{node=dom.byId(_aca,this.ownerDocument);}catch(e){return;}var _acb="_dijitMenu"+this.id;if(node&&_ab8.has(node,_acb)){var bid=_ab8.get(node,_acb)-1,b=this._bindings[bid],h;while((h=b.connects.pop())){h.remove();}var _acc=b.iframe;if(_acc){if(_acc.removeEventListener){_acc.removeEventListener("load",b.onloadHandler,false);}else{_acc.detachEvent("onload",b.onloadHandler);}}_ab8.remove(node,_acb);delete this._bindings[bid];}},_scheduleOpen:function(_acd,_ace,_acf,_ad0){if(!this._openTimer){this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:_ad0,delegatedTarget:_acd,iframe:_ace,coords:_acf});},1);}},_openMyself:function(args){var _ad1=args.target,_ad2=args.iframe,_ad3=args.coords,_ad4=!_ad3;this.currentTarget=args.delegatedTarget;if(_ad3){if(_ad2){var ifc=_ab9.position(_ad2,true),_ad5=this._iframeContentWindow(_ad2),_ad6=_ab9.docScroll(_ad5.document);var cs=_aba.getComputedStyle(_ad2),tp=_aba.toPixelValue,left=(has("ie")&&has("quirks")?0:tp(_ad2,cs.paddingLeft))+(has("ie")&&has("quirks")?tp(_ad2,cs.borderLeftWidth):0),top=(has("ie")&&has("quirks")?0:tp(_ad2,cs.paddingTop))+(has("ie")&&has("quirks")?tp(_ad2,cs.borderTopWidth):0);_ad3.x+=ifc.x+left-_ad6.x;_ad3.y+=ifc.y+top-_ad6.y;}}else{_ad3=_ab9.position(_ad1,true);_ad3.x+=10;_ad3.y+=10;}var self=this;var _ad7=this._focusManager.get("prevNode");var _ad8=this._focusManager.get("curNode");var _ad9=!_ad8||(dom.isDescendant(_ad8,this.domNode))?_ad7:_ad8;function _ada(){if(self.refocus&&_ad9){_ad9.focus();}pm.close(self);};pm.open({popup:this,x:_ad3.x,y:_ad3.y,onExecute:_ada,onCancel:_ada,orient:this.isLeftToRight()?"L":"R"});this.focus();if(!_ad4){this.defer(function(){this._cleanUp(true);});}this._onBlur=function(){this.inherited("_onBlur",arguments);pm.close(this);};},destroy:function(){_ab6.forEach(this._bindings,function(b){if(b){this.unBindDomNode(b.node);}},this);this.inherited(arguments);}});});},"dijit/form/_CheckBoxMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(_adb,_adc){return _adb("dijit.form._CheckBoxMixin",null,{type:"checkbox",value:"on",readOnly:false,_aria_attr:"aria-checked",_setReadOnlyAttr:function(_add){this._set("readOnly",_add);_adc.set(this.focusNode,"readOnly",_add);},_setLabelAttr:undefined,_getSubmitValue:function(_ade){return (_ade==null||_ade==="")?"on":_ade;},_setValueAttr:function(_adf){_adf=this._getSubmitValue(_adf);this._set("value",_adf);_adc.set(this.focusNode,"value",_adf);},reset:function(){this.inherited(arguments);this._set("value",this._getSubmitValue(this.params.value));_adc.set(this.focusNode,"value",this.value);},_onClick:function(e){if(this.readOnly){e.stopPropagation();e.preventDefault();return false;}return this.inherited(arguments);}});});},"ibm/tivoli/fwm/mxmap/toolbar/ext/QueryWeatherAlerts":function(){define(["dijit","dojo","dojox","dojo/require!ibm/tivoli/fwm/mxmap/toolbar/ext/_ToggleTool,dijit/form/Button"],function(_ae0,dojo,_ae1){dojo.provide("ibm.tivoli.fwm.mxmap.toolbar.ext.QueryWeatherAlerts");dojo.require("ibm.tivoli.fwm.mxmap.toolbar.ext._ToggleTool");dojo.require("dijit.form.Button");dojo.declare("ibm.tivoli.fwm.mxmap.toolbar.ext.QueryWeatherAlerts",ibm.tivoli.fwm.mxmap.toolbar.ext._ToggleTool,{label:"Weather Alerts",iconClass:"basicMapToolbarBtn weatherAlertsMapToolbarBtn",map:null,constructor:function(_ae2){dojo.mixin(this,_ae2);var _ae3=ibm.tivoli.fwm.i18n.getMaxMsg("map","weatheralertstool");this.label=_ae3||this.label;this.addSubscription("onMapRefresh_"+this.map.getId(),dojo.hitch(this,this._onMapRefresh));},updateLayers:function(_ae4,_ae5){var _ae6=_ae5&&_ae5.automatic;var _ae7=false;if(_ae5){_ae7=true;}if(_ae4&&_ae4.length>0){this._sendEventToLayer(this.label,_ae4,_ae7);}else{this._sendEventToRemoveLayer(this.label);}if(_ae6!=true&&_ae4.length==0){this.setActive(false);this.map.getMaximo().showMessage("mapserver","noweatheralertsinarea");}},disable:function(){},destroy:function(){this.destroyRecursive();},_getLBSData:function(_ae8){var _ae9=[];if(_ae8){for(var _aea in _ae8){if(_ae8[_aea].lbsdata){_ae9.push(_ae8[_aea].lbsdata);}else{console.warn("[QueryWeatherAlerts] Records has a record without lbsdata.",_ae8);return null;}}}else{console.warn("[QueryWeatherAlerts] Records has a record without lbsdata.",_ae8);return null;}return _ae9;},_sendEventToLayer:function(_aeb,_aec,_aed){dojo.publish("addRecordsToLayer_"+this.map.getId(),[_aeb,_aec,true,null,null,_aed]);},_sendEventToRemoveLayer:function(_aee){dojo.publish("removeLayer_"+this.map.getId(),[_aee]);},executeOn:function(_aef){var fct=function(data){if(data.status=="TOOMANYRECORDS"){this.setActive(false);this.map.getMaximo().showMessage(data.error.group,data.error.key,[data.error.params]);return;}var _af0=data.weatherAlerts;var _af1=[];if(_af0!=null){_af1.join(this._getLBSData(_af0));}if(_af1.length>0){this.map.getAllPointsFromWGS84(_af1,dojo.hitch(this,function(){this.updateLayers(_af0,_aef.refreshOptions);}),dojo.hitch(this,function(_af2){if(_af2&&_af2.msgkey){this.map.getMaximo().showMessage(_af2.msggroup,_af2.msgkey);}}));}else{this.updateLayers(_af0,_aef.refreshOptions);}};var _af3=function(data){console.warn("[QueryWeatherAlerts] Error querying nearby resources",data);};var _af4=this.map.getBounds();var _af5=function(ps){var _af6=this.map.getBoundingBoxFromPoints(ps);var _af7=(_aef.menuItem!=undefined)?_aef.menuItem.id:"all";var _af8={"bounds":_af6,"filterOption":_af7};this.map.getMaximo().getWeatherAlertsByQueryParams(dojo.hitch(this,fct),dojo.hitch(this,_af3),_af8);};this.map.getAllPointsInWGS84([_af4.sw,_af4.ne],dojo.hitch(this,_af5));},executeOff:function(){this._sendEventToRemoveLayer(this.label);},_onMapRefresh:function(_af9){if(this.isActive()==true){this.executeOff();this.executeOn({refreshOptions:_af9});}}});});},"dijit/layout/ContentPane":function(){define(["dojo/_base/kernel","dojo/_base/lang","../_Widget","../_Container","./_ContentPaneResizeMixin","dojo/string","dojo/html","dojo/_base/array","dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/_base/xhr","dojo/i18n","dojo/when","dojo/i18n!../nls/loading"],function(_afa,lang,_afb,_afc,_afd,_afe,html,_aff,_b00,_b01,dom,_b02,_b03,xhr,i18n,when){return _b00("dijit.layout.ContentPane",[_afb,_afc,_afd],{href:"",content:"",extractContent:false,parseOnLoad:true,parserScope:_afa._scopeName,preventCache:false,preload:false,refreshOnShow:false,loadingMessage:"<span class='dijitContentPaneLoading'><span class='dijitInline dijitIconLoading'></span>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'><span class='dijitInline dijitIconError'></span>${errorState}</span>",isLoaded:false,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:true,template:false,markupFactory:function(_b04,node,ctor){var self=new ctor(_b04,node);return !self.href&&self._contentSetter&&self._contentSetter.parseDeferred&&!self._contentSetter.parseDeferred.isFulfilled()?self._contentSetter.parseDeferred.then(function(){return self;}):self;},create:function(_b05,_b06){if((!_b05||!_b05.template)&&_b06&&!("href" in _b05)&&!("content" in _b05)){_b06=dom.byId(_b06);var df=_b06.ownerDocument.createDocumentFragment();while(_b06.firstChild){df.appendChild(_b06.firstChild);}_b05=lang.delegate(_b05,{content:df});}this.inherited(arguments,[_b05,_b06]);},postMixInProperties:function(){this.inherited(arguments);var _b07=i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=_afe.substitute(this.loadingMessage,_b07);this.errorMessage=_afe.substitute(this.errorMessage,_b07);},buildRendering:function(){this.inherited(arguments);if(!this.containerNode){this.containerNode=this.domNode;}this.domNode.removeAttribute("title");},startup:function(){this.inherited(arguments);if(this._contentSetter){_aff.forEach(this._contentSetter.parseResults,function(obj){if(!obj._started&&!obj._destroyed&&lang.isFunction(obj.startup)){obj.startup();obj._started=true;}},this);}},_startChildren:function(){_aff.forEach(this.getChildren(),function(obj){if(!obj._started&&!obj._destroyed&&lang.isFunction(obj.startup)){obj.startup();obj._started=true;}});if(this._contentSetter){_aff.forEach(this._contentSetter.parseResults,function(obj){if(!obj._started&&!obj._destroyed&&lang.isFunction(obj.startup)){obj.startup();obj._started=true;}},this);}},setHref:function(href){_afa.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",href);},_setHrefAttr:function(href){this.cancel();this.onLoadDeferred=new _b01(lang.hitch(this,"cancel"));this.onLoadDeferred.then(lang.hitch(this,"onLoad"));this._set("href",href);if(this.preload||(this._created&&this._isShown())){this._load();}else{this._hrefChanged=true;}return this.onLoadDeferred;},setContent:function(data){_afa.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",data);},_setContentAttr:function(data){this._set("href","");this.cancel();this.onLoadDeferred=new _b01(lang.hitch(this,"cancel"));if(this._created){this.onLoadDeferred.then(lang.hitch(this,"onLoad"));}this._setContent(data||"");this._isDownloaded=false;return this.onLoadDeferred;},_getContentAttr:function(){return this.containerNode.innerHTML;},cancel:function(){if(this._xhrDfd&&(this._xhrDfd.fired==-1)){this._xhrDfd.cancel();}delete this._xhrDfd;this.onLoadDeferred=null;},destroy:function(){this.cancel();this.inherited(arguments);},destroyRecursive:function(_b08){if(this._beingDestroyed){return;}this.inherited(arguments);},_onShow:function(){this.inherited(arguments);if(this.href){if(!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow)){return this.refresh();}}},refresh:function(){this.cancel();this.onLoadDeferred=new _b01(lang.hitch(this,"cancel"));this.onLoadDeferred.then(lang.hitch(this,"onLoad"));this._load();return this.onLoadDeferred;},_load:function(){this._setContent(this.onDownloadStart(),true);var self=this;var _b09={preventCache:(this.preventCache||this.refreshOnShow),url:this.href,handleAs:"text"};if(lang.isObject(this.ioArgs)){lang.mixin(_b09,this.ioArgs);}var hand=(this._xhrDfd=(this.ioMethod||xhr.get)(_b09)),_b0a;hand.then(function(html){_b0a=html;try{self._isDownloaded=true;return self._setContent(html,false);}catch(err){self._onError("Content",err);}},function(err){if(!hand.canceled){self._onError("Download",err);}delete self._xhrDfd;return err;}).then(function(){self.onDownloadEnd();delete self._xhrDfd;return _b0a;});delete this._hrefChanged;},_onLoadHandler:function(data){this._set("isLoaded",true);try{this.onLoadDeferred.resolve(data);}catch(e){console.error("Error "+(this.widgetId||this.id)+" running custom onLoad code: "+e.message);}},_onUnloadHandler:function(){this._set("isLoaded",false);try{this.onUnload();}catch(e){console.error("Error "+this.widgetId+" running custom onUnload code: "+e.message);}},destroyDescendants:function(_b0b){if(this.isLoaded){this._onUnloadHandler();}var _b0c=this._contentSetter;_aff.forEach(this.getChildren(),function(_b0d){if(_b0d.destroyRecursive){_b0d.destroyRecursive(_b0b);}else{if(_b0d.destroy){_b0d.destroy(_b0b);}}_b0d._destroyed=true;});if(_b0c){_aff.forEach(_b0c.parseResults,function(_b0e){if(!_b0e._destroyed){if(_b0e.destroyRecursive){_b0e.destroyRecursive(_b0b);}else{if(_b0e.destroy){_b0e.destroy(_b0b);}}_b0e._destroyed=true;}});delete _b0c.parseResults;}if(!_b0b){_b03.empty(this.containerNode);}delete this._singleChild;},_setContent:function(cont,_b0f){cont=this.preprocessContent(cont);this.destroyDescendants();var _b10=this._contentSetter;if(!(_b10&&_b10 instanceof html._ContentSetter)){_b10=this._contentSetter=new html._ContentSetter({node:this.containerNode,_onError:lang.hitch(this,this._onError),onContentError:lang.hitch(this,function(e){var _b11=this.onContentError(e);try{this.containerNode.innerHTML=_b11;}catch(e){console.error("Fatal "+this.id+" could not change content due to "+e.message,e);}})});}var _b12=lang.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!cont.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:false,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{});var p=_b10.set((lang.isObject(cont)&&cont.domNode)?cont.domNode:cont,_b12);var self=this;return when(p&&p.then?p:_b10.parseDeferred,function(){delete self._contentSetterParams;if(!_b0f){if(self._started){self._startChildren();self._scheduleLayout();}self._onLoadHandler(cont);}});},preprocessContent:function(_b13){return _b13;},_onError:function(type,err,_b14){this.onLoadDeferred.reject(err);var _b15=this["on"+type+"Error"].call(this,err);if(_b14){console.error(_b14,err);}else{if(_b15){this._setContent(_b15,true);}}},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage;},onContentError:function(){},onDownloadError:function(){return this.errorMessage;},onDownloadEnd:function(){}});});},"ibm/tivoli/fwm/mxmap/impl/geocoder/BingGeocoder":function(){define(["dijit","dojo","dojox","dojo/require!ibm/tivoli/fwm/mxmap/_Geocoder"],function(_b16,dojo,_b17){dojo.require("ibm.tivoli.fwm.mxmap._Geocoder");dojo.provide("ibm.tivoli.fwm.mxmap.impl.geocoder.BingGeocoder");ibm.tivoli.fwm.mxmap.impl.geocoder.geocoderCallbackId=0;ibm.tivoli.fwm.mxmap.impl.geocoder.getGeocoderCallbackId=function(){return ibm.tivoli.fwm.mxmap.impl.geocoder.geocoderCallbackId++;};dojo.declare("ibm.tivoli.fwm.mxmap.impl.geocoder.BingGeocoder",ibm.tivoli.fwm.mxmap._Geocoder,{callbackFctName:null,geocodeURL:null,_init:function(){var me=this;this.geocoder={};this.callbackFctName="bingGeocodeCallback"+ibm.tivoli.fwm.mxmap.impl.geocoder.getGeocoderCallbackId();this.geocodeURL=this.optParams.customParams.url;window[this.callbackFctName]=function(args){me.geocode_callback(args);if(!dojo.isIE){window[this.callbackFctName]=null;}};},geocode:function(_b18){var me=this;if(!_b18.hasOwnProperty("address")||_b18.address===null||_b18.address===""){_b18.address=[_b18.street,_b18.locality,_b18.region,_b18.country].join(", ");}if(_b18.hasOwnProperty("lat")&&(_b18.hasOwnProperty("lon")||_b18.hasOwnProperty("lng"))){var lat=_b18.lat;var lng=_b18.lng;if(!lng){lng=_b18.lon;}var _b19=this.geocodeURL+"/"+lat+","+lng+"?output=json&jsonp="+this.callbackFctName+"&key="+me.optParams.key;dojo.io.script.get({url:_b19,timeout:13000,error:function(_b1a){console.error("Failed to access bing maps geocoding api",_b1a);alert("Failed to access bing maps geocoding api");}});}else{var _b1b="";if(me.optParams.map&&me.optParams.map.getBounds()){var ne=me.optParams.map.getBounds().getNorthEast();var sw=me.optParams.map.getBounds().getSouthWest();_b1b="mapView="+sw.lat+","+sw.lng+","+ne.lat+","+ne.lng;}var _b19=this.geocodeURL+"/"+_b18.address+"?output=json&jsonp="+this.callbackFctName+"&key="+me.optParams.key+"&"+_b1b;dojo.io.script.get({url:_b19,timeout:13000,error:function(_b1c){console.error("Failed to access bing maps geocoding api",_b1c);alert("Failed to access bing maps geocoding api");}});}},geocode_callback:function(_b1d){var me=this;var _b1e=function(_b1f){var _b20=_b1f.confidence||"";var _b21=_b1f.matchCodes[0]||"";var _b22="";if(_b1f.geocodePoints){_b22=_b1f.geocodePoints[0].calculationMethod||"";}return (_b20=="High"&&_b21=="Good"&&_b22=="Rooftop");};var _b23=function(_b24){var _b25={};_b25.formattedAddress=_b24.address.formattedAddress;_b25.street=_b24.address.street;_b25.locality=_b24.address.locality;_b25.region=_b24.address.adminDistrict;_b25.country=_b24.address.countryRegion;_b25.point=me.optParams.map.latLng(_b24.point.coordinates[0],_b24.point.coordinates[1]);return _b25;};var _b26=[];if(_b1d.authenticationResultCode!="ValidCredentials"){this.error_callback(_b1d.authenticationResultCode);return;}if(_b1d.statusCode==200){var _b27=_b1d.resourceSets;for(var _b28 in _b27){var set=_b27[_b28];if(set.estimatedTotal==0){this.error_callback("ZERO_RESULTS");return;}for(var rid in set.resources){var _b29=set.resources[rid];if(_b1e(_b29)==true){this.callback([_b23(_b29)]);return;}_b26.push(_b23(_b29));}}}else{this.error_callback(_b1d.statusDescription);return;}this.callback(_b26);}});});},"dijit/_KeyNavContainer":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/_base/kernel","dojo/keys","dojo/_base/lang","./registry","./_Container","./_FocusMixin","./_KeyNavMixin"],function(_b2a,_b2b,_b2c,_b2d,keys,lang,_b2e,_b2f,_b30,_b31){return _b2b("dijit._KeyNavContainer",[_b30,_b31,_b2f],{connectKeyNavHandlers:function(_b32,_b33){var _b34=(this._keyNavCodes={});var prev=lang.hitch(this,"focusPrev");var next=lang.hitch(this,"focusNext");_b2a.forEach(_b32,function(code){_b34[code]=prev;});_b2a.forEach(_b33,function(code){_b34[code]=next;});_b34[keys.HOME]=lang.hitch(this,"focusFirstChild");_b34[keys.END]=lang.hitch(this,"focusLastChild");},startupKeyNavChildren:function(){_b2d.deprecated("startupKeyNavChildren() call no longer needed","","2.0");},startup:function(){this.inherited(arguments);_b2a.forEach(this.getChildren(),lang.hitch(this,"_startupChild"));},addChild:function(_b35,_b36){this.inherited(arguments);this._startupChild(_b35);},_startupChild:function(_b37){_b37.set("tabIndex","-1");},_getFirst:function(){var _b38=this.getChildren();return _b38.length?_b38[0]:null;},_getLast:function(){var _b39=this.getChildren();return _b39.length?_b39[_b39.length-1]:null;},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1));},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),true);},childSelector:function(node){var node=_b2e.byNode(node);return node&&node.getParent()==this;}});});},"dijit/layout/utils":function(){define(["dojo/_base/array","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(_b3a,_b3b,_b3c,_b3d,lang){function _b3e(word){return word.substring(0,1).toUpperCase()+word.substring(1);};function size(_b3f,dim){var _b40=_b3f.resize?_b3f.resize(dim):_b3c.setMarginBox(_b3f.domNode,dim);if(_b40){lang.mixin(_b3f,_b40);}else{lang.mixin(_b3f,_b3c.getMarginBox(_b3f.domNode));lang.mixin(_b3f,dim);}};var _b41={marginBox2contentBox:function(node,mb){var cs=_b3d.getComputedStyle(node);var me=_b3c.getMarginExtents(node,cs);var pb=_b3c.getPadBorderExtents(node,cs);return {l:_b3d.toPixelValue(node,cs.paddingLeft),t:_b3d.toPixelValue(node,cs.paddingTop),w:mb.w-(me.w+pb.w),h:mb.h-(me.h+pb.h)};},layoutChildren:function(_b42,dim,_b43,_b44,_b45){dim=lang.mixin({},dim);_b3b.add(_b42,"dijitLayoutContainer");_b43=_b3a.filter(_b43,function(item){return item.region!="center"&&item.layoutAlign!="client";}).concat(_b3a.filter(_b43,function(item){return item.region=="center"||item.layoutAlign=="client";}));_b3a.forEach(_b43,function(_b46){var elm=_b46.domNode,pos=(_b46.region||_b46.layoutAlign);if(!pos){throw new Error("No region setting for "+_b46.id);}var _b47=elm.style;_b47.left=dim.l+"px";_b47.top=dim.t+"px";_b47.position="absolute";_b3b.add(elm,"dijitAlign"+_b3e(pos));var _b48={};if(_b44&&_b44==_b46.id){_b48[_b46.region=="top"||_b46.region=="bottom"?"h":"w"]=_b45;}if(pos=="leading"){pos=_b46.isLeftToRight()?"left":"right";}if(pos=="trailing"){pos=_b46.isLeftToRight()?"right":"left";}if(pos=="top"||pos=="bottom"){_b48.w=dim.w;size(_b46,_b48);dim.h-=_b46.h;if(pos=="top"){dim.t+=_b46.h;}else{_b47.top=dim.t+dim.h+"px";}}else{if(pos=="left"||pos=="right"){_b48.h=dim.h;size(_b46,_b48);dim.w-=_b46.w;if(pos=="left"){dim.l+=_b46.w;}else{_b47.left=dim.l+dim.w+"px";}}else{if(pos=="client"||pos=="center"){size(_b46,dim);}}}});}};lang.setObject("dijit.layout.utils",_b41);return _b41;});},"dijit/_Contained":function(){define(["dojo/_base/declare","./registry"],function(_b49,_b4a){return _b49("dijit._Contained",null,{_getSibling:function(_b4b){var p=this.getParent();return (p&&p._getSiblingOfChild&&p._getSiblingOfChild(this,_b4b=="previous"?-1:1))||null;},getPreviousSibling:function(){return this._getSibling("previous");},getNextSibling:function(){return this._getSibling("next");},getIndexInParent:function(){var p=this.getParent();if(!p||!p.getIndexOfChild){return -1;}return p.getIndexOfChild(this);}});});},"ibm/tivoli/fwm/mxmap/MaximoIntegration":function(){define(["dojo/main","dijit/main","dojo/_base/declare","ibm/tivoli/fwm/mxmap/_Base"],function(dojo,_b4c,_b4d,_b4e){return _b4d([_b4e],{compId:null,constructor:function(_b4f){dojo.mixin(this,_b4f);this.addSubscription("mxmap_onServerData_"+this.compId,dojo.hitch(this,function(data){this.handleServer(data);}));},resetMaximoTimeout:function(_b50){try{if(!_b50){_b50=false;}resetLogoutTimer(_b50);}catch(e){}},maximoRecordChanged:function(_b51){var _b52=false;if(_b51){var _b53=_b51.mxdata.mboInfo;var _b54=this.mapConf.currentMbo.mxdata.mboInfo;for(var key in _b53){if(!_b53.hasOwnProperty(key)){continue;}var _b55=_b53[key];var _b56=_b54[key];if(_b56==null||_b56!==_b55){_b52=true;}}}return _b52;},handleServer:function(_b57){var _b58=null;try{this.resetMaximoTimeout(true);if(_b57){for(var id in _b57){_b58=_b57[id];switch(_b58.action){case "updatedCurrentRecordLocation":undefined;dojo.publish("onCurrentRecordUpdate_"+this.compId,[_b58.data.currentMbo]);break;case "updatedRecordSetLocation":if(_b58.data.currentMbo){dojo.publish("onCurrentRecordUpdate_"+this.compId,[_b58.data.currentMbo]);if(this.mapConf.provider=="spatial"){if(this.maximoRecordChanged(_b58.data.currentMbo)){dojo.publish("refreshMapListener",[_b58.data.currentMbo]);}dojo.publish("onSketchMboChange",[_b58.data.currentMbo]);}}dojo.publish("onCurrentRecordSetUpdated_"+this.compId,[_b58.data.records]);break;case "addRecordsToLayer":undefined;dojo.publish("addRecordsToLayer_"+this.compId,[_b58.layerName,_b58.data.records,_b58.cleanBeforeAdd]);break;case "removeRecordsFromLayer":undefined;dojo.publish("removeRecordsFromLayer_"+this.compId,[_b58.layerName,_b58.data.records]);break;case "exception":dojo.publish("onServerException_"+this.compId,[_b58.data.failedAction]);console.warn("An exception was thrown from server",_b58.data);break;case "refreshroute":console.warn("refreshroute",_b58);dojo.publish("refreshroute_"+this.compId,[_b58.data]);break;case "refreshdatasource":console.warn("refreshdatasource",_b58);this.refreshDatasource(dojo.hitch(this,function(_b59){this.handleServer(_b59);}),function(){});break;case "noop":sendEvent("NOOP",this.compId,"");break;default:dojo.publish(_b58.action+"_"+this.compId,[_b58.data]);break;}}}}catch(e){if(_b58){console.error("Failed executing server action: ",_b58,e);}else{console.error("Failed executing server actions: ",_b57,e);}}},storeUserLocation:function(_b5a){var _b5b=new Event("storeUserLocation",this.compId,dojo.toJson(_b5a),REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_b5b,"application/json","json",function(){},function(){console.error("failed to save user context.");});},getRouteStops:function(_b5c,_b5d,_b5e,_b5f){if(_b5e==null){_b5e=false;}var _b60=function(data){if(data.error){_b5d(data);}else{if(data.forceUIRefresh==true){data.hasRoute=false;sendEvent("NOOP",this.compId,"");}_b5c(data);}};if(!_b5f){_b5f=false;}var _b61=new Event("getRouteStops",this.compId+"_router",{forceRefresh:_b5e,serverCallback:_b5f},REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_b61,"application/json","json",dojo.hitch(this,_b60),_b5d);},loadMapTipTemplate:function(_b62,_b63,_b64,_b65){var _b66=new Event("loadMapTipTemplate",this.compId,{objectName:_b62.mboName,objectId:_b62.uid.value,mapTipOverrides:_b63},REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_b66,"text/html","text",_b64,_b65);},loadMapTipSummaryTemplate:function(_b67,_b68,_b69,_b6a){var _b6b=new Event("loadMapTipSummaryTemplate",this.compId,{objectName:_b67.mboName,objectId:_b67.uid.value,mapTipOverrides:_b68},REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_b6b,"text/html","text",_b69,_b6a);},loadLinearLayerObjectAttributes:function(_b6c,_b6d,_b6e,_b6f,_b70){var _b71=new Event("loadLinearLayerObjectAttributes",this.compId,{objectName:_b6c,relationship:_b6d,attributes:_b6e},REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_b71,"application/json","json",_b6f,_b70);},loadAttributesFromLinearAttributeTemplate:function(_b72,_b73,_b74,_b75){var _b76=new Event("loadAttributesFromLinearAttributeTemplate",this.compId,{template:_b72,objectName:_b73,},REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_b76,"application/json","json",_b74,_b75);},loadMapTipItems:function(_b77,_b78){var _b79=new Event("loadMenuItems",this.compId,"",REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_b79,"application/json","json",_b77,_b78);},getLinearGraphicsbyWhereClause:function(_b7a,_b7b,_b7c,_b7d){var _b7e={whereClause:_b7a,objectName:_b7b};var _b7f=new Event("getLinearGraphicsbyWhereClause",this.compId,_b7e,REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_b7f,"application/json","json",_b7c,_b7d);},setCurrentRecordLocation:function(_b80,_b81){var _b82={lat:_b80.lat,lng:_b80.lng,formattedaddress:_b80.address,status:_b81,sr:_b80.sr};var _b83=new Event("setCurrentSALocation",this.compId,_b82,REQUESTTYPE_SYNC);queueManager.queueEvent(_b83,"text/xml","xml",processXHR,function(err){});},invokeAction:function(_b84,_b85,_b86){var _b87=new Event("invokeAction","spatialmapdispatcher",_b84,REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_b87,"application/json","json",_b85,_b86);},unlinkFeature:function(_b88,_b89,_b8a){var _b8b={"attributes":(_b88.attributesFieldsName)?_b88.attributesFieldsName:_b88.attributes,"mapServiceUrl":_b89};var _b8c=new Event("unlinkFeature","spatialmapdispatcher",_b8b,REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_b8c,"application/json","json",_b8a,function(err){console.error("error",err);});},getArcGISQueryAttributesFromListTabLinkedMbos:function(_b8d){var _b8e={};var _b8f=new Event("getArcGISQueryAttributesFromListTabLinkedMbos","spatialmapdispatcher",_b8e,REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_b8f,"application/json","json",_b8d,function(err){console.error("error",err);});},updateFieldValue:function(_b90,_b91,_b92){var _b93={maximoReturnAttribute:_b90,maximoObjectFeatureAttributes:maximoObjectFeatureAttributes};sendEvent("updateFieldValue","spatialmapdispatcher",JSON.stringify(_b93));},updateApplicationList:function(_b94,_b95,_b96){var _b97={maximoFieldName:_b94,maximoFieldValues:_b95};sendEvent("updateApplicationList","spatialmapdispatcher",JSON.stringify(_b97));},loadLinearSegments:function(_b98,_b99){var _b9a={linearLayers:[]};for(var key in _b98){if(!_b98.hasOwnProperty(key)){continue;}var obj=_b98[key];_b9a.linearLayers.push({"linearLayer":obj});}var _b9b=new Event("loadLinearSegments","spatialmapdispatcher",_b9a,REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_b9b,"application/json","json",_b99,function(err){console.error("error",err);});},updateApplicationListFromListView:function(_b9c,_b9d,_b9e){var _b9f={maximoReturnAttribute:_b9c,featuresAttributes:_b9d};sendEvent("updateApplicationListFromListView","spatialmapdispatcher",JSON.stringify(_b9f));},updateCurrentMaximoRecord:function(_ba0,_ba1){var _ba2={"attributes":(_ba0.attributesFieldsName)?_ba0.attributesFieldsName:_ba0.attributes,"linkConfiguration":_ba1};sendEvent("updateCurrentMaximoRecord","spatialmapdispatcher",JSON.stringify(_ba2));},renderPage:function(){sendEvent("renderPage","spatialmapdispatcher",null);},setAppToUpdateCurrentMaximoRecord:function(info){sendEvent("setAppToUpdateCurrentMaximoRecord","spatialmapdispatcher",JSON.stringify(info));},isFeatureLinkedToMultipleRecords:function(_ba3,_ba4,_ba5){var _ba6={features:[]};var _ba7=_ba4.mxdata.attributes;_ba3.attributes.layerMapServerUrl=_ba4.layerInfoData[0].url;_ba3.attributes.layerName=_ba7.layerName;_ba3.attributes.layerId=_ba7.layerId;_ba3.attributes.layerGroup=_ba7.layerGroup;if(_ba3.isLinearGraphic==undefined||_ba3.isLinearGraphic==null||_ba3.isLinearGraphic==false){_ba6.features.push({"attributes":_ba3.attributes});}var _ba8=new Event("isFeatureLinkedToMultipleRecords","spatialmapdispatcher",_ba6,REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_ba8,"application/json","json",_ba5,function(err){console.error("error",err);});},updateGeometryData:function(_ba9,_baa){var _bab={esriGeometryJSON:_ba9,};var _bac=new Event("updateGeometryData","spatialmapdispatcher",_bab,REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_bac,"application/json","json",_baa,function(err){console.error("error",err);});},isFeatureLinked:function(_bad,_bae){var _baf={features:[]};for(var i=0;i<_bad.length;i++){var _bb0=_bad[i];if(_bb0.isLinearGraphic==undefined||_bb0.isLinearGraphic==null||_bb0.isLinearGraphic==false){_baf.features.push({"attributes":(_bb0.attributesFieldsName)?_bb0.attributesFieldsName:_bb0.attributes});}}var _bb1=new Event("isFeatureLinked","spatialmapdispatcher",_baf,REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_bb1,"application/json","json",_bae,function(err){console.error("error",err);});},getWhereClause:function(_bb2,_bb3,_bb4){var _bb5={attributes:(_bb2.attributesFieldsName)?_bb2.attributesFieldsName:_bb2.attributes};var _bb6=new Event("getWhereClause","spatialmapdispatcher",_bb5,REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_bb6,"application/json","json",_bb3,_bb4);},checkFeatureToMaximo:function(_bb7,_bb8,_bb9){var _bba={attributes:(_bb7.attributesFieldsName)?_bb7.attributesFieldsName:_bb7.attributes};var _bbb=new Event("checkFeatureToLink","spatialmapdispatcher",_bba,REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_bbb,"application/json","json",_bb8,_bb9);},updateMaximoObject:function(_bbc,_bbd,_bbe){var _bbf={updatedAttributes:(_bbc.attributesFieldsName)?_bbc.attributesFieldsName:_bbc.attributes,originalAttributes:(_bbd.attributesFieldsName)?_bbd.attributesFieldsName:_bbd.attributes,};var _bc0=new Event("updateMaximoObject","spatialmapdispatcher",_bbf,REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_bc0,"application/json","json",_bbe,function(err){console.error("error",err);});},linkFeatureToMaximo:function(_bc1,_bc2,_bc3,_bc4,_bc5,_bc6,_bc7){var _bc8={esriGeometryJSON:_bc2,attributes:(_bc1.attributesFieldsName)?_bc1.attributesFieldsName:_bc1.attributes,unlinkFirst:_bc3,currentFeatureClass:_bc4,currentSystemRecord:_bc5,currentWhereClauses:_bc6};var _bc9=new Event("linkfeatureToMaximo","spatialmapdispatcher",_bc8,REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_bc9,"application/json","json",_bc7,function(err){console.error("error",err);});},createNewSDEMbo:function(_bca,_bcb,_bcc,_bcd,_bce,_bcf,_bd0){var _bd1={layerName:_bca,layerId:_bcb,layerGroup:_bcc,editingObjectGeometryData:_bcd,editingObjectGeometryInfo:_bce,geometryService:_bcf};var _bd2=new Event("createNewSDEMbo","spatialmapdispatcher",_bd1,REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_bd2,"application/json","json",_bd0,function(err){console.error("error",err);});},updateSDEMbo:function(_bd3,_bd4,_bd5,_bd6,_bd7,_bd8){var _bd9={layerName:_bd3,layerId:_bd4,layerGroup:_bd5,objectId:_bd6,updateArray:_bd7};var _bda=new Event("updateSDEMbo","spatialmapdispatcher",_bd9,REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_bda,"application/json","json",_bd8,function(err){console.error("error",err);});},deleteGISFeature:function(_bdb,_bdc,_bdd,_bde){var _bdf={featureClass:_bdb,idFieldName:_bdc,idFieldValue:_bdd};var _be0=new Event("deleteGISFeature","spatialmapdispatcher",_bdf,REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_be0,"application/json","json",_bde,function(err){console.error("error",err);});},deleteLinearLayerSegmentObjects:function(_be1,_be2,_be3,_be4,_be5){var _be6=new Event("deleteLinearLayerSegmentObjects",this.compId,{objectName:_be1,relationship:_be2,attributes:_be3},REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_be6,"application/json","json",_be4,_be5);},saveSketchToMaximo:function(_be7,_be8,_be9){var _bea={arrayToBeSaved:_be7,extent:_be8};var _beb=new Event("saveSketchToMaximo","spatialmapdispatcher",_bea,REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_beb,"application/json","json",_be9,function(err){console.error("Problem with Sketch Tool Function's save Graphics. queue Manager error.",err);});},deleteSketchFromMaximo:function(_bec,_bed){var _bee={sketchToBeDeleted:_bec};var _bef=new Event("deleteSketchFromMaximo","spatialmapdispatcher",_bee,REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_bef,"application/json","json",_bed,function(err){console.error("Problem with Sketch Tool Function's delete Sketchs. queue Manager error.",err);});},loadSketchFromMaximo:function(_bf0){var _bf1={h:1};var _bf2=new Event("loadSketchFromMaximo","spatialmapdispatcher",_bf1,REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_bf2,"application/json","json",_bf0,function(err){console.error("Problem with Sketch Tool Function's load Graphics. queue Manager error.",err);});},saveToolsConfiguration:function(_bf3,_bf4){var _bf5={toolsJson:_bf3};var _bf6=new Event("saveToolsConfiguration","spatialmapdispatcher",_bf5,REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_bf6,"application/json","json",_bf4,function(err){console.error("Problem with saveToolsConfiguration Function. queue Manager error.",err);});},loadToolsConfiguration:function(_bf7){var _bf8=new Event("loadToolsConfiguration","spatialmapdispatcher",{},REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_bf8,"application/json","json",_bf7,function(err){console.error("Problem with loadToolsConfiguration Function. queue Manager error.",err);});},showMessage:function(_bf9,_bfa,_bfb){var _bfc=new Event("showMaxMessage",this.compId,{msgKey:_bfa,msgGroup:_bf9,params:_bfb},REQUESTTYPE_SYNC);queueManager.queueEvent(_bfc,"text/xml","xml",processXHR,function(err){});},showMaximoDialog:function(_bfd,_bfe,_bff,_c00){addCommInput("dialogid",_bfd);if(_bfe&&_bff){addCommInput("objectname",_bfe);addCommInput("objectid",_bff);}if(_c00){addCommInput("relationship",_c00);}dojo.publish("onDialogRequested_"+this.compId,[]);sendEvent("showDialog",this.compId,"");},showQueryUnassignedWorkDialog:function(_c01){if(this.mapConf.provider==="spatial"){document.__dojoToDomId=ibm.tivoli.fwm.mxmap.factory._dojoToDomId;require({map:{"*":{dojo:"dojo",dijit:"dijit",dojox:"dojox"}}},["require"]);}if(_c01){addCommInput("mapbounds_sw_latitudey",_c01.sw.lat);addCommInput("mapbounds_sw_longitudex",_c01.sw.lon);addCommInput("mapbounds_ne_latitudey",_c01.ne.lat);addCommInput("mapbounds_ne_longitudex",_c01.ne.lon);}else{console.warn("No bounds specified for query unassigned work");}this.showMaximoDialog("map_wo_query_unassigned_work",null,null);},showAuditLBSLocationDialog:function(){this.showMaximoDialog("map_labor_crew_query_location_history",null,null);},queryUnassignedWorkDispatcher:function(_c02,_c03,_c04){if(_c02){var _c05=new Event("queryUnassignedWorkDispatcher",this.compId,_c02,REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_c05,"application/json","json",_c03,_c04);}else{console.warn("No queryData specified for query unassigned work");}},refreshQueryUnassignedWork:function(_c06,_c07,_c08,_c09){if(_c06){var _c0a={"bounds":_c06,"queryData":_c07};var _c0b=new Event("queryUnassignedWorkDispatcher",this.compId,_c0a,REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_c0b,"application/json","json",_c08,_c09);}else{console.warn("No bounds specified for query unassigned work");}},getCrewLaborByQueryParams:function(_c0c,_c0d,_c0e){var _c0f=new Event("getCrewLaborByQueryParams",this.compId,_c0e,REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_c0f,"application/json","json",_c0c,_c0d);},getWeatherAlertsByQueryParams:function(_c10,_c11,_c12){var _c13=new Event("getWeatherAlertsByQueryParams",this.compId,_c12,REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_c13,"application/json","json",_c10,_c11);},_refreshDSRunning:false,refreshDatasource:function(_c14,_c15){if(this._refreshDSRunning==true){return;}var _c16=function(_c17){_c14(_c17);if((_c17!=null)&&(_c17!=undefined)){if(_c17.action.data.error){this.showMessage(_c17.action.data.error.group,_c17.action.data.error.key,[_c17.action.data.error.params]);}}this._refreshDSRunning=false;};var _c18=function(){console.error("Failed to refresh marker position");_c15();this._refreshDSRunning=false;};var _c19=new Event("refreshMarkersPositions",this.compId,{},REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_c19,"application/json","json",dojo.hitch(this,_c16),dojo.hitch(this,_c18));},loadSymbologyConfigFile:function(_c1a,_c1b){var _c1c=new Event("loadSymbologyConfig",this.compId,"",REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_c1c,"application/json","json",_c1a,_c1b);},refreshLinearLayers:function(_c1d,_c1e,_c1f){var _c20={"mapMeasureUnit":_c1d};var _c21=new Event("refreshLinearLayers",this.compId,_c20,REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_c21,"application/json","json",_c1e,_c1f);},getAutoLocateLabel:function(_c22){var _c23={};var _c24=new Event("getAutoLocateLabel","spatialmapdispatcher",_c23,REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_c24,"application/json","json",_c22,function(err){console.error("Problem with autolocate label function. queue Manager error.",err);});},isCurrentMboAddressable:function(_c25,_c26){var _c27=new Event("isCurrentMboAddressable",this.compId,{},REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_c27,"application/json","json",_c25,_c26);},isMboFormattedAddressEditable:function(_c28,_c29){var _c2a=new Event("isMboFormattedAddressEditable",this.compId,{},REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_c2a,"application/json","json",_c28,_c29);},unlinkOrphanMaximoRecord:function(_c2b,_c2c,_c2d,_c2e){var _c2f={systemOfRecord:_c2b,featureClass:_c2c};var _c30=new Event("unlinkOrphanMaximoRecord","spatialmapdispatcher",_c2f,REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_c30,"application/json","json",_c2d,_c2e);},generateUpdatedLayerDefinition:function(_c31,_c32,_c33,_c34){var _c35={mapServiceName:_c31,layerIds:_c32};var _c36=new Event("generateUpdatedLayerDefinition","spatialmapdispatcher",_c35,REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_c36,"application/json","json",_c33,_c34);},getWOMultiAssetLocCIRecords:function(_c37,_c38){var _c39=new Event("getWOMultiAssetLocCIRecords","spatialmapdispatcher",{},REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_c39,"application/json","json",_c37,_c38);},getWORelatedTasks:function(_c3a,_c3b){var _c3c=new Event("getWOTaskRecords","spatialmapdispatcher",{},REQUESTTYPE_HIGHASYNC);queueManager.queueEvent(_c3c,"application/json","json",_c3a,_c3b);}});});},"dojox/timing/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang"],function(dojo){dojo.experimental("dojox.timing");dojo.getObject("timing",true,dojox);dojox.timing.Timer=function(_c3d){this.timer=null;this.isRunning=false;this.interval=_c3d;this.onStart=null;this.onStop=null;};dojo.extend(dojox.timing.Timer,{onTick:function(){},setInterval:function(_c3e){if(this.isRunning){window.clearInterval(this.timer);}this.interval=_c3e;if(this.isRunning){this.timer=window.setInterval(dojo.hitch(this,"onTick"),this.interval);}},start:function(){if(typeof this.onStart=="function"){this.onStart();}this.isRunning=true;this.timer=window.setInterval(dojo.hitch(this,"onTick"),this.interval);},stop:function(){if(typeof this.onStop=="function"){this.onStop();}this.isRunning=false;window.clearInterval(this.timer);}});return dojox.timing;});},"ibm/tivoli/fwm/mxmap/actions/Actions":function(){define(["dijit","dojo","dojox","dojo/require!dijit/Menu"],function(_c3f,dojo,_c40){dojo.provide("ibm.tivoli.fwm.mxmap.actions.Actions");dojo.require("dijit.Menu");dojo.declare("ibm.tivoli.fwm.mxmap.actions.Actions",null,{divId:null,map:null,label:null,constructor:function(_c41){dojo.mixin(this,_c41);},execute:function(args){}});});},"dijit/form/CheckBox":function(){define(["require","dojo/_base/declare","dojo/dom-attr","dojo/has","dojo/query","dojo/ready","./ToggleButton","./_CheckBoxMixin","dojo/text!./templates/CheckBox.html","dojo/NodeList-dom","../a11yclick"],function(_c42,_c43,_c44,has,_c45,_c46,_c47,_c48,_c49){if(has("dijit-legacy-requires")){_c46(0,function(){var _c4a=["dijit/form/RadioButton"];_c42(_c4a);});}return _c43("dijit.form.CheckBox",[_c47,_c48],{templateString:_c49,baseClass:"dijitCheckBox",_setValueAttr:function(_c4b,_c4c){if(typeof _c4b=="string"){this.inherited(arguments);_c4b=true;}if(this._created){this.set("checked",_c4b,_c4c);}},_getValueAttr:function(){return this.checked&&this._get("value");},_setIconClassAttr:null,_setNameAttr:"focusNode",postMixInProperties:function(){this.inherited(arguments);this.checkedAttrSetting="";},_fillContent:function(){},_onFocus:function(){if(this.id){_c45("label[for='"+this.id+"']").addClass("dijitFocusedLabel");}this.inherited(arguments);},_onBlur:function(){if(this.id){_c45("label[for='"+this.id+"']").removeClass("dijitFocusedLabel");}this.inherited(arguments);}});});},"dijit/_Container":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(_c4d,_c4e,_c4f,_c50){return _c4e("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);if(!this.containerNode){this.containerNode=this.domNode;}},addChild:function(_c51,_c52){var _c53=this.containerNode;if(_c52>0){_c53=_c53.firstChild;while(_c52>0){if(_c53.nodeType==1){_c52--;}_c53=_c53.nextSibling;}if(_c53){_c52="before";}else{_c53=this.containerNode;_c52="last";}}_c4f.place(_c51.domNode,_c53,_c52);if(this._started&&!_c51._started){_c51.startup();}},removeChild:function(_c54){if(typeof _c54=="number"){_c54=this.getChildren()[_c54];}if(_c54){var node=_c54.domNode;if(node&&node.parentNode){node.parentNode.removeChild(node);}}},hasChildren:function(){return this.getChildren().length>0;},_getSiblingOfChild:function(_c55,dir){var _c56=this.getChildren(),idx=_c4d.indexOf(_c56,_c55);return _c56[idx+dir];},getIndexOfChild:function(_c57){return _c4d.indexOf(this.getChildren(),_c57);}});});},"ibm/tivoli/fwm/mxmap/impl/marker/GmapsMarker":function(){define(["dijit","dojo","dojox","dojo/require!ibm/tivoli/fwm/mxmap/_Marker"],function(_c58,dojo,_c59){dojo.require("ibm.tivoli.fwm.mxmap._Marker");dojo.provide("ibm.tivoli.fwm.mxmap.impl.marker.GmapsMarker");ibm.tivoli.fwm.mxmap.impl.marker.markerZIndex=1000;ibm.tivoli.fwm.mxmap.impl.marker.getNextMarkerZIndex=function(){return ibm.tivoli.fwm.mxmap.impl.marker.markerZIndex++;};dojo.declare("ibm.tivoli.fwm.mxmap.impl.marker.GmapsMarker",ibm.tivoli.fwm.mxmap._Marker,{toProprietary:function(){var _c5a={};var ax=0;var ay=0;if(this.iconAnchor){ax=this.iconAnchor[0];ay=this.iconAnchor[1];}if(!this.iconSize){this.iconSize=[32,32];}var _c5b=(this.attributes["dontDrawAsOverlay"]!=true);var _c5c=new google.maps.Point(ax,ay);if(this.iconUrl){if(_c5b==true){this.draggable=false;var _c5d="";if(document.body.dir=="rtl"){_c5d="/rtl";}_c5a.icon=new google.maps.MarkerImage(dojo.moduleUrl("ibm.tivoli.fwm.mxmap","resources")+_c5d+"/transparent.png",new google.maps.Size(this.iconSize[0],this.iconSize[1]),new google.maps.Point(0,0),_c5c);}else{_c5a.icon=new google.maps.MarkerImage(this.iconUrl,new google.maps.Size(this.iconSize[0],this.iconSize[1]),new google.maps.Point(0,0),_c5c);}if(this.iconShadowUrl){if(this.iconShadowSize){var x=this.iconShadowSize[0];var y=this.iconShadowSize[1];_c5a.shadow=new google.maps.MarkerImage(this.iconShadowUrl,new google.maps.Size(x,y),new google.maps.Point(0,0),_c5c);}else{_c5a.shadow=new google.maps.MarkerImage(this.iconShadowUrl);}}}if(this.draggable){_c5a.draggable=this.draggable;}if(this.imageMap){_c5a.shape={coord:this.imageMap,type:"poly"};}var _c5e=this.location.toProprietary();_c5a.position=_c5e;_c5a.map=this.map;_c5a.zIndex=ibm.tivoli.fwm.mxmap.impl.marker.getNextMarkerZIndex();var _c5f=new google.maps.Marker(_c5a);var me=this;if(_c5b==true){var _c60=new this.map.LabelMarkerOverlay(this.labelText,_c5e,this.map,_c5f,this.iconUrl,this.iconAnchor,this.iconSize);this._labelOverlay=_c60;}if(this.infoBubble){var _c61="click";if(this.hover){_c61="mouseover";}google.maps.event.addListener(_c5f,_c61,function(){_c5f.mxmapMarker.closeBubble();_c5f.mxmapMarker.openBubble();});}if(this.tooltip&&this.tooltip.length>0){google.maps.event.addListener(_c5f,"mouseover",function(a){var map=_c5f.map;var _c62=Math.pow(2,map.getZoom());var nw=new google.maps.LatLng(map.getBounds().getNorthEast().lat(),map.getBounds().getSouthWest().lng());var _c63=map.getProjection().fromLatLngToPoint(nw);var _c64=map.getProjection().fromLatLngToPoint(_c5f.getPosition());var _c65=new google.maps.Point(Math.floor((_c64.x-_c63.x)*_c62),Math.floor((_c64.y-_c63.y)*_c62));_c5f.mxmapMarker.showTooltip(_c65,map.getDiv());});google.maps.event.addListener(_c5f,"mouseout",function(){_c5f.mxmapMarker.hideTooltip();});}if(this.hoverIconUrl){var _c66=new google.maps.Size(this.iconSize[0],this.iconSize[1]);var _c67=new google.maps.Point(0,0);var _c68=new google.maps.MarkerImage(this.hoverIconUrl,_c66,_c67,_c5c);var Icon=new google.maps.MarkerImage(this.iconUrl,_c66,_c67,_c5c);google.maps.event.addListener(_c5f,"mouseover",function(){_c5f.setIcon(_c68);});google.maps.event.addListener(_c5f,"mouseout",function(){_c5f.setIcon(Icon);});}if(this.draggable){google.maps.event.addListener(_c5f,"dragstart",function(arg){_c5f.mxmapMarker.hideTooltip();dojo.publish("startedUserInteractionOnMap_"+me.compId,[{objectSource:me,objectSourceName:"googlev3",eventName:"dragstart"}]);me.fireMarkerEvent(me.MarkerEvents.dragstart,{marker:me,newLocation:{lng:arg.latLng.lng(),lat:arg.latLng.lat()}});});google.maps.event.addListener(_c5f,"drag",function(arg){me.fireMarkerEvent(me.MarkerEvents.drag,{marker:me,newLocation:{lng:arg.latLng.lng(),lat:arg.latLng.lat()}});});google.maps.event.addListener(_c5f,"dragend",function(arg){me.fireMarkerEvent(me.MarkerEvents.dragend,{marker:me,newLocation:{lng:arg.latLng.lng(),lat:arg.latLng.lat()}});dojo.publish("endedUserInteractionOnMap_"+me.compId,[{objectSource:me,objectSourceName:"googlev3",eventName:"dragend"}]);});}google.maps.event.addListener(_c5f,"click",function(){dojo.publish("onMarkerClicked_"+me.compId,[{marker:_c5f.mxmapMarker}]);me.fireMarkerEvent(me.MarkerEvents.click);});var _c69=new google.maps.InfoWindow({content:this.infoBubble});this.proprietary_infowindow=_c69;return _c5f;},openBubble:function(){if(this.onmap==true){var me=this;dojo.publish("startedUserInteractionOnMap_"+me.compId,[{objectSource:me,objectSourceName:"googlev3",eventName:"openBubble"}]);this.hideTooltip();var _c6a=this.proprietary_infowindow;_c6a.setContent(this.infoBubble);google.maps.event.addListenerOnce(_c6a,"closeclick",function(_c6b){dojo.publish("endedUserInteractionOnMap_"+me.compId,[{objectSource:me,objectSourceName:"googlev3",eventName:"closeBubble"}]);});this.fireMarkerEvent(this.MarkerEvents.openInfoBubble,{"marker":this});_c6a.open(this.map,this.proprietary_marker);this.inherited(arguments);}},closeBubble:function(){if(this.hasOwnProperty("proprietary_infowindow")){this.proprietary_infowindow.close();}this.inherited(arguments);},hide:function(){this.hideTooltip();this.proprietary_marker.setOptions({visible:false});},remove:function(){this.hideTooltip();this.proprietary_marker.setMap(null);try{if(this._labelOverlay!=null){this._labelOverlay.setMap(null);this._labelOverlay=null;}}catch(e){console.warn("[GMapsMarker.remove()]",e);}},show:function(){this.proprietary_marker.setOptions({visible:true});if(this._labelOverlay!=null){this._labelOverlay.onAdd();}},_sendCloseBubbleEventIfNecessary:function(){dojo.publish("endedUserInteractionOnMap_"+this.compId,[{objectSource:this,objectSourceName:"googlev3",eventName:"closeBubble"}]);}});});},"dojo/html":function(){define(["./_base/kernel","./_base/lang","./_base/array","./_base/declare","./dom","./dom-construct","./parser"],function(_c6c,lang,_c6d,_c6e,dom,_c6f,_c70){var _c71=0;var html={_secureForInnerHtml:function(cont){return cont.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"");},_emptyNode:_c6f.empty,_setNodeContent:function(node,cont){_c6f.empty(node);if(cont){if(typeof cont=="number"){cont=cont.toString();}if(typeof cont=="string"){cont=_c6f.toDom(cont,node.ownerDocument);}if(!cont.nodeType&&lang.isArrayLike(cont)){for(var _c72=cont.length,i=0;i<cont.length;i=_c72==cont.length?i+1:0){_c6f.place(cont[i],node,"last");}}else{_c6f.place(cont,node,"last");}}return node;},_ContentSetter:_c6e("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:false,extractContent:false,parseContent:false,parserScope:_c6c._scopeName,startup:true,constructor:function(_c73,node){lang.mixin(this,_c73||{});node=this.node=dom.byId(this.node||node);if(!this.id){this.id=["Setter",(node)?node.id||node.tagName:"",_c71++].join("_");}},set:function(cont,_c74){if(undefined!==cont){this.content=cont;}if(typeof cont=="number"){cont=cont.toString();}if(_c74){this._mixin(_c74);}this.onBegin();this.setContent();var ret=this.onEnd();if(ret&&ret.then){return ret;}else{return this.node;}},setContent:function(){var node=this.node;if(!node){throw new Error(this.declaredClass+": setContent given no node");}try{node=html._setNodeContent(node,this.content);}catch(e){var _c75=this.onContentError(e);try{node.innerHTML=_c75;}catch(e){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+e.message,e);}}this.node=node;},empty:function(){if(this.parseDeferred){if(!this.parseDeferred.isResolved()){this.parseDeferred.cancel();}delete this.parseDeferred;}if(this.parseResults&&this.parseResults.length){_c6d.forEach(this.parseResults,function(w){if(w.destroy){w.destroy();}});delete this.parseResults;}_c6f.empty(this.node);},onBegin:function(){var cont=this.content;if(lang.isString(cont)){if(this.cleanContent){cont=html._secureForInnerHtml(cont);}if(this.extractContent){var _c76=cont.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(_c76){cont=_c76[1];}}}this.empty();this.content=cont;return this.node;},onEnd:function(){if(this.parseContent){this._parse();}return this.node;},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content;},onContentError:function(err){return "Error occurred setting content: "+err;},onExecError:function(err){return "Error occurred executing scripts: "+err;},_mixin:function(_c77){var _c78={},key;for(key in _c77){if(key in _c78){continue;}this[key]=_c77[key];}},_parse:function(){var _c79=this.node;try{var _c7a={};_c6d.forEach(["dir","lang","textDir"],function(name){if(this[name]){_c7a[name]=this[name];}},this);var self=this;this.parseDeferred=_c70.parse({rootNode:_c79,noStart:!this.startup,inherited:_c7a,scope:this.parserScope}).then(function(_c7b){return self.parseResults=_c7b;},function(e){self._onError("Content",e,"Error parsing in _ContentSetter#"+self.id);});}catch(e){this._onError("Content",e,"Error parsing in _ContentSetter#"+this.id);}},_onError:function(type,err,_c7c){var _c7d=this["on"+type+"Error"].call(this,err);if(_c7c){console.error(_c7c,err);}else{if(_c7d){html._setNodeContent(this.node,_c7d,true);}}}}),set:function(node,cont,_c7e){if(undefined==cont){console.warn("dojo.html.set: no cont argument provided, using empty string");cont="";}if(typeof cont=="number"){cont=cont.toString();}if(!_c7e){return html._setNodeContent(node,cont,true);}else{var op=new html._ContentSetter(lang.mixin(_c7e,{content:cont,node:node}));return op.set();}}};lang.setObject("dojo.html",html);return html;});},"ibm/tivoli/fwm/mxmap/Map":function(){define(["dojo/main","dijit/main","dojox/main","dojo/on","dojo/_base/declare","ibm/tivoli/fwm/mxmap/_MapProvider","ibm/tivoli/fwm/mxmap/ContextMenu","ibm/tivoli/fwm/mxmap/CurrentMXRecordSet","ibm/tivoli/fwm/mxmap/MXRecord","ibm/tivoli/fwm/mxmap/MaximoIntegration","ibm/tivoli/fwm/mxmap/helpers/GeocoderHelper","ibm/tivoli/fwm/mxmap/UserSessionManager","ibm/tivoli/fwm/mxmap/MapTipsManager","ibm/tivoli/fwm/mxmap/helpers/MapMarkersRefresher","ibm/tivoli/fwm/mxmap/toolbar/ToolbarManager","ibm/tivoli/fwm/mxmap/CurrentMXRecManager","ibm/tivoli/fwm/mxmap/helpers/MapFullScreenHelper","ibm/tivoli/fwm/mxmap/layers/manager/LayersManager","ibm/tivoli/fwm/mxmap/symbology/SymbologyManager","ibm/tivoli/fwm/mxmap/ImageLibraryManager","dijit/Tooltip","dojo/topic","dojo/dom-style","dojo/dom-construct","dojo/dom-class","ibm/tivoli/fwm/mxmap/MapZIndexHandler"],function(dojo,_c7f,_c80,on,_c81,_c82,_c83,_c84,_c85,_c86,_c87,_c88,_c89,_c8a,_c8b,_c8c,_c8d,_c8e,_c8f,_c90,_c91,_c92,_c93,_c94,_c95,_c96){ibm.tivoli.fwm.mxmap.WarningCodes={NO_LBS_LOCATION_FOUND:"NO_LBS_LOCATION_FOUND"};return _c81(_c82,{events:{mapLoaded:"mxmap.mapLoaded"},maptraction:null,_actionsAreEnabled:true,routeManager:null,divId:null,height:null,width:null,heightPx:null,widthPx:null,compId:null,mapConf:null,routeConf:null,providerName:null,isMobile:false,router:null,isFullScreen:false,customInitialMapOptions:{},fullScreenHelper:null,geocoder:null,maximo:null,currentRecordSetControl:null,userSessionManager:null,initialized:false,markerRefresher:null,toolbar:null,currentRecordMgr:null,maptips:null,contextMenu:null,layersManager:null,symbologyManager:null,_executingFullScreen:null,defaultRouteColor:"#ffffff",dispatcher:null,showDelayTimeTooltip:null,toolbarStartupHandle:null,DEFAULT_INITIAL_ZOOM:3,mapZIndexHandler:null,_providerOK:null,MAP_TAB_PARENT_ID:"SystemNavAppContent-sc_div",NAV_LIST_COLLAPSE_ID:"nav_list_collapse",_isLayoutReady:null,LATLONGWKID:4326,getId:function(){return this.compId;},constructor:function(_c97){this._datasources=[];this.mapZIndexHandler=new _c96({map:this});},getMaximo:function(){return this.maximo;},getSessionData:function(){if(this.mapConf){return this.mapConf.sessionData;}return {};},_getDefaultInitialLocation:function(){return {lat:0,lng:0,level:3};},_getInitialLocation:function(){var _c98=this.mapConf.initialLocation;var loc=this._getDefaultInitialLocation();if(this.userSessionManager!=null&&this.userSessionManager.hasLastUserLocation()){_c98=this.userSessionManager.getLastUserLocation();}if(_c98&&_c98.lat&&_c98.lng){loc.lat=_c98.lat;loc.lng=_c98.lng;}if(_c98&&_c98.level){loc.level=_c98.level;}return loc;},getMapTipsManager:function(){return this.maptips;},_afterInit:function(_c99,_c9a){this.mapZIndexHandler.postCreate();if(_c99.isTesting==true){this.maximo=_c99.maximoImpl;}else{if(!this.maximo){this.maximo=new _c86(_c99);}}this.maptips=new _c89({maximo:this.maximo});if(this.allowsTrafficLayer()==true){var _c9b={layerName:ibm.tivoli.fwm.i18n.getMaxMsg("map","traffic"),layerId:"traffic",map:this};var _c9c=dojo.require("ibm.tivoli.fwm.mxmap.layers.TrafficLayer");var _c9d=new _c9c(_c9b);this.layersManager.addLayer(_c9d,false);}if(this.mapConf.inputConfs.routedatasrc!=null){this.createRouteLayer();}var _c9e=this.mapConf.inputConfs.refreshmapinterval;if(_c9e!=null&&_c9e>0){this.markerRefresher=new _c8a({map:this,maximo:this.maximo,interval:_c9e});}var me=this;if(me._sectionExpanded){me._showConfErrors();}this.geocoder=new _c87({map:me,key:this.mapConf.key});this.setMapType(this.MapType.ROAD);if(this.mapConf.inputConfs.toolbarenabled==1||this.mapConf.inputConfs.toolbarenabled==true||this.mapConf.inputConfs.toolbarenabled=="true"){if(dojo.config.fwm.debug==true){}var _c9f=[];if(this.mapConf.inputConfs.toolitems){_c9f=dojo.fromJson(this.mapConf.inputConfs.toolitems);}this.toolbar=new _c8b({gisdata:this.mapConf.gisdata,mxdata:this.mapConf.mxdata,items:_c9f,map:me});if(this.mapConf.provider=="spatial"){this.toolbarStartupHandle=dojo.subscribe("startupToolbarMapInit",dojo.hitch(this,function(data){this.toolbar.toolbarWidth=this.width;this._startToolbar();dojo.unsubscribe(this.toolbarStartupHandle);}));}else{this._startToolbar();}}else{if(this.mapConf.provider=="spatial"){this.toolbarStartupHandle=dojo.subscribe("startupToolbarMapInit",dojo.hitch(this,function(data){this.hideLoadingImg();dojo.unsubscribe(this.toolbarStartupHandle);}));}}this.isFullScreen=(this.mapConf.inputConfs.fullscreenmode=="true");this.fullScreenHelper=new _c8d({map:me,mapToolbar:me.toolbar,mapDivElement:dojo.byId(me.divId),mapDivWidth:me.widthPx,mapDivHeight:me.heightPx});if(!this.isLoaded()){this.addOnload(dojo.hitch(this,this._completeInitAfterMapLoads));}else{this._completeInitAfterMapLoads();}if(this.mapConf.isInMapManager){var _ca0=dojo.hitch(this,this.saveExtent);this.addMapEventHandler("changeZoom",_ca0);this.addMapEventHandler("endPan",_ca0);}else{if(!this.mapConf.isOpenMap&&this.mapConf.currentMbo){this.mapConf.inputConfs.defaultsymbology=dojo.fromJson(this.mapConf.inputConfs.defaultsymbology);if(!this.symbologyManager){this.symbologyManager=new _c8f({map:this,defaultSymbologyConfig:this.mapConf.inputConfs.defaultsymbology});}else{this.symbologyManager.defaultSymbologyConfig=this.mapConf.inputConfs.defaultsymbology;}this.labelConfs=this.getLabelConfs();if(this.mapConf.currentMbo.gisdata){var _ca1=this.mapConf.currentMbo.gisdata.address;if(_ca1){this.createMapLabel("address");this.updateMapAddressLabel(_ca1);}}if(!this.mboAttributesLabel){this.createMapLabel("attributes");}this.updateMboAttributesLabelContent();var _ca2=this.mapConf.currentMbo.mxdata.attributes.description_longdescription;var _ca3=_c7f.byId("tooltipAttributesLabel");if(_ca3){_ca3.destroyRecursive(true);}this.longDescriptionToolTip=new _c91({id:"tooltipAttributesLabel",connectId:this.mboAttributesLabel,label:_ca2,showDelay:this.showDelayTimeTooltip});dojo.subscribe("onCurrentRecordUpdate_"+this.getId(),dojo.hitch(this,function(data){var _ca4;if(data&&data.gisdata){_ca4=data.gisdata.address;}if(_ca4){this.updateMapAddressLabel(_ca4);}else{this.hideMapAddressLabel();}if(data&&data.mxdata){this.updateMboAttributesLabelContent(data.mxdata);this.updateLongDescToolTip(data.mxdata);}}));}}this.endPanMapEventHandler=this.addMapEventHandler("endPan",dojo.hitch(this,function(){this.maximo.resetMaximoTimeout(false);}));},convertPoint:function(x,y,_ca5,_ca6){var _ca7=new esri.geometry.Point(x,y,new esri.SpatialReference({wkid:_ca5}));var _ca8=esri.geometry.project(_ca7,new esri.SpatialReference({wkid:_ca6}));return {x:_ca8.x,y:_ca8.y};},convertXYToLongLat:function(x,y,_ca9){return this.convertPoint(x,y,_ca9,this.LATLONGWKID);},getMapWKID:function(){if(this.mapConf.provider!=="spatial"){return this.LATLONGWKID;}if(!this.map||!this.map.spatialReference){return null;}return this.map.spatialReference.wkid;},saveExtent:function(_caa,args){var _cab=this.getMapWKID();var _cac={lat:this.getCenter().lat,lng:this.getCenter().lng,level:this.getZoom(),spatialReference:_cab};if(this.selectionTool){_cac.geometry=this.selectionTool.geometrySelected;_cac.lng=this.selectionTool.geometryCentroid.x;_cac.lat=this.selectionTool.geometryCentroid.y;}else{var _cad=this.map.extent;if(_cad!=undefined&&_cad!=null){_cac.xmin=_cad.xmin;_cac.ymin=_cad.ymin;_cac.xmax=_cad.xmax;_cac.ymax=_cad.ymax;}}this.storeUserLocation(_cac);},storeUserLocation:function(_cae){var _caf=this.mapConf&&this.mapConf.isCoordinatesLatLong;if(_caf){this.convertLocInfoToLatLong(_cae);}this.getMaximo().storeUserLocation(_cae);},convertLocInfoToLatLong:function(_cb0){var _cb1=this.getMapWKID();var _cb2=dojo.hitch(this,this.convertXYToLongLat);if(_cb1===this.LATLONGWKID){return;}function _cb3(x,y){if(_cb0[x]===undefined||_cb0[y]===undefined){return;}var _cb4=_cb2(_cb0[x],_cb0[y],_cb1);_cb0[x]=_cb4.x;_cb0[y]=_cb4.y;};_cb3("lng","lat");_cb3("xmin","ymin");_cb3("xmax","ymax");_cb0.spatialReference=this.LATLONGWKID;},createMap:function(_cb5){if(_cb5.compId.indexOf("open_map")>0){_cb5.mapConf.isOpenMap=true;}else{_cb5.mapConf.isOpenMap=false;}this.refreshListener=[];this.compId=_cb5.compId;this._sectionExpanded=_cb5.isInExpanded;try{if(this.initialized===true){console.warn("already created!");return;}if(_cb5.isInExpanded==false){this.disableActions();}dojo.mixin(this,_cb5);var _cb6=dojo.byId(this.divId);this.userSessionManager=new _c88({map:this,persistence:this.mapConf.inputConfs.contextpersistent});var _cb7=this.getInitOptions();if(this.isMobile==true){dojo.mixin(_cb7,{pan:true,zoom:"small",scale:true,enableScrollWheelZoom:true,map_type:true});}else{dojo.mixin(_cb7,{pan:true,zoom:"large",scale:true,enableScrollWheelZoom:true,map_type:true});}function _cb8(_cb9){var _cba=_cb9.mapConf;var _cbb=_cba&&_cba.provider==="spatial";function _cbc(_cbd){if(_cba){var _cbe=_cbd.mapConf.toolsPersistenceEnable;var _cbf=_cbd.mapConf.loadedToolsConfiguration;if(_cbe&&_cbf){return _cbf;}}};var _cc0=_cbc(_cb9);if(_cc0){return _cc0;}if(_cbb){return {};}return undefined;};this.toolsJson=_cb8(_cb5);this.currentRecordMgr=new _c8c({mbo:this.mapConf.currentMbo,map:this,draggable:(this.isMapViewOnly()==false),markerImgUrl:this.mapConf.inputConfs.markerimgurl});this.symbologyManager=new _c8f({map:this,defaultSymbologyConfig:this.mapConf.inputConfs.defaultsymbology});this.layersManager=new _c8e({symbManager:this.symbologyManager,layerType:ibm.tivoli.fwm.mxmap.layers.LayerType.LAYER,map:this});this.currentRecordSetControl=new _c84({records:this.mapConf.records,markerImgUrl:this.mapConf.inputConfs.markerimgurl,map:this});this.showDelayTimeTooltip=this.mapConf.tooltipDelayTime;var _cc1=this;this.adjustMapSize();this.resizeInterval=setInterval(dojo.hitch(this,function(){if(this._getIsLayoutReady()){clearInterval(this.resizeInterval);this._createScroolbarsObserver();this._resize();}}),50);this.navListCollapse=dojo.byId(this.NAV_LIST_COLLAPSE_ID);if(this.navListCollapse){this.onNavListCollapseClick=on(this.navListCollapse,"click",dojo.hitch(this,function(){setTimeout(dojo.hitch(this,function(){this._resize();setTimeout(dojo.hitch(this,function(){this._resize();}),100);}),250);}));}if(this.mapConf.provider=="spatial"){this.init(_cb6,_cb7).then(dojo.hitch(this,function(){this._providerOK=true;this._afterInit(_cb5,_cb6);}));}else{this.init(_cb6,_cb7);this._providerOK=true;this._afterInit(_cb5,_cb6);}}catch(e){console.error("Error in map creation",e,dojo.toJson(e));sendEvent("showErrors",_cb5.compId,"mapcreationerror");}},adjustMapSize:function(){var _cc2=document.getElementsByClassName("tabBodyTableStretch");if(_cc2.length>0){var _cc3=_cc2[0];dojo.setStyle(_cc3,"border-spacing","0px");}},centerAndZoomMap:function(){if(this.routerManager!=null&&this.routeConf.hasRoute==true){return;}var _cc4=this._getInitialLocation();if(this.mapConf.zoomToDataInput==true){if(this.currentRecordSetControl.isEmpty()==true&&this.currentRecordMgr.hasAnyCoordinates()!=true){if(!this.toolsJson||this.toolsJson.saveMapExtent=="0"){this._setDefaultLocation(_cc4);}}else{if(this.currentRecordMgr.hasAnyCoordinates()==true){this._zoomToCurrentMboRec(_cc4);}else{this.zoomToMbos(this.currentRecordSetControl.mboInfoArray);}}}else{if(!this.toolsJson||this.toolsJson.saveMapExtent=="0"){this._setDefaultLocation(_cc4);}}},_zoomToCurrentMboRec:function(_cc5){this.currentRecordMgr.centerAndZoom(_cc5.level);},_fixMapConfLocation:function(_cc6){var _cc7=this.getMapWKID();if(!_cc6.wkid){_cc6.wkid=this.mapConf.isCoordinatesLatLong?this.LATLONGWKID:_cc7;}if(_cc6.wkid!==_cc7){var lng=_cc6.lng;var lat=_cc6.lat;var _cc8=this.convertPoint(lng,lat,_cc6.wkid,_cc7);_cc6.lng=_cc8.x;_cc6.lat=_cc8.y;_cc6.wkid=_cc7;}},_completeInitAfterMapLoads:function(){this._checkMapLoadedCorrectly();if(dojo.config.fwm.debug==true){}if(this.mapConf.initialLocation){this._fixMapConfLocation(this.mapConf.initialLocation);}if(this.mapConf.mapFullExtent){this._fixMapConfLocation(this.mapConf.mapFullExtent);}if(this.mapConf.action){switch(this.mapConf.action){case "showMBOLocation":if(dojo.config.fwm.debug==true){}this.currentRecordSetControl.showMXRecordsOnMap();var _cc9=this._getMultiMarkerInfoUsingGisData(this.currentRecordMgr.mbo);if(this.mapConf.provider!="gmaps"||!_cc9){if(this.currentRecordMgr.hasAnyCoordinates()){this.currentRecordMgr.showCurrentRecord(true);}}else{if(this.mapConf.provider=="gmaps"&&_cc9){this.currentRecordMgr.isMboOnMap=true;}}if(this.mapConf.provider=="spatial"){if(this.centerWithNoSpatialReference){this.centerAndZoomMap();}else{var _cca=this._getInitialLocation();this._setDefaultLocation(_cca);}}else{this.centerAndZoomMap();}break;case "noAction":var _cca=this._getInitialLocation();this._setDefaultLocation(_cca);break;default:console.error("[Map] Unknown initial action",this.mapConf.action);break;}}dojo.connect(window,"onresize",this,this._resize);if(this.isMobile==true){var res=function(){var rr=function(){this._resize();};setTimeout(dojo.hitch(this,rr),200);};dojo.connect(window,"onorientationchange",this,res);}this.addSubscription("mxmap_section_expanded_"+this.getId(),dojo.hitch(this,this._mapSectionExpanded));if(this.isMapViewOnly()==false){this.contextMenu=new _c83({divId:this.divId,compId:this.getId(),map:this});require(["ibm/tivoli/fwm/mxmap/actions/SetRecordLocation"],dojo.hitch(this,function(_ccb){var _ccc={map:this,compId:this.getId(),label:"Set record location"};this.contextMenu.addChild(new _ccb(_ccc));this.contextMenu.serverUpdated(this.currentRecordMgr.mboInfo);}));}if(this.markerRefresher){this.markerRefresher.start();}if(this.routeConf){var _ccd={routeUrl:this.mapConf.route,map:this,provider:this.mapConf.provider,routeConf:this.routeConf};dojo.require("ibm.tivoli.fwm.mxmap.routing.MultipleRoutesManager");this.routeManager=new ibm.tivoli.fwm.mxmap.routing.MultipleRoutesManager(_ccd);if(this._sectionExpanded){this._showRouteConfErrors();}else{if(this.routeConf.hasRoute==true){var _cce=this.routeConf.showdirectionsonload;this.refreshRoute(true,_cce);}}var fctR=function(){this.refreshRoute(true,false,true);};this.addSubscription("refreshroute_"+this.getId(),dojo.hitch(this,fctR));}this.initialized=true;window.dojo.publish(this.events.mapLoaded,[this,this.getId(),this]);if(this.mapConf.provider=="spatial"){dojo.publish(this.events.mapLoaded,[this,this.getId(),this]);}var _ccf=this.mapConf.SPATIAL&&this.mapConf.SPATIAL.webMap&&this.mapConf.SPATIAL.webMap.webMapDefined;if((this.mapConf.maplinearConf&&this.mapConf.maplinearConf.layersLenght==0)&&(_ccf==false)){dojo.publish("startupToolbarMapInit",[]);}if(this.isMobile==true){var _cd0=function(){if(this.fullScreenHelper._fullScreenOn==true){this.fullScreenOff();this._mustResetFullScreen=true;}else{this._mustResetFullScreen=false;}};var _cd1=function(){if(this._mustResetFullScreen==true){this.fullScreenOn();this._mustResetFullScreen=false;}};this.addSubscription("onDialogRequested_"+this.getId(),dojo.hitch(this,_cd0));this.addSubscription("onDialogClosed_"+this.getId(),dojo.hitch(this,_cd1));}if(this.mapConf.provider!="spatial"){this._resize();}},getMapConfiguration:function(){return this.mapConf;},getSymbologyManager:function(){return this.symbologyManager;},_routeRefreshRunning:false,refreshRoute:function(_cd2,_cd3,_cd4,_cd5,_cd6,_cd7){if(this._actionsAreEnabled==false){return;}if(this.routeManager){if(this._routeRefreshRunning==true){console.warn("Route is already being refreshed");return;}this._routeRefreshRunning=true;var fct=function(data){this.routeManager.clearAll();if(data.hasRoute==true){var _cd8=dojo.hitch(this,function(){this._routeRefreshRunning=false;if(_cd6){_cd6(this.routeManager);}});if(_cd3=="true"){_cd8=dojo.hitch(this,function(){dojo.publish("showItinerary_"+this.getId());this._routeRefreshRunning=false;});}var _cd9=dojo.hitch(this,function(_cda,_cdb){this._routeRefreshRunning=false;if(_cd7){_cd7(_cda,_cdb);}else{this.routeManager.routingError(_cda,_cdb);}});this.routeManager.createRoute(data.stops,this.routeConf,_cd8,_cd9,_cd5);}else{this._routeRefreshRunning=false;if(_cd6){_cd6();}}};var _cdc=function(data){console.warn("[Map] Error refreshing route",data);this._routeRefreshRunning=false;if(_cd7){_cd7(data);}else{if(data.error){this.maximo.showMessage(data.error.group,data.error.key,[data.error.params]);}else{this.maximo.showMessage("mapserver","route_unknown_failure",[data]);}}};this.maximo.getRouteStops(dojo.hitch(this,fct),dojo.hitch(this,_cdc),_cd2,_cd4);}else{console.warn("[Map] No route manager on map - could not refresh route.",this.compId);}},refreshDatasource:function(_cdd,_cde){if(this._actionsAreEnabled==false){return;}var _cdf=dojo.hitch(this,function(_ce0){var _ce1=true;var _ce2=null;if(_ce0!=null&&_ce0!=undefined){if(_ce0.action.data.currentMbo){this.currentRecordMgr.serverUpdated(_ce0.action.data.currentMbo,_ce1);_ce2=this.currentRecordMgr;}else{this.currentRecordSetControl.updateRecordSetAndRefresh(_ce0.action.data.records,_ce1);_ce2=this.currentRecordSetControl;}}if(_cdd){_cdd(_ce2);}});var _ce3=dojo.hitch(this,function(){if(_cde){_cde(response);}});this.maximo.refreshDatasource(_cdf,_ce3);},_datasources:[],registerDatasourceRefresh:function(_ce4){this._datasources.push(_ce4);},_refreshEntireMapRunning:null,clearMarkerLayer:function(){},refreshMap:function(_ce5){if(this._actionsAreEnabled==false){return;}if(this._refreshEntireMapRunning==true){console.warn("[Map] refresh going on, ignoring second request");return;}this._refreshEntireMapRunning=true;this.clearMarkerLayer();var _ce6=null;var _ce7=dojo.hitch(this,function(_ce8){var i=-1;var _ce9=true;if(_ce5&&_ce5.zoom==false){_ce9=false;}var fct=dojo.hitch(this,function(_cea){i++;if(_cea){_ce6=_cea;}if(i<this._datasources.length){this._datasources[i](fct,null,!_ce9);}else{if(_ce6!=null&&_ce9){_ce6.centerAndZoom();if(_ce6.getWarning!=undefined){var _ceb=_ce6.getWarning();if(_ceb){this.showWarning(_ceb);}}}if(this.mapConf.currentMbo!=null&&this.mapConf.currentMbo.gisdata!=null&&this.mapConf.currentMbo.gisdata.PLUSSISGIS==false){var _cec=[];var _ced=this.map.graphicsLayerIds;dojo.forEach(_ced,dojo.hitch(this,function(_cee,i){var _cef=this.map.getLayer(_cee);if(_cef&&_cef.isLinear){_cec.push(_cee);}}));if(_cec.length==0){dojo.publish("refreshMapTools",[]);}else{var _cf0=this.map.on("layer-remove",dojo.hitch(this,function(_cf1){if(_cf1.layer){var _cf2=_cf1.layer.id;var _cf3=_cec.indexOf(_cf2);if(_cf3>-1){_cec.splice(_cf3,1);}if(_cec.length==0){_cf0.remove();dojo.publish("refreshMapTools",[]);}}}));var _cf4=dojo.clone(_cec);dojo.forEach(_cf4,dojo.hitch(this,function(_cf5,i){if(_cf5!=undefined&&_cf5!=null){var _cf6=this.map.getLayer(_cf5);this.map.removeLayer(_cf6);}}));}}this._refreshEntireMapRunning=false;dojo.publish("onMapRefresh_"+this.getId(),[_ce5]);}});fct(_ce8);});if(this._datasources.length>0&&(this.mapConf.inputConfs.datasrc=="MAINRECORD"&&this.currentRecordMgr.hasAnyCoordinates()==false)||this.mapConf.inputConfs.datasrc==null||this.mapConf.inputConfs.datasrc.length==0){_ce7();}else{var _cf7=dojo.hitch(this,function(_cf8){_ce6=_cf8;var _cf9=dojo.hitch(this,function(_cfa,_cfb){if(_ce5&&_ce5.automatic==false){this.routeManager.routingError(_cfa,_cfb);}_ce7();});this.refreshRoute(true,false,false,true,_ce7,_cf9);});this.refreshDatasource(_cf7);}},setRecordLocation:function(){_c7f.popup.close(this.contextMenu);},clearMarkers:function(){this.removeAllMarkers();},getMultipleRoutesManager:function(){return this.routeManager;},getInitOptions:function(){var _cfc=this._getInitOptions();var _cfd=this._getCustomInitOptions(this.mapConf.mapoptions);for(var _cfe in _cfd){if(_cfd.hasOwnProperty(_cfe)){var _cff=_cfd[_cfe];_cfc[_cfe]=_cff;}}return _cfc;},_getCustomInitOptions:function(){throw "Cannot find custom init options";},_getInitOptions:function(){console.warn("No implementation found");return {};},getGeoCoderConf:function(){return {};},_setLocation:function(lat,lng,_d00){var _d01=this.latLng(lat,lng);this.setCenterAndZoom(_d01,_d00);},_setDefaultLocation:function(_d02){if(_d02&&_d02.lat&&_d02.lng){var _d03=this.latLng(_d02.lat,_d02.lng);this.setCenterAndZoom(_d03,_d02.level);}else{this.setCenterAndZoom(this.latLng(0,0),this.DEFAULT_INITIAL_ZOOM);}},_resize:function(){if(!this._getIsLayoutReady()){return;}var _d04=dojo.byId(this.divId);if(!_d04){if(dojo.config.fwm.debug){}return;}var h=this.height;var w=this.width;if(!this.height){h="100%";}if(!this.width){w="100%";}if((typeof h.substr!="undefined")&&(h.substr(h.length-1,1)=="%")){if(!this.mapConf.isOpenMap){h=this._getHeightInPixels(h,_d04);if(h<=0){h=200;}}else{h=this._getHeightInPixels(h,_d04)*0.7;if(h<=0){h=200;}var _d05=dojo.byId("pluss_open_map-dialog_inner");_c93.set(_d05,"top","80px");}}var _d06=w;var _d07=h;if(typeof h=="string"||h instanceof String){if((h.indexOf("px")<0)&&(h.indexOf("%")<0)){_d07=h+"px";}}else{_d07=h+"px";}if(typeof w=="string"||w instanceof String){if((w.indexOf("px")<0)&&(w.indexOf("%")<0)){_d06=w+"px";}}else{_d06=w+"px";}_c93.set(_d04,"width",_d06);_c93.set(_d04,"height",_d07);if(this.toolbar){this.toolbar.updateToolbarWidth(w);}this.heightPx=parseInt((""+h).match(/\d+/)||0);this.widthPx=this._getWidthInPixels(w);if(this._providerOK){this.resizeTo(w,h,this.widthPx,this.heightPx);if(this.fullScreenHelper){this.fullScreenHelper.updateMapDimensions(w,h);}}},_getHeightInPixels:function(_d08,_d09){var h=_d08.substr(0,_d08.length-1);var _d0a=this._getMapParentHeight();var _d0b=parseInt(_d0a-_d09.offsetTop);var pct=parseInt(h);h=(_d0b*(pct/100));if(!dojo.isWebKit){h-=1;}return h;},_getWidthInPixels:function(w){if(w.substr(w.length-1,1)=="%"){var _d0c=dojo.byId(this.divId);var _d0d=w.substr(0,w.length-1);var _d0e=parseInt(dojo.window.getBox(dojo.doc).w-this._getMapOffsetLeft());var _d0f=parseInt(_d0d);var _d10=(_d0e*(_d0f/100));_d10-=15;return parseInt((""+_d10).match(/\d+/)||0);}else{return parseInt((""+w).match(/\d+/)||0);}},getCurrentRecordSetControl:function(){return this.currentRecordSetControl;},destroyRecursive:function(){if(this.longDescriptionToolTip){this.longDescriptionToolTip.destroyRecursive();}if(this.toolbarStartupHandle){dojo.unsubscribe(this.toolbarStartupHandle);}this.userSessionManager.onMapExit();if(this.markerRefresher){this.markerRefresher.destroyRecursive();this.markerRefresher=null;}if(this.routeManager){this.routeManager.destroyRecursive();}if(this.isProviderInitialized()){this.destroyMap();}if(this.maximo){this.maximo.destroyRecursive();}if(this.geocoder){this.geocoder.destroyRecursive();}if(this.currentRecordSetControl){this.currentRecordSetControl.destroyRecursive();}if(this.currentRecordMgr){this.currentRecordMgr.destroyRecursive();}if(this.contextMenu){this.contextMenu.destroyRecursive();}if(this.maptips){this.maptips.destroyRecursive();}if(this.toolbar){this.toolbar.destroyRecursive();}if(this.fullScreenHelper){this.fullScreenHelper.destroyRecursive();}if(this.layersManager){this.layersManager.destroyRecursive();}if(this.dispatcher){this.dispatcher.destroyRecursive();}if(this.mapZIndexHandler){this.mapZIndexHandler.destroy();}this._isLayoutReady=null;this._providerOK=null;if(this.onNavListCollapseClick){this.onNavListCollapseClick.remove();}if(this.resizeInterval){clearInterval(this.resizeInterval);}if(this.scrollbarsObserver){this.scrollbarsObserver.disconnect();this.scrollbarsObserver=null;}this.inherited(arguments);},destroyMap:function(){throw "To be implemented by provider";},_resetExecutingFullscreen:function(){this._executingFullScreen=false;},fullScreenOn:function(){this._executingFullScreen=true;setTimeout(dojo.hitch(this,this._resetExecutingFullscreen),2000);this.fullScreenHelper.fullScreenModeOn();this.map.isFullScreen=true;},fullScreenOff:function(){this._executingFullScreen=true;setTimeout(dojo.hitch(this,this._resetExecutingFullscreen),2000);this.fullScreenHelper.fullScreenModeOff();this.map.isFullScreen=false;},isExecutingFullScreen:function(){return (this._executingFullScreen==true);},getWidthInPixels:function(){var w=this.width;if(!this.width){w="100%";}this.widthPx=this._getWidthInPixels(w);return this.widthPx;},getHeightInPixels:function(){return this.heightPx;},failedToGetLocation:function(){var _d11=this.getMaximo();var _d12=ibm.tivoli.fwm.mxmap.geolocation.MyCurrentLocation.getMyCurrentLocationInstance();switch(_d12.getStatus()){case ibm.tivoli.fwm.mxmap.geolocation.GeoLocationStatus.PERMISSION_DENIED:_d11.showMessage("map","curr_loc_perm_denied");break;case ibm.tivoli.fwm.mxmap.geolocation.GeoLocationStatus.TIMEOUT:_d11.showMessage("map","curr_loc_timeout");break;case ibm.tivoli.fwm.mxmap.geolocation.GeoLocationStatus.POSITION_UNAVAILABLE:_d11.showMessage("map","curr_loc_position_unavailable");break;case ibm.tivoli.fwm.mxmap.geolocation.GeoLocationStatus.GEOLOCATION_NOT_SUPPORTED:_d11.showMessage("map","curr_loc_not_supported");break;default:_d11.showMessage("mapserver","current_loc_failure",[error.code]);}},failedToGetLocationStatusMessages:function(){var _d13=this.getMaximo();var _d14=ibm.tivoli.fwm.mxmap.geolocation.MyCurrentLocation.getMyCurrentLocationInstance();switch(_d14.getStatus()){case ibm.tivoli.fwm.mxmap.geolocation.GeoLocationStatus.PERMISSION_DENIED:_d13.showMessage("map","curr_loc_perm_denied_statusmsg");break;case ibm.tivoli.fwm.mxmap.geolocation.GeoLocationStatus.TIMEOUT:_d13.showMessage("map","curr_loc_timeout_statusmsg");break;case ibm.tivoli.fwm.mxmap.geolocation.GeoLocationStatus.POSITION_UNAVAILABLE:_d13.showMessage("map","curr_loc_position_unavailable_statusmsg");break;case ibm.tivoli.fwm.mxmap.geolocation.GeoLocationStatus.GEOLOCATION_NOT_SUPPORTED:_d13.showMessage("map","curr_loc_not_supported_statusmsg");break;default:_d13.showMessage("mapserver","current_loc_failure",[error.code]);}},getLayersManager:function(){return this.layersManager;},_checkMapLoadedCorrectly:function(){},handlerMapping:{"onMoveEnd":"dragend"},centerOnMbo:function(_d15,_d16){var _d17=new _c85({mboInfo:_d15,map:this});var _d18=_d17.getGISData();if(_d17.getAutolocateMboInfo()!=null){_d18=_d17.getAutolocateGISData();}if(dojo.config.fwm.debug==true){}var _d19=this.latLng(_d18.lat,_d18.lng);if(_d17.useLBSData()){_d19=_d17.getLBSPoint();_d19.sr=this.WGS84WKID;var _d1a=function(_d1b){this._centerOnPoint(_d1b[0],_d16);};this.getAllPointsFromWGS84([_d19],dojo.hitch(this,_d1a));}else{if(_d19.lat!=null&&_d19.lng!=null){this._centerOnPoint(_d19,_d16);}else{console.warn("Cannot center on null lat/lng.");}}},_centerOnPoint:function(cp,_d1c){if(_d1c){this.setCenterAndZoom(cp,_d1c);}else{this.setCenter(cp);}},removeMboHighligh:function(_d1d){},removeMboMarker:function(_d1e,_d1f){var info=this._getMboMarkerInfo(_d1e,_d1f);if(info!=null){if(!_d1f){this.removeMboFromLayerManager(_d1e);}else{this.removeMboMarkerFromMap(_d1e,_d1f);}}else{console.warn("There was no marker for ",_d1e);}},removeMboMarkerFromMap:function(_d20,_d21){var info=this._getMboMarkerInfo(_d20,_d21);if(info!=null){var _d22=this.removeRecordsAtTheSameSpotReferences(_d20);_d20.isOnMap=info.isOnMap=false;this.removeMarker(info.marker);if(info.lbsCircle||info.lbsMarker){this.removePolyline(info.lbsCircle);this.removeMarker(info.lbsMarker);}if(_d22.length>1){this._updateMultiMarkerRecords(_d22);}else{if(_d22.length==1){this._removeMultiMarker(_d22[0]);}}info={};}else{console.warn("no marker for ",_d20);}},showMboMarker:function(_d23,_d24){var info=this._getMboMarkerInfo(_d23,_d24);if(info!=null){_d23.isOnMap=info.isOnMap=true;this.addMboMarker(_d23,info.markerOptions,_d24);}},addMboToLayerManager:function(_d25,_d26){this.layersManager.addRecord(_d25,_d26);},removeMboFromLayerManager:function(_d27){this.layersManager.removeRecord(_d27);},addMboMarker:function(_d28,_d29,_d2a){var _d2b=new _c85({mboInfo:_d28,map:this});var _d2c=_d2b.getGISPoint();if(_d2b.getAutolocateMboInfo()!=null){_d2c=_d2b.getAutolocateGISPoint();}if(_d2b.hasPointInCurrentSR()){this._createMarker(_d2b,_d29,_d2b.getPointInCurrentSR(),_d2a);}else{if(_d2b.useLBSData()){_d2c=_d2b.getLBSPoint();_d2c.sr=this.WGS84WKID;var _d2d=function(_d2e){_d2b.setPointInCurrentSR(_d2e[0]);this._createMarker(_d2b,_d29,_d2e[0],_d2a);};var _d2f=function(err){console.error("Error converting point to current SR",err);};this.getAllPointsFromWGS84([_d2c],dojo.hitch(this,_d2d),dojo.hitch(this,_d2f));}else{_d2b.setPointInCurrentSR(_d2c);if(_d2c.lat!=null&&_d2c.lng!=null){this._createMarker(_d2b,_d29,_d2c,_d2a);}else{console.warn("Cannot create marker when lat/lng is null.");}}}},_createMarker:function(_d30,_d31,_d32,_d33){if(dojo.config.fwm.debug==true){}var _d34=true;if(_d30.isGISDataReadOnly()){_d34=false;}else{if(this.isMapViewOnly()==true){_d34=false;}else{if(_d31&&_d31.draggable){_d34=_d31.draggable;}}}if(_d30.useLBSData()&&_d32.lat!=null){_d34=false;var _d35=_d30.getLBSData();var _d36=this._addLBSAccuracyMarker(_d35,_d32);var _d37=this._addLBSAccuracyCircle(_d35,_d32);this._updateMboMarkerHash(_d30.getMboInfo(),{lbsMarker:_d36,lbsCircle:_d37},_d33);}var _d38=_d31?_d31.color:this.getDefaultRouteColor();var _d39=this.getSymbologyManager().getLegendSymbolForObject(_d30.getMboInfo(),_d38);var icon=_d39.url;var _d3a="";if(this.isMobile!=true){_d3a=_d30.hasMouseover()?_d30.getMouseover():"";}var _d3b=_d30.getActivityId();var _d3c=false;if(_d31&&(_d31.dontDrawAsOverlay==true)){_d3c=_d31.dontDrawAsOverlay;}var _d3d={infoBubble:"FWMMAPTIPS",label:null,tooltip:_d3a,marker:4,icon:icon,iconSize:[_d39.width,_d39.height],iconAnchor:[_d39.offsetx,_d39.offsety],draggable:_d34,hover:false,dontDrawAsOverlay:_d3c,activityId:_d3b};if(_d31!=null){_d3d.label=_d31.label;_d3d.hover=_d31.hover;}var _d3e=this.addMarker(_d32,_d3d);_d30.setMarker(_d3e);if(_d31&&_d31.events){for(var _d3f in _d31.events){var _d40=_d31.events[_d3f];var _d41=this.handlerMapping[_d3f];_d3e.addMarkerEventHandler(_d41,_d40);}}this.getMapTipsManager().enableMarker(_d3e,_d30.getMXData(),_d30.getMapTipOverrides());_d30.setIsOnMap(true);this._updateMboMarkerHash(_d30.getMboInfo(),{isOnMap:true,marker:_d3e,markerOptions:_d31},_d33);if(_d31&&_d31.markerReferenceCallback){try{_d31.markerReferenceCallback(_d3e);}catch(e){console.error("cannot call reference ftc",e);}}var _d42=this.addRecordsAtTheSameSpotReferences(_d30.getMboInfo());if(_d42.length>1){if(_d42.length>2){this._removeMultiMarker(_d30.getMboInfo());}this._addMultiMarker(_d32,_d42,_d31);}},_updateMboMarkerHash:function(_d43,opt,_d44){return this.layersManager.setMboMarkerInfo(_d43,opt,_d44);},_getMboMarkerInfo:function(_d45,_d46){return this.layersManager.getMboMarkerInfo(_d45,_d46);},_updateMultiMarkerHash:function(_d47,opt){return this.layersManager.setMultiMarkerInfo(_d47,opt);},_getMultiMarkerInfo:function(_d48){return this.layersManager.getMultiMarkerInfo(_d48);},_getMultiMarkerInfoUsingGisData:function(mbo){return this.layersManager.getMultiMarkerInfoUsingGisData(mbo);},showAllMboRecords:function(_d49,_d4a,zoom){if(!_d49||_d49.length==0){return;}for(var _d4b in _d49){var _d4c=new _c85({mboInfo:_d49[_d4b],map:this});if(_d4c.hasAnyCoordinates()){this.addMboToLayerManager(_d4c.getMboInfo());}}if(zoom==true){this.zoomToMbos(_d49);}},zoomToMbos:function(_d4d){if(!_d4d||_d4d.length==0){return;}if(_d4d&&_d4d.length==1){this.centerOnMbo(_d4d[0]);}else{this.autoCenterAndZoom(_d4d);}},_addLBSAccuracyCircle:function(_d4e,_d4f){if("EXCEEDED_TOLERANCE"!==_d4e.max_accuracy_state){var _d50=this.radius(_d4f,10);var _d51=(_d4e.location_accuracy/1000);var _d52=_d50.getPolyline(_d51,_d4e.circle_border_color);var _d53=null;if(_d4e.is_weather_alert_impact){_d53=_d4e.circle_opacity;}this.addPolyline(_d52,{centerPoint:_d4f,width:_d4e.circle_border_width,opacity:_d4e.circle_opacity,fillColor:_d4e.circle_fill_color,borderOpacity:_d53,closed:true,radiusInKMs:_d51});}else{}return _d52;},_addLBSAccuracyMarker:function(_d54,_d55){var _d56=_c90.getImageLibraryManager().getLBSMarkerImageInfo(_d54);var _d57={infoBubble:"",label:null,marker:4,icon:_d56.getImageURL(),iconSize:_d56.getImageSize(),iconAnchor:_d56.getImageAnchor(),draggable:false,hover:false,dontDrawAsOverlay:true};return this.addMarker(_d55,_d57);},enableTraffic:function(){this.setShowTraffic(true);},disableTraffic:function(){this.setShowTraffic(false);},enableRoutes:function(){if(this.getMultipleRoutesManager()){this.getMultipleRoutesManager().showRoutesLinesAndCalculatedMarkers();}},disableRoutes:function(){this.getMultipleRoutesManager().hideRoutesLinesAndCalculatedMarkers();},disableActions:function(){this._actionsAreEnabled=false;},enableActions:function(){this._actionsAreEnabled=true;},isMapViewOnly:function(){var _d58=this.mapConf.inputConfs;if(_d58!=null&&_d58.mapviewonly!=null){return _d58.mapviewonly=="1"||_d58.mapviewonly=="true";}return true;},allowsTrafficLayer:function(){return true;},getDefaultLengthUnit:function(){return this.mapConf.lengthunit;},_mapSectionExpanded:function(){this.enableActions();var _d59=false;if(this.routeConf&&this.routeConf.showdirectionsonload==true){_d59=true;}this._resize();var _d5a={zoom:true,disableMsgs:false,automatic:false};this.refreshMap(_d5a);if(this._sectionExpanded==false){this.centerAndZoomMap();this._sectionExpanded=true;}this._showConfErrors();},_showConfErrors:function(){if(this.mapConf.error){this.maximo.showMessage(this.mapConf.error.group,this.mapConf.error.key,[this.mapConf.error.params]);}},_showRouteConfErrors:function(){if(this.routeConf&&this.routeConf.error){this.maximo.showMessage(this.routeConf.error.group,this.routeConf.error.key,[this.routeConf.error.params]);}},getInitialLocationCustomInfo:function(){return {};},autoRefreshMap:function(){var _d5b={zoom:false,disableMsgs:true,automatic:true};this.refreshMap(_d5b);},_getMapOffsetLeft:function(){var _d5c=dojo.byId(this.divId);return _d5c.offsetLeft;},_getMapOffsetTop:function(){var _d5d=dojo.byId(this.divId);return _d5d.offsetTop;},createRouteLayer:function(){if(this.layersManager.getLayerById("route")==null){var _d5e={layerName:ibm.tivoli.fwm.i18n.getMaxMsg("map","routelayer"),layerId:"route",map:this};var _d5f=dojo.require("ibm.tivoli.fwm.mxmap.layers.RouteLayer");var _d60=new _d5f(_d5e);this.layersManager.addLayer(_d60,false);}},getLatLngFromMboInfo:function(_d61){var _d62=null;if(_d61.pointInCurrentSR){_d62=this.latLng(_d61.pointInCurrentSR.lat,_d61.pointInCurrentSR.lng);}return _d62;},addRecordsAtTheSameSpotReferences:function(_d63){return this.layersManager.addRecordsAtTheSameSpotReferences(_d63);},removeRecordsAtTheSameSpotReferences:function(_d64){return this.layersManager.removeRecordsAtTheSameSpotReferences(_d64);},_addMultiMarker:function(_d65,_d66,_d67){var _d68=_c90.getImageLibraryManager().getMultiMarkerImageInfo();var _d69=this._getMultiMarkerMouseover(_d66);var _d6a={infoBubble:"FWMMAPTIPS",label:null,tooltip:_d69,icon:_d68.imageUrl,iconSize:_d68.imageSize,iconAnchor:_d68.imageAnchor,draggable:false,hover:false,isMultiMarker:true,dontDrawAsOverlay:false};var _d6b=this.addMarker(_d65,_d6a);this._updateMultiMarkerHash(_d66[0],{marker:_d6b,markerOptions:_d67});this.getMapTipsManager().enableMultiMarker(_d6b,_d66);},_removeMultiMarker:function(_d6c){var _d6d=this._getMultiMarkerInfo(_d6c);if(_d6d!=null){this.removeMarker(_d6d.marker);_d6d={};}},_updateMultiMarkerRecords:function(_d6e){var _d6f=this._getMultiMarkerInfo(_d6e[0]);this.getMapTipsManager().updateMultiMarkerOpenBubbleHandler(_d6f.marker,_d6e);var _d70=this._getMultiMarkerMouseover(_d6e);_d6f.marker.setTooltip(_d70);},_getMultiMarkerMouseover:function(_d71){var _d72="";if(this.isMobile!=true){var _d73="<hr>";if(dojo.isIE){_d73="<hr style=\"width=200px\">";}for(var i=0;i<_d71.length;i++){_d72+=((_d71[i].mouseover!=null)&&(_d71[i].mouseover!=undefined))?_d71[i].mouseover:"";if(i<(_d71.length-1)){_d72+=_d73;}}}return _d72;},getDefaultRouteColor:function(){return this.defaultRouteColor;},getDispatcher:function(){return this.dispatcher;},setDispatcher:function(_d74){this.dispatcher=_d74;},showWarningMessage:function(_d75,_d76,_d77){this.getMaximo().showMessage(_d75,_d76,_d77);},showWarning:function(_d78){var _d79=this.getMaximo();switch(_d78){case ibm.tivoli.fwm.mxmap.WarningCodes.NO_LBS_LOCATION_FOUND:if(this.mapConf.provider!="spatial"){_d79.showMessage("mapcontrol","nogeolocationfound");}break;default:break;}},getShowMarkersOnRouteError:function(){var _d7a=false;var _d7b=this.mapConf;if((_d7b!=null)&&(_d7b!=undefined)&&(_d7b.showMarkersOnRouteError!=null)&&(_d7b.showMarkersOnRouteError!=undefined)){if(_d7b.showMarkersOnRouteError>0){_d7a=true;}}return _d7a;},getLabelConfs:function(){var _d7c;var _d7d=this.mapConf.currentMbo.mxdata.mboName.toLowerCase();var _d7e=this.symbologyManager.getLayerConfigById(_d7d);_d7c=(_d7e)?_d7e.mapLabelsStyle:null;return _d7c;},createMapLabel:function(_d7f){var _d80;if(_d7f=="address"&&!this.addressLabel){_d80=_c94.create("span",{id:"mapAddresslabel"});this.addressLabel=_d80;_c94.place(_d80,this.element,"last");}else{if("attributes"&&!this.mboAttributesLabel){_d80=_c94.create("span",{id:"mapAttributeslabel"});this.mboAttributesLabel=_d80;_c94.place(_d80,this.element,"first");}}try{this.setLabelStyle(_d80,this.labelConfs,_d7f);}catch(e){if((this.mapConf.provider=="spatial")&&(this.messageDiv)){this.writeMessageInBox(this.messageDiv,"map","errorInMapLabelParams",[],true);}else{console.error(ibm.tivoli.fwm.i18n.getMaxMsg("map","errorInMapLabelParams"));}}this.setLabelProviderClass(_d7f);},setLabelStyle:function(_d81,_d82,_d83){if(_d82){_c93.set(_d81,"color","rgb("+_d82.fontColor+")");_c93.set(_d81,"font-size",_d82.fontSize);_c93.set(_d81,"max-width",_d82.labelLength);var _d84="rgb("+_d82.backgroundColor+","+_d82.backgroundTransparency+")";_c93.set(_d81,"background-color",_d84);if(_d83=="attributes"){if(_d82.attributesLabel&&_d82.attributesLabel.left){_c93.set(_d81,"left",_d82.attributesLabel.left);}if(_d82.attributesLabel&&_d82.attributesLabel.top){_c93.set(_d81,"top",_d82.attributesLabel.top);}}}},updateMapAddressLabel:function(_d85){if(!this.addressLabel){this.createMapLabel("address");}if(this.addressLabel.textContent!=_d85){this.addressLabel.textContent=_d85;}_c93.set(this.addressLabel,"display","inline");},setLabelProviderClass:function(_d86){var _d87;if(_d86=="address"){_d87={"spatial":"spatialMapAddressLabel","gmaps":"gMapAddressLabel","bingmaps":"bMapAddressLabel"};_c95.add(this.addressLabel,_d87[this.mapConf.provider]);}else{if(_d86=="attributes"){_d87={"spatial":"spatialAttributesLabel","gmaps":"gMapAttributesLabel","bingmaps":"bMapAttributesLabel"};_c95.add(this.mboAttributesLabel,_d87[this.mapConf.provider]);}}},hideMapAddressLabel:function(){if(this.addressLabel){this.addressLabel.content=null;_c93.set(this.addressLabel,"display","none");}},updateMboAttributesLabelContent:function(_d88){var _d89;var _d8a=false;if(_d88){_d89=_d88.attributes;}else{_d89=this.mapConf.currentMbo.mxdata.attributes;}var _d8b=this.labelConfs!=null?this.labelConfs.labelAttributes.split(","):[];var _d8c="";dojo.forEach(_d8b,function(_d8d,i){var _d8e=_d8d.trim();if(_d89.hasOwnProperty(_d8e)){var _d8f=_d89[_d8e]||"";if((i>0)&&!(_d8f=="")){_d8c=_d8c+" - ";}_d8c=_d8c+_d8f;}else{_d8a=true;}},this);if(_d8a){this.mboAttributesLabel.textContent="INVALID BINDING";}else{if(this.mboAttributesLabel.textContent!=_d8c){this.mboAttributesLabel.textContent=_d8c;}}},updateLongDescToolTip:function(_d90){if(_d90&&_d90.attributes){var _d91=_d90.attributes.longDescription;this.longDescriptionToolTip.label=_d91;}},_getMapParentHeight:function(){if(this.mapConf.isOpenMap){return dojo.window.getBox(dojo.doc).h;}return dojo.byId(this.MAP_TAB_PARENT_ID).offsetHeight;},_getIsLayoutReady:function(){if(this._isLayoutReady){return this._isLayoutReady;}var _d92=this.mapConf&&this.mapConf.tabGroupId;var _d93=this.skinVersion==="mas8";if(_d93&&_d92){return this._isLayoutReady=dojo.byId(this.mapConf.tabGroupId).style.paddingTop==="3rem";}return this._isLayoutReady=true;},_startToolbar:function(){var _d94=dojo.byId(this.divId);dojo.style(_d94,"height",(this.heightPx-this.toolbar.getToolbarHeight())+"px");this.toolbar.startup();},_createScroolbarsObserver:function(){var _d95=this._getScrollbars();if(!_d95.length){return;}if(!this.scrollbarsObserver){this.scrollbarsObserver=new MutationObserver(dojo.hitch(this,this._onScrollbarChanged));}dojo.forEach(_d95,dojo.hitch(this,function(_d96){this.scrollbarsObserver.observe(_d96,{attributes:true});}));},_onScrollbarChanged:function(){if(this.map&&this.map.isFullScreen){return;}var _d97=dojo.query(".custom-scroller",this.MAP_TAB_PARENT_ID)[0];if(_d97){var _d98=_d97.children[0];if(_d98){dojo.style(_d98,{"margin-inline-end":"0px","margin-bottom":"0px"});}}this._resize();this._hideScrollbars();},_getScrollbars:function(){return dojo.query(".custom-scroller-track",this.MAP_TAB_PARENT_ID);},_hideScrollbars:function(){var _d99=this._getScrollbars();if(_d99){dojo.forEach(_d99,dojo.hitch(this,function(_d9a){dojo.style(_d9a,"display","none");}));}},isMapGraphite:function(){return false;},inFullScreen:function(){if(!this.map){return false;}return this.map.inFuisFullScreen;},});});},"dojo/window":function(){define(["./_base/lang","./sniff","./_base/window","./dom","./dom-geometry","./dom-style","./dom-construct"],function(lang,has,_d9b,dom,geom,_d9c,_d9d){has.add("rtl-adjust-position-for-verticalScrollBar",function(win,doc){var body=_d9b.body(doc),_d9e=_d9d.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},body,"last"),div=_d9d.create("div",{style:{overflow:"hidden",direction:"ltr"}},_d9e,"last"),ret=geom.position(div).x!=0;_d9e.removeChild(div);body.removeChild(_d9e);return ret;});has.add("position-fixed-support",function(win,doc){var body=_d9b.body(doc),_d9f=_d9d.create("span",{style:{visibility:"hidden",position:"fixed",left:"1px",top:"1px"}},body,"last"),_da0=_d9d.create("span",{style:{position:"fixed",left:"0",top:"0"}},_d9f,"last"),ret=geom.position(_da0).x!=geom.position(_d9f).x;_d9f.removeChild(_da0);body.removeChild(_d9f);return ret;});var _da1={getBox:function(doc){doc=doc||_d9b.doc;var _da2=(doc.compatMode=="BackCompat")?_d9b.body(doc):doc.documentElement,_da3=geom.docScroll(doc),w,h;if(has("touch")){var _da4=_da1.get(doc);w=_da4.innerWidth||_da2.clientWidth;h=_da4.innerHeight||_da2.clientHeight;}else{w=_da2.clientWidth;h=_da2.clientHeight;}return {l:_da3.x,t:_da3.y,w:w,h:h};},get:function(doc){if(has("ie")&&_da1!==document.parentWindow){doc.parentWindow.execScript("document._parentWindow = window;","Javascript");var win=doc._parentWindow;doc._parentWindow=null;return win;}return doc.parentWindow||doc.defaultView;},scrollIntoView:function(node,pos){try{node=dom.byId(node);var doc=node.ownerDocument||_d9b.doc,body=_d9b.body(doc),html=doc.documentElement||body.parentNode,isIE=has("ie")||has("trident"),isWK=has("webkit");if(node==body||node==html){return;}if(!(has("mozilla")||isIE||isWK||has("opera")||has("trident")||has("edge"))&&("scrollIntoView" in node)){node.scrollIntoView(false);return;}var _da5=doc.compatMode=="BackCompat",_da6=Math.min(body.clientWidth||html.clientWidth,html.clientWidth||body.clientWidth),_da7=Math.min(body.clientHeight||html.clientHeight,html.clientHeight||body.clientHeight),_da8=(isWK||_da5)?body:html,_da9=pos||geom.position(node),el=node.parentNode,_daa=function(el){return (isIE<=6||(isIE==7&&_da5))?false:(has("position-fixed-support")&&(_d9c.get(el,"position").toLowerCase()=="fixed"));},self=this,_dab=function(el,x,y){if(el.tagName=="BODY"||el.tagName=="HTML"){self.get(el.ownerDocument).scrollBy(x,y);}else{x&&(el.scrollLeft+=x);y&&(el.scrollTop+=y);}};if(_daa(node)){return;}while(el){if(el==body){el=_da8;}var _dac=geom.position(el),_dad=_daa(el),rtl=_d9c.getComputedStyle(el).direction.toLowerCase()=="rtl";if(el==_da8){_dac.w=_da6;_dac.h=_da7;if(_da8==html&&(isIE||has("trident"))&&rtl){_dac.x+=_da8.offsetWidth-_dac.w;}_dac.x=0;_dac.y=0;}else{var pb=geom.getPadBorderExtents(el);_dac.w-=pb.w;_dac.h-=pb.h;_dac.x+=pb.l;_dac.y+=pb.t;var _dae=el.clientWidth,_daf=_dac.w-_dae;if(_dae>0&&_daf>0){if(rtl&&has("rtl-adjust-position-for-verticalScrollBar")){_dac.x+=_daf;}_dac.w=_dae;}_dae=el.clientHeight;_daf=_dac.h-_dae;if(_dae>0&&_daf>0){_dac.h=_dae;}}if(_dad){if(_dac.y<0){_dac.h+=_dac.y;_dac.y=0;}if(_dac.x<0){_dac.w+=_dac.x;_dac.x=0;}if(_dac.y+_dac.h>_da7){_dac.h=_da7-_dac.y;}if(_dac.x+_dac.w>_da6){_dac.w=_da6-_dac.x;}}var l=_da9.x-_dac.x,t=_da9.y-_dac.y,r=l+_da9.w-_dac.w,bot=t+_da9.h-_dac.h;var s,old;if(r*l>0&&(!!el.scrollLeft||el==_da8||el.scrollWidth>el.offsetHeight)){s=Math[l<0?"max":"min"](l,r);if(rtl&&((isIE==8&&!_da5)||has("trident")>=5)){s=-s;}old=el.scrollLeft;_dab(el,s,0);s=el.scrollLeft-old;_da9.x-=s;}if(bot*t>0&&(!!el.scrollTop||el==_da8||el.scrollHeight>el.offsetHeight)){s=Math.ceil(Math[t<0?"max":"min"](t,bot));old=el.scrollTop;_dab(el,0,s);s=el.scrollTop-old;_da9.y-=s;}el=(el!=_da8)&&!_dad&&el.parentNode;}}catch(error){console.error("scrollIntoView: "+error);node.scrollIntoView(false);}}};1&&lang.setObject("dojo.window",_da1);return _da1;});},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(_db0,_db1,_db2,lang){lang.extend(_db1,{focused:false,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus();},_onBlur:function(){this.onBlur();}});return _db2("dijit._FocusMixin",null,{_focusManager:_db0});});},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(_db3,_db4,_db5,lang,_db6){return _db5("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:false,contextRequire:null,_beforeFillContent:function(){if(/dojoType|data-dojo-type/i.test(this.domNode.innerHTML)){var node=this.domNode;if(this.containerNode&&!this.searchContainerNode){this.containerNode.stopParser=true;}_db6.parse(node,{noStart:!this._earlyTemplatedStartup,template:true,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(lang.hitch(this,function(_db7){this._startupWidgets=_db7;for(var i=0;i<_db7.length;i++){this._processTemplateNode(_db7[i],function(n,p){return n[p];},function(_db8,type,_db9){if(type in _db8){return _db8.connect(_db8,type,_db9);}else{return _db8.on(type,_db9,true);}});}if(this.containerNode&&this.containerNode.stopParser){delete this.containerNode.stopParser;}}));if(!this._startupWidgets){throw new Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), "+"unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");}}},_processTemplateNode:function(_dba,_dbb,_dbc){if(_dbb(_dba,"dojoType")||_dbb(_dba,"data-dojo-type")){return true;}return this.inherited(arguments);},startup:function(){_db3.forEach(this._startupWidgets,function(w){if(w&&!w._started&&w.startup){w.startup();}});this._startupWidgets=null;this.inherited(arguments);}});});},"ibm/tivoli/fwm/mxmap/MarkerImageInfo":function(){define(["dojo/_base/declare"],function(_dbd){return _dbd(null,{_imageSize:null,_imageAnchor:null,_imageURL:null,constructor:function(_dbe){dojo.mixin(this,_dbe);this._imageSize=_dbe.imageSize||[32,32];this._imageAnchor=_dbe.imageAnchor||[0,32];this._imageURL=_dbe.imageUrl||"";},getImageSize:function(){return this._imageSize;},getImageAnchor:function(){return this._imageAnchor;},getImageURL:function(){return this._imageURL;},getSymbolURL:function(){return this._imageURL;},setImageURL:function(_dbf){this._imageURL=_dbf;},generateMarkerData:function(_dc0,_dc1,_dc2){return {label:_dc0,draggable:true==_dc1,icon:this.getImageURL(),iconSize:this.getImageSize(),iconAnchor:this.getImageAnchor(),hover:true==_dc2,dontDrawAsOverlay:true};}});});},"ibm/tivoli/fwm/mxmap/toolbar/ToolbarManager":function(){define(["dojo/main","dijit/main","dojox/main","dojo/_base/declare","dojo/parser","dijit/_WidgetBase","ibm/tivoli/fwm/mxmap/_Base","dijit/Toolbar","ibm/tivoli/fwm/mxmap/toolbar/ToolbarSeparator","dojo/_base/Deferred","dojo/_base/lang","dojo/dom-attr"],function(dojo,_dc3,_dc4,_dc5,_dc6,_dc7,_dc8,_dc9,_dca,_dcb,lang,_dcc){if(!ibm.tivoli.fwm.mxmap.toolbar){ibm.tivoli.fwm.mxmap.toolbar={};}if(!ibm.tivoli.fwm.mxmap.toolbar.ext){ibm.tivoli.fwm.mxmap.toolbar.ext={};}return _dc5([_dc8],{gisdata:null,mxdata:null,map:null,items:[],toolbarItems:null,toolbarDivElement:null,addOnsAvailable:null,_toolbarHeight:40,toolbarWidth:null,destroyingToolbar:null,currentTool:null,previousTool:null,isStartUp:null,constructor:function(_dcd){dojo.mixin(this,_dcd);this.toolbarItems=[];this.addOnsAvailable=[];this.destroyingToolbar=false;},postCreate:function(){this.addSubscription("onCurrentRecordUpdate_"+this.map.getId(),dojo.hitch(this,this.serverUpdated));},container:null,toolbar:null,loadToolBar:function(){var _dce=dojo.isIE?"1px solid #AAA":"0px solid #AAA";this.container=dojo.create("div",{id:this.map.divId+"_toolbar",style:{whiteSpace:"normal","background-color":"#FFFFFF","border":"1px solid #AAA","border-bottom-color":"black","display":"block","borderBottom":_dce,width:this.map.getWidthInPixels()+"px",height:this._toolbarHeight+"px"}},dojo.byId(this.map.divId),"before");var div=dojo.create("div",null,this.container);this.toolbar=new _dc3.Toolbar({style:{width:"100%","border":"0","background-position-y":"4%","display":"flex","align-items":"center","height":"100%"},splitter:"true"},div);var _dcf=this.map.getId();var _dd0=this.addOnsAvailable;var _dd1=function(item){if(item=="sep"){var d=new ibm.tivoli.fwm.mxmap.toolbar.ToolbarSeparator();this.toolbar.addChild(d);}else{if(item=="QueryWeatherAlertsTool"&&!this.map.mapConf.schedulerPlusLicenseEnabled){return;}var _dd2="ibm/tivoli/fwm/mxmap/toolbar/ext/"+item;require([_dd2],dojo.hitch(this,function(_dd3){try{this.itemDojo=new _dd3({map:this.map});if(this.map.mapConf.mapViewOnly&&this.itemDojo.modifiesMap){if(dojo.config.fwm.debug==true){}}else{var _dd4=this.itemDojo;if(_dd4.isAddOn){_dd0.push(_dd4.addOnName);}var _dd5=null;if(_dd4.createToolbarButton){_dd5=_dd4.createToolbarButton();}if(_dd5==null){return;}var _dd6=function(){if(this.lastItemClicked&&this.lastItemClicked.declaredClass!=_dd4.declaredClass){this.lastItemClicked.disable();}dojo.publish("mxnToolbarClicked_"+this.map.getId(),[_dd4,this.lastItemClicked]);this.lastItemClicked=_dd4;};this.addConnection("onClick",_dd6,_dd5,this);this.toolbar.addChild(_dd5);this.toolbarItems.push(_dd4);}}catch(e){}}));}};dojo.forEach(this.items,_dd1,this);this.map.mapConf.addOnsAvailable=_dd0;this.toolbarDivElement=this.container;if(this.map.providerName=="maximospatial"&&this.map.mapConf.toolsPersistenceEnable=="1"){dojo.forEach(this.toolbarItems,function(_dd7){if(typeof _dd7.loadToolConfiguration=="function"){_dd7.loadToolConfiguration();}});dojo.forEach(this.toolbarItems,function(_dd8){if(typeof _dd8.postCreate=="function"){_dd8.postCreate();}});}this.updateToolbarWidth(this.toolbarWidth);if(this.map.providerName=="maximospatial"){this.map.hideLoadingImg();}if(this.map.isFullScreen==true){this.map.fullScreenOn();}else{this.map._resize();}},disableTools:function(_dd9){this.previousTool=this.currentTool;this.currentTool=_dd9;dojo.forEach(this.toolbarItems,function(_dda){if(_dd9==null||_dd9.toolName!=_dda.toolName){if(typeof _dda.disableHighlightButton=="function"){_dda.disableActions();_dda.disableHighlightButton();}}});},startup:function(){this.loadToolBar();},lastItemClicked:null,serverUpdated:function(){this.mxdata=data.mxdata;this.gisdata=data.gisdata;},destroyToolbar:function(){dojo.forEach(this.toolbarItems,function(item){item.destroy();});if(this.toolbar){this.toolbar.destroyRecursive(true);}if(this.container){dojo.empty(this.container);}},destroyRecursive:function(){this.inherited(arguments);if(!this.destroyingToolbar){this.destroyingToolbar=true;if(this.map.providerName=="maximospatial"){if(this.map.mapConf.toolsPersistenceEnable=="1"){dojo.forEach(this.toolbarItems,function(item){if(typeof item.saveToolConfiguration=="function"){item.saveToolConfiguration();}});var _ddb=this.map.toolsJson;if(_ddb){_ddb.saveMapExtent=this.map.mapConf.saveMapExtent;_ddb.mapExtent=this.map.map.extent.toJson();_ddb.zoomLevel=this.map.map.getLevel();this.map.getMaximo().saveToolsConfiguration(_ddb,dojo.hitch(this,function(_ddc){this.destroyToolbar();}));}else{this.destroyToolbar();}}else{this.destroyToolbar();}}else{this.destroyToolbar();}}},getToolbarDivElement:function(){return this.toolbarDivElement;},updateToolbarWidth:function(_ddd){if(!_ddd){_ddd="99%";}if(this.toolbarDivElement){if(_ddd.substr(_ddd.length-1,1)=="%"){dojo.style(this.toolbarDivElement,{width:_ddd});}else{dojo.style(this.toolbarDivElement,{width:_ddd+"px"});}}},getToolbarHeight:function(){return this._toolbarHeight;},getToolItems:function(){return this.toolbarItems;}});});},"dojo/data/util/sorter":function(){define(["../../_base/lang"],function(lang){var _dde={};lang.setObject("dojo.data.util.sorter",_dde);_dde.basicComparator=function(a,b){var r=-1;if(a===null){a=undefined;}if(b===null){b=undefined;}if(a==b){r=0;}else{if(a>b||a==null){r=1;}}return r;};_dde.createSortFunction=function(_ddf,_de0){var _de1=[];function _de2(attr,dir,comp,s){return function(_de3,_de4){var a=s.getValue(_de3,attr);var b=s.getValue(_de4,attr);return dir*comp(a,b);};};var _de5;var map=_de0.comparatorMap;var bc=_dde.basicComparator;for(var i=0;i<_ddf.length;i++){_de5=_ddf[i];var attr=_de5.attribute;if(attr){var dir=(_de5.descending)?-1:1;var comp=bc;if(map){if(typeof attr!=="string"&&("toString" in attr)){attr=attr.toString();}comp=map[attr]||bc;}_de1.push(_de2(attr,dir,comp,_de0));}}return function(rowA,rowB){var i=0;while(i<_de1.length){var ret=_de1[i++](rowA,rowB);if(ret!==0){return ret;}}return 0;};};return _dde;});},"dijit/form/_ButtonMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/has","../registry"],function(_de6,dom,has,_de7){var _de8=_de6("dijit.form._ButtonMixin"+(has("dojo-bidi")?"_NoBidi":""),null,{label:"",type:"button",__onClick:function(e){e.stopPropagation();e.preventDefault();if(!this.disabled){this.valueNode.click(e);}return false;},_onClick:function(e){if(this.disabled){e.stopPropagation();e.preventDefault();return false;}if(this.onClick(e)===false){e.preventDefault();}var _de9=e.defaultPrevented;if(!_de9&&this.type=="submit"&&!(this.valueNode||this.focusNode).form){for(var node=this.domNode;node.parentNode;node=node.parentNode){var _dea=_de7.byNode(node);if(_dea&&typeof _dea._onSubmit=="function"){_dea._onSubmit(e);e.preventDefault();_de9=true;break;}}}return !_de9;},postCreate:function(){this.inherited(arguments);dom.setSelectable(this.focusNode,false);},onClick:function(){return true;},_setLabelAttr:function(_deb){this._set("label",_deb);var _dec=this.containerNode||this.focusNode;_dec.innerHTML=_deb;this.onLabelSet();},onLabelSet:function(){}});if(has("dojo-bidi")){_de8=_de6("dijit.form._ButtonMixin",_de8,{onLabelSet:function(){this.inherited(arguments);var _ded=this.containerNode||this.focusNode;this.applyTextDir(_ded);}});}return _de8;});},"ibm/tivoli/fwm/mxmap/_Base":function(){define(["dojo/main","dijit/main","dojox/main","dojo/_base/declare"],function(dojo,_dee,_def,_df0){var _df1=null;return _df0(null,{_handlers:null,constructor:function(_df2){this._handlers=[];this.useMaxDojo=(_df2&&_df2.useMaxDojo)?true:false;},setMapDojoVersion:function(_df3){_df1=_df3;},selectDojoVersion:function(){var _df4=null;if(this.useMaxDojo){_df4=window.dojo;}else{_df4=_df1||dojo;}return _df4;},_getExistingHandler:function(_df5,_df6){var _df7=dojo.filter(this._handlers,function(h){return ((_df5===h.event)&&(_df6===h.advice));});return (_df7.length>0)?_df7[0]:null;},addSubscription:function(_df8,_df9){var _dfa=this.selectDojoVersion();if(this._getExistingHandler(_df8,_df9)==null){var _dfb=_dfa.subscribe(_df8,_df9);_dfb.event=_df8;this._handlers.push(_dfb);}},addConnection:function(_dfc,_dfd,obj,_dfe){var _dff=this.selectDojoVersion();if(this._getExistingHandler(_dfc,_dfd)==null){var _e00=_dff.connect(obj,_dfc,_dfe,_dfd);_e00.event=_dfc;this._handlers.push(_e00);}},removeSubscription:function(_e01,_e02){var _e03=this.selectDojoVersion();var _e04=this._getExistingHandler(_e01,_e02);if(_e04!=null){var _e05=this._handlers.indexOf(_e04);this._handlers.splice(_e05,1);_e03.unsubscribe(_e04);}},destroyRecursive:function(){var _e06=this.selectDojoVersion();var h;while((h=this._handlers.pop())){_e06.unsubscribe(h);}}});});},"ibm/tivoli/fwm/i18n":function(){define(["dijit","dojo","dojox"],function(_e07,dojo,_e08){dojo.provide("ibm.tivoli.fwm.i18n");ibm.tivoli.fwm.i18n.msgs={};ibm.tivoli.fwm.i18n.preLoadMsgGroup=function(_e09){if(ibm.tivoli.fwm.i18n.msgs[_e09]==null){var txt=dojohelper.getText(dojo.config.fwm.ctxRoot+"/rest/mbo/maxmessages?msggroup="+_e09+"&_includecols=msgkey,value&_format=json&");var _e0a=dojo.fromJson(txt);if(_e0a.MAXMESSAGESMboSet.MAXMESSAGES.length>0){ibm.tivoli.fwm.i18n.msgs[_e09]={};for(var i=0;i<_e0a.MAXMESSAGESMboSet.MAXMESSAGES.length;i++){var msg=_e0a.MAXMESSAGESMboSet.MAXMESSAGES[i];ibm.tivoli.fwm.i18n.msgs[_e09][msg.Attributes.MSGKEY.content]=msg.Attributes.VALUE.content;}}}};ibm.tivoli.fwm.i18n.getMaxMsg=function(_e0b,_e0c){if(ibm.tivoli.fwm.i18n.msgs[_e0b]==null){ibm.tivoli.fwm.i18n.msgs[_e0b]={};}if(ibm.tivoli.fwm.i18n.msgs[_e0b][_e0c]==null){ibm.tivoli.fwm.i18n.msgs[_e0b][_e0c]=ibm.tivoli.fwm.i18n._loadMsgThruRest(_e0b,_e0c);}if(ibm.tivoli.fwm.i18n.msgs[_e0b][_e0c]==null){return (_e0b+"#"+_e0c);}return ibm.tivoli.fwm.i18n.msgs[_e0b][_e0c];};ibm.tivoli.fwm.i18n.getMaxMsgWithParams=function(_e0d,_e0e,_e0f){if(ibm.tivoli.fwm.i18n.msgs[_e0d]==null){ibm.tivoli.fwm.i18n.msgs[_e0d]={};}if(ibm.tivoli.fwm.i18n.msgs[_e0d][_e0e]==null){ibm.tivoli.fwm.i18n.msgs[_e0d][_e0e]=ibm.tivoli.fwm.i18n._loadMsgThruRest(_e0d,_e0e);}if(ibm.tivoli.fwm.i18n.msgs[_e0d][_e0e]==null){return (_e0d+"#"+_e0e);}var _e10=ibm.tivoli.fwm.i18n.msgs[_e0d][_e0e];for(var i=0;i<_e0f.length;i++){_e10=_e10.split("{"+i+"}").join(_e0f[i]);}return _e10;};ibm.tivoli.fwm.i18n._loadMsgThruRest=function(_e11,_e12){var txt=dojohelper.getText(dojo.config.fwm.ctxRoot+"/rest/mbo/maxmessages?msgkey="+_e12+"&msggroup="+_e11+"&_includecols=msgkey,value&_format=json&_maxItems=1");var _e13=dojo.fromJson(txt);if(_e13.MAXMESSAGESMboSet.MAXMESSAGES.length>0){return _e13.MAXMESSAGESMboSet.MAXMESSAGES[0].Attributes.VALUE.content;}return null;};});},"dijit/registry":function(){define(["dojo/_base/array","dojo/_base/window","./main"],function(_e14,win,_e15){var _e16={},hash={};var _e17={length:0,add:function(_e18){if(hash[_e18.id]){throw new Error("Tried to register widget with id=="+_e18.id+" but that id is already registered");}hash[_e18.id]=_e18;this.length++;},remove:function(id){if(hash[id]){delete hash[id];this.length--;}},byId:function(id){return typeof id=="string"?hash[id]:id;},byNode:function(node){return hash[node.getAttribute("widgetId")];},toArray:function(){var ar=[];for(var id in hash){ar.push(hash[id]);}return ar;},getUniqueId:function(_e19){var id;do{id=_e19+"_"+(_e19 in _e16?++_e16[_e19]:_e16[_e19]=0);}while(hash[id]);return _e15._scopeName=="dijit"?id:_e15._scopeName+"_"+id;},findWidgets:function(root,_e1a){var _e1b=[];function _e1c(root){for(var node=root.firstChild;node;node=node.nextSibling){if(node.nodeType==1){var _e1d=node.getAttribute("widgetId");if(_e1d){var _e1e=hash[_e1d];if(_e1e){_e1b.push(_e1e);}}else{if(node!==_e1a){_e1c(node);}}}}};_e1c(root);return _e1b;},_destroyAll:function(){_e15._curFocus=null;_e15._prevFocus=null;_e15._activeStack=[];_e14.forEach(_e17.findWidgets(win.body()),function(_e1f){if(!_e1f._destroyed){if(_e1f.destroyRecursive){_e1f.destroyRecursive();}else{if(_e1f.destroy){_e1f.destroy();}}}});},getEnclosingWidget:function(node){while(node){var id=node.nodeType==1&&node.getAttribute("widgetId");if(id){return hash[id];}node=node.parentNode;}return null;},_hash:hash};_e15.registry=_e17;return _e17;});},"dojo/io/script":function(){define(["../_base/connect","../_base/kernel","../_base/lang","../sniff","../_base/window","../_base/xhr","../dom","../dom-construct","../request/script","../aspect"],function(_e20,_e21,lang,has,win,xhr,dom,_e22,_e23,_e24){_e21.deprecated("dojo/io/script","Use dojo/request/script.","2.0");var _e25={get:function(args){var rDfd;var dfd=this._makeScriptDeferred(args,function(dfd){rDfd&&rDfd.cancel();});var _e26=dfd.ioArgs;xhr._ioAddQueryToUrl(_e26);xhr._ioNotifyStart(dfd);rDfd=_e23.get(_e26.url,{timeout:args.timeout,jsonp:_e26.jsonp,checkString:args.checkString,ioArgs:_e26,frameDoc:args.frameDoc,canAttach:function(rDfd){_e26.requestId=rDfd.id;_e26.scriptId=rDfd.scriptId;_e26.canDelete=rDfd.canDelete;return _e25._canAttach(_e26);}},true);_e24.around(rDfd,"isValid",function(_e27){return function(_e28){_e25._validCheck(dfd);return _e27.call(this,_e28);};});rDfd.then(function(){dfd.resolve(dfd);}).otherwise(function(_e29){dfd.ioArgs.error=_e29;dfd.reject(_e29);});return dfd;},attach:_e23._attach,remove:_e23._remove,_makeScriptDeferred:function(args,_e2a){var dfd=xhr._ioSetArgs(args,_e2a||this._deferredCancel,this._deferredOk,this._deferredError);var _e2b=dfd.ioArgs;_e2b.id=_e21._scopeName+"IoScript"+(this._counter++);_e2b.canDelete=false;_e2b.jsonp=args.callbackParamName||args.jsonp;if(_e2b.jsonp){_e2b.query=_e2b.query||"";if(_e2b.query.length>0){_e2b.query+="&";}_e2b.query+=_e2b.jsonp+"="+(args.frameDoc?"parent.":"")+_e21._scopeName+".io.script.jsonp_"+_e2b.id+"._jsonpCallback";_e2b.frameDoc=args.frameDoc;_e2b.canDelete=true;dfd._jsonpCallback=this._jsonpCallback;this["jsonp_"+_e2b.id]=dfd;}dfd.addBoth(function(_e2c){if(_e2b.canDelete){if(_e2c instanceof Error){_e25["jsonp_"+_e2b.id]._jsonpCallback=function(){delete _e25["jsonp_"+_e2b.id];if(_e2b.requestId){_e21.global[_e23._callbacksProperty][_e2b.requestId]();}};}else{_e25._addDeadScript(_e2b);}}});return dfd;},_deferredCancel:function(dfd){dfd.canceled=true;},_deferredOk:function(dfd){var _e2d=dfd.ioArgs;return _e2d.json||_e2d.scriptLoaded||_e2d;},_deferredError:function(_e2e,dfd){return _e2e;},_deadScripts:[],_counter:1,_addDeadScript:function(_e2f){_e25._deadScripts.push({id:_e2f.id,frameDoc:_e2f.frameDoc});_e2f.frameDoc=null;},_validCheck:function(dfd){var _e30=_e25._deadScripts;if(_e30&&_e30.length>0){for(var i=0;i<_e30.length;i++){_e25.remove(_e30[i].id,_e30[i].frameDoc);delete _e25["jsonp_"+_e30[i].id];_e30[i].frameDoc=null;}_e25._deadScripts=[];}return true;},_ioCheck:function(dfd){var _e31=dfd.ioArgs;if(_e31.json||(_e31.scriptLoaded&&!_e31.args.checkString)){return true;}var _e32=_e31.args.checkString;return _e32&&eval("typeof("+_e32+") != 'undefined'");},_resHandle:function(dfd){if(_e25._ioCheck(dfd)){dfd.callback(dfd);}else{dfd.errback(new Error("inconceivable dojo.io.script._resHandle error"));}},_canAttach:function(){return true;},_jsonpCallback:function(json){this.ioArgs.json=json;if(this.ioArgs.requestId){_e21.global[_e23._callbacksProperty][this.ioArgs.requestId](json);}}};lang.setObject("dojo.io.script",_e25);return _e25;});},"ibm/tivoli/fwm/mxmap/ContextMenu":function(){define(["dojo/_base/declare","ibm/tivoli/fwm/mxmap/_Base","dijit/Menu","dijit/MenuItem"],function(_e33,_e34,Menu,_e35){return _e33([_e34],{divId:null,map:null,compId:null,_contextMenu:null,_emptyContextMenu:null,_currentCtxMenu:null,constructor:function(_e36){dojo.mixin(this,_e36);this.map.addMapEventHandler(this.map.Events.click,dojo.hitch(this,this._onClick));this.map.addMapEventHandler(this.map.Events.rightclick,dojo.hitch(this,this._onRightClick));dojo.create("div",{id:"popUpCtx"},dojo.byId(this.divId));dojo.create("div",{id:"popUpEmptyCtx"},dojo.byId(this.divId));this._contextMenu=new Menu({targetNodeIds:["popUpCtx"]});this._currentCtxMenu=this._contextMenu;this._emptyContextMenu=new Menu({targetNodeIds:["popUpEmptyCtx"]});var _e37=new _e35({label:ibm.tivoli.fwm.i18n.getMaxMsg("map","no_actions_available_label"),onClick:dojo.hitch(this,function(){})});this._emptyContextMenu.addChild(_e37);this.addSubscription("onCurrentRecordUpdate_"+this.compId,dojo.hitch(this,this.serverUpdated));},serverUpdated:function(data){if(data&&data.gisdata&&data.gisdata.flags&&data.gisdata.flags.readonly==true){this._currentCtxMenu=this._emptyContextMenu;}else{this._currentCtxMenu=this._contextMenu;}},_onClick:function(){dijit.popup.close(this._currentCtxMenu);},_contextArgs:{mapLocation:{}},_onRightClick:function(_e38){dijit.popup.close(this._currentCtxMenu);var _e39=_e38.location;var _e3a=dojo.position(dojo.byId(this.divId),true);var x=_e38.pixel.x+_e3a.x;var y=_e38.pixel.y+_e3a.y;this._contextArgs={mapLocation:_e39};dijit.popup.open({popup:this._currentCtxMenu,x:x,y:y,onExecute:dojo.hitch(this,function(ag){dijit.popup.close(this._currentCtxMenu);}),onCancel:function(ag){if(dojo.config.fwm.debug==true){}},orient:"L"});},_executeAction:function(_e3b){_e3b.execute(this._contextArgs);},addChild:function(_e3c){var _e3d=new _e35({label:_e3c.label,onClick:dojo.hitch(this,function(){this._executeAction(_e3c);})});this._contextMenu.addChild(_e3d);},destroyRecursive:function(){dijit.popup.close(this._contextMenu);dijit.popup.close(this._emptyContextMenu);}});});},"ibm/tivoli/fwm/mxmap/toolbar/ext/LayersTool":function(){define(["dijit","dojo","dojox","dojo/require!ibm/tivoli/fwm/mxmap/layers/LayerPanelWidget,ibm/tivoli/fwm/mxmap/_Base,ibm/tivoli/fwm/mxmap/toolbar/ext/_ToolTemplate,dijit/form/Button"],function(_e3e,dojo,_e3f){dojo.provide("ibm.tivoli.fwm.mxmap.toolbar.ext.LayersTool");dojo.require("ibm.tivoli.fwm.mxmap.layers.LayerPanelWidget");dojo.require("ibm.tivoli.fwm.mxmap._Base");dojo.require("ibm.tivoli.fwm.mxmap.toolbar.ext._ToolTemplate");dojo.require("dijit.form.Button");dojo.declare("ibm.tivoli.fwm.mxmap.toolbar.ext.LayersTool",ibm.tivoli.fwm.mxmap.toolbar.ext._ToolTemplate,{label:"Layers",iconClass:"basicMapToolbarBtn layersMapToolbarBtn",map:null,currentPanelWidget:null,constructor:function(_e40){dojo.mixin(this,_e40);var _e41=ibm.tivoli.fwm.i18n.getMaxMsg("map","layers");this.label=_e41||this.label;},execute:function(){this._destroyCurrentPanelWidget();var _e42=new ibm.tivoli.fwm.mxmap.layers.LayerPanelWidget({map:this.map,tool:this});_e42.updateLayers(this.map.getLayersManager().getLayers());},disable:function(){},setPanelWidget:function(_e43){this.currentPanelWidget=_e43;},destroy:function(){this._destroyCurrentPanelWidget();this.destroyRecursive();},_destroyCurrentPanelWidget:function(){if((this.currentPanelWidget!=null)&&(this.currentPanelWidget!=undefined)){this.currentPanelWidget.close();}}});});},"dijit/form/_FormSelectWidget":function(){define(["dojo/_base/array","dojo/_base/Deferred","dojo/aspect","dojo/data/util/sorter","dojo/_base/declare","dojo/dom","dojo/dom-class","dojo/_base/kernel","dojo/_base/lang","dojo/query","dojo/when","dojo/store/util/QueryResults","./_FormValueWidget"],function(_e44,_e45,_e46,_e47,_e48,dom,_e49,_e4a,lang,_e4b,when,_e4c,_e4d){var _e4e=_e48("dijit.form._FormSelectWidget",_e4d,{multiple:false,options:null,store:null,_setStoreAttr:function(val){if(this._created){this._deprecatedSetStore(val);}},query:null,_setQueryAttr:function(_e4f){if(this._created){this._deprecatedSetStore(this.store,this.selectedValue,{query:_e4f});}},queryOptions:null,_setQueryOptionsAttr:function(_e50){if(this._created){this._deprecatedSetStore(this.store,this.selectedValue,{queryOptions:_e50});}},labelAttr:"",onFetch:null,sortByLabel:true,loadChildrenOnOpen:false,onLoadDeferred:null,getOptions:function(_e51){var opts=this.options||[];if(_e51==null){return opts;}if(lang.isArrayLike(_e51)){return _e44.map(_e51,function(item){return this.getOptions(item);},this);}if(lang.isString(_e51)){_e51={value:_e51};}if(lang.isObject(_e51)){if(!_e44.some(opts,function(_e52,idx){for(var a in _e51){if(!(a in _e52)||_e52[a]!=_e51[a]){return false;}}_e51=idx;return true;})){_e51=-1;}}if(_e51>=0&&_e51<opts.length){return opts[_e51];}return null;},addOption:function(_e53){_e44.forEach(lang.isArrayLike(_e53)?_e53:[_e53],function(i){if(i&&lang.isObject(i)){this.options.push(i);}},this);this._loadChildren();},removeOption:function(_e54){var _e55=this.getOptions(lang.isArrayLike(_e54)?_e54:[_e54]);_e44.forEach(_e55,function(_e56){if(_e56){this.options=_e44.filter(this.options,function(node){return (node.value!==_e56.value||node.label!==_e56.label);});this._removeOptionItem(_e56);}},this);this._loadChildren();},updateOption:function(_e57){_e44.forEach(lang.isArrayLike(_e57)?_e57:[_e57],function(i){var _e58=this.getOptions({value:i.value}),k;if(_e58){for(k in i){_e58[k]=i[k];}}},this);this._loadChildren();},setStore:function(_e59,_e5a,_e5b){_e4a.deprecated(this.declaredClass+"::setStore(store, selectedValue, fetchArgs) is deprecated. Use set('query', fetchArgs.query), set('queryOptions', fetchArgs.queryOptions), set('store', store), or set('value', selectedValue) instead.","","2.0");this._deprecatedSetStore(_e59,_e5a,_e5b);},_deprecatedSetStore:function(_e5c,_e5d,_e5e){var _e5f=this.store;_e5e=_e5e||{};if(_e5f!==_e5c){var h;while((h=this._notifyConnections.pop())){h.remove();}if(!_e5c.get){lang.mixin(_e5c,{_oldAPI:true,get:function(id){var _e60=new _e45();this.fetchItemByIdentity({identity:id,onItem:function(_e61){_e60.resolve(_e61);},onError:function(_e62){_e60.reject(_e62);}});return _e60.promise;},query:function(_e63,_e64){var _e65=new _e45(function(){if(_e66.abort){_e66.abort();}});_e65.total=new _e45();var _e66=this.fetch(lang.mixin({query:_e63,onBegin:function(_e67){_e65.total.resolve(_e67);},onComplete:function(_e68){_e65.resolve(_e68);},onError:function(_e69){_e65.reject(_e69);}},_e64));return new _e4c(_e65);}});if(_e5c.getFeatures()["dojo.data.api.Notification"]){this._notifyConnections=[_e46.after(_e5c,"onNew",lang.hitch(this,"_onNewItem"),true),_e46.after(_e5c,"onDelete",lang.hitch(this,"_onDeleteItem"),true),_e46.after(_e5c,"onSet",lang.hitch(this,"_onSetItem"),true)];}}this._set("store",_e5c);}if(this.options&&this.options.length){this.removeOption(this.options);}if(this._queryRes&&this._queryRes.close){this._queryRes.close();}if(this._observeHandle&&this._observeHandle.remove){this._observeHandle.remove();this._observeHandle=null;}if(_e5e.query){this._set("query",_e5e.query);}if(_e5e.queryOptions){this._set("queryOptions",_e5e.queryOptions);}if(_e5c&&_e5c.query){this._loadingStore=true;this.onLoadDeferred=new _e45();this._queryRes=_e5c.query(this.query,this.queryOptions);when(this._queryRes,lang.hitch(this,function(_e6a){if(this.sortByLabel&&!_e5e.sort&&_e6a.length){if(_e5c.getValue){_e6a.sort(_e47.createSortFunction([{attribute:_e5c.getLabelAttributes(_e6a[0])[0]}],_e5c));}else{var _e6b=this.labelAttr;_e6a.sort(function(a,b){return a[_e6b]>b[_e6b]?1:b[_e6b]>a[_e6b]?-1:0;});}}if(_e5e.onFetch){_e6a=_e5e.onFetch.call(this,_e6a,_e5e);}_e44.forEach(_e6a,function(i){this._addOptionForItem(i);},this);if(this._queryRes.observe){this._observeHandle=this._queryRes.observe(lang.hitch(this,function(_e6c,_e6d,_e6e){if(_e6d==_e6e){this._onSetItem(_e6c);}else{if(_e6d!=-1){this._onDeleteItem(_e6c);}if(_e6e!=-1){this._onNewItem(_e6c);}}}),true);}this._loadingStore=false;this.set("value","_pendingValue" in this?this._pendingValue:_e5d);delete this._pendingValue;if(!this.loadChildrenOnOpen){this._loadChildren();}else{this._pseudoLoadChildren(_e6a);}this.onLoadDeferred.resolve(true);this.onSetStore();}),lang.hitch(this,function(err){console.error("dijit.form.Select: "+err.toString());this.onLoadDeferred.reject(err);}));}return _e5f;},_setValueAttr:function(_e6f,_e70){if(!this._onChangeActive){_e70=null;}if(this._loadingStore){this._pendingValue=_e6f;return;}if(_e6f==null){return;}if(lang.isArrayLike(_e6f)){_e6f=_e44.map(_e6f,function(_e71){return lang.isObject(_e71)?_e71:{value:_e71};});}else{if(lang.isObject(_e6f)){_e6f=[_e6f];}else{_e6f=[{value:_e6f}];}}_e6f=_e44.filter(this.getOptions(_e6f),function(i){return i&&i.value;});var opts=this.getOptions()||[];if(!this.multiple&&(!_e6f[0]||!_e6f[0].value)&&!!opts.length){_e6f[0]=opts[0];}_e44.forEach(opts,function(opt){opt.selected=_e44.some(_e6f,function(v){return v.value===opt.value;});});var val=_e44.map(_e6f,function(opt){return opt.value;});if(typeof val=="undefined"||typeof val[0]=="undefined"){return;}var disp=_e44.map(_e6f,function(opt){return opt.label;});this._setDisplay(this.multiple?disp:disp[0]);this.inherited(arguments,[this.multiple?val:val[0],_e70]);this._updateSelection();},_getDisplayedValueAttr:function(){var ret=_e44.map([].concat(this.get("selectedOptions")),function(v){if(v&&"label" in v){return v.label;}else{if(v){return v.value;}}return null;},this);return this.multiple?ret:ret[0];},_setDisplayedValueAttr:function(_e72){this.set("value",this.getOptions(typeof _e72=="string"?{label:_e72}:_e72));},_loadChildren:function(){if(this._loadingStore){return;}_e44.forEach(this._getChildren(),function(_e73){_e73.destroyRecursive();});_e44.forEach(this.options,this._addOptionItem,this);this._updateSelection();},_updateSelection:function(){this.focusedChild=null;this._set("value",this._getValueFromOpts());var val=[].concat(this.value);if(val&&val[0]){var self=this;_e44.forEach(this._getChildren(),function(_e74){var _e75=_e44.some(val,function(v){return _e74.option&&(v===_e74.option.value);});if(_e75&&!self.multiple){self.focusedChild=_e74;}_e49.toggle(_e74.domNode,this.baseClass.replace(/\s+|$/g,"SelectedOption "),_e75);_e74.domNode.setAttribute("aria-selected",_e75?"true":"false");},this);}},_getValueFromOpts:function(){var opts=this.getOptions()||[];if(!this.multiple&&opts.length){var opt=_e44.filter(opts,function(i){return i.selected;})[0];if(opt&&opt.value){return opt.value;}else{opts[0].selected=true;return opts[0].value;}}else{if(this.multiple){return _e44.map(_e44.filter(opts,function(i){return i.selected;}),function(i){return i.value;})||[];}}return "";},_onNewItem:function(item,_e76){if(!_e76||!_e76.parent){this._addOptionForItem(item);}},_onDeleteItem:function(item){var _e77=this.store;this.removeOption({value:_e77.getIdentity(item)});},_onSetItem:function(item){this.updateOption(this._getOptionObjForItem(item));},_getOptionObjForItem:function(item){var _e78=this.store,_e79=(this.labelAttr&&this.labelAttr in item)?item[this.labelAttr]:_e78.getLabel(item),_e7a=(_e79?_e78.getIdentity(item):null);return {value:_e7a,label:_e79,item:item};},_addOptionForItem:function(item){var _e7b=this.store;if(_e7b.isItemLoaded&&!_e7b.isItemLoaded(item)){_e7b.loadItem({item:item,onItem:function(i){this._addOptionForItem(i);},scope:this});return;}var _e7c=this._getOptionObjForItem(item);this.addOption(_e7c);},constructor:function(_e7d){this._oValue=(_e7d||{}).value||null;this._notifyConnections=[];},buildRendering:function(){this.inherited(arguments);dom.setSelectable(this.focusNode,false);},_fillContent:function(){if(!this.options){this.options=this.srcNodeRef?_e4b("> *",this.srcNodeRef).map(function(node){if(node.getAttribute("type")==="separator"){return {value:"",label:"",selected:false,disabled:false};}return {value:(node.getAttribute("data-"+_e4a._scopeName+"-value")||node.getAttribute("value")),label:String(node.innerHTML),selected:node.getAttribute("selected")||false,disabled:node.getAttribute("disabled")||false};},this):[];}if(!this.value){this._set("value",this._getValueFromOpts());}else{if(this.multiple&&typeof this.value=="string"){this._set("value",this.value.split(","));}}},postCreate:function(){this.inherited(arguments);_e46.after(this,"onChange",lang.hitch(this,"_updateSelection"));var _e7e=this.store;if(_e7e&&(_e7e.getIdentity||_e7e.getFeatures()["dojo.data.api.Identity"])){this.store=null;this._deprecatedSetStore(_e7e,this._oValue,{query:this.query,queryOptions:this.queryOptions});}this._storeInitialized=true;},startup:function(){this._loadChildren();this.inherited(arguments);},destroy:function(){var h;while((h=this._notifyConnections.pop())){h.remove();}if(this._queryRes&&this._queryRes.close){this._queryRes.close();}if(this._observeHandle&&this._observeHandle.remove){this._observeHandle.remove();this._observeHandle=null;}this.inherited(arguments);},_addOptionItem:function(){},_removeOptionItem:function(){},_setDisplay:function(){},_getChildren:function(){return [];},_getSelectedOptionsAttr:function(){return this.getOptions({selected:true});},_pseudoLoadChildren:function(){},onSetStore:function(){}});return _e4e;});},"dijit/form/Select":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/i18n","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","./_FormSelectWidget","../_HasDropDown","../DropDownMenu","../MenuItem","../MenuSeparator","../Tooltip","../_KeyNavMixin","../registry","dojo/text!./templates/Select.html","dojo/i18n!./nls/validate"],function(_e7f,_e80,_e81,_e82,_e83,i18n,keys,lang,on,has,_e84,_e85,_e86,_e87,_e88,_e89,_e8a,_e8b,_e8c){var _e8d=_e80("dijit.form._SelectMenu",_e86,{autoFocus:true,buildRendering:function(){this.inherited(arguments);this.domNode.setAttribute("role","listbox");},postCreate:function(){this.inherited(arguments);this.own(on(this.domNode,"selectstart",function(evt){evt.preventDefault();evt.stopPropagation();}));},focus:function(){var _e8e=false,val=this.parentWidget.value;if(lang.isArray(val)){val=val[val.length-1];}if(val){_e7f.forEach(this.parentWidget._getChildren(),function(_e8f){if(_e8f.option&&(val===_e8f.option.value)){_e8e=true;this.focusChild(_e8f,false);}},this);}if(!_e8e){this.inherited(arguments);}}});var _e90=_e80("dijit.form.Select"+(has("dojo-bidi")?"_NoBidi":""),[_e84,_e85,_e8a],{baseClass:"dijitSelect dijitValidationTextBox",templateString:_e8c,_buttonInputDisabled:has("ie")?"disabled":"",required:false,state:"",message:"",tooltipPosition:[],emptyLabel:"&#160;",_isLoaded:false,_childrenLoaded:false,labelType:"html",_fillContent:function(){this.inherited(arguments);if(this.options.length&&!this.value&&this.srcNodeRef){var si=this.srcNodeRef.selectedIndex||0;this._set("value",this.options[si>=0?si:0].value);}this.dropDown=new _e8d({id:this.id+"_menu",parentWidget:this});_e82.add(this.dropDown.domNode,this.baseClass.replace(/\s+|$/g,"Menu "));},_getMenuItemForOption:function(_e91){if(!_e91.value&&!_e91.label){return new _e88({ownerDocument:this.ownerDocument});}else{var _e92=lang.hitch(this,"_setValueAttr",_e91);var item=new _e87({option:_e91,label:(this.labelType==="text"?(_e91.label||"").toString().replace(/&/g,"&amp;").replace(/</g,"&lt;"):_e91.label)||this.emptyLabel,onClick:_e92,ownerDocument:this.ownerDocument,dir:this.dir,textDir:this.textDir,disabled:_e91.disabled||false});item.focusNode.setAttribute("role","option");return item;}},_addOptionItem:function(_e93){if(this.dropDown){this.dropDown.addChild(this._getMenuItemForOption(_e93));}},_getChildren:function(){if(!this.dropDown){return [];}return this.dropDown.getChildren();},focus:function(){if(!this.disabled&&this.focusNode.focus){try{this.focusNode.focus();}catch(e){}}},focusChild:function(_e94){if(_e94){this.set("value",_e94.option);}},_getFirst:function(){var _e95=this._getChildren();return _e95.length?_e95[0]:null;},_getLast:function(){var _e96=this._getChildren();return _e96.length?_e96[_e96.length-1]:null;},childSelector:function(node){var node=_e8b.byNode(node);return node&&node.getParent()==this.dropDown;},onKeyboardSearch:function(item,evt,_e97,_e98){if(item){this.focusChild(item);}},_loadChildren:function(_e99){if(_e99===true){if(this.dropDown){delete this.dropDown.focusedChild;this.focusedChild=null;}if(this.options.length){this.inherited(arguments);}else{_e7f.forEach(this._getChildren(),function(_e9a){_e9a.destroyRecursive();});var item=new _e87({ownerDocument:this.ownerDocument,label:this.emptyLabel});this.dropDown.addChild(item);}}else{this._updateSelection();}this._isLoaded=false;this._childrenLoaded=true;if(!this._loadingStore){this._setValueAttr(this.value,false);}},_refreshState:function(){if(this._started){this.validate(this.focused);}},startup:function(){this.inherited(arguments);this._refreshState();},_setValueAttr:function(_e9b){this.inherited(arguments);_e81.set(this.valueNode,"value",this.get("value"));this._refreshState();},_setNameAttr:"valueNode",_setDisabledAttr:function(_e9c){this.inherited(arguments);this._refreshState();},_setRequiredAttr:function(_e9d){this._set("required",_e9d);this.focusNode.setAttribute("aria-required",_e9d);this._refreshState();},_setOptionsAttr:function(_e9e){this._isLoaded=false;this._set("options",_e9e);},_setDisplay:function(_e9f){var lbl=(this.labelType==="text"?(_e9f||"").replace(/&/g,"&amp;").replace(/</g,"&lt;"):_e9f)||this.emptyLabel;this.containerNode.innerHTML="<span role=\"option\" aria-selected=\"true\" class=\"dijitReset dijitInline "+this.baseClass.replace(/\s+|$/g,"Label ")+"\">"+lbl+"</span>";},validate:function(_ea0){var _ea1=this.disabled||this.isValid(_ea0);this._set("state",_ea1?"":(this._hasBeenBlurred?"Error":"Incomplete"));this.focusNode.setAttribute("aria-invalid",_ea1?"false":"true");var _ea2=_ea1?"":this._missingMsg;if(_ea2&&this.focused&&this._hasBeenBlurred){_e89.show(_ea2,this.domNode,this.tooltipPosition,!this.isLeftToRight());}else{_e89.hide(this.domNode);}this._set("message",_ea2);return _ea1;},isValid:function(){return (!this.required||this.value===0||!(/^\s*$/.test(this.value||"")));},reset:function(){this.inherited(arguments);_e89.hide(this.domNode);this._refreshState();},postMixInProperties:function(){this.inherited(arguments);this._missingMsg=i18n.getLocalization("dijit.form","validate",this.lang).missingMessage;},postCreate:function(){this.inherited(arguments);this.own(on(this.domNode,"selectstart",function(evt){evt.preventDefault();evt.stopPropagation();}));this.domNode.setAttribute("aria-expanded","false");var _ea3=this._keyNavCodes;delete _ea3[keys.LEFT_ARROW];delete _ea3[keys.RIGHT_ARROW];},_setStyleAttr:function(_ea4){this.inherited(arguments);_e82.toggle(this.domNode,this.baseClass.replace(/\s+|$/g,"FixedWidth "),!!this.domNode.style.width);},isLoaded:function(){return this._isLoaded;},loadDropDown:function(_ea5){this._loadChildren(true);this._isLoaded=true;_ea5();},destroy:function(_ea6){if(this.dropDown&&!this.dropDown._destroyed){this.dropDown.destroyRecursive(_ea6);delete this.dropDown;}_e89.hide(this.domNode);this.inherited(arguments);},_onFocus:function(){this.validate(true);},_onBlur:function(){_e89.hide(this.domNode);this.inherited(arguments);this.validate(false);}});if(has("dojo-bidi")){_e90=_e80("dijit.form.Select",_e90,{_setDisplay:function(_ea7){this.inherited(arguments);this.applyTextDir(this.containerNode);}});}_e90._Menu=_e8d;function _ea8(_ea9){return function(evt){if(!this._isLoaded){this.loadDropDown(lang.hitch(this,_ea9,evt));}else{this.inherited(_ea9,arguments);}};};_e90.prototype._onContainerKeydown=_ea8("_onContainerKeydown");_e90.prototype._onContainerKeypress=_ea8("_onContainerKeypress");return _e90;});},"dojo/json5/util":function(){define(["./unicode"],function(_eaa){return {isSpaceSeparator:function(c){return typeof c==="string"&&_eaa.Space_Separator.test(c);},isIdStartChar:function(c){return typeof c==="string"&&((c>="a"&&c<="z")||(c>="A"&&c<="Z")||(c==="$")||(c==="_")||_eaa.ID_Start.test(c));},isIdContinueChar:function(c){return typeof c==="string"&&((c>="a"&&c<="z")||(c>="A"&&c<="Z")||(c>="0"&&c<="9")||(c==="$")||(c==="_")||(c==="")||(c==="")||_eaa.ID_Continue.test(c));},isDigit:function(c){return typeof c==="string"&&/[0-9]/.test(c);},isHexDigit:function(c){return typeof c==="string"&&/[0-9A-Fa-f]/.test(c);},};});},"ibm/tivoli/fwm/mxmap/toolbar/ext/QueryNearResources":function(){define(["dijit","dojo","dojox","dojo/require!ibm/tivoli/fwm/mxmap/toolbar/ext/_ComboTool,dijit/form/Button"],function(_eab,dojo,_eac){dojo.provide("ibm.tivoli.fwm.mxmap.toolbar.ext.QueryNearResources");dojo.require("ibm.tivoli.fwm.mxmap.toolbar.ext._ComboTool");dojo.require("dijit.form.Button");dojo.declare("ibm.tivoli.fwm.mxmap.toolbar.ext.QueryNearResources",ibm.tivoli.fwm.mxmap.toolbar.ext._ComboTool,{label:"Nearby resources",iconClass:"basicMapToolbarBtn nearbyResourcesMapToolbarBtn",map:null,nearbyCrewsLabel:"",nearbyLaborsLabel:"",allLaborAndCrewsLabel:"",laborAndCrewsOnShiftLabel:"",constructor:function(_ead){dojo.mixin(this,_ead);var _eae=ibm.tivoli.fwm.i18n.getMaxMsg("map","nearresourcestool");this.label=_eae||this.label;this.nearbyCrewsLabel=ibm.tivoli.fwm.i18n.getMaxMsg("map","nearbycrews");this.nearbyLaborsLabel=ibm.tivoli.fwm.i18n.getMaxMsg("map","nearbylabors");this.laborAndCrewsOnShiftLabel=ibm.tivoli.fwm.i18n.getMaxMsg("map","laborandcrewsonshift");this.allLaborAndCrewsLabel=ibm.tivoli.fwm.i18n.getMaxMsg("map","alllaborandcrews");this._initMenuItems();this.addSubscription("onMapRefresh_"+this.map.getId(),dojo.hitch(this,this._onMapRefresh));},_initMenuItems:function(){this.addMenuItem("onSameShiftAsUser",this.laborAndCrewsOnShiftLabel,true);this.addMenuItem("all",this.allLaborAndCrewsLabel);},updateLayers:function(_eaf,_eb0,_eb1){var _eb2=_eb1&&_eb1.automatic;var _eb3=false;if(_eb1){_eb3=true;}if(_eaf&&_eaf.length>0){this._sendEventToLayer(this.nearbyCrewsLabel,_eaf,_eb3);}else{this._sendEventToRemoveLayer(this.nearbyCrewsLabel);}if(_eb0&&_eb0.length>0){this._sendEventToLayer(this.nearbyLaborsLabel,_eb0,_eb3);}else{this._sendEventToRemoveLayer(this.nearbyLaborsLabel);}if(_eb2!=true&&_eb0.length==0&&_eaf.length==0){this.setActive(false);this.map.getMaximo().showMessage("mapserver","noresourcesinarea");}},disable:function(){},destroy:function(){this.destroyRecursive();},_getLBSData:function(_eb4){var _eb5=[];if(_eb4){for(var _eb6 in _eb4){if(_eb4[_eb6].lbsdata){_eb5.push(_eb4[_eb6].lbsdata);}else{console.warn("[QueryNearResouces] Records has a record without lbsdata.",_eb4);return null;}}}else{console.warn("[QueryNearResouces] Records has a record without lbsdata.",_eb4);return null;}return _eb5;},_sendEventToLayer:function(_eb7,_eb8,_eb9){dojo.publish("addRecordsToLayer_"+this.map.getId(),[_eb7,_eb8,true,null,null,_eb9]);},_sendEventToRemoveLayer:function(_eba){dojo.publish("removeLayer_"+this.map.getId(),[_eba]);},executeOn:function(_ebb){var fct=function(data){if(data.status=="TOOMANYRECORDS"){this.setActive(false);this.map.getMaximo().showMessage(data.error.group,data.error.key,[data.error.params]);return;}var _ebc=data.crews;var _ebd=data.labors;var _ebe=[];if(_ebc!=null){_ebe.join(this._getLBSData(_ebc));}if(_ebd!=null){_ebe.join(this._getLBSData(_ebd));}if(_ebe.length>0){this.map.getAllPointsFromWGS84(_ebe,dojo.hitch(this,function(){this.updateLayers(_ebc,_ebd,_ebb.refreshOptions);}),dojo.hitch(this,function(_ebf){if(_ebf&&_ebf.msgkey){this.map.getMaximo().showMessage(_ebf.msggroup,_ebf.msgkey);}}));}else{this.updateLayers(_ebc,_ebd,_ebb.refreshOptions);}};var _ec0=function(data){console.warn("[QueryNearResources] Error querying nearby resources",data);};var _ec1=this.map.getBounds();var _ec2=function(ps){var _ec3=this.map.getBoundingBoxFromPoints(ps);var _ec4=(_ebb.menuItem!=undefined)?_ebb.menuItem.id:"all";var _ec5={"bounds":_ec3,"filterOption":_ec4};this.map.getMaximo().getCrewLaborByQueryParams(dojo.hitch(this,fct),dojo.hitch(this,_ec0),_ec5);};this.map.getAllPointsInWGS84([_ec1.sw,_ec1.ne],dojo.hitch(this,_ec2));},executeOff:function(){this._sendEventToRemoveLayer(this.nearbyLaborsLabel);this._sendEventToRemoveLayer(this.nearbyCrewsLabel);},_onMapRefresh:function(_ec6){if(this.isActive()==true){this.executeOff();this.executeOn({refreshOptions:_ec6});}}});});},"dijit/_KeyNavMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/on","dijit/registry","dijit/_FocusMixin"],function(_ec7,_ec8,_ec9,keys,lang,on,_eca,_ecb){return _ec8("dijit._KeyNavMixin",_ecb,{tabIndex:"0",childSelector:null,postCreate:function(){this.inherited(arguments);_ec9.set(this.domNode,"tabIndex",this.tabIndex);if(!this._keyNavCodes){var _ecc=this._keyNavCodes={};_ecc[keys.HOME]=lang.hitch(this,"focusFirstChild");_ecc[keys.END]=lang.hitch(this,"focusLastChild");_ecc[this.isLeftToRight()?keys.LEFT_ARROW:keys.RIGHT_ARROW]=lang.hitch(this,"_onLeftArrow");_ecc[this.isLeftToRight()?keys.RIGHT_ARROW:keys.LEFT_ARROW]=lang.hitch(this,"_onRightArrow");_ecc[keys.UP_ARROW]=lang.hitch(this,"_onUpArrow");_ecc[keys.DOWN_ARROW]=lang.hitch(this,"_onDownArrow");}var self=this,_ecd=typeof this.childSelector=="string"?this.childSelector:lang.hitch(this,"childSelector");this.own(on(this.domNode,"keypress",lang.hitch(this,"_onContainerKeypress")),on(this.domNode,"keydown",lang.hitch(this,"_onContainerKeydown")),on(this.domNode,"focus",lang.hitch(this,"_onContainerFocus")),on(this.containerNode,on.selector(_ecd,"focusin"),function(evt){self._onChildFocus(_eca.getEnclosingWidget(this),evt);}));},_onLeftArrow:function(){},_onRightArrow:function(){},_onUpArrow:function(){},_onDownArrow:function(){},focus:function(){this.focusFirstChild();},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1);},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1);},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild());},focusLastChild:function(){this.focusChild(this._getLastFocusableChild());},focusChild:function(_ece,last){if(!_ece){return;}if(this.focusedChild&&_ece!==this.focusedChild){this._onChildBlur(this.focusedChild);}_ece.set("tabIndex",this.tabIndex);_ece.focus(last?"end":"start");},_onContainerFocus:function(evt){if(evt.target!==this.domNode||this.focusedChild){return;}this.focus();},_onFocus:function(){_ec9.set(this.domNode,"tabIndex","-1");this.inherited(arguments);},_onBlur:function(evt){_ec9.set(this.domNode,"tabIndex",this.tabIndex);if(this.focusedChild){this.focusedChild.set("tabIndex","-1");this.lastFocusedChild=this.focusedChild;this._set("focusedChild",null);}this.inherited(arguments);},_onChildFocus:function(_ecf){if(_ecf&&_ecf!=this.focusedChild){if(this.focusedChild&&!this.focusedChild._destroyed){this.focusedChild.set("tabIndex","-1");}_ecf.set("tabIndex",this.tabIndex);this.lastFocused=_ecf;this._set("focusedChild",_ecf);}},_searchString:"",multiCharSearchDuration:1000,onKeyboardSearch:function(item,evt,_ed0,_ed1){if(item){this.focusChild(item);}},_keyboardSearchCompare:function(item,_ed2){var _ed3=item.domNode,text=item.label||(_ed3.focusNode?_ed3.focusNode.label:"")||_ed3.innerText||_ed3.textContent||"",_ed4=text.replace(/^\s+/,"").substr(0,_ed2.length).toLowerCase();return (!!_ed2.length&&_ed4==_ed2)?-1:0;},_onContainerKeydown:function(evt){var func=this._keyNavCodes[evt.keyCode];if(func){func(evt,this.focusedChild);evt.stopPropagation();evt.preventDefault();this._searchString="";}else{if(evt.keyCode==keys.SPACE&&this._searchTimer&&!(evt.ctrlKey||evt.altKey||evt.metaKey)){evt.stopImmediatePropagation();evt.preventDefault();this._keyboardSearch(evt," ");}}},_onContainerKeypress:function(evt){if(evt.charCode<=keys.SPACE||evt.ctrlKey||evt.altKey||evt.metaKey){return;}evt.preventDefault();evt.stopPropagation();this._keyboardSearch(evt,String.fromCharCode(evt.charCode).toLowerCase());},_keyboardSearch:function(evt,_ed5){var _ed6=null,_ed7,_ed8=0,_ed9=lang.hitch(this,function(){if(this._searchTimer){this._searchTimer.remove();}this._searchString+=_ed5;var _eda=/^(.)\1*$/.test(this._searchString);var _edb=_eda?1:this._searchString.length;_ed7=this._searchString.substr(0,_edb);this._searchTimer=this.defer(function(){this._searchTimer=null;this._searchString="";},this.multiCharSearchDuration);var _edc=this.focusedChild||null;if(_edb==1||!_edc){_edc=this._getNextFocusableChild(_edc,1);if(!_edc){return;}}var stop=_edc;do{var rc=this._keyboardSearchCompare(_edc,_ed7);if(!!rc&&_ed8++==0){_ed6=_edc;}if(rc==-1){_ed8=-1;break;}_edc=this._getNextFocusableChild(_edc,1);}while(_edc&&_edc!=stop);});_ed9();this.onKeyboardSearch(_ed6,evt,_ed7,_ed8);},_onChildBlur:function(){},_getNextFocusableChild:function(_edd,dir){var _ede=_edd;do{if(!_edd){_edd=this[dir>0?"_getFirst":"_getLast"]();if(!_edd){break;}}else{_edd=this._getNext(_edd,dir);}if(_edd!=null&&_edd!=_ede&&_edd.isFocusable()){return _edd;}}while(_edd!=_ede);return null;},_getFirst:function(){return null;},_getLast:function(){return null;},_getNext:function(_edf,dir){if(_edf){_edf=_edf.domNode;while(_edf){_edf=_edf[dir<0?"previousSibling":"nextSibling"];if(_edf&&"getAttribute" in _edf){var w=_eca.byNode(_edf);if(w){return w;}}}}return null;}});});},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../when"],function(_ee0,lang,when){var _ee1=function(_ee2){if(!_ee2){return _ee2;}var _ee3=!!_ee2.then;if(_ee3){_ee2=lang.delegate(_ee2);}function _ee4(_ee5){_ee2[_ee5]=function(){var args=arguments;var _ee6=when(_ee2,function(_ee7){Array.prototype.unshift.call(args,_ee7);return _ee1(_ee0[_ee5].apply(_ee0,args));});if(_ee5!=="forEach"||_ee3){return _ee6;}};};_ee4("forEach");_ee4("filter");_ee4("map");if(_ee2.total==null){_ee2.total=when(_ee2,function(_ee8){return _ee8.length;});}return _ee2;};lang.setObject("dojo.store.util.QueryResults",_ee1);return _ee1;});},"ibm/tivoli/fwm/mxmap/toolbar/ToolbarSeparator":function(){define(["dojo/_base/declare","dijit/_Templated"],function(_ee9,_eea){return _ee9([_eea],{templateString:"<div class=\"mapTbSep dijitInline\" waiRole=\"presentation\"></div>",postCreate:function(){dojo.setSelectable(this.domNode,false);},isFocusable:function(){return false;}});});},"dijit/form/_FormWidget":function(){define(["dojo/_base/declare","dojo/sniff","dojo/_base/kernel","dojo/ready","../_Widget","../_CssStateMixin","../_TemplatedMixin","./_FormWidgetMixin"],function(_eeb,has,_eec,_eed,_eee,_eef,_ef0,_ef1){if(has("dijit-legacy-requires")){_eed(0,function(){var _ef2=["dijit/form/_FormValueWidget"];require(_ef2);});}return _eeb("dijit.form._FormWidget",[_eee,_ef0,_eef,_ef1],{setDisabled:function(_ef3){_eec.deprecated("setDisabled("+_ef3+") is deprecated. Use set('disabled',"+_ef3+") instead.","","2.0");this.set("disabled",_ef3);},setValue:function(_ef4){_eec.deprecated("dijit.form._FormWidget:setValue("+_ef4+") is deprecated.  Use set('value',"+_ef4+") instead.","","2.0");this.set("value",_ef4);},getValue:function(){_eec.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value");},postMixInProperties:function(){this.nameAttrSetting=(this.name&&!has("msapp"))?("name=\""+this.name.replace(/"/g,"&quot;")+"\""):"";this.inherited(arguments);}});});},"ibm/tivoli/fwm/mxmap/layers/Layer":function(){define(["dojo/_base/declare","ibm/tivoli/fwm/mxmap/_Base","ibm/tivoli/fwm/mxmap/ImageLibraryManager"],function(_ef5,_ef6,_ef7){ibm.tivoli.fwm.mxmap.layers={LayerType:{LAYER:0,SYMBOLOGY:1,LEGEND:2,VIRTUAL_LAYER:4}};return _ef5([_ef6],{_layerName:null,_layerId:null,_records:null,_map:null,_disabled:null,_childLayers:null,_parentLayer:null,_leftIconURL:null,_rightIconURL:null,_rightIconSet:false,_childrenTitle:null,layerRecords:null,_mboMarkerOptions:null,_isAddingRecord:false,_recordQueueParallel:null,_useLBSPosition:false,constructor:function(_ef8){dojo.mixin(this,_ef8);this._childLayers={};this._recordQueueParallel=[];this._layerId=_ef8.layerId;this._mboMarkerOptions=new this.MboMarkerOptionsTable();this._map=_ef8.map;this.layerRecords=[];this._disabled=true;this._layerName=this.layerName;this._childrenTitle=_ef8.childrenTitle;this._parentLayer=_ef8.parentLayer;var _ef9=_ef7.getImageLibraryManager();this._rightIconURL=_ef9.getLayerDetailsOffImageInfo().getImageURL();if(this.layerType==ibm.tivoli.fwm.mxmap.layers.LayerType.LAYER){this.layerConf=this.symbManager.getLayerConfigById(this._layerId);if(!this.layerConf){console.warn("[Layer] No conf for ",this._layerId);this.layerConf=this.symbManager.getDefaultLayerConfigFor(this._layerId);}this._layerName=this.layerConf.label;this._childrenTitle=this.layerConf.symbologyTitle;var _efa=this.symbManager.getSymbologyConfigArrayByLayer(this.layerConf);var _efb=true;for(var _efc in _efa){var _efd=_efa[_efc];var _efe=_efd.type;var _eff=_efd.label;var _f00=_efd.legendTitle;var _f01=this.createNewChildLayer({layerName:_eff,layerId:_efc.toLowerCase(),layerConf:_efd,map:this._map,layerType:ibm.tivoli.fwm.mxmap.layers.LayerType.SYMBOLOGY,symbologyType:_efe,childrenTitle:_f00});if(_efb==true){_f01.enable();_f01.setDefault();this.symbManager.setActiveSymbology(this.layerConf.id,_efd);_efb=false;}var _f02=this.symbManager.getLegendConfigArrayBySymbology(_efd);for(var _f03 in _f02){var _f04=_f02[_f03];var _f05=_f04.label;var _f06=this.symbManager.fixSymbolUrl(_f04.symbol);var _f07=_f01.createNewChildLayer({layerConf:_f04,layerName:_f05,layerId:_f03.toLowerCase(),map:this._map,layerType:ibm.tivoli.fwm.mxmap.layers.LayerType.LEGEND,symbol:_f06});}}var _f08=this.symbManager.getDefaultSymbologyForLayer(this.layerConf.id);if(_f08!=null){var _f01=null;_f01=dojo.filter(this.getChildren(),function(_f09){return (_f09.layerId==_f08);});if(_f01.length>0){_f01[0].toggleState();_f01[0].setDefault();this.symbManager.setActiveSymbology(this.layerConf.id,_efa[_f08]);}}}this.init();},init:function(){this._setLeftIconURL();},_setLeftIconURL:function(){var _f0a=_ef7.getImageLibraryManager();if(this.isDisabled()){this._leftIconURL=_f0a.getLayerOffImageInfo().getImageURL();}else{this._leftIconURL=_f0a.getLayerOnImageInfo().getImageURL();}},_setRightIconURL:function(){var _f0b=_ef7.getImageLibraryManager();this._rightIconURL=_f0b.getLayerDetailsImageInfo().getImageURL();this._rightIconSet=true;},getLeftIconURL:function(){return this._leftIconURL;},getRightIconURL:function(){return this._rightIconURL;},getLayerName:function(){return this._layerName;},getLayerId:function(){return this._layerId;},getLayerConfig:function(){return this.layerConf;},getMXRecordSet:function(){return this._records;},toggleState:function(){if(this.isDisabled()){this.enable();}else{this.disable();}},show:function(){this._disabled=false;if(this._records!=null){this._records.showMXRecordsOnMap();}},addRecord:function(_f0c,_f0d){if(this._isAddingRecord==true){this._recordQueueParallel.push({mboInfo:_f0c,markerOptions:_f0d});return;}this._isAddingRecord=true;var _f0e=this._getRecordIndex(_f0c);if(_f0e!=null){_f0c.counter=this.layerRecords[_f0e].counter;this.map.removeMboMarkerFromMap(this.layerRecords[_f0e],this._layerId);_f0c.counter++;this.layerRecords[_f0e]=_f0c;}else{_f0c.counter=1;this.layerRecords.push(_f0c);}if(!this.isDisabled()){this.map.addMboMarker(_f0c,_f0d,this._layerId);var _f0f=this._map.getLayersManager();var _f10=_f0f.getLegendForRecord(_f0c,this);if(_f0f.isLegendEnabledForRecord(_f10)==false){this._map.removeMboMarkerFromMap(_f0c,this._layerId);}}this._isAddingRecord=false;this.executeQueuedParallel();},removeRecord:function(_f11){var _f12=this._getRecordIndex(_f11);if(_f12!=null){var _f13=--this.layerRecords[_f12].counter;if(_f13==0){this.layerRecords.splice(_f12,1);this.map.removeMboMarkerFromMap(_f11,this._layerId);}return _f13;}},_getRecordIndex:function(_f14){var _f15=this._map.getLayersManager();for(var i=0;i<this.layerRecords.length;++i){if(_f15.areMboInfosEqual(this.layerRecords[i],_f14)){return i;}}return null;},hasRecord:function(_f16){return (this._getRecordIndex(_f16)!=null)?true:false;},hasRecords:function(){return this.layerRecords.length>0;},isVisibleInUI:function(){if(this.layerType==ibm.tivoli.fwm.mxmap.layers.LayerType.LAYER){return this.hasRecords();}else{return true;}},addMXRecordSet:function(_f17){if(this._records!=null){this._records.addMXRecordSet(_f17);}},removeMXRecordSetData:function(){if(this._records!=null){this._records.removeMXRecordsFromMap();}else{if(dojo.config.fwm.debug==true){}}if(this.layerRecords!=null){for(var i=0;i<this.layerRecords.length;i++){var _f18=this.layerRecords[i];this._map.removeMboMarker(_f18,this._layerId);}this.layerRecords=[];}},isDisabled:function(){return (this._disabled==true);},removeMXRecordByUid:function(_f19){if(this._records!=null){this._records.removeRecordFromMap(_f19);}else{if(dojo.config.fwm.debug==true){}}},createNewChildLayer:function(_f1a){var _f1b=null;_f1a.parentLayer=this;switch(_f1a.layerType){case ibm.tivoli.fwm.mxmap.layers.LayerType.SYMBOLOGY:require(["ibm/tivoli/fwm/mxmap/layers/SymbologyLayer"],function(_f1c){_f1b=new _f1c(_f1a);});break;case ibm.tivoli.fwm.mxmap.layers.LayerType.LEGEND:require(["ibm/tivoli/fwm/mxmap/layers/LegendLayer"],function(_f1d){_f1b=new _f1d(_f1a);});break;default:_f1b=new Layer(_f1a);break;}if(_f1b!=null){this.addChildLayer(_f1b);}return _f1b;},addChildLayer:function(_f1e,_f1f){var _f20=_f1e.getLayerName();var _f21=this.getChildLayer(_f20);if(_f21==null){this._childLayers[_f20]=_f1e;}if(this._rightIconSet==false){this._setRightIconURL();}},getChildLayer:function(_f22){if(this._childLayers.hasOwnProperty(_f22)==true){return this._childLayers[_f22];}return null;},getChildren:function(){var _f23=[];for(var key in this._childLayers){_f23.push(this._childLayers[key]);}return _f23;},getParentLayer:function(){return this._parentLayer;},getSiblings:function(){return this.isRoot()?null:this._parentLayer.getChildren();},hasChildren:function(){var _f24=false;for(var key in this._childLayers){_f24=true;break;}return _f24;},isRoot:function(){return (this._parentLayer==null);},enable:function(){this._disabled=false;if(this.layerRecords!=null){for(var i=0;i<this.layerRecords.length;i++){var _f25=this.layerRecords[i];var _f26=this._map.getLayersManager();var _f27=_f26.getLegendForRecord(_f25,this);if(_f26.isLegendEnabledForRecord(_f27)==true){this._map.showMboMarker(_f25,this._layerId);}}}this._setLeftIconURL();},disable:function(){this._disabled=true;if(this.layerRecords!=null){for(var i=0;i<this.layerRecords.length;i++){var _f28=this.layerRecords[i];this._map.removeMboMarkerFromMap(_f28,this._layerId);}}this._setLeftIconURL();},redrawMarkers:function(){if(this.layerRecords!=null&&!this.isDisabled()){for(var i=0;i<this.layerRecords.length;i++){var _f29=this.layerRecords[i];this._map.removeMboMarkerFromMap(_f29,this._layerId);var _f2a=this._map.getLayersManager();var _f2b=_f2a.getLegendForRecord(_f29,this);if(_f2a.isLegendEnabledForRecord(_f2b)==true){this._map.showMboMarker(_f29,this._layerId);}}}},getChildrenTitle:function(){return this._childrenTitle;},setMboMarkerInfo:function(_f2c,opt){return this._mboMarkerOptions.setMboMarkerInfo(_f2c,opt);},getMboMarkerInfo:function(_f2d){return this._mboMarkerOptions.getMboMarkerInfo(_f2d);},executeQueuedParallel:function(){while(this._recordQueueParallel.length>0){var obj=this._recordQueueParallel.pop();this.addRecord(obj.mboInfo,obj.markerOptions);}},getRecords:function(){return this.layerRecords;},setUseLBSPosition:function(_f2e){this._useLBSPosition=_f2e;},useLBSPosition:function(){return (this._useLBSPosition==true);},MboMarkerOptionsTable:function(){this.mbosOnMap={};this.setMboMarkerInfo=function(_f2f,opt){this._createMboMarkerHashRecord(_f2f);var _f30=((_f2f.extrakey!=undefined)&&(_f2f.extrakey!=null))?_f2f.extrakey:0;for(var _f31 in opt){this.mbosOnMap[_f2f.mxdata.mboName][_f2f.mxdata.uid.value][_f30][_f31]=opt[_f31];}};this._createMboMarkerHashRecord=function(_f32){if(!this.mbosOnMap[_f32.mxdata.mboName]){this.mbosOnMap[_f32.mxdata.mboName]={};}if(!this.mbosOnMap[_f32.mxdata.mboName][_f32.mxdata.uid.value]){this.mbosOnMap[_f32.mxdata.mboName][_f32.mxdata.uid.value]={};}var _f33=((_f32.extrakey!=undefined)&&(_f32.extrakey!=null))?_f32.extrakey:0;if(!this.mbosOnMap[_f32.mxdata.mboName][_f32.mxdata.uid.value][_f33]){this.mbosOnMap[_f32.mxdata.mboName][_f32.mxdata.uid.value][_f33]={};this.mbosOnMap[_f32.mxdata.mboName][_f32.mxdata.uid.value][_f33]["layerCount"]=0;}};this.getMboMarkerInfo=function(_f34){if(!_f34.mxdata){return null;}if(!this.mbosOnMap[_f34.mxdata.mboName]){return null;}if(!this.mbosOnMap[_f34.mxdata.mboName][_f34.mxdata.uid.value]){return null;}var _f35=((_f34.extrakey!=undefined)&&(_f34.extrakey!=null))?_f34.extrakey:0;if(!this.mbosOnMap[_f34.mxdata.mboName][_f34.mxdata.uid.value][_f35]){return null;}return this.mbosOnMap[_f34.mxdata.mboName][_f34.mxdata.uid.value][_f35];};}});});},"ibm/tivoli/fwm/mxmap/toolbar/ext/FindLocationTool":function(){define(["dojo/_base/declare","dojo/dom-construct","ibm/tivoli/fwm/mxmap/findlocation/FindLocationPanelWidget","ibm/tivoli/fwm/mxmap/toolbar/ext/_ToggleTool"],function(_f36,_f37,_f38,_f39){return _f36([_f39],{label:ibm.tivoli.fwm.i18n.getMaxMsg("map","findLocation"),iconClass:"basicMapToolbarBtn findLocationToolbarBtn",toolName:"findLocationTool",constructor:function(_f3a){dojo.mixin(this,_f3a);},executeOn:function(){this.map.getMaximo().isCurrentMboAddressable(dojo.hitch(this,function(data){if(data){if(data.result=="success"){if(!data.isAddressable){this.map.getMaximo().showMessage("map","ServiceAddressNotAvailable");return;}if(!data.isAddressEditable){this.map.getMaximo().showMessage("map","ServiceAddressNotEditable");return;}if(!this.findLocationBar){this.findLocationBar=new _f38({map:this.map,tool:this,toolName:this.toolName});this.findLocationBar.createBar();}this.findLocationBar.show();}else{if(data.result=="fail"){this.getMaximo().showMessage(data.group,data.key,data.params);}}}}));},executeOff:function(){if(this.findLocationBar){this.findLocationBar.hide();}},saveToolConfiguration:function(){},disable:function(){},destroy:function(){if(this.findLocationBar){this.findLocationBar.destroy();}}});});},"ibm/tivoli/fwm/mxmap/impl/polyline/BingPolyline":function(){define(["dijit","dojo","dojox","dojo/require!ibm/tivoli/fwm/mxmap/_Polyline"],function(_f3b,dojo,_f3c){dojo.require("ibm.tivoli.fwm.mxmap._Polyline");dojo.provide("ibm.tivoli.fwm.mxmap.impl.polyline.BingPolyline");dojo.declare("ibm.tivoli.fwm.mxmap.impl.polyline.BingPolyline",ibm.tivoli.fwm.mxmap._Polyline,{toProprietary:function(){var _f3d=[];for(var i=0;i<this.points.length;i++){_f3d.push(this.points[i].toProprietary("microsoftv8"));}var _f3e=null;var _f3f=this.opacity?Math.round(this.opacity*255):255;var _f40=Microsoft.Maps.Color.fromHex(this.color);var _f41=this.width||3;var _f42=this.borderOpacity?Math.round(this.borderOpacity*255):255;if(this.fillColor){var _f43=Microsoft.Maps.Color.fromHex(this.fillColor);var _f44=new Microsoft.Maps.Color(_f3f,_f43.r,_f43.g,_f43.b);}if(this.closed&&this.closed==true){_f40.a=_f42;_f3e=new Microsoft.Maps.Polygon(_f3d,{fillColor:_f44||"#000000",strokeColor:_f40,strokeThickness:_f41,visible:true});}else{_f40.a=_f3f;_f3e=new Microsoft.Maps.Polyline(_f3d,{strokeColor:_f40,strokeThickness:_f41,visible:true});}this.proprietary_polyline=_f3e;return _f3e;},show:function(){this.proprietary_polyline.setOptions({visible:true});},hide:function(){this.proprietary_polyline.setOptions({visible:false});}});});},"dojo/dnd/common":function(){define(["../sniff","../_base/kernel","../_base/lang","../dom"],function(has,_f45,lang,dom){var _f46=lang.getObject("dojo.dnd",true);_f46.getCopyKeyState=function(evt){return evt[has("mac")?"metaKey":"ctrlKey"];};_f46._uniqueId=0;_f46.getUniqueId=function(){var id;do{id=_f45._scopeName+"Unique"+(++_f46._uniqueId);}while(dom.byId(id));return id;};_f46._empty={};_f46.isFormElement=function(e){var t=e.target;if(t.nodeType==3){t=t.parentNode;}return " a button textarea input select option ".indexOf(" "+t.tagName.toLowerCase()+" ")>=0;};return _f46;});},"dijit/CheckedMenuItem":function(){define(["dojo/_base/declare","dojo/dom-class","./MenuItem","dojo/text!./templates/CheckedMenuItem.html","./hccss"],function(_f47,_f48,_f49,_f4a){return _f47("dijit.CheckedMenuItem",_f49,{baseClass:"dijitMenuItem dijitCheckedMenuItem",templateString:_f4a,checked:false,_setCheckedAttr:function(_f4b){this.domNode.setAttribute("aria-checked",_f4b?"true":"false");this._set("checked",_f4b);},iconClass:"",role:"menuitemcheckbox",checkedChar:"&#10003;",onChange:function(){},_onClick:function(evt){if(!this.disabled){this.set("checked",!this.checked);this.onChange(this.checked);}this.onClick(evt);}});});},"dijit/Viewport":function(){define(["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(_f4c,on,_f4d,has,_f4e){var _f4f=new _f4c();var _f50;_f4d(function(){var _f51=_f4e.getBox();_f4f._rlh=on(window,"resize",function(){var _f52=_f4e.getBox();if(_f51.h==_f52.h&&_f51.w==_f52.w){return;}_f51=_f52;_f4f.emit("resize");});if(has("ie")==8){var _f53=screen.deviceXDPI;setInterval(function(){if(screen.deviceXDPI!=_f53){_f53=screen.deviceXDPI;_f4f.emit("resize");}},500);}if(has("ios")){on(document,"focusin",function(evt){_f50=evt.target;});on(document,"focusout",function(evt){_f50=null;});}});_f4f.getEffectiveBox=function(doc){var box=_f4e.getBox(doc);var tag=_f50&&_f50.tagName&&_f50.tagName.toLowerCase();if(has("ios")&&_f50&&!_f50.readOnly&&(tag=="textarea"||(tag=="input"&&/^(color|email|number|password|search|tel|text|url)$/.test(_f50.type)))){box.h*=(orientation==0||orientation==180?0.66:0.4);var rect=_f50.getBoundingClientRect();box.h=Math.max(box.h,rect.top+rect.height);}return box;};return _f4f;});},"ibm/tivoli/fwm/mxmap/actions/SetRecordLocation":function(){define(["dijit","dojo","dojox","dojo/require!ibm/tivoli/fwm/mxmap/actions/Actions,ibm/tivoli/fwm/mxmap/_Base,ibm/tivoli/fwm/mxmap/ImageLibraryManager"],function(_f54,dojo,_f55){dojo.provide("ibm.tivoli.fwm.mxmap.actions.SetRecordLocation");dojo.require("ibm.tivoli.fwm.mxmap.actions.Actions");dojo.require("ibm.tivoli.fwm.mxmap._Base");dojo.require("ibm.tivoli.fwm.mxmap.ImageLibraryManager");dojo.declare("ibm.tivoli.fwm.mxmap.actions.SetRecordLocation",[ibm.tivoli.fwm.mxmap.actions.Actions,ibm.tivoli.fwm.mxmap._Base],{constructor:function(_f56){dojo.mixin(this,_f56);this.label=ibm.tivoli.fwm.i18n.getMaxMsg("map","set_recloc_label");this.addSubscription("onCurrentLocationUpdated_"+this.map.getId(),dojo.hitch(this,this._clearMarker));this.addSubscription("onServerException_"+this.map.getId(),dojo.hitch(this,this._clearMarker));},mapstraction:null,_clearMarker:function(){if(this.marker!=null){if(dojo.config.fwm.debug==true){}this.map.removeMarker(this.marker);}},_getPushPinImagePath:function(){var _f57=ibm.tivoli.fwm.mxmap.ImageLibraryManager.getImageLibraryManager().getDefaultReadOnlyMarkerImageInfo().getImageURL();var _f58=this.map.mapConf.markerimgurl;if(_f58!=null&&_f58.trim().length>0){return _f58;}return _f57;},execute:function(args){if(this.marker!=null){this.map.removeMarker(this.marker);}var _f59=this._getPushPinImagePath();var _f5a={draggable:true,icon:_f59,iconSize:[36,36],iconAnchor:[18,36],hover:true};this.marker=this.map.addMarker(args.mapLocation,_f5a);this.map.currentRecordMgr.reverseGeocodeCurrentRecord(args.mapLocation);}});});},"dojo/json5":function(){define(["./json5/parse"],function(_f5b){return {parse:_f5b};});},"ibm/tivoli/fwm/mxmap/impl/BingMaps":function(){define(["dijit","dojo","dojox","dojo/require!ibm/tivoli/fwm/mxmap/Map,ibm/tivoli/fwm/mxmap/impl/marker/BingMarker,ibm/tivoli/fwm/mxmap/impl/point/BingLatLonPoint,ibm/tivoli/fwm/mxmap/impl/polyline/BingPolyline,ibm/tivoli/fwm/mxmap/impl/boundingbox/BingBoundingBox,ibm/tivoli/fwm/mxmap/impl/geocoder/BingGeocoder,ibm/tivoli/fwm/mxmap/InfoWindow"],function(_f5c,dojo,_f5d){dojo.provide("ibm.tivoli.fwm.mxmap.impl.BingMaps");dojo.require("ibm.tivoli.fwm.mxmap.Map");dojo.require("ibm.tivoli.fwm.mxmap.impl.marker.BingMarker");dojo.require("ibm.tivoli.fwm.mxmap.impl.point.BingLatLonPoint");dojo.require("ibm.tivoli.fwm.mxmap.impl.polyline.BingPolyline");dojo.require("ibm.tivoli.fwm.mxmap.impl.boundingbox.BingBoundingBox");dojo.require("ibm.tivoli.fwm.mxmap.impl.geocoder.BingGeocoder");dojo.declare("ibm.tivoli.fwm.mxmap.impl.BingMaps",ibm.tivoli.fwm.mxmap.Map,{constructor:function(_f5e){this.providerName="microsoftv8";},_getInitOptions:function(){var _f5f={};_f5f.fixedMapPosition=false;_f5f.useInertia=true;_f5f.showScalebar=true;_f5f.disableTouchInput=false;_f5f.enableClickableLogo=false;_f5f.enableSearchLogo=false;_f5f.showCopyright=true;_f5f.mapTypeId=Microsoft.Maps.MapTypeId.road;_f5f.isIE=dojo.isIE;if(this.isMobile==true){_f5f.showScalebar=false;}_f5f.initialLocation=this._getInitialLocation();return _f5f;},_getCustomInitOptions:function(){if(this.customInitialMapOptions){return this.customInitialMapOptions.bingmaps;}log.info("no custom configuration");return {};},destroyMap:function(){try{var map=this.getProviderMap();if(typeof (map)!="undefined"&&map!=null){this._destroyProviderMap();}if(dojo.config.fwm.debug==true){}}catch(e){console.error("cannot destroy bing maps ",e.message);}},_init:function(_f60,_f61){function _f62(_f63){var _f64=_f63.https||location.protocol==="https:";if(_f64){_f63.https=true;if(_f63.route&&!_f63.route.includes("https")){_f63.route=_f63.route.replace("http","https");}if(_f63.geocode&&!_f63.geocode.includes("https")){_f63.geocode=_f63.geocode.replace("http","https");}}};_f62(this.mapConf);this.element=_f60;var me=this;dojo.require("ibm.tivoli.fwm.mxmap.InfoWindow");if(!Microsoft||!Microsoft.Maps){throw api+" map script not imported";}_f61.credentials=this.mapConf.key;if(_f61.isIE&&(!_f61.width||!_f61.height)){var _f65=600;var _f66=800;if(_f60.style&&_f60.style.width){_f65=_f60.style.width;if(_f65.substr(_f65.length-2)=="px"){_f65=_f65.substr(0,_f65.length-2);}}if(_f60.style&&_f60.style.height){_f66=_f60.style.height;if(_f66.substr(_f66.length-2)=="px"){_f66=_f66.substr(0,_f66.length-2);}}_f61.width=_f65;_f61.height=_f66;}if(_f61.initialLocation&&_f61.initialLocation.lat!=null){_f61.center=new Microsoft.Maps.Location(_f61.initialLocation.lat,_f61.initialLocation.lng);}if(_f61.initialLocation&&_f61.initialLocation.level!=null){_f61.zoom=_f61.initialLocation.level;}this.map=new Microsoft.Maps.Map(_f60,_f61);if(_f61.isIE){var _f67=function(elem,type,_f68){if(elem==null||elem==undefined){return;}if(elem.addEventListener){elem.addEventListener(type,_f68,false);}else{if(elem.attachEvent){elem.attachEvent("on"+type,_f68);}}};var _f69=_f60.childNodes[0];var _f6a=function(){try{_f69.style.height="100%";_f69.style.width="100%";}catch(e){console.error("Could not resize map element.",e.message);}};_f67(window,"resize",_f6a);}var _f6b=function(e){var map=me.map;switch(e.targetType){case "map":var _f6c=e.location;var _f6d=me.latLng(_f6c.latitude,_f6c.longitude);me.fireMapEvent(me.Events.click,{"location":_f6d});break;case "pushpin":break;default:break;}};Microsoft.Maps.Events.addHandler(this.map,"click",_f6b);var _f6e=function(_f6f){if(_f6f.targetType&&_f6f.targetType=="map"){var _f70=new Microsoft.Maps.Point(_f6f.getX(),_f6f.getY());var _f71=me.map.tryPixelToLocation(_f70);var _f72=me.latLng(_f71.latitude,_f71.longitude);var _f73={x:_f6f.pageX-_f6f.target.getPageX(),y:_f6f.pageY-_f6f.target.getPageY()};me.fireMapEvent(me.Events.rightclick,{"location":_f72,"pixel":_f73});}me.stopEventPropagation(_f6f);return true;};Microsoft.Maps.Events.addHandler(this.map,"rightclick",_f6e);Microsoft.Maps.Events.addHandler(this.map,"viewchange",function(){me.fireMapEvent(me.Events.changeZoom);});Microsoft.Maps.Events.addHandler(this.map,"viewchangeend",function(){me.fireMapEvent(me.Events.endPan);});this.loaded=true;},_destroyProviderMap:function(){var map=this.getProviderMap();map.dispose();this.loaded=false;map=null;},resizeTo:function(_f74,_f75){var _f76=dojo.byId(this.divId);var _f77=_f76.offsetHeight;dojo.style(this.divId,{"height":_f77-1+"px"});if(dojo.isIE){if(this.getElement().childNodes){this.getElement().childNodes[0].style.width=_f74;this.getElement().childNodes[0].style.height=_f75;}var map=this.getProviderMap();map.setOptions({width:"0px"});}},addSmallControls:function(){},getAllPointsFromWGS84:function(_f78,_f79){_f79(_f78);},getAllPointsInWGS84:function(_f7a,_f7b){_f7b(_f7a);},addLargeControls:function(){},addMapTypeControls:function(){},setCenterAndZoom:function(_f7c,_f7d){var map=this.getProviderMap();var _f7e={zoom:_f7d,center:_f7c.toProprietary()};map.setView(_f7e);},createProviderMarker:function(_f7f,_f80){var _f81=null;if(_f7f){var _f82={point:_f7f,map:this.getProviderMap(),compId:this.compId,isMobile:this.isMobile};var _f81=new ibm.tivoli.fwm.mxmap.impl.marker.BingMarker(_f82);if(_f81&&_f80){_f81.addData(_f80);}var map=this.getProviderMap();_f81.pinID="ms7pin-"+new Date().getTime()+"-"+(Math.floor(Math.random()*Math.pow(2,16)));var _f83=_f81.toProprietary();var len=map.entities.getLength();map.entities.push(_f83);if(_f80.isMultiMarker==true){_f83.isMultiMarker=true;for(var i=0;i<len;i++){var _f84=map.entities.get(i);if(_f84 instanceof Microsoft.Maps.Pushpin){if(_f84.geometry.x==_f7f.lng&&_f84.geometry.y==_f7f.lat&&!_f84.isMultiMarker){map.entities.removeAt(i);map.entities.push(_f84);}}}}_f81.setChild(_f83);}return _f81;},removeProviderMarker:function(_f85){var map=this.getProviderMap();_f85.closeBubble();var _f86=_f85.proprietary_marker;var _f87=map.entities.indexOf(_f86);var _f88=false;for(var i=0;i<map.entities.getLength();i++){var _f89=map.entities.get(i);if(_f89 instanceof Microsoft.Maps.Pushpin){if(_f86==_f89){var ii=map.entities.indexOf(_f89);map.entities.removeAt(i);_f88=true;break;}}}try{map.entities.remove(_f86);}catch(e){console.warn("failed to remove pushpin",e);}return;},declutterMarkers:function(opts){throw "Not supported";},polyline:function(_f8a){return new ibm.tivoli.fwm.mxmap.impl.polyline.BingPolyline(_f8a);},createProviderPolyline:function(_f8b,_f8c){var _f8d=null;if(_f8b){if(_f8b.points){if(_f8c){_f8b.addData(_f8c);}var map=this.getProviderMap();_f8d=_f8b.toProprietary();map.entities.push(_f8d);}}return _f8d;},removeProviderPolyline:function(_f8e){var map=this.getProviderMap();map.entities.remove(_f8e.proprietary_polyline);},getCenter:function(){var map=this.getProviderMap();var pt=map.getCenter();return this.latLng(pt.latitude,pt.longitude);},setCenter:function(_f8f,_f90){var map=this.getProviderMap();this.setCenterAndZoom(_f8f,map.getZoom());},setZoom:function(zoom){var map=this.getProviderMap();var _f91={};_f91.zoom=zoom;map.setView(_f91);},getZoom:function(){var map=this.getProviderMap();return map.getZoom();},getZoomLevelForBoundingBox:function(bbox){var map=this.getProviderMap();var se=bbox.getSoutheast().toProprietary();var nw=bbox.getNorthwest().toProprietary();var _f92=Microsoft.Maps.LocationRect.fromCorners(se,nw);map.setView({bounds:_f92});return map.getZoom();},setMapType:function(type){var map=this.getProviderMap();switch(type){case this.MapType.ROAD:map.setMapType(Microsoft.Maps.MapTypeId.road);break;case this.MapType.SATELLITE:map.setMapType(Microsoft.Maps.MapTypeId.aerial);break;case this.MapType.HYBRID:map.setMapType(Microsoft.Maps.MapTypeId.birdseye);break;default:map.setMapType(Microsoft.Maps.MapTypeId.road);}},getMapType:function(){var map=this.getProviderMap();var mode=map.GetMapStyle();switch(mode){case Microsoft.Maps.MapTypeId.aerial:return MapType.SATELLITE;case Microsoft.Maps.MapTypeId.road:return MapType.ROAD;case Microsoft.Maps.MapTypeId.birdseye:return MapType.HYBRID;default:return null;}},getBoundingBox:function(_f93,_f94,_f95,_f96){return new ibm.tivoli.fwm.mxmap.impl.boundingbox.BingBoundingBox(_f93,_f94,_f95,_f96);},getBounds:function(){var map=this.getProviderMap();var view=map.getBounds();var _f97=view.getSoutheast();var _f98=view.getNorthwest();return this.getBoundingBox(_f97.latitude,_f98.longitude,_f98.latitude,_f97.longitude);},setBounds:function(_f99){var map=this.getProviderMap();var ne=_f99.getNorthEast();var sw=_f99.getSouthWest();var nw=new Microsoft.Maps.Location(ne.lat,sw.lon);var se=new Microsoft.Maps.Location(sw.lat,ne.lon);var rec=Microsoft.Maps.LocationRect.fromCorners(nw,se);var vopt=map.getOptions();vopt.bounds=rec;map.setView(vopt);},addImageOverlay:function(id,src,_f9a,west,_f9b,east,_f9c,_f9d){var map=this.getProviderMap();var _f9e=new Microsoft.Maps.TileSource({uriConstructor:src});var _f9f=new Microsoft.Maps.TileLayer({mercator:_f9e,opacity:_f9a,visible:true});map.entities.push(_f9f);},setImagePosition:function(id,_fa0){var map=this.getProviderMap();var _fa1;var _fa2;throw "not implemented";},addOverlay:function(url,_fa3){var map=this.getProviderMap();var _fa4=new Microsoft.Maps.TileSource({uriConstructor:url});var _fa5=new Microsoft.Maps.TileLayer({mercator:_fa4});map.entities.push(_fa5);},addTileLayer:function(_fa6,_fa7,_fa8,_fa9,_faa){var map=this.getProviderMap();var _fab=new Microsoft.Maps.TileSource({uriConstructor:_fa6});var _fac=new Microsoft.Maps.TileLayer({mercator:_fab,opacity:_fa7,visible:true});map.entities.push(_fac);},toggleTileLayer:function(_fad){throw "Not implemented";},trafficLayer:null,setShowTraffic:function(_fae){var map=this.getProviderMap();if(_fae==true){if(this.trafficLayer!=null){this.trafficLayer.show();}else{var me=this;var _faf=function(){me.trafficManager=new Microsoft.Maps.Traffic.TrafficManager(map);if(me.trafficLayer!=null){me.trafficLayer.show();}};if(!Microsoft.Maps.Traffic){Microsoft.Maps.loadModule("Microsoft.Maps.Traffic",{callback:_faf});}else{_faf();}}}else{if(this.trafficLayer!=null){this.trafficLayer.hide();}}},getPixelRatio:function(){throw "Not implemented";},mousePosition:function(_fb0){var _fb1=document.getElementById(_fb0);if(_fb1!==null){var map=this.getProviderMap();Microsoft.Maps.Events.addHandler(map,"mousemove",function(_fb2){var _fb3=new Microsoft.Maps.Point(_fb2.pageX,_fb2.pageY);var _fb4=map.tryPixelToLocation(_fb3);var loc=_fb4.latitude.toFixed(4)+" / "+_fb4.longitude.toFixed(4);_fb1.textContent=loc;});_fb1.textContent="0.0000 / 0.0000";}},latLng:function(lat,lng,sr){var _fb5={lat:lat,lng:lng,sr:sr};return new ibm.tivoli.fwm.mxmap.impl.point.BingLatLonPoint(_fb5);},providerGeocode:function(_fb6,_fb7,key,_fb8){var _fb9=new ibm.tivoli.fwm.mxmap.impl.geocoder.BingGeocoder(_fb6,_fb7,{key:key,map:this,customParams:this.getGeoCoderConf()});_fb9.geocode({address:_fb8});},providerReverseGeocode:function(_fba,_fbb,key,lat,lng){var _fbc=new ibm.tivoli.fwm.mxmap.impl.geocoder.BingGeocoder(_fba,_fbb,{key:key,map:this,customParams:this.getGeoCoderConf()});_fbc.geocode({lat:lat,lng:lng});},getGeoCoderConf:function(){var _fbd={url:this.mapConf.geocode};return _fbd;}});});},"dijit/MenuSeparator":function(){define(["dojo/_base/declare","dojo/dom","./_WidgetBase","./_TemplatedMixin","./_Contained","dojo/text!./templates/MenuSeparator.html"],function(_fbe,dom,_fbf,_fc0,_fc1,_fc2){return _fbe("dijit.MenuSeparator",[_fbf,_fc0,_fc1],{templateString:_fc2,buildRendering:function(){this.inherited(arguments);dom.setSelectable(this.domNode,false);},isFocusable:function(){return false;}});});},"ibm/tivoli/fwm/mxmap/impl/GMaps":function(){define(["dijit","dojo","dojox","dojo/require!ibm/tivoli/fwm/mxmap/Map,ibm/tivoli/fwm/mxmap/impl/marker/GmapsMarker,ibm/tivoli/fwm/mxmap/impl/point/GmapsLatLonPoint,ibm/tivoli/fwm/mxmap/impl/polyline/GmapsPolyline,ibm/tivoli/fwm/mxmap/impl/boundingbox/GmapsBoundingBox,ibm/tivoli/fwm/mxmap/impl/geocoder/GmapsGeocoder"],function(_fc3,dojo,_fc4){dojo.provide("ibm.tivoli.fwm.mxmap.impl.GMaps");dojo.require("ibm.tivoli.fwm.mxmap.Map");dojo.require("ibm.tivoli.fwm.mxmap.impl.marker.GmapsMarker");dojo.require("ibm.tivoli.fwm.mxmap.impl.point.GmapsLatLonPoint");dojo.require("ibm.tivoli.fwm.mxmap.impl.polyline.GmapsPolyline");dojo.require("ibm.tivoli.fwm.mxmap.impl.boundingbox.GmapsBoundingBox");dojo.require("ibm.tivoli.fwm.mxmap.impl.geocoder.GmapsGeocoder");dojo.declare("ibm.tivoli.fwm.mxmap.impl.GMaps",ibm.tivoli.fwm.mxmap.Map,{constructor:function(_fc5){this.providerName="googlev3";this._defaultZoom=10;},_getCustomInitOptions:function(){if(this.customInitialMapOptions){return this.customInitialMapOptions.gmaps;}log.info("no custom configuration");return {};},_getInitOptions:function(){var _fc6={panControl:true,mapTypeControl:true,scaleControl:true,overviewMapControl:true,streetViewControl:true,scaleControlOptions:{style:google.maps.ScaleControlStyle.DEFAULT},mapTypeId:google.maps.MapTypeId.ROADMAP};if(this.isMobile==true){_fc6.panControl=false;_fc6.overviewMapControl=false;_fc6.scaleControl=false;}return _fc6;},_init:function(_fc7,_fc8){this.element=_fc7;if(_fc8.zoom){_fc8.navigationControl=true;if(_fc8.zoom=="small"){_fc8.navigationControlOptions={style:google.maps.NavigationControlStyle.SMALL};}if(_fc8.zoom=="large"){_fc8.navigationControlOptions={style:google.maps.NavigationControlStyle.ZOOM_PAN};}delete _fc8.zoom;}if(_fc8.map_type){_fc8.mapTypeControl=true;_fc8.mapTypeControlOptions={style:google.maps.MapTypeControlStyle.DEFAULT};delete _fc8.map_type;}var map=new google.maps.Map(_fc7,_fc8);var _fc9=[];var me=this;google.maps.event.addListener(map,"idle",function(){var _fca=_fc9.length;if(_fca>0){var _fcb=_fc9.splice(0,_fca);var _fcc;while((_fcc=_fcb.shift())){_fcc();}}});google.maps.event.addListener(map,"rightclick",function(_fcd){me.fireMapEvent(me.Events.rightclick,{"location":me.latLng(_fcd.latLng.lat(),_fcd.latLng.lng()),"pixel":_fcd.pixel,"point":_fcd.point});});google.maps.event.addListener(map,"click",function(_fce){me.fireMapEvent(me.Events.click,{"location":me.latLng(_fce.latLng.lat(),_fce.latLng.lng())});});google.maps.event.addListener(map,"zoom_changed",function(){_fc9.push(function(){me.fireMapEvent(me.Events.changeZoom);});});google.maps.event.addListener(map,"center_changed",function(){me.fireMapEvent(me.Events.endPan);});var _fcf=google.maps.event.addListener(map,"tilesloaded",function(){me.fireMapEvent(me.Events.load);me.mapZIndexHandler.configureMapElements();google.maps.event.removeListener(_fcf);});map.LabelMarkerOverlay=function LabelMarkerOverlay(_fd0,_fd1,_fd2,_fd3,icon,_fd4,_fd5){this.labelText=((_fd0!=null)?_fd0:"");this.labelLatLong=_fd1;this.labelDiv=null;this.icon=icon;this.iconAnchor=_fd4;this.iconSize=_fd5;this.marker=_fd3;this.setMap(_fd2);var me=this;google.maps.event.addListener(this.marker,"zindex_changed",function(){me.setZIndex();});};map.LabelMarkerOverlay.prototype=new google.maps.OverlayView();map.LabelMarkerOverlay.prototype.onAdd=function(){var div=document.createElement("div");div.style.position="absolute";var ax=(this.iconAnchor&&this.iconAnchor[0])?this.iconAnchor[0]:0;var ay=(this.iconAnchor&&this.iconAnchor[1])?this.iconAnchor[1]:0;var img=document.createElement("img");img.style.position="absolute";img.style.left="-22px";img.style.top="-10px";if(dojo.isIE){img.style.left="-19px";img.style.top="-9px";}img.style.width=this.iconSize[0]+"px";img.style.zIndex="0";img.src=this.icon;div.appendChild(img);var _fd6=document.createElement("div");_fd6.style.position="absolute";_fd6.style.left="-20px";if(dojo.isIE){_fd6.style.left="-19px";}_fd6.style.top="0px";_fd6.style.width=this.iconSize[0]+"px";_fd6.style.zIndex="1";_fd6.style.color="white";_fd6.style.fontSize="12px";_fd6.style.textAlign="center";_fd6.style.className="fwmMarkerLabelGoogle";div.appendChild(_fd6);var txt=document.createTextNode(this.labelText);_fd6.appendChild(txt);this.labelDiv=div;this.getPanes().overlayImage.appendChild(div);};map.LabelMarkerOverlay.prototype.draw=function(){var sw=this.getProjection().fromLatLngToDivPixel(this.labelLatLong);var div=this.labelDiv;div.style.left=(sw.x-3)+"px";div.style.top=(sw.y-27)+"px";div.style.width=this.iconSize[0]+"px";this.setZIndex();};map.LabelMarkerOverlay.prototype.setZIndex=function(){if(typeof this.marker.getZIndex()==="undefined"){this.labelDiv.style.zIndex=parseInt(this.labelDiv.style.top,10)+1;}else{this.labelDiv.style.zIndex=this.marker.getZIndex()+1;}};map.LabelMarkerOverlay.prototype.onRemove=function(){if(this.labelDiv&&this.labelDiv.parentNode){this.labelDiv.parentNode.removeChild(this.labelDiv);this.labelDiv=null;}};this.map=map;this.loaded=true;},destroyMap:function(){},getMapType:function(){var type=this.getProviderMap().getMapTypeId();switch(type){case google.maps.MapTypeId.ROADMAP:return MapType.ROAD;case google.maps.MapTypeId.SATELLITE:return MapType.SATELLITE;case google.maps.MapTypeId.HYBRID:return MapType.HYBRID;case google.maps.MapTypeId.TERRAIN:return MapType.PHYSICAL;default:return null;}},setMapType:function(type){switch(type){case this.MapType.ROAD:this.getProviderMap().setMapTypeId(google.maps.MapTypeId.ROADMAP);break;case this.MapType.SATELLITE:this.getProviderMap().setMapTypeId(google.maps.MapTypeId.SATELLITE);break;case this.MapType.HYBRID:this.getProviderMap().setMapTypeId(google.maps.MapTypeId.HYBRID);break;case this.MapType.PHYSICAL:this.getProviderMap().setMapTypeId(google.maps.MapTypeId.TERRAIN);break;default:this.getProviderMap().setMapTypeId(google.maps.MapTypeId.ROADMAP);}},getCenter:function(){var pt=this.getProviderMap().getCenter();return this.latLng(pt.lat(),pt.lng());},setCenter:function(_fd7,_fd8){this.getProviderMap().setCenter(this.pointToProprietary(_fd7));if(this.getZoom()==undefined){this.setZoom(this._defaultZoom);}},getZoom:function(){return this.getProviderMap().getZoom();},setZoom:function(zoom){this.getProviderMap().setZoom(zoom);},getBoundingBox:function(_fd9,_fda,_fdb,_fdc){return new ibm.tivoli.fwm.mxmap.impl.boundingbox.GmapsBoundingBox(_fd9,_fda,_fdb,_fdc);},getBounds:function(){var _fdd=this.getProviderMap().getBounds();var sw=_fdd.getSouthWest();var ne=_fdd.getNorthEast();var _fde={lat:sw.lat(),lng:sw.lng(),lon:sw.lng()};var _fdf={lat:ne.lat(),lng:ne.lng(),lon:ne.lng()};return this.getBoundingBoxFromSwAndNe(_fde,_fdf);},setBounds:function(_fe0){if(_fe0){var sw=new google.maps.LatLng(_fe0.sw.lat,_fe0.sw.lng);var ne=new google.maps.LatLng(_fe0.ne.lat,_fe0.ne.lng);var _fe1=new google.maps.LatLngBounds(sw,ne);this.getProviderMap().fitBounds(_fe1);}},getAllPointsFromWGS84:function(_fe2,_fe3){_fe3(_fe2);},getAllPointsInWGS84:function(_fe4,_fe5){_fe5(_fe4);},resizeTo:function(_fe6,_fe7){var _fe8=dojo.byId(this.divId);var _fe7=_fe8.offsetHeight;dojo.style(this.divId,{"height":_fe7-1+"px"});this.getElement().style.width=_fe6;this.getElement().style.height=_fe7;google.maps.event.trigger(this.getProviderMap(),"resize");},createProviderMarker:function(_fe9,_fea){var _feb=null;if(_fe9){var _fec={point:_fe9,map:this.getProviderMap(),compId:this.compId};var _feb=new ibm.tivoli.fwm.mxmap.impl.marker.GmapsMarker(_fec);if(_feb&&_fea){_feb.addData(_fea);}var _fed=_feb.toProprietary();_feb.setChild(_fed);}return _feb;},removeProviderMarker:function(_fee){_fee.closeBubble();_fee.remove();},polyline:function(_fef){return new ibm.tivoli.fwm.mxmap.impl.polyline.GmapsPolyline(_fef);},createProviderPolyline:function(_ff0,_ff1){var _ff2=null;if(_ff0){if(_ff0.points){if(_ff1){_ff0.addData(_ff1);}_ff2=_ff0.toProprietary();_ff2.setMap(this.getProviderMap());}}return _ff2;},removeProviderPolyline:function(_ff3){_ff3.proprietary_polyline.setMap(null);},trafficLayer:null,setShowTraffic:function(_ff4){var map=this.getProviderMap();if(_ff4==true){if(this.trafficLayer==null){this.trafficLayer=new google.maps.TrafficLayer();this.trafficLayer.setMap(map);}}else{if(this.trafficLayer!=null){this.trafficLayer.setMap(null);this.trafficLayer=null;}}},pointToProprietary:function(_ff5){return new google.maps.LatLng(_ff5.lat,_ff5.lng);},pointFromProprietary:function(_ff6){if(!_ff6){return null;}return this.latLng(_ff6.lat(),_ff6.lng(),null);},latLng:function(lat,lng,sr){var _ff7={lat:lat,lng:lng,sr:sr};return new ibm.tivoli.fwm.mxmap.impl.point.GmapsLatLonPoint(_ff7);},providerGeocode:function(_ff8,_ff9,key,_ffa){var _ffb=new ibm.tivoli.fwm.mxmap.impl.geocoder.GmapsGeocoder(_ff8,_ff9,{key:key,map:this,customParams:this.getGeoCoderConf()});_ffb.geocode({address:_ffa});},providerReverseGeocode:function(_ffc,_ffd,key,lat,lng){var _ffe=new ibm.tivoli.fwm.mxmap.impl.geocoder.GmapsGeocoder(_ffc,_ffd,{key:key,map:this,customParams:this.getGeoCoderConf()});_ffe.geocode({lat:lat,lng:lng});}});});},"dojo/require":function(){define(["./_base/loader"],function(_fff){return {dynamic:0,normalize:function(id){return id;},load:_fff.require};});},"ibm/tivoli/fwm/mxmap/_Geocoder":function(){define(["dojo/_base/declare"],function(_1000){return _1000(null,{geocoder:null,constructor:function(_1001,_1002,_1003){this.callback=_1001;this.error_callback=_1002||function(){};this.optParams=_1003;this._init();},_init:function(){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},geocode:function(){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},geocode_callback:function(){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");}});});},"ibm/tivoli/fwm/mxmap/toolbar/ext/_ComboTool":function(){define(["dojo/main","dijit/main","dojox/main","dojo/_base/declare","ibm/tivoli/fwm/mxmap/_Base","dijit/Menu","dijit/MenuItem","dijit/form/ComboButton","ibm/tivoli/fwm/mxmap/toolbar/ext/_ToggleTool","ibm/tivoli/fwm/mxmap/toolbar/ext/ToggleComboButton"],function(dojo,dijit,dojox,_1004,_1005,Menu,_1006,_1007,_1008,_1009){return _1004([_1008],{_menu:null,_selectedOption:null,constructor:function(_100a){dojo.mixin(this,_100a);this._menu=new dijit.Menu();},addMenuItem:function(_100b,_100c,_100d){if(_100b!=undefined&&_100c!=undefined){var _100e=dijit.byId(_100b);if(_100e){_100e.destroyRecursive(true);}var _100f=new dijit.MenuItem({id:_100b,iconClass:_100d==true?"menuItemSelected":"menuItemUnselected",label:_100c});if(_100d==true){this._selectedOption=_100f;}this._menu.addChild(_100f);}else{console.error("[_ComboTool] Menu items must have an ID and a label");}},createToolbarButton:function(){this._button=new _1009({label:this.label,showLabel:false,iconClass:this.iconClass,"class":"mapComboTool",dropDown:this._menu,onClick:dojo.hitch(this,function(){this.execute({menuItem:this.getSelectedOption()});})});this.addConnection("onItemClick",dojo.hitch(this,this._onMenuItemClick),this._menu,this);return this._button;},_onMenuItemClick:function(evt){var _1010=this._menu.getChildren();for(var i=0;i<_1010.length;i++){if(_1010[i]==evt){this._selectedOption=evt;this._selectedOption.set("iconClass","menuItemSelected");}else{_1010[i].set("iconClass","menuItemUnselected");}}this.setActive(true);this.executeOn({menuItem:this.getSelectedOption()});},getSelectedOption:function(){return this._selectedOption;},destroyRecursive:function(){this._menu.destroyRecursive();this.inherited(arguments);}});});},"dijit/Dialog":function(){define(["require","dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/Deferred","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/fx","dojo/i18n","dojo/keys","dojo/_base/lang","dojo/on","dojo/ready","dojo/sniff","dojo/touch","dojo/window","dojo/dnd/Moveable","dojo/dnd/TimedMoveable","./focus","./_base/manager","./_Widget","./_TemplatedMixin","./_CssStateMixin","./form/_FormMixin","./_DialogMixin","./DialogUnderlay","./layout/ContentPane","./layout/utils","dojo/text!./templates/Dialog.html","./a11yclick","dojo/i18n!./nls/common"],function(_1011,array,_1012,_1013,_1014,dom,_1015,_1016,_1017,fx,i18n,keys,lang,on,ready,has,touch,_1018,_1019,_101a,focus,_101b,_101c,_101d,_101e,_101f,_1020,_1021,_1022,utils,_1023){var _1024=new _1014();_1024.resolve(true);function nop(){};var _1025=_1013("dijit._DialogBase"+(has("dojo-bidi")?"_NoBidi":""),[_101d,_101f,_1020,_101e],{templateString:_1023,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:false,duration:_101b.defaultDuration,refocus:true,autofocus:true,_firstFocusItem:null,_lastFocusItem:null,draggable:true,_setDraggableAttr:function(val){this._set("draggable",val);},maxRatio:0.9,closable:true,_setClosableAttr:function(val){this.closeButtonNode.style.display=val?"":"none";this._set("closable",val);},postMixInProperties:function(){var _1026=i18n.getLocalization("dijit","common");lang.mixin(this,_1026);this.inherited(arguments);},postCreate:function(){_1017.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);_1012.after(this,"onExecute",lang.hitch(this,"hide"),true);_1012.after(this,"onCancel",lang.hitch(this,"hide"),true);on(this.closeButtonNode,touch.press,function(e){e.stopPropagation();});this._modalconnects=[];},onLoad:function(){this.resize();this._position();if(this.autofocus&&_1027.isTop(this)){this._getFocusItems();focus.focus(this._firstFocusItem);}this.inherited(arguments);},focus:function(){this._getFocusItems();focus.focus(this._firstFocusItem);},_endDrag:function(){var _1028=_1016.position(this.domNode),_1029=_1018.getBox(this.ownerDocument);_1028.y=Math.min(Math.max(_1028.y,0),(_1029.h-_1028.h));_1028.x=Math.min(Math.max(_1028.x,0),(_1029.w-_1028.w));this._relativePosition=_1028;this._position();},_setup:function(){var node=this.domNode;if(this.titleBar&&this.draggable){this._moveable=new ((has("ie")==6)?_101a:_1019)(node,{handle:this.titleBar});_1012.after(this._moveable,"onMoveStop",lang.hitch(this,"_endDrag"),true);}else{_1015.add(node,"dijitDialogFixed");}this.underlayAttrs={dialogId:this.id,"class":array.map(this["class"].split(/\s/),function(s){return s+"_underlay";}).join(" "),_onKeyDown:lang.hitch(this,"_onKey"),ownerDocument:this.ownerDocument};},_size:function(){this.resize();},_position:function(){if(!_1015.contains(this.ownerDocumentBody,"dojoMove")){var node=this.domNode,_102a=_1018.getBox(this.ownerDocument),p=this._relativePosition,bb=_1016.position(node),l=Math.floor(_102a.l+(p?Math.min(p.x,_102a.w-bb.w):(_102a.w-bb.w)/2)),t=Math.floor(_102a.t+(p?Math.min(p.y,_102a.h-bb.h):(_102a.h-bb.h)/2));_1017.set(node,{left:l+"px",top:t+"px"});}},_onKey:function(evt){if(evt.keyCode==keys.TAB){this._getFocusItems();var node=evt.target;if(this._firstFocusItem==this._lastFocusItem){evt.stopPropagation();evt.preventDefault();}else{if(node==this._firstFocusItem&&evt.shiftKey){focus.focus(this._lastFocusItem);evt.stopPropagation();evt.preventDefault();}else{if(node==this._lastFocusItem&&!evt.shiftKey){focus.focus(this._firstFocusItem);evt.stopPropagation();evt.preventDefault();}}}}else{if(this.closable&&evt.keyCode==keys.ESCAPE){this.onCancel();evt.stopPropagation();evt.preventDefault();}}},show:function(){if(this.open){return _1024.promise;}if(!this._started){this.startup();}if(!this._alreadyInitialized){this._setup();this._alreadyInitialized=true;}if(this._fadeOutDeferred){this._fadeOutDeferred.cancel();_1027.hide(this);}var win=_1018.get(this.ownerDocument);this._modalconnects.push(on(win,"scroll",lang.hitch(this,"resize",null)));this._modalconnects.push(on(this.domNode,"keydown",lang.hitch(this,"_onKey")));_1017.set(this.domNode,{opacity:0,display:""});this._set("open",true);this._onShow();this.resize();this._position();var _102b;this._fadeInDeferred=new _1014(lang.hitch(this,function(){_102b.stop();delete this._fadeInDeferred;}));this._fadeInDeferred.then(undefined,nop);var _102c=this._fadeInDeferred.promise;_102b=fx.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:lang.hitch(this,function(){_1027.show(this,this.underlayAttrs);}),onEnd:lang.hitch(this,function(){if(this.autofocus&&_1027.isTop(this)){this._getFocusItems();focus.focus(this._firstFocusItem);}this._fadeInDeferred.resolve(true);delete this._fadeInDeferred;})}).play();return _102c;},hide:function(){if(!this._alreadyInitialized||!this.open){return _1024.promise;}if(this._fadeInDeferred){this._fadeInDeferred.cancel();}var _102d;this._fadeOutDeferred=new _1014(lang.hitch(this,function(){_102d.stop();delete this._fadeOutDeferred;}));this._fadeOutDeferred.then(undefined,nop);this._fadeOutDeferred.then(lang.hitch(this,"onHide"));var _102e=this._fadeOutDeferred.promise;_102d=fx.fadeOut({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,function(){this.domNode.style.display="none";_1027.hide(this);this._fadeOutDeferred.resolve(true);delete this._fadeOutDeferred;})}).play();if(this._scrollConnected){this._scrollConnected=false;}var h;while(h=this._modalconnects.pop()){h.remove();}if(this._relativePosition){delete this._relativePosition;}this._set("open",false);return _102e;},resize:function(dim){if(this.domNode.style.display!="none"){this._checkIfSingleChild();if(!dim){if(this._shrunk){if(this._singleChild){if(typeof this._singleChildOriginalStyle!="undefined"){this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle;delete this._singleChildOriginalStyle;}}array.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(node){if(node){_1017.set(node,{position:"static",width:"auto",height:"auto"});}});this.domNode.style.position="absolute";}var _102f=_1018.getBox(this.ownerDocument);_102f.w*=this.maxRatio;_102f.h*=this.maxRatio;var bb=_1016.position(this.domNode);this._shrunk=false;if(bb.w>=_102f.w){dim={w:_102f.w};_1016.setMarginBox(this.domNode,dim);bb=_1016.position(this.domNode);this._shrunk=true;}if(bb.h>=_102f.h){if(!dim){dim={w:bb.w};}dim.h=_102f.h;this._shrunk=true;}if(dim){if(!dim.w){dim.w=bb.w;}if(!dim.h){dim.h=bb.h;}}}if(dim){_1016.setMarginBox(this.domNode,dim);var _1030=[];if(this.titleBar){_1030.push({domNode:this.titleBar,region:"top"});}if(this.actionBarNode){_1030.push({domNode:this.actionBarNode,region:"bottom"});}var _1031={domNode:this.containerNode,region:"center"};_1030.push(_1031);var _1032=utils.marginBox2contentBox(this.domNode,dim);utils.layoutChildren(this.domNode,_1032,_1030);if(this._singleChild){var cb=utils.marginBox2contentBox(this.containerNode,_1031);this._singleChild.resize({w:cb.w,h:cb.h});}else{this.containerNode.style.overflow="auto";this._layoutChildren();}}else{this._layoutChildren();}if(!has("touch")&&!dim){this._position();}}},_layoutChildren:function(){array.forEach(this.getChildren(),function(_1033){if(_1033.resize){_1033.resize();}});},destroy:function(){if(this._fadeInDeferred){this._fadeInDeferred.cancel();}if(this._fadeOutDeferred){this._fadeOutDeferred.cancel();}if(this._moveable){this._moveable.destroy();}var h;while(h=this._modalconnects.pop()){h.remove();}_1027.hide(this);this.inherited(arguments);}});if(has("dojo-bidi")){_1025=_1013("dijit._DialogBase",_1025,{_setTitleAttr:function(title){this._set("title",title);this.titleNode.innerHTML=title;this.applyTextDir(this.titleNode);},_setTextDirAttr:function(_1034){if(this._created&&this.textDir!=_1034){this._set("textDir",_1034);this.set("title",this.title);}}});}var _1035=_1013("dijit.Dialog",[_1022,_1025],{});_1035._DialogBase=_1025;var _1027=_1035._DialogLevelManager={_beginZIndex:950,show:function(_1036,_1037){ds[ds.length-1].focus=focus.curNode;var _1038=ds[ds.length-1].dialog?ds[ds.length-1].zIndex+2:_1035._DialogLevelManager._beginZIndex;_1017.set(_1036.domNode,"zIndex",_1038);_1021.show(_1037,_1038-1);ds.push({dialog:_1036,underlayAttrs:_1037,zIndex:_1038});},hide:function(_1039){if(ds[ds.length-1].dialog==_1039){ds.pop();var pd=ds[ds.length-1];if(ds.length==1){_1021.hide();}else{_1021.show(pd.underlayAttrs,pd.zIndex-1);}if(_1039.refocus){var focus=pd.focus;if(pd.dialog&&(!focus||!dom.isDescendant(focus,pd.dialog.domNode))){pd.dialog._getFocusItems();focus=pd.dialog._firstFocusItem;}if(focus){try{focus.focus();}catch(e){}}}}else{var idx=array.indexOf(array.map(ds,function(elem){return elem.dialog;}),_1039);if(idx!=-1){ds.splice(idx,1);}}},isTop:function(_103a){return ds[ds.length-1].dialog==_103a;}};var ds=_1035._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];focus.watch("curNode",function(attr,_103b,node){var _103c=ds[ds.length-1].dialog;if(node&&_103c&&!_103c._fadeOutDeferred&&node.ownerDocument==_103c.ownerDocument){do{if(node==_103c.domNode||_1015.contains(node,"dijitPopup")){return;}}while(node=node.parentNode);_103c.focus();}});if(has("dijit-legacy-requires")){ready(0,function(){var _103d=["dijit/TooltipDialog"];_1011(_103d);});}return _1035;});},"dijit/a11y":function(){define(["dojo/_base/array","dojo/dom","dojo/dom-attr","dojo/dom-style","dojo/_base/lang","dojo/sniff","./main"],function(array,dom,_103e,_103f,lang,has,dijit){var _1040;var a11y={_isElementShown:function(elem){var s=_103f.get(elem);return (s.visibility!="hidden")&&(s.visibility!="collapsed")&&(s.display!="none")&&(_103e.get(elem,"type")!="hidden");},hasDefaultTabStop:function(elem){switch(elem.nodeName.toLowerCase()){case "a":return _103e.has(elem,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return true;case "iframe":var body;try{var _1041=elem.contentDocument;if("designMode" in _1041&&_1041.designMode=="on"){return true;}body=_1041.body;}catch(e1){try{body=elem.contentWindow.document.body;}catch(e2){return false;}}return body&&(body.contentEditable=="true"||(body.firstChild&&body.firstChild.contentEditable=="true"));default:return elem.contentEditable=="true";}},effectiveTabIndex:function(elem){if(_103e.get(elem,"disabled")){return _1040;}else{if(_103e.has(elem,"tabIndex")){return +_103e.get(elem,"tabIndex");}else{return a11y.hasDefaultTabStop(elem)?0:_1040;}}},isTabNavigable:function(elem){return a11y.effectiveTabIndex(elem)>=0;},isFocusable:function(elem){return a11y.effectiveTabIndex(elem)>=-1;},_getTabNavigable:function(root){var first,last,_1042,_1043,_1044,_1045,_1046={};function _1047(node){return node&&node.tagName.toLowerCase()=="input"&&node.type&&node.type.toLowerCase()=="radio"&&node.name&&node.name.toLowerCase();};var shown=a11y._isElementShown,_1048=a11y.effectiveTabIndex;var _1049=function(_104a){for(var child=_104a.firstChild;child;child=child.nextSibling){if(child.nodeType!=1||(has("ie")<=9&&child.scopeName!=="HTML")||!shown(child)){continue;}var _104b=_1048(child);if(_104b>=0){if(_104b==0){if(!first){first=child;}last=child;}else{if(_104b>0){if(!_1042||_104b<_1043){_1043=_104b;_1042=child;}if(!_1044||_104b>=_1045){_1045=_104b;_1044=child;}}}var rn=_1047(child);if(_103e.get(child,"checked")&&rn){_1046[rn]=child;}}if(child.nodeName.toUpperCase()!="SELECT"){_1049(child);}}};if(shown(root)){_1049(root);}function rs(node){return _1046[_1047(node)]||node;};return {first:rs(first),last:rs(last),lowest:rs(_1042),highest:rs(_1044)};},getFirstInTabbingOrder:function(root,doc){var elems=a11y._getTabNavigable(dom.byId(root,doc));return elems.lowest?elems.lowest:elems.first;},getLastInTabbingOrder:function(root,doc){var elems=a11y._getTabNavigable(dom.byId(root,doc));return elems.last?elems.last:elems.highest;}};1&&lang.mixin(dijit,a11y);return a11y;});},"dijit/form/_ToggleButtonMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(_104c,_104d){return _104c("dijit.form._ToggleButtonMixin",null,{checked:false,_aria_attr:"aria-pressed",_onClick:function(evt){var _104e=this.checked;this._set("checked",!_104e);var ret=this.inherited(arguments);this.set("checked",ret?this.checked:_104e);return ret;},_setCheckedAttr:function(value,_104f){this._set("checked",value);var node=this.focusNode||this.domNode;if(this._created){if(_104d.get(node,"checked")!=!!value){_104d.set(node,"checked",!!value);}}node.setAttribute(this._aria_attr,String(value));this._handleOnChange(value,_104f);},postCreate:function(){this.inherited(arguments);var node=this.focusNode||this.domNode;if(this.checked){node.setAttribute("checked","checked");}if(this._resetValue===undefined){this._lastValueReported=this._resetValue=this.checked;}},reset:function(){this._hasBeenBlurred=false;this.set("checked",this.params.checked||false);}});});},"dijit/_Widget":function(){define(["dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/query","dojo/ready","./registry","./_WidgetBase","./_OnDijitClickMixin","./_FocusMixin","dojo/uacss","./hccss"],function(_1050,_1051,_1052,_1053,has,_1054,lang,query,ready,_1055,_1056,_1057,_1058){function _1059(){};function _105a(_105b){return function(obj,event,scope,_105c){if(obj&&typeof event=="string"&&obj[event]==_1059){return obj.on(event.substring(2).toLowerCase(),lang.hitch(scope,_105c));}return _105b.apply(_1052,arguments);};};_1050.around(_1052,"connect",_105a);if(_1054.connect){_1050.around(_1054,"connect",_105a);}var _105d=_1053("dijit._Widget",[_1056,_1057,_1058],{onClick:_1059,onDblClick:_1059,onKeyDown:_1059,onKeyPress:_1059,onKeyUp:_1059,onMouseDown:_1059,onMouseMove:_1059,onMouseOut:_1059,onMouseOver:_1059,onMouseLeave:_1059,onMouseEnter:_1059,onMouseUp:_1059,constructor:function(_105e){this._toConnect={};for(var name in _105e){if(this[name]===_1059){this._toConnect[name.replace(/^on/,"").toLowerCase()]=_105e[name];delete _105e[name];}}},postCreate:function(){this.inherited(arguments);for(var name in this._toConnect){this.on(name,this._toConnect[name]);}delete this._toConnect;},on:function(type,func){if(this[this._onMap(type)]===_1059){return _1052.connect(this.domNode,type.toLowerCase(),this,func);}return this.inherited(arguments);},_setFocusedAttr:function(val){this._focused=val;this._set("focused",val);},setAttribute:function(attr,value){_1054.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(attr,value);},attr:function(name,value){var args=arguments.length;if(args>=2||typeof name==="object"){return this.set.apply(this,arguments);}else{return this.get(name);}},getDescendants:function(){_1054.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?query("[widgetId]",this.containerNode).map(_1055.byNode):[];},_onShow:function(){this.onShow();},onShow:function(){},onHide:function(){},onClose:function(){return true;}});if(has("dijit-legacy-requires")){ready(0,function(){var _105f=["dijit/_base"];require(_105f);});}return _105d;});},"dojo/touch":function(){define(["./_base/kernel","./aspect","./dom","./dom-class","./_base/lang","./on","./has","./mouse","./domReady","./_base/window"],function(dojo,_1060,dom,_1061,lang,on,has,mouse,_1062,win){var ios4=has("ios")<5;var _1063=has("pointer-events")||has("MSPointer"),_1064=(function(){var _1065={};for(var type in {down:1,move:1,up:1,cancel:1,over:1,out:1}){_1065[type]=has("MSPointer")?"MSPointer"+type.charAt(0).toUpperCase()+type.slice(1):"pointer"+type;}return _1065;})();var _1066=has("touch-events");var _1067,_1068,_1069=false,_106a,_106b,_106c,_106d,_106e,_106f;var _1070;function _1071(_1072,_1073,_1074){if(_1063&&_1074){return function(node,_1075){return on(node,_1074,_1075);};}else{if(_1066){return function(node,_1076){var _1077=on(node,_1073,function(evt){_1076.call(this,evt);_1070=(new Date()).getTime();}),_1078=on(node,_1072,function(evt){if(!_1070||(new Date()).getTime()>_1070+1000){_1076.call(this,evt);}});return {remove:function(){_1077.remove();_1078.remove();}};};}else{return function(node,_1079){return on(node,_1072,_1079);};}}};function _107a(node){do{if(node.dojoClick!==undefined){return node;}}while(node=node.parentNode);};function _107b(e,_107c,_107d){if(mouse.isRight(e)){return;}var _107e=_107a(e.target);_1068=!e.target.disabled&&_107e&&_107e.dojoClick;if(_1068){_1069=(_1068=="useTarget");_106a=(_1069?_107e:e.target);if(_1069){e.preventDefault();}_106b=e.changedTouches?e.changedTouches[0].pageX-win.global.pageXOffset:e.clientX;_106c=e.changedTouches?e.changedTouches[0].pageY-win.global.pageYOffset:e.clientY;_106d=(typeof _1068=="object"?_1068.x:(typeof _1068=="number"?_1068:0))||4;_106e=(typeof _1068=="object"?_1068.y:(typeof _1068=="number"?_1068:0))||4;if(!_1067){_1067=true;var _107f=function _107f(e){if(_1069){_1068=dom.isDescendant(win.doc.elementFromPoint((e.changedTouches?e.changedTouches[0].pageX-win.global.pageXOffset:e.clientX),(e.changedTouches?e.changedTouches[0].pageY-win.global.pageYOffset:e.clientY)),_106a);}else{_1068=_1068&&(e.changedTouches?e.changedTouches[0].target:e.target)==_106a&&Math.abs((e.changedTouches?e.changedTouches[0].pageX-win.global.pageXOffset:e.clientX)-_106b)<=_106d&&Math.abs((e.changedTouches?e.changedTouches[0].pageY-win.global.pageYOffset:e.clientY)-_106c)<=_106e;}};win.doc.addEventListener(_107c,function(e){if(mouse.isRight(e)){return;}_107f(e);if(_1069){e.preventDefault();}},true);win.doc.addEventListener(_107d,function(e){if(mouse.isRight(e)){return;}_107f(e);if(_1068){_106f=(new Date()).getTime();var _1080=(_1069?_106a:e.target);if(_1080.tagName==="LABEL"){_1080=dom.byId(_1080.getAttribute("for"))||_1080;}var src=(e.changedTouches)?e.changedTouches[0]:e;var _1081=function _1081(type){var evt=document.createEvent("MouseEvents");evt._dojo_click=true;evt.initMouseEvent(type,true,true,e.view,e.detail,src.screenX,src.screenY,src.clientX,src.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null);return evt;};var _1082=_1081("mousedown");var _1083=_1081("mouseup");var _1084=_1081("click");setTimeout(function(){on.emit(_1080,"mousedown",_1082);on.emit(_1080,"mouseup",_1083);on.emit(_1080,"click",_1084);_106f=(new Date()).getTime();},0);}},true);var _1085=function _1085(type){win.doc.addEventListener(type,function(e){var _1086=e.target;if(_1068&&!e._dojo_click&&(new Date()).getTime()<=_106f+1000&&!(_1086.tagName=="INPUT"&&_1061.contains(_1086,"dijitOffScreen"))){e.stopPropagation();e.stopImmediatePropagation&&e.stopImmediatePropagation();if(type=="click"&&(_1086.tagName!="INPUT"||(_1086.type=="radio"&&(_1061.contains(_1086,"dijitCheckBoxInput")||_1061.contains(_1086,"mblRadioButton")))||(_1086.type=="checkbox"&&(_1061.contains(_1086,"dijitCheckBoxInput")||_1061.contains(_1086,"mblCheckBox"))))&&_1086.tagName!="TEXTAREA"&&_1086.tagName!="AUDIO"&&_1086.tagName!="VIDEO"){e.preventDefault();}}},true);};_1085("click");_1085("mousedown");_1085("mouseup");}}};var _1087;if(has("touch")){if(_1063){_1062(function(){win.doc.addEventListener(_1064.down,function(evt){_107b(evt,_1064.move,_1064.up);},true);});}else{_1062(function(){_1087=win.body();win.doc.addEventListener("touchstart",function(evt){_1070=(new Date()).getTime();var _1088=_1087;_1087=evt.target;on.emit(_1088,"dojotouchout",{relatedTarget:_1087,bubbles:true});on.emit(_1087,"dojotouchover",{relatedTarget:_1088,bubbles:true});_107b(evt,"touchmove","touchend");},true);function _1089(evt){var props=lang.delegate(evt,{bubbles:true});if(has("ios")>=6){props.touches=evt.touches;props.altKey=evt.altKey;props.changedTouches=evt.changedTouches;props.ctrlKey=evt.ctrlKey;props.metaKey=evt.metaKey;props.shiftKey=evt.shiftKey;props.targetTouches=evt.targetTouches;}return props;};on(win.doc,"touchmove",function(evt){_1070=(new Date()).getTime();var _108a=win.doc.elementFromPoint(evt.pageX-(ios4?0:win.global.pageXOffset),evt.pageY-(ios4?0:win.global.pageYOffset));if(_108a){if(_1087!==_108a){on.emit(_1087,"dojotouchout",{relatedTarget:_108a,bubbles:true});on.emit(_108a,"dojotouchover",{relatedTarget:_1087,bubbles:true});_1087=_108a;}if(!on.emit(_108a,"dojotouchmove",_1089(evt))){evt.preventDefault();}}});on(win.doc,"touchend",function(evt){_1070=(new Date()).getTime();var node=win.doc.elementFromPoint(evt.pageX-(ios4?0:win.global.pageXOffset),evt.pageY-(ios4?0:win.global.pageYOffset))||win.body();on.emit(node,"dojotouchend",_1089(evt));});});}}var touch={press:_1071("mousedown","touchstart",_1064.down),move:_1071("mousemove","dojotouchmove",_1064.move),release:_1071("mouseup","dojotouchend",_1064.up),cancel:_1071(mouse.leave,"touchcancel",_1063?_1064.cancel:null),over:_1071("mouseover","dojotouchover",_1064.over),out:_1071("mouseout","dojotouchout",_1064.out),enter:mouse._eventHandler(_1071("mouseover","dojotouchover",_1064.over)),leave:mouse._eventHandler(_1071("mouseout","dojotouchout",_1064.out))};1&&(dojo.touch=touch);return touch;});},"ibm/tivoli/fwm/mxmap/_LatLonPoint":function(){define(["dojo/_base/declare"],function(_108b){var _108c=_108b(null,{lat:null,lon:null,lng:null,sr:null,constructor:function(_108d){dojo.mixin(this,_108d);if(_108d.lon!=undefined&&_108d.lon!=null){this.lng=_108d.lon;}else{if(_108d.lng!=undefined&&_108d.lng!=null){this.lon=_108d.lng;}}},fromProprietary:function(){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},toProprietary:function(){console.error("Method "+arguments.callee.nom+" be implemented by the derived class");},toString:function(){return this.lat+", "+this.lon;},isWGS84:function(){return this.sr==4326;},distance:function(_108e){var rads=Math.PI/180;var _108f=(this.lat-_108e.lat)*rads;var _1090=(this.lon-_108e.lon)*rads;var a=Math.sin(_108f/2)*Math.sin(_108f/2)+Math.cos(this.lat*rads)*Math.cos(_108e.lat*rads)*Math.sin(_1090/2)*Math.sin(_1090/2);return 2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))*6371;},equals:function(_1091){return this.lat==_1091.lat&&this.lon==_1091.lon;},latConv:function(){return this.distance(new _108c({lat:this.lat+0.1,lon:this.lon}))*10;},lonConv:function(){return this.distance(new _108c({lat:this.lat,lon:this.lon+0.1}))*10;}});return _108c;});},"ibm/tivoli/fwm/mxmap/InfoSummaryWidget":function(){define(["dojo/_base/declare","ibm/tivoli/fwm/mxmap/_Base","dijit/_Widget","dijit/_Templated"],function(_1092,_1093,_1094,_1095){return _1092([_1094,_1095],{templateString:dojo.cache("ibm.tivoli.fwm.mxmap","templates/InfoSummaryWidget.html","<div>\n<table style=\"height:35px;\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"width: 90%;\">\n\t\t\t\t<div dojoAttachPoint=\"infoSummary\"></div>\n\t\t\t</td>\n\t\t\t<td style=\"padding: 0px 4px 0px 12px; height: 35px;\">\n\t\t\t\t<div dojoAttachPoint=\"rightArrow\"></div>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n</div>"),_openBubbleFunction:null,constructor:function(_1096){dojo.mixin(this,_1096);},postCreate:function(){var me=this;this._setArrowIcon();dojo.connect(this.infoSummary,"click",function(evt){me._executeMarkerOpenBubble();});dojo.connect(this.infoSummary,"touchend",function(evt){me._executeMarkerOpenBubble();});dojo.connect(this.rightArrow,"click",function(evt){me._executeMarkerOpenBubble();});dojo.connect(this.rightArrow,"touchend",function(evt){me._executeMarkerOpenBubble();});},setContent:function(_1097){if(typeof (_1097)=="object"){this._setDomContent(_1097);}else{dojo.empty(this.infoSummary);dojo.create("div",{innerHTML:_1097},this.infoSummary);}},_setDomContent:function(_1098){dojo.place(_1098,this.infoSummary,"only");},_executeMarkerOpenBubble:function(){if(this._openBubbleFunction){this._openBubbleFunction();}},destroyRecursive:function(){this.inherited(arguments);if(this._arrowImageDom){dojo.destroy(this._arrowImageDom);}},_setArrowIcon:function(){var _1099=ibm.tivoli.fwm.mxmap.ImageLibraryManager.getImageLibraryManager().getLayerDetailsImageInfo().imageUrl;this._arrowImageDom=dojo.create("img",{src:_1099},this.rightArrow,"last");},setMarkerOpenBubbleFunction:function(_109a){this._openBubbleFunction=_109a;}});});},"dojo/request":function(){define(["./request/default!"],function(_109b){return _109b;});},"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(_109c,a11y){return _109c("dijit._DialogMixin",null,{actionBarTemplate:"",execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"));},_getFocusItems:function(){var elems=a11y._getTabNavigable(this.domNode);this._firstFocusItem=elems.lowest||elems.first||this.closeButtonNode||this.domNode;this._lastFocusItem=elems.last||elems.highest||this._firstFocusItem;}});});},"dijit/form/_FormValueWidget":function(){define(["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(_109d,has,_109e,_109f){return _109d("dijit.form._FormValueWidget",[_109e,_109f],{_layoutHackIE7:function(){if(has("ie")==7){var _10a0=this.domNode;var _10a1=_10a0.parentNode;var _10a2=_10a0.firstChild||_10a0;var _10a3=_10a2.style.filter;var _10a4=this;while(_10a1&&_10a1.clientHeight==0){(function ping(){var _10a5=_10a4.connect(_10a1,"onscroll",function(){_10a4.disconnect(_10a5);_10a2.style.filter=(new Date()).getMilliseconds();_10a4.defer(function(){_10a2.style.filter=_10a3;});});})();_10a1=_10a1.parentNode;}}}});});},"url:dijit/form/templates/Button.html":"<span class=\"dijit dijitReset dijitInline\" role=\"presentation\"\n\t><span class=\"dijitReset dijitInline dijitButtonNode\"\n\t\tdata-dojo-attach-event=\"ondijitclick:__onClick\" role=\"presentation\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"titleNode,focusNode\"\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\"></span\n\t\t\t><span class=\"dijitReset dijitToggleButtonIconChar\">&#x25CF;</span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t\tdata-dojo-attach-point=\"containerNode\"\n\t\t\t></span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\"\n\t\tdata-dojo-attach-event=\"onclick:_onClick\"\n\t\ttabIndex=\"-1\" aria-hidden=\"true\" data-dojo-attach-point=\"valueNode\"\n/></span>\n","url:dijit/templates/MenuItem.html":"<tr class=\"dijitReset\" data-dojo-attach-point=\"focusNode\" role=\"menuitem\" tabIndex=\"-1\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<span role=\"presentation\" class=\"dijitInline dijitIcon dijitMenuItemIcon\" data-dojo-attach-point=\"iconNode\"></span>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" data-dojo-attach-point=\"containerNode,textDirNode\"\n\t\trole=\"presentation\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">\n\t\t<span data-dojo-attach-point=\"arrowWrapper\" style=\"visibility: hidden\">\n\t\t\t<span class=\"dijitInline dijitIcon dijitMenuExpand\"></span>\n\t\t\t<span class=\"dijitMenuExpandA11y\">+</span>\n\t\t</span>\n\t</td>\n</tr>\n","url:dijit/form/templates/TextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\" id=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" data-dojo-attach-point='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n","url:dijit/form/templates/CheckBox.html":"<div class=\"dijit dijitReset dijitInline\" role=\"presentation\"\n\t><input\n\t \t${!nameAttrSetting} type=\"${type}\" role=\"${type}\" aria-checked=\"false\" ${checkedAttrSetting}\n\t\tclass=\"dijitReset dijitCheckBoxInput\"\n\t\tdata-dojo-attach-point=\"focusNode\"\n\t \tdata-dojo-attach-event=\"ondijitclick:_onClick\"\n/></div>\n","url:dijit/templates/CheckedMenuItem.html":"<tr class=\"dijitReset\" data-dojo-attach-point=\"focusNode\" role=\"${role}\" tabIndex=\"-1\" aria-checked=\"${checked}\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<span class=\"dijitInline dijitIcon dijitMenuItemIcon dijitCheckedMenuItemIcon\" data-dojo-attach-point=\"iconNode\"></span>\n\t\t<span class=\"dijitMenuItemIconChar dijitCheckedMenuItemIconChar\">${!checkedChar}</span>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" data-dojo-attach-point=\"containerNode,labelNode,textDirNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">&#160;</td>\n</tr>\n","url:dijit/form/templates/Select.html":"<table class=\"dijit dijitReset dijitInline dijitLeft\"\n\tdata-dojo-attach-point=\"_buttonNode,tableNode,focusNode,_popupStateNode\" cellspacing='0' cellpadding='0'\n\trole=\"listbox\" aria-haspopup=\"true\"\n\t><tbody role=\"presentation\"><tr role=\"presentation\"\n\t\t><td class=\"dijitReset dijitStretch dijitButtonContents\" role=\"presentation\"\n\t\t\t><div class=\"dijitReset dijitInputField dijitButtonText\"  data-dojo-attach-point=\"containerNode,textDirNode\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitValidationContainer\"\n\t\t\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t/></div\n\t\t\t><input type=\"hidden\" ${!nameAttrSetting} data-dojo-attach-point=\"valueNode\" value=\"${value}\" aria-hidden=\"true\"\n\t\t/></td\n\t\t><td class=\"dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\"\n\t\t\tdata-dojo-attach-point=\"titleNode\" role=\"presentation\"\n\t\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t${_buttonInputDisabled}\n\t\t/></td\n\t></tr></tbody\n></table>\n","url:dijit/templates/Menu.html":"<table class=\"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable\" role=\"menu\" tabIndex=\"${tabIndex}\"\n\t   cellspacing=\"0\">\n\t<tbody class=\"dijitReset\" data-dojo-attach-point=\"containerNode\"></tbody>\n</table>\n","url:dijit/form/templates/DropDownButton.html":"<span class=\"dijit dijitReset dijitInline\"\n\t><span class='dijitReset dijitInline dijitButtonNode'\n\t\tdata-dojo-attach-event=\"ondijitclick:__onClick\" data-dojo-attach-point=\"_buttonNode\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"focusNode,titleNode,_arrowWrapperNode,_popupStateNode\"\n\t\t\trole=\"button\" aria-haspopup=\"true\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\"\n\t\t\t\tdata-dojo-attach-point=\"iconNode\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tdata-dojo-attach-point=\"containerNode\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonInner\"></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonChar\">&#9660;</span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\" tabIndex=\"-1\"\n\t\tdata-dojo-attach-event=\"onclick:_onClick\" data-dojo-attach-point=\"valueNode\" aria-hidden=\"true\"\n/></span>\n","url:dijit/templates/Tooltip.html":"<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\" data-dojo-attach-event=\"mouseenter:onMouseEnter,mouseleave:onMouseLeave\"\n\t><div class=\"dijitTooltipConnector\" data-dojo-attach-point=\"connectorNode\"></div\n\t><div class=\"dijitTooltipContainer dijitTooltipContents\" data-dojo-attach-point=\"containerNode\" role='alert'></div\n></div>\n","url:dijit/form/templates/ComboButton.html":"<table class=\"dijit dijitReset dijitInline dijitLeft\"\n\tcellspacing='0' cellpadding='0' role=\"presentation\"\n\t><tbody role=\"presentation\"><tr role=\"presentation\"\n\t\t><td class=\"dijitReset dijitStretch dijitButtonNode\" data-dojo-attach-point=\"buttonNode\" data-dojo-attach-event=\"ondijitclick:__onClick,onkeydown:_onButtonKeyDown\"\n\t\t><div id=\"${id}_button\" class=\"dijitReset dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"titleNode\"\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\n\t\t\t><div class=\"dijitReset dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitInline dijitButtonText\" id=\"${id}_label\" data-dojo-attach-point=\"containerNode\" role=\"presentation\"></div\n\t\t></div\n\t\t></td\n\t\t><td id=\"${id}_arrow\" class='dijitReset dijitRight dijitButtonNode dijitArrowButton'\n\t\t\tdata-dojo-attach-point=\"_popupStateNode,focusNode,_buttonNode\"\n\t\t\tdata-dojo-attach-event=\"onkeydown:_onArrowKeyDown\"\n\t\t\ttitle=\"${optionsTitle}\"\n\t\t\trole=\"button\" aria-haspopup=\"true\"\n\t\t\t><div class=\"dijitReset dijitArrowButtonInner\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitArrowButtonChar\" role=\"presentation\">&#9660;</div\n\t\t></td\n\t\t><td style=\"display:none !important;\"\n\t\t\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" data-dojo-attach-point=\"valueNode\"\n\t\t\t\tclass=\"dijitOffScreen\" aria-hidden=\"true\" data-dojo-attach-event=\"onclick:_onClick\"\n\t\t/></td></tr></tbody\n></table>\n","url:dijit/templates/Dialog.html":"<div class=\"dijitDialog\" role=\"dialog\" aria-labelledby=\"${id}_title\">\n\t<div data-dojo-attach-point=\"titleBar\" class=\"dijitDialogTitleBar\">\n\t\t<span data-dojo-attach-point=\"titleNode\" class=\"dijitDialogTitle\" id=\"${id}_title\"\n\t\t\t\trole=\"heading\" level=\"1\"></span>\n\t\t<span data-dojo-attach-point=\"closeButtonNode\" class=\"dijitDialogCloseIcon\" data-dojo-attach-event=\"ondijitclick: onCancel\" title=\"${buttonCancel}\" role=\"button\" tabindex=\"-1\">\n\t\t\t<span data-dojo-attach-point=\"closeText\" class=\"closeText\" title=\"${buttonCancel}\">x</span>\n\t\t</span>\n\t</div>\n\t<div data-dojo-attach-point=\"containerNode\" class=\"dijitDialogPaneContent\"></div>\n\t${!actionBarTemplate}\n</div>\n\n","url:dijit/templates/MenuSeparator.html":"<tr class=\"dijitMenuSeparator\" role=\"separator\">\n\t<td class=\"dijitMenuSeparatorIconCell\">\n\t\t<div class=\"dijitMenuSeparatorTop\"></div>\n\t\t<div class=\"dijitMenuSeparatorBottom\"></div>\n\t</td>\n\t<td colspan=\"3\" class=\"dijitMenuSeparatorLabelCell\">\n\t\t<div class=\"dijitMenuSeparatorTop dijitMenuSeparatorLabel\"></div>\n\t\t<div class=\"dijitMenuSeparatorBottom\"></div>\n\t</td>\n</tr>\n","*now":function(r){r(["dojo/i18n!*preload*layers/map/nls/mxmap*[\"ar\",\"ca\",\"cs\",\"da\",\"de\",\"el\",\"en\",\"es\",\"fi\",\"fr\",\"he\",\"hr\",\"hu\",\"it\",\"ja\",\"kk\",\"ko\",\"nb\",\"nl\",\"pl\",\"pt\",\"pt-pt\",\"ro\",\"ru\",\"sk\",\"sl\",\"sv\",\"th\",\"tr\",\"zh\",\"zh-tw\",\"ROOT\"]"]);}}});define("layers/map/mxmap",[],1);