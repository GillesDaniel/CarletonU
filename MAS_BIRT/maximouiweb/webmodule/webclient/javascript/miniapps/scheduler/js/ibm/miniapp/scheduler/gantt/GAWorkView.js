define("dojo/_base/declare com/ibm/tivoli/maximo/miniapps/_MaximoIO com/ibm/tivoli/maximo/miniapps/_MaximoLog dojo/_base/lang ibm/miniapp/scheduler/gantt/GanttWidget com/ibm/tivoli/maximo/miniapps/Handlers ibm/miniapp/scheduler/gantt/WorkView dojo/json".split(" "),function(h,k,e,f,l,m,n,p){return h([l,k,m,n],{constructor:function(b){this.ViewName="GAWorkOrders"},attachExtraGridEvents:function(b){this.inherited(arguments);TGAddEvent("OnFilterFinish",this.gridId,f.hitch(this,this.OnFilterEnd))},_filterToSelected:function(b,
d){var c=this._GetSelectedRows(this.grid,"G",d);if(c&&0<c.length){e.debug("Filter to selected items being handled for {} rows",c.length);for(var a="",g=0;g<c.length;g++)0<a.length&&(a+=" OR "),a+='Identifier = "'+c[g].id+'"';this.grid.ActionClearFilters();this.grid.SetValue(this.grid.Toolbar,"Expression",a,1);this.grid.SearchRows("Filter");this.grid.ClearSelection();e.debug("Filtered to ",a)}},_lockAction:function(b,d){var c=this._GetSelectedRows(this.grid,"G",d);this._applyForEachRow(c,f.hitch(this,
function(a){e.debug("before lock activity",b.Value,a,a.MODAPPOINTMENT);""!=b&&(a.mxLeftIconClass="skd-icon-appointment");"1"==a.MODRESOURCELOCK&&""!=b&&(a.mxLeftIconClass="skd-icon-appresourceloc");a.GGanttRunMove="All,Move,Selected,Entire,Vert,Mouse";a._READONLY_STARTEND=!0;""!=b&&this.SetValue(a,"MODAPPOINTMENT",!0,!0)}))},_unlockAction:function(b,d){var c=this._GetSelectedRows(this.grid,"G",d);this._applyForEachRow(c,f.hitch(this,function(a){e.debug("before unlock activity",b.Value,a,a.MODAPPOINTMENT,
a.APPTREQUIRED);"1"==a.APPTREQUIRED||"Y"==a.APPTREQUIRED||1==a.APPTREQUIRED||"true"==a.APPTREQUIRED?""!=b&&(a.mxLeftIconClass="skd-icon-requirement"):"1"==a.MODRESOURCELOCK&&""!=b?a.mxLeftIconClass="skd-icon-resourceloc":delete a.mxLeftIconClass;delete a.GGanttRunMove;delete a._READONLY_STARTEND;""!=b&&this.SetValue(a,"MODAPPOINTMENT",!1,!0)}))},_reslockAction:function(b,d){var c=this._GetSelectedRows(this.grid,"G",d);this._applyForEachRow(c,f.hitch(this,function(a){e.debug("before lock activity",
b.Value,a,a.MODRESOURCELOCK);""!=b&&(a.mxLeftIconClass="skd-icon-resourceloc");"1"==a.MODAPPOINTMENT&&""!=b&&(a.mxLeftIconClass="skd-icon-appresourceloc");a.GGanttRunMove="All,Move,Selected,Entire,Slide,Mouse";a._READONLY_ASSIGNMENT=!0;""!=b&&this.SetValue(a,"MODRESOURCELOCK",!0,!0)}))},_resunlockAction:function(b,d){var c=this._GetSelectedRows(this.grid,"G",d);this._applyForEachRow(c,f.hitch(this,function(a){e.debug("before unlock activity",b.Value,a,a.MODRESOURCELOCK,a.APPTREQUIRED);"1"==a.APPTREQUIRED||
"Y"==a.APPTREQUIRED||1==a.APPTREQUIRED||"true"==a.APPTREQUIRED?""!=b&&(a.mxLeftIconClass="skd-icon-requirement"):"1"==a.MODAPPOINTMENT&&""!=b?a.mxLeftIconClass="skd-icon-appointment":delete a.mxLeftIconClass;delete a.GGanttRunMove;delete a._READONLY_ASSIGNMENT;""!=b&&this.SetValue(a,"MODRESOURCELOCK",!1,!0)}))},OnFilterEnd:function(b,d){e.debug("FILTER END: type: {}, filter: {}",d,this.grid.HasFilter());var c=this.grid.HasFilter(),a=!0;0!=(c&1)?(e.debug("we have filter row with filter data"),a=!1):
0!=(c&2)&&(e.debug("we have search row"),b.Toolbar.Expression&&(e.debug("We Search Expression: {}",b.Toolbar.Expression),a=!1));a?(e.debug("Clearing Assignment Filter"),this.callBean("async_set_filtered_assignments",this._ioOptions({filter:[]}))):(c={count:0,rows:[]},this.visitVisibleChiden(c,function(a,b){a&&"ASSIGNMENT"===a._OBJECTNAME&&(b.count++,b.rows.push(a.id));return!0}),e.debug("Setting Assignment Filter to ",c.rows),this.callBean("async_set_filtered_assignments",this._ioOptions({filter:c.rows})))},
OnShowMaximoDialog:function(b){this.grid.ActionBlur();this._focusGanttObject=null;var d=document.getElementById("SystemNavAppContent-sc");null!=d&&d.click();this.inherited(arguments)},OnRenderFinish:function(b){this.inherited(arguments);this.grid=b;null!=this.warningMessage&&this.grid.ShowMessageTime(this.warningMessage,0,null,[this.buttonLabel])}})});
