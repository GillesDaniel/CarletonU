define("dojo/_base/declare dojo/aspect com/ibm/tivoli/maximo/miniapps/_MaximoIO com/ibm/tivoli/maximo/miniapps/_MaximoLog dojo/_base/lang ibm/miniapp/scheduler/gantt/GanttWidget ibm/miniapp/scheduler/gantt/BaseResourceViewWidget com/ibm/tivoli/maximo/miniapps/Handlers ibm/miniapp/scheduler/gantt/CommonResourceHoursView".split(" "),function(h,k,l,c,f,m,n,p,q){return h([m,l,n,p,q],{constructor:function(a){c.debug("{} Base Bean Target set to {} for view",this.gridId,this.mxtargetbean,a);this.showCurrentDateLine=
!1;this.aspectShowHideElHandle=null},_newTreeGridOptions:function(){return{Data:{Url:this.toUrl("async_load_project_data",this._ioOptions({})),Timeout:300},Layout:{Url:this.toUrl("async_load_project_ui",this._ioOptions({appname:this.appname,projectid:this.projectid}))}}},addCustomActions:function(a){window.Grids.FilterResources=function(a,b){for(var c=0;c<a.__FilterResourcesData.length;c++)if(b.name.trim()==a.__FilterResourcesData[c].trim())return!0;return!1}},onWorkViewReferenceReceived:function(a){c.debug("Got a Work View Reference'",
a);a.grid&&(this.linkedWorkViewGrid=a.grid,this.linkedWorkView=a.view,this._workviewChanged())},attachExtraGridEvents:function(a){this.inherited(arguments);c.debug("{} Registering extra grid events",this.TAG);this.subscribeOn("skd.workview.rowselected",f.hitch(this,this.workViewRowSelected));this.subscribeOn("skd.workview.updated",f.hitch(this,this._workviewChanged));this.subscribeOn("skd.response.workview.reference",f.hitch(this,this.onWorkViewReferenceReceived))},workViewRowSelected:function(a){if(this.isVisible()){var d=
a.grid.GetSelRows();if(a.resourceFilterEnabled&&d&&0<d.length){a=[];for(var b=0;b<d.length;b++)if(d[b].Resources){a.push(this._parseResources(d[b].Resources));var e=d[b].Resources.split(",");if(e&&1<e.length)for(var g=0;g<e.length;g++)a.push(this._parseResource(e[g]))}this.grid.__FilterResourcesData=a;c.debug("{}: Applying Resource Filter",this.TAG,a);this.grid.SetFilter("resources","Grids.FilterResources(Grid,Row)","name",2)}else c.debug("{}: Removing Resource Filter",this.TAG),this.grid.SetFilter("resources",
null,"name",2),delete this.grid.__FilterResources,delete this.grid.__FilterResourcesData}},_workviewChanged:function(a,d){if(this.isVisible()||null==this.grid)if(this.reloadRequired||null==this.grid)this.reloadRequired=!1,this._createUI();else{c.debug("{} WORKVIEW CHANGED",this.TAG);this.lastScollTop=this.grid.GetScrollTop();var b=this,e=this.grid.GetSelRows();this.grid.ReloadBody(function(){b.lastScollTop?b.invokeLater(function(){c.debug("Updating Scroll Top: {}",b.lastScollTop);b.grid.SetScrollTop(b.lastScollTop);
b._updateSync()},300,"ReloadBody"):b._updateSync();b.grid.ClearSelection();for(var a=0;a<e.length;a++)b.grid.SelectRow(e[a],0)})}},onVisibilityChanged:function(a){c.debug("Visibility Has Changed: Visible: {}",a);a||null==this.grid?this._workviewChanged():(c.debug("Disabling Grid Sync"),this.grid.SyncId=null)},postCreate:function(){this.inherited(arguments);var a=this;this.aspectShowHideElHandle=k.after(window,"hideShowElement",function(d,b){d&&d.querySelector&&d.querySelector("#"+a.domId)&&(c.debug("ShowHideEl: called with {}",
b),a.onVisibilityChanged(a.isVisible()))},!0)},destroy:function(){this.inherited(arguments);this.aspectShowHideElHandle&&(this.aspectShowHideElHandle.remove(),this.aspectShowHideElHandle=null)},__refreshAssignment:function(a){c.debug("Do nothing here...")}})});
