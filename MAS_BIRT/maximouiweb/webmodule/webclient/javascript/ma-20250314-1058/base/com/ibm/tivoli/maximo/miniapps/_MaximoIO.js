define("dojo/topic dojo/io-query dojo/_base/json dojo/_base/lang dojo/Deferred dojo/_base/declare".split(" "),function(h,k,l,f,g,e){e=e(null,{constructor:function(){this.componentId=this.appid=null},fetch:function(b,a){var c=new g(function(a){console.log("Fetch Cancelled for "+b)});console.log("Calling Bean Method ASYNC "+b,a);a||(a={});var d=this,e=new Event("event_fetch",d.componentId,"",REQUESTTYPE_HIGHASYNC);f.mixin(e,a);e.mxeventname=b;queueManager.queueEvent(e,"text/json","json",function(a,
b){c.resolve(a)},function(a){console.log("fetch(): Error: ",a);sendEvent("showwarnings",d.appid)});return c},callBean:function(b,a){a||(a={});console.log("Calling Bean Method SYNC "+b,a);var c=new Event("event_callbean",this.componentId,"",REQUESTTYPE_SYNC);f.mixin(c,a);c.mxeventname=b;c.setPriority(2);queueManager.queueEvent(c,"text/xml","xml",processXHR,null)},sendMaximoEvent:function(b,a,c){a=a||{};for(var d in a)addCommInput(d,a[d]),console.log("Adding Communication Input for "+d+"="+a[d]);sendEvent(b,
c,"")},showMessage:function(b){console.log("showMessage:"+b);var a=new Event("event_show_message",this.componentId,"",REQUESTTYPE_SYNC);b&&(a.msgid=b);a.setPriority(2);queueManager.queueEvent(a,"text/xml","xml",processXHR,null)},ask:function(b){var a=new g(function(a){console.log("ask Cancelled for "+b+" with reason "+a)}),c=h.subscribe("miniapp.ync",function(b){c.remove();a.resolve(parseInt(b))});console.log("ask:"+b);var d=new Event("event_yes_no_cancel",this.componentId,"",REQUESTTYPE_SYNC);d.msgid=
b;d.setPriority(2);queueManager.queueEvent(d,"text/xml","xml",processXHR,null);return a},toUrl:function(b,a){a||(a={});if(!this.componentId)throw"_MaxmioIO requires componentId to be set";var c=new Event("event_fetch",this.componentId,"",REQUESTTYPE_HIGHASYNC);f.mixin(c,a);c.mxeventname=b;var d={uisessionid:queueManager.sessionId,csrftoken:queueManager.csrftoken,currentfocus:queueManager.currentfocus,scrollleftpos:queueManager.scrollleftpos,localStorage:queueManager.localStorage,scrolltoppos:queueManager.scrolltoppos,
requesttype:REQUESTTYPE_HIGHASYNC,responsetype:"json",events:l.toJson([c])};c.targetId.toUpperCase().includes("LINEAR")&&delete d.csrftoken;c=k.objectToQuery(d);c=XHRACTION+(XHRACTION.includes("?")?"&":"?")+c;console.log("xhr url: "+c);return c},sendToBeSaved:function(){sendEvent("toBeSaved",this.componentId)},resetMaximoTimer:function(){resetLogoutTimer(!1)}});e.OK=2;e.CANCEL=4;e.YES=8;e.NO=16;e.NULL=-1;return e});
